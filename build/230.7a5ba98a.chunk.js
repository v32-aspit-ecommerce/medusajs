(self.webpackChunkmedusa_starter_default=self.webpackChunkmedusa_starter_default||[]).push([[230],{35358:(e,t,r)=>{var n={"./af":25177,"./af.js":25177,"./ar":61509,"./ar-dz":41488,"./ar-dz.js":41488,"./ar-kw":58676,"./ar-kw.js":58676,"./ar-ly":42353,"./ar-ly.js":42353,"./ar-ma":24496,"./ar-ma.js":24496,"./ar-ps":6947,"./ar-ps.js":6947,"./ar-sa":82682,"./ar-sa.js":82682,"./ar-tn":89756,"./ar-tn.js":89756,"./ar.js":61509,"./az":95533,"./az.js":95533,"./be":28959,"./be.js":28959,"./bg":47777,"./bg.js":47777,"./bm":54903,"./bm.js":54903,"./bn":61290,"./bn-bd":17357,"./bn-bd.js":17357,"./bn.js":61290,"./bo":31545,"./bo.js":31545,"./br":11470,"./br.js":11470,"./bs":44429,"./bs.js":44429,"./ca":7306,"./ca.js":7306,"./cs":56464,"./cs.js":56464,"./cv":73635,"./cv.js":73635,"./cy":64226,"./cy.js":64226,"./da":93601,"./da.js":93601,"./de":77853,"./de-at":26111,"./de-at.js":26111,"./de-ch":54697,"./de-ch.js":54697,"./de.js":77853,"./dv":60708,"./dv.js":60708,"./el":54691,"./el.js":54691,"./en-au":53872,"./en-au.js":53872,"./en-ca":28298,"./en-ca.js":28298,"./en-gb":56195,"./en-gb.js":56195,"./en-ie":66584,"./en-ie.js":66584,"./en-il":65543,"./en-il.js":65543,"./en-in":9033,"./en-in.js":9033,"./en-nz":79402,"./en-nz.js":79402,"./en-sg":43004,"./en-sg.js":43004,"./eo":32934,"./eo.js":32934,"./es":97650,"./es-do":20838,"./es-do.js":20838,"./es-mx":17730,"./es-mx.js":17730,"./es-us":56575,"./es-us.js":56575,"./es.js":97650,"./et":3035,"./et.js":3035,"./eu":3508,"./eu.js":3508,"./fa":119,"./fa.js":119,"./fi":90527,"./fi.js":90527,"./fil":95995,"./fil.js":95995,"./fo":52477,"./fo.js":52477,"./fr":85498,"./fr-ca":26435,"./fr-ca.js":26435,"./fr-ch":37892,"./fr-ch.js":37892,"./fr.js":85498,"./fy":37071,"./fy.js":37071,"./ga":41734,"./ga.js":41734,"./gd":70217,"./gd.js":70217,"./gl":77329,"./gl.js":77329,"./gom-deva":32124,"./gom-deva.js":32124,"./gom-latn":93383,"./gom-latn.js":93383,"./gu":95050,"./gu.js":95050,"./he":11713,"./he.js":11713,"./hi":43861,"./hi.js":43861,"./hr":26308,"./hr.js":26308,"./hu":90609,"./hu.js":90609,"./hy-am":17160,"./hy-am.js":17160,"./id":74063,"./id.js":74063,"./is":89374,"./is.js":89374,"./it":88383,"./it-ch":21827,"./it-ch.js":21827,"./it.js":88383,"./ja":23827,"./ja.js":23827,"./jv":89722,"./jv.js":89722,"./ka":41794,"./ka.js":41794,"./kk":27088,"./kk.js":27088,"./km":96870,"./km.js":96870,"./kn":84451,"./kn.js":84451,"./ko":63164,"./ko.js":63164,"./ku":98174,"./ku-kmr":6181,"./ku-kmr.js":6181,"./ku.js":98174,"./ky":78474,"./ky.js":78474,"./lb":79680,"./lb.js":79680,"./lo":15867,"./lo.js":15867,"./lt":45766,"./lt.js":45766,"./lv":69532,"./lv.js":69532,"./me":35695,"./me.js":35695,"./mi":41848,"./mi.js":41848,"./mk":30306,"./mk.js":30306,"./ml":73739,"./ml.js":73739,"./mn":99053,"./mn.js":99053,"./mr":86169,"./mr.js":86169,"./ms":73386,"./ms-my":92297,"./ms-my.js":92297,"./ms.js":73386,"./mt":77075,"./mt.js":77075,"./my":72264,"./my.js":72264,"./nb":22274,"./nb.js":22274,"./ne":8235,"./ne.js":8235,"./nl":70191,"./nl-be":43784,"./nl-be.js":43784,"./nl.js":70191,"./nn":54566,"./nn.js":54566,"./oc-lnc":69330,"./oc-lnc.js":69330,"./pa-in":29849,"./pa-in.js":29849,"./pl":94418,"./pl.js":94418,"./pt":79834,"./pt-br":48303,"./pt-br.js":48303,"./pt.js":79834,"./ro":24457,"./ro.js":24457,"./ru":82271,"./ru.js":82271,"./sd":1221,"./sd.js":1221,"./se":33478,"./se.js":33478,"./si":17538,"./si.js":17538,"./sk":5784,"./sk.js":5784,"./sl":46637,"./sl.js":46637,"./sq":86794,"./sq.js":86794,"./sr":45719,"./sr-cyrl":3322,"./sr-cyrl.js":3322,"./sr.js":45719,"./ss":56e3,"./ss.js":56e3,"./sv":41011,"./sv.js":41011,"./sw":40748,"./sw.js":40748,"./ta":11025,"./ta.js":11025,"./te":11885,"./te.js":11885,"./tet":28861,"./tet.js":28861,"./tg":86571,"./tg.js":86571,"./th":55802,"./th.js":55802,"./tk":59527,"./tk.js":59527,"./tl-ph":29231,"./tl-ph.js":29231,"./tlh":31052,"./tlh.js":31052,"./tr":85096,"./tr.js":85096,"./tzl":79846,"./tzl.js":79846,"./tzm":81765,"./tzm-latn":97711,"./tzm-latn.js":97711,"./tzm.js":81765,"./ug-cn":48414,"./ug-cn.js":48414,"./uk":16618,"./uk.js":16618,"./ur":57777,"./ur.js":57777,"./uz":57609,"./uz-latn":72475,"./uz-latn.js":72475,"./uz.js":57609,"./vi":21135,"./vi.js":21135,"./x-pseudo":64051,"./x-pseudo.js":64051,"./yo":82218,"./yo.js":82218,"./zh-cn":30267,"./zh-cn.js":30267,"./zh-hk":1632,"./zh-hk.js":1632,"./zh-mo":31541,"./zh-mo.js":31541,"./zh-tw":50304,"./zh-tw.js":50304};function i(e){return r(a(e))}function a(e){if(!r.o(n,e)){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=a,e.exports=i,i.id=35358},30215:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>_z});var n,i,a,o,l,s,c,u,d,f,p,m,h,y,b,v,g,x,j,w,O,S,P,C,A,N,k,_,E,I,D,T,M,R,L,z=r(74848),F=r(34546),B=r(86749),q=r(70770),H=r(70400),U=r(96540),V=r(59619),G=r(85671),W=r(62078),Y=r(69891),$=r(37611);let Q=function(e){var t=e.origin,r=(0,H.useRouteError)();return(0,U.useEffect)(function(){},[r,t]),(0,z.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,z.jsxs)("div",{className:"rounded-rounded p-base bg-rose-10 border-rose-40 gap-x-small flex justify-start border",children:[(0,z.jsx)("div",{children:(0,z.jsx)($.A,{size:20,fillType:"solid",className:"text-rose-40"})}),(0,z.jsxs)("div",{className:"text-rose-40 inter-small-regular w-full pr-[20px]",children:[(0,z.jsx)("h1",{className:"inter-base-semibold mb-2xsmall",children:"Uncaught error"}),(0,z.jsx)("p",{className:"mb-small",children:"An error unknown error occurred, and the page could not be loaded."}),(0,z.jsxs)("p",{className:"mb-large",children:[(0,z.jsx)("strong",{children:"What should I do?"}),(0,z.jsx)("br",{}),"If you are the developer of this page, you should fix the error and reload the page. If you are not the developer, you should contact the maintainer and report the error."]}),(0,z.jsx)("div",{className:"gap-x-base flex items-center",children:(0,z.jsx)(W.A,{variant:"nuclear",size:"small",type:"button",onClick:function(){window.location.reload()},className:"w-full",children:(0,z.jsxs)("div",{className:"flex items-center",children:[(0,z.jsx)(Y.A,{size:"20"}),(0,z.jsx)("span",{className:"ml-xsmall",children:"Reload"})]})})})]})]})})};var K=r(13638),Z=function(e){var t=e.route,r=e.previousPath,n=(0,K.I)(),i=(0,G.Cn)(t),a=t.path,o=(0,V.Y)().getNestedRoutes,l="".concat(void 0===r?"":r).concat(a),s=o(l),c=s.length>0;if(!i)return c?(0,z.jsx)(H.Routes,{children:s.map(function(e,t){return(0,z.jsx)(H.Route,{path:e.path,element:(0,z.jsx)(Z,{route:e,previousPath:l})},t)})}):null;var u=t.Page,d=t.origin,f=U.createElement(u,n);return c?(0,z.jsx)(z.Fragment,{children:(0,z.jsxs)(H.Routes,{children:[(0,z.jsx)(H.Route,{path:"/",element:f,errorElement:(0,z.jsx)(Q,{origin:d})}),s.map(function(e,t){return(0,z.jsx)(H.Route,{path:e.path,element:(0,z.jsx)(Z,{route:e,previousPath:l})},t)})]})}):f},J=r(74159),X=r(19044);let ee=function(e){var t=e.children,r=(0,J.useAdminGetSession)(),n=r.user,i=r.isLoading,a=(0,H.useNavigate)();return((0,U.useEffect)(function(){n||i||a("/login")},[n,i,a]),n&&!i)?(0,z.jsx)(z.Fragment,{children:t}):(0,z.jsx)("div",{className:"flex h-screen w-full items-center justify-center",children:(0,z.jsx)(X.A,{variant:"secondary"})})};var et=r(87882),er=r(88413),en=r(20053),ei=r(32389);let ea=function(e){var t,r,n=e.size,i=void 0===n?"20":n,a=e.color,o=void 0===a?"currentColor":a,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["size","color"]);return(0,z.jsxs)("svg",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({width:i,height:i,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l),r=r={children:[(0,z.jsx)("path",{d:"M3.75 10H16.875",stroke:o,strokeWidth:"1.5",strokeLinecap:"round"}),(0,z.jsx)("path",{d:"M8.125 5L3.125 10L8.125 15",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},eo=function(e){var t=e.path,r=e.label,n=e.className,i=(0,ei.Bd)().t,a=(0,H.useNavigate)();return(0,z.jsx)("button",{onClick:function(){t?a(t):a(-1)},className:(0,en.default)("px-small py-xsmall",n),children:(0,z.jsxs)("div",{className:"gap-x-xsmall text-grey-50 inter-grey-40 inter-small-semibold flex items-center",children:[(0,z.jsx)(ea,{size:20}),(0,z.jsx)("span",{className:"ml-1",children:r||i("back-button-go-back","Go back")})]})})},el=function(){return(0,z.jsx)("div",{className:"h-xlarge w-full"})};var es=r(68799);let ec=function(e){var t,r,n=e.size,i=void 0===n?"24px":n,a=e.color,o=void 0===a?"currentColor":a,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["size","color"]);return(0,z.jsxs)("svg",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({width:i,height:i,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l),r=r={children:[(0,z.jsx)("path",{d:"M9 3H4.55556C4.143 3 3.74733 3.16389 3.45561 3.45561C3.16389 3.74733 3 4.143 3 4.55556V15.4444C3 15.857 3.16389 16.2527 3.45561 16.5444C3.74733 16.8361 4.143 17 4.55556 17H15.4444C15.857 17 16.2527 16.8361 16.5444 16.5444C16.8361 16.2527 17 15.857 17 15.4444V11",stroke:o,strokeWidth:"1.4667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M14.4356 3.43999C14.7173 3.15827 15.0994 3 15.4978 3C15.8962 3 16.2783 3.15827 16.56 3.43999C16.8417 3.72171 17 4.1038 17 4.50221C17 4.90062 16.8417 5.28272 16.56 5.56443L9.8326 12.2919L7 13L7.70815 10.1674L14.4356 3.43999Z",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},eu=function(e){var t,r,n=e.size,i=void 0===n?"24px":n,a=e.color,o=void 0===a?"currentColor":a,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["size","color"]);return(0,z.jsxs)("svg",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({width:i,height:i,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l),r=r={children:[(0,z.jsx)("path",{d:"M3.33301 5.49054H4.81449H16.6663",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M7.14286 5.49999V3.99999C7.14286 3.60216 7.29337 3.22063 7.56128 2.93932C7.82919 2.65802 8.19255 2.49998 8.57143 2.49998H11.4286C11.8075 2.49998 12.1708 2.65802 12.4387 2.93932C12.7066 3.22063 12.8571 3.60216 12.8571 3.99999V5.49999M15 5.49999V16C15 16.3978 14.8495 16.7793 14.5816 17.0607C14.3137 17.342 13.9503 17.5 13.5714 17.5H6.42857C6.04969 17.5 5.68633 17.342 5.41842 17.0607C5.15051 16.7793 5 16.3978 5 16V5.49999H15Z",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M8.33203 9.23726V13.4039",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M11.666 9.23726V13.4039",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))};var ed=r(81339);let ef=function(e){var t,r,n=e.size,i=void 0===n?"20":n,a=e.color,o=void 0===a?"currentColor":a,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["size","color"]);return(0,z.jsxs)("svg",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({width:i,height:i,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l),r=r={children:[(0,z.jsx)("path",{d:"M10 10.75C10.4142 10.75 10.75 10.4142 10.75 10C10.75 9.58579 10.4142 9.25 10 9.25C9.58579 9.25 9.25 9.58579 9.25 10C9.25 10.4142 9.58579 10.75 10 10.75Z",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M15.833 10.75C16.2472 10.75 16.583 10.4142 16.583 10C16.583 9.58579 16.2472 9.25 15.833 9.25C15.4188 9.25 15.083 9.58579 15.083 10C15.083 10.4142 15.4188 10.75 15.833 10.75Z",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M4.16699 10.75C4.58121 10.75 4.91699 10.4142 4.91699 10C4.91699 9.58579 4.58121 9.25 4.16699 9.25C3.75278 9.25 3.41699 9.58579 3.41699 10C3.41699 10.4142 3.75278 10.75 4.16699 10.75Z",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))};function ep(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}let em=function(e){var t,r=e.actions,n=e.customTrigger,i=e.forceDropdown;if(r&&(void 0!==i&&i||r.length>1))return(0,z.jsx)("div",{children:(0,z.jsxs)(ed.bL,{children:[(0,z.jsx)(ed.l9,{asChild:!0,children:n||(0,z.jsx)(W.A,{variant:"ghost",size:"small",className:"w-xlarge h-xlarge focus-visible:shadow-input focus-visible:border-violet-60 focus:shadow-none focus-visible:outline-none",children:(0,z.jsx)(ef,{size:20})})}),(0,z.jsx)(ed.UC,{sideOffset:5,className:"bg-grey-0 border-grey-20 rounded-rounded shadow-dropdown p-xsmall z-30 min-w-[200px] border",children:r.map(function(e,t){return(0,z.jsx)(ed.q7,{className:"mb-1 last:mb-0",children:(0,z.jsxs)(W.A,{variant:"ghost",size:"small",className:(0,en.default)("flex w-full justify-start",{"text-rose-50":(null==e?void 0:e.variant)==="danger","pointer-events-none select-none opacity-50":null==e?void 0:e.disabled}),onClick:null==e?void 0:e.onClick,children:[e.icon,e.label]})},t)})})]})});if(n){var a=Array.isArray(n)?n:[n];return(0,z.jsx)("div",{children:a.map(function(e,t){return(0,z.jsx)("div",{children:e},t)})})}var o=(function(e){if(Array.isArray(e))return e}(t=null!=r?r:[])||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),1!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(t,1)||function(e,t){if(e){if("string"==typeof e)return ep(e,1);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ep(e,1)}}(t,1)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];return o?(0,z.jsx)("div",{children:(0,z.jsx)(W.A,{variant:"secondary",size:"small",type:"button",className:"flex items-center",onClick:o.onClick,children:o.icon?(0,z.jsxs)("div",{className:"gap-x-2xsmall flex items-center",children:[o.icon,o.label]}):(0,z.jsx)(z.Fragment,{children:o.label})})}):null};var eh=r(88834),ey=r(31070),eb=r(17965),ev=r.n(eb);function eg(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}let ex=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=function(e){if(Array.isArray(e))return e}(t=U.useState(!1))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(t,2)||function(e,t){if(e){if("string"==typeof e)return eg(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eg(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),i=n[0],a=n[1],o=null==r?void 0:r.successDuration,l=(null==r?void 0:r.onCopied)||function(){};return U.useEffect(function(){if(i&&o){var e=setTimeout(function(){a(!1)},o);return function(){clearTimeout(e)}}},[i,o]),[i,U.useCallback(function(){ev()(e),a(!0),l()},[e,l,a])]};var ej=r(78052);let ew=function(e){var t,r,n=e.size,i=void 0===n?"20":n,a=e.color,o=void 0===a?"currentColor":a,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["size","color"]);return(0,z.jsxs)("svg",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({width:i,height:i,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l),r=r={children:[(0,z.jsx)("path",{d:"M12.917 4.16669H14.3753C14.7621 4.16669 15.133 4.32277 15.4065 4.6006C15.68 4.87843 15.8337 5.25526 15.8337 5.64817V8.33335M7.08366 4.16669H5.62533C5.23855 4.16669 4.86762 4.32277 4.59413 4.6006C4.32064 4.87843 4.16699 5.25526 4.16699 5.64817V16.0185C4.16699 16.4115 4.32064 16.7883 4.59413 17.0661C4.86762 17.3439 5.23855 17.5 5.62533 17.5H14.3753C14.7621 17.5 15.133 17.3439 15.4065 17.0661C15.68 16.7883 15.8337 16.4115 15.8337 16.0185V15",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M11.875 2.5H8.125C7.77982 2.5 7.5 2.8731 7.5 3.33333V5C7.5 5.46024 7.77982 5.83333 8.125 5.83333H11.875C12.2202 5.83333 12.5 5.46024 12.5 5V3.33333C12.5 2.8731 12.2202 2.5 11.875 2.5Z",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M17.5 11.6667H10",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M12.5 9.16669L10 11.6667L12.5 14.1667",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))};function eO(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function eS(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return eO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eO(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}let eP=function(e){var t=e.data,r=eS((0,U.useState)(!1),2),n=r[0],i=r[1],a=eS(ex(JSON.stringify(t,void 0,2),{successDuration:5500,onCopied:function(){}}),2),o=a[0],l=a[1],s=(0,U.useMemo)(function(){return Object.keys(t).length},[t]);return(0,z.jsx)("div",{className:"px-base py-xsmall rounded-rounded bg-grey-5 w-full",children:(0,z.jsxs)(eh.bL,{open:n,onOpenChange:i,children:[(0,z.jsx)(eh.l9,{asChild:!0,children:(0,z.jsxs)("div",{className:"flex cursor-pointer items-center justify-between",children:[(0,z.jsxs)("div",{className:"gap-x-xsmall inter-base-regular flex items-center",children:[(0,z.jsx)("p",{className:"inter-base-semibold",children:n?"{":s>0?"{ ... }":"{}"}),(0,z.jsxs)("span",{className:"text-grey-50",children:["(",s," ",1===s?"item":"items",")"]})]}),(0,z.jsx)(W.A,{variant:"ghost",size:"small",className:"text-grey-50",children:(0,z.jsx)(ej.A,{size:20,className:(0,en.default)("text-grey-50",{"rotate-180":n})})})]})}),(0,z.jsxs)(eh.UC,{children:[(0,z.jsx)("div",{className:"mt-xsmall",children:(0,z.jsx)(ey.d,{data:t,hideRoot:!0,theme:{base00:"#F9FAFB",base08:"#e53935",base09:"#fb8c00",base0B:"#0D9488",base0D:"#4F46E5",extend:{background:"#F9FAFB"}},shouldExpandNode:function(){return!1}})}),(0,z.jsxs)("div",{className:"flex w-full items-center justify-between",children:[n&&(0,z.jsx)("p",{className:"inter-base-semibold",children:"}"}),(0,z.jsxs)("div",{className:"gap-x-xsmall text-grey-50 inter-small-regular flex items-center",children:[o&&(0,z.jsx)("span",{className:"animate-fade-in-right",children:"Copied!"}),(0,z.jsx)(W.A,{variant:"ghost",size:"small",type:"button",onClick:function(e){e.currentTarget.blur(),l()},children:(0,z.jsx)(ew,{size:20})})]})]})]})]})})};var eC=r(88755),eA=r(47492),eN=r(51764);function ek(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}let e_=function(e){var t,r=e.heading,n=e.text,i=e.successText,a=e.cancelText,o=e.confirmText,l=e.handleClose,s=e.onDelete,c=(0,ei.Bd)().t,u=(0,eC.A)(),d=function(e){if(Array.isArray(e))return e}(t=(0,U.useState)(!1))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(t,2)||function(e,t){if(e){if("string"==typeof e)return ek(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ek(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),f=d[0],p=d[1];return(0,z.jsx)(eN.A,{isLargeModal:!1,handleClose:l,children:(0,z.jsxs)(eN.A.Body,{children:[(0,z.jsx)(eN.A.Content,{children:(0,z.jsxs)("div",{className:"flex flex-col",children:[(0,z.jsx)("span",{className:"inter-large-semibold",children:r||c("organisms-are-you-sure-you-want-to-delete","Are you sure you want to delete?")}),(0,z.jsx)("span",{className:"inter-base-regular text-grey-50 mt-1",children:void 0===n?"":n})]})}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"gap-x-xsmall flex h-8 w-full justify-end",children:[(0,z.jsx)(W.A,{variant:"secondary",className:"justify-center",size:"small",onClick:l,children:a||c("organisms-no-cancel","No, cancel")}),(0,z.jsx)(W.A,{loading:f,size:"small",className:"justify-center",variant:"nuclear",onClick:function(e){e.preventDefault(),p(!0),s().then(function(){i&&u(c("organisms-success","Success"),i||c("organisms-delete-successful","Delete successful"),"success")}).catch(function(e){return u("Error",(0,eA.u)(e),"error")}).finally(function(){p(!1),l()})},disabled:f,children:o||c("organisms-yes-remove","Yes, remove")})]})})]})})};function eE(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var eI=function(e){var t,r=e.threshold,n=void 0===r?0:r,i=function(e){if(Array.isArray(e))return e}(t=(0,U.useState)(!1))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(t,2)||function(e,t){if(e){if("string"==typeof e)return eE(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eE(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),a=i[0],o=i[1];return{isScrolled:a,scrollListener:function(e){e.target.scrollTop>n?o(!0):o(!1)}}};let eD=function(e){var t,r,n=e.title,i=e.subtitle,a=e.events,o=e.actionables,l=e.forceDropdown,s=e.customActionable,c=e.status,u=e.customHeader,d=e.className,f=e.children,p=e.compact,m=void 0!==p&&p,h=e.setBorders,y=void 0!==h&&h,b=e.footerMinHeight,v=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["title","subtitle","events","actionables","forceDropdown","customActionable","status","customHeader","className","children","compact","setBorders","footerMinHeight"]),g=eI({threshold:16}),x=g.isScrolled,j=g.scrollListener;return(0,z.jsxs)("div",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({className:(0,en.default)("rounded-rounded bg-grey-0 border-grey-20 flex h-full w-full flex-col overflow-hidden border",{"min-h-[350px]":!m},d)},v),r=r={children:[(0,z.jsx)("div",{className:"relative",children:x&&(0,z.jsx)("div",{className:"rounded-t-rounded from-grey-0 h-xlarge absolute top-0 left-0 right-0 z-10 bg-gradient-to-b to-[rgba(255,255,255,0)]"})}),(0,z.jsxs)("div",{className:(0,en.default)("flex grow flex-col",{"border-grey-20 border-b border-solid":y}),onScroll:j,children:[(0,z.jsx)("div",{className:(0,en.default)("px-xlarge py-large",{"border-grey-20 border-b border-solid":y}),children:(0,z.jsxs)("div",{className:"flex items-start justify-between",children:[(0,z.jsxs)("div",{children:[u?(0,z.jsx)("div",{children:u}):n?(0,z.jsx)("h1",{className:"inter-xlarge-semibold text-grey-90",children:n}):(0,z.jsx)("div",{}),i&&(0,z.jsx)("h3",{className:"inter-small-regular text-grey-50 pt-1.5",children:i})]}),(0,z.jsxs)("div",{className:"flex items-center space-x-2",children:[c&&c,(0,z.jsx)(em,{actions:o,forceDropdown:void 0!==l&&l,customTrigger:s})]})]})}),(0,z.jsx)("div",{className:"px-xlarge",children:f&&(0,z.jsx)("div",{className:(0,en.default)("flex flex-col",{grow:!m}),children:f})})]}),a&&a.length>0?(0,z.jsx)("div",{className:"pb-large pt-base px-xlarge border-grey-20 border-t",children:(0,z.jsx)("div",{className:"flex flex-row-reverse items-center",children:a.map(function(e,t){return(0,z.jsx)(W.A,{onClick:e.onClick,className:"first:ml-xsmall justify-center",variant:0===t?"primary":"secondary",size:"small",type:e.type,children:e.label},t)})})}):(0,z.jsx)("div",{className:"min-h-[".concat(void 0===b?24:b,"px]")})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},eT=function(e){var t=e.title,r=e.data;return r?(0,z.jsx)(eD,{className:"h-auto min-h-0 w-full",title:t,children:(0,z.jsx)("div",{className:"flex flex-grow items-center",children:(0,z.jsx)(eP,{data:r})})}):null},eM=function(e){var t=e.title,r=e.actions,n=e.customActions,i=e.forceDropdown,a=e.status,o=e.children,l=e.className,s=t||r||n||a;return(0,z.jsxs)("div",{className:(0,en.default)("px-xlarge pt-large pb-xlarge rounded-rounded bg-grey-0 border-grey-20 border",l),children:[s&&(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[t&&(0,z.jsx)("h1",{className:"text-grey-90 inter-xlarge-semibold",children:t}),(0,z.jsxs)("div",{className:"flex items-center gap-x-2",children:[n&&n,a&&a,r&&(0,z.jsx)(em,{actions:r,forceDropdown:void 0!==i&&i})]})]}),(0,z.jsx)("div",{children:o})]})};var eR=r(49785),eL=r(17993),ez=r(27398),eF=r(16335);let eB=function(e){var t,r,n=e.size,i=void 0===n?"20px":n,a=e.color,o=void 0===a?"currentColor":a,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["size","color"]);return(0,z.jsxs)("svg",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({width:i,height:i,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l),r=r={children:[(0,z.jsx)("path",{d:"M16.0894 8.33333H9.74326C8.9644 8.33333 8.33301 8.96472 8.33301 9.74358V16.0897C8.33301 16.8686 8.9644 17.5 9.74326 17.5H16.0894C16.8683 17.5 17.4997 16.8686 17.4997 16.0897V9.74358C17.4997 8.96472 16.8683 8.33333 16.0894 8.33333Z",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M4.61538 11.6667H3.91026C3.53623 11.6667 3.17753 11.5181 2.91305 11.2536C2.64858 10.9891 2.5 10.6304 2.5 10.2564V3.91026C2.5 3.53623 2.64858 3.17753 2.91305 2.91305C3.17753 2.64858 3.53623 2.5 3.91026 2.5H10.2564C10.6304 2.5 10.9891 2.64858 11.2536 2.91305C11.5181 3.17753 11.6667 3.53623 11.6667 3.91026V4.61538",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},eq=function(e){var t,r,n=e.size,i=void 0===n?20:n,a=e.color,o=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["size","color"]);return(0,z.jsx)("svg",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({width:i,height:i,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),r=r={children:(0,z.jsx)("path",{d:"M10 3.75C10.1989 3.75 10.3897 3.82902 10.5303 3.96967C10.671 4.11032 10.75 4.30109 10.75 4.5C10.75 4.69891 10.671 4.88968 10.5303 5.03033C10.3897 5.17098 10.1989 5.25 10 5.25C9.80109 5.25 9.61032 5.17098 9.46967 5.03033C9.32902 4.88968 9.25 4.69891 9.25 4.5C9.25 4.30109 9.32902 4.11032 9.46967 3.96967C9.61032 3.82902 9.80109 3.75 10 3.75ZM10 9.25C10.1989 9.25 10.3897 9.32902 10.5303 9.46967C10.671 9.61032 10.75 9.80109 10.75 10C10.75 10.1989 10.671 10.3897 10.5303 10.5303C10.3897 10.671 10.1989 10.75 10 10.75C9.80109 10.75 9.61032 10.671 9.46967 10.5303C9.32902 10.3897 9.25 10.1989 9.25 10C9.25 9.80109 9.32902 9.61032 9.46967 9.46967C9.61032 9.32902 9.80109 9.25 10 9.25ZM10.5303 14.9697C10.671 15.1103 10.75 15.3011 10.75 15.5C10.75 15.6989 10.671 15.8897 10.5303 16.0303C10.3897 16.171 10.1989 16.25 10 16.25C9.80109 16.25 9.61032 16.171 9.46967 16.0303C9.32902 15.8897 9.25 15.6989 9.25 15.5C9.25 15.3011 9.32902 15.1103 9.46967 14.9697C9.61032 14.829 9.80109 14.75 10 14.75C10.1989 14.75 10.3897 14.829 10.5303 14.9697Z",stroke:void 0===a?"currentColor":a,strokeWidth:"1.5"})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))};var eH=r(91961);function eU(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function eV(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function eG(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function eW(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||eY(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eY(e,t){if(e){if("string"==typeof e)return eU(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eU(e,t)}}let e$=function(e){var t=e.form,r=t.control,n=t.path,i=t.register,a=t.setValue,o=t.getValues,l=(0,eR.jz)({control:r,name:n("entries"),keyName:"fieldKey"}),s=l.fields,c=l.remove,u=l.insert,d=function(e){u(e,{key:"",value:""})},f=function(e){u(e+1,{key:"",value:""})},p=function(e){if("existing"===s[e].state){var t=o(n("deleted"))||[];a(n("deleted"),((function(e){if(Array.isArray(e))return eU(e)})(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||eY(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([s[e].key]),{shouldDirty:!0})}0===e&&1===s.length?(a(n("entries.".concat(e,".value")),"",{shouldDirty:!0}),a(n("entries.".concat(e,".key")),"",{shouldDirty:!0})):c(e)},m=function(e){u(e+1,eG(eV({},s[e]),{state:void 0}))},h=function(e){a(n("entries.".concat(e,".value")),"",{shouldDirty:!0}),a(n("entries.".concat(e,".key")),"",{shouldDirty:!0})},y=(0,eR.FH)({control:r,name:n("entries")}),b=(0,eR.FH)({control:r,name:n("ignored"),defaultValue:{}}),v=(0,U.useMemo)(function(){return Object.keys(b||{}).length},[b]),g=(0,U.useMemo)(function(){return null==y||!y.length||(null==y?void 0:y.length)===1&&(""===y[0].key&&""===y[0].value||void 0===y[0].key&&void 0===y[0].value)},[y]);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("div",{className:"rounded-rounded border-grey-20 divide-grey-20 inter-base-regular divide-y border",children:[(0,z.jsxs)("div",{className:(0,en.default)("inter-small-semibold bg-grey-5 rounded-t-rounded","divide-grey-20 grid grid-cols-[165px_1fr] divide-x divide-solid [&>div]:px-base [&>div]:py-xsmall"),children:[(0,z.jsx)("div",{children:(0,z.jsx)("p",{children:"Key"})}),(0,z.jsx)("div",{className:"",children:(0,z.jsx)("p",{children:"Value"})})]}),(0,z.jsx)("div",{className:"divide-grey-20 divide-y",children:s.length?s.map(function(e,t){return(0,z.jsxs)(eK,{onClearContents:function(){return h(t)},onDelete:function(){return p(t)},onDuplicate:function(){return m(t)},onInsertAbove:function(){return d(t)},onInsertBelow:function(){return f(t)},isDisabled:g,children:[(0,z.jsx)("div",{children:(0,z.jsx)(eQ,eG(eV({},i(n("entries.".concat(t,".key")))),{placeholder:"Key"}))}),(0,z.jsx)("div",{children:(0,z.jsx)(eQ,eG(eV({},i(n("entries.".concat(t,".value")))),{placeholder:"Value"}))})]},e.fieldKey)}):(0,z.jsxs)(eK,{onClearContents:function(){return h(0)},onDelete:function(){return p(0)},onDuplicate:function(){return m(0)},onInsertAbove:function(){return d(0)},onInsertBelow:function(){return f(0)},isDisabled:g,children:[(0,z.jsx)("div",{children:(0,z.jsx)(eQ,eG(eV({},i(n("entries.".concat(0,".key")))),{placeholder:"Key"}))}),(0,z.jsx)("div",{children:(0,z.jsx)(eQ,eG(eV({},i(n("entries.".concat(0,".value")))),{placeholder:"Value"}))})]})})]}),v>0&&(0,z.jsxs)("div",{className:"rounded-rounded p-base gap-x-base mt-base flex items-start border border-[#FFD386] bg-[#FFECBC]",children:[(0,z.jsx)("div",{children:(0,z.jsx)($.A,{fillType:"solid",size:20,className:"text-[#FFB224]"})}),(0,z.jsx)("div",{children:(0,z.jsxs)("p",{className:"inter-small-regular text-[#AD5700]",children:["This entities metadata contains complex values that we currently don't support editing through the admin UI. Due to this"," ",Object.keys(v)," keys are currently not being displayed. You can still edit these values using the API."]})})]})]})};var eQ=U.forwardRef(function(e,t){var r=e.className,n=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["className"]);return(0,z.jsx)("input",eV({ref:t,className:(0,en.default)("placeholder:text-grey-40 placeholder:inter-base-regular w-full appearance-none outline-none",r)},n))});eQ.displayName="MetadataInput";var eK=function(e){var t=e.onDuplicate,r=e.onInsertAbove,n=e.onInsertBelow,i=e.onDelete,a=e.onClearContents,o=e.isDisabled,l=void 0!==o&&o,s=e.children,c="px-base py-[6px] outline-none flex items-center gap-x-xsmall hover:bg-grey-5 focus:bg-grey-10 transition-colors cursor-pointer";return(0,z.jsxs)("div",{className:"last-of-type:rounded-b-rounded group/metadata relative",children:[(0,z.jsx)("div",{className:"divide-grey-20 [&>div]:px-base [&>div]:py-xsmall grid grid-cols-[165px_1fr] divide-x divide-solid",children:s}),(0,z.jsxs)(ed.bL,{children:[(0,z.jsx)(ed.l9,{asChild:!0,children:(0,z.jsx)(W.A,{variant:"secondary",size:"small",className:(0,en.default)("h-xlarge w-large -right-small radix-state-open:opacity-100 absolute inset-y-1/2 -translate-y-1/2 transform opacity-0 transition-opacity group-hover/metadata:opacity-100"),children:(0,z.jsx)(eq,{})})}),(0,z.jsx)(ed.UC,{asChild:!0,sideOffset:8,children:(0,z.jsxs)("div",{className:"bg-grey-0 shadow-dropdown border-grey-20 rounded-rounded z-50 overflow-hidden border",children:[(0,z.jsxs)(ed.q7,{onClick:r,className:c,children:[(0,z.jsx)(eF.A,{size:20}),(0,z.jsx)("span",{children:"Insert above"})]}),(0,z.jsxs)(ed.q7,{onClick:n,className:c,children:[(0,z.jsx)(ez.A,{size:20}),(0,z.jsx)("span",{children:"Insert below"})]}),(0,z.jsxs)(ed.q7,{onClick:t,className:c,children:[(0,z.jsx)(eB,{size:20}),(0,z.jsx)("span",{children:"Duplicate"})]}),(0,z.jsxs)(ed.q7,{onClick:a,className:c,children:[(0,z.jsx)(eH.A,{size:20}),(0,z.jsx)("span",{children:"Clear contents"})]}),(0,z.jsx)(ed.mB,{className:"bg-grey-20 h-px w-full"}),(0,z.jsxs)(ed.q7,{onClick:i,disabled:l,className:(0,en.default)({"text-grey-40":l,"text-rose-50":!l},c,"hover:bg-grey-0"),children:[(0,z.jsx)(eu,{size:20}),(0,z.jsx)("span",{children:"Delete"})]})]})})]})]})},eZ=function(e){var t,r=e.entries.reduce(function(e,t){var r=t.key,n=t.value;return r&&(e[r]=n),e},{});return(null===(t=e.deleted)||void 0===t?void 0:t.length)&&e.deleted.forEach(function(e){r[e]=""}),e.ignored&&Object.entries(e.ignored).forEach(function(e){var t=eW(e,2),n=t[0],i=t[1];r[n]=i}),r},eJ=function(e){var t={entries:[],deleted:[],ignored:{}};return e&&Object.entries(e).forEach(function(e){var r=eW(e,2),n=r[0],i=r[1];eX(i)?t.entries.push({key:n,value:i,state:"existing"}):t.ignored[n]=i}),t},eX=function(e){return null==e||"string"==typeof e||"number"==typeof e||"boolean"==typeof e},e0=r(89732),e1=r(14759);function e2(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function e3(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function e5(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return e2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e2(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}let e6=function(e){var t,r,n=e.onClose,i=e.isEdit,a=void 0!==i&&i,o=e.collection,l=(0,ei.Bd)().t,s=(0,J.useAdminUpdateCollection)(null==o?void 0:o.id),c=s.mutate,u=s.isLoading,d=(0,J.useAdminCreateCollection)(),f=d.mutate,p=d.isLoading,m=(0,eR.mN)({defaultValues:{title:null==o?void 0:o.title,handle:null==o?void 0:o.handle,metadata:{entries:Object.entries((null==o?void 0:o.metadata)||{}).map(function(e){var t=e5(e,2);return{key:t[0],value:t[1],state:"existing"}})}}}),h=m.register,y=m.handleSubmit,b=m.reset;(0,U.useEffect)(function(){o&&b({title:o.title,handle:o.handle,metadata:{entries:Object.entries(o.metadata||{}).map(function(e){var t=e5(e,2);return{key:t[0],value:t[1],state:"existing"}})}})},[o,b]);var v=(0,eC.A)();if(a&&!o)throw Error("Collection is required for edit");return(0,z.jsx)(eN.A,{handleClose:n,isLargeModal:!0,children:(0,z.jsxs)(eN.A.Body,{children:[(0,z.jsx)(eN.A.Header,{handleClose:n,children:(0,z.jsxs)("div",{children:[(0,z.jsx)("h1",{className:"inter-xlarge-semibold mb-2xsmall",children:a?l("collection-modal-edit-collection","Edit Collection"):l("collection-modal-add-collection","Add Collection")}),(0,z.jsx)("p",{className:"inter-small-regular text-grey-50",children:l("collection-modal-description","To create a collection, all you need is a title and a handle.")})]})}),(0,z.jsxs)("form",{onSubmit:y(function(e){a?c({title:e.title,handle:e.handle,metadata:eZ(e.metadata)},{onSuccess:function(){v(l("collection-modal-success","Success"),l("collection-modal-successfully-updated-collection","Successfully updated collection"),"success"),n()},onError:function(e){v(l("collection-modal-error","Error"),(0,eA.u)(e),"error")}}):f({title:e.title,handle:e.handle,metadata:eZ(e.metadata)},{onSuccess:function(){v(l("collection-modal-success","Success"),l("collection-modal-successfully-created-collection","Successfully created collection"),"success"),n()},onError:function(e){v(l("collection-modal-error","Error"),(0,eA.u)(e),"error")}})}),children:[(0,z.jsxs)(eN.A.Content,{children:[(0,z.jsxs)("div",{children:[(0,z.jsx)("h2",{className:"inter-base-semibold mb-base",children:l("collection-modal-details","Details")}),(0,z.jsxs)("div",{className:"gap-x-base flex items-center",children:[(0,z.jsx)(e1.A,e3({label:l("collection-modal-title-label","Title"),required:!0,placeholder:l("collection-modal-title-placeholder","Sunglasses")},h("title",{required:!0}))),(0,z.jsx)(e1.A,(t=e3({label:l("collection-modal-handle-label","Handle"),placeholder:l("collection-modal-handle-placeholder","sunglasses")},h("handle")),r=r={prefix:"/",tooltip:(0,z.jsx)(e0.A,{content:l("collection-modal-slug-description","URL Slug for the collection. Will be auto generated if left blank.")})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))]})]}),(0,z.jsxs)("div",{className:"mt-xlarge",children:[(0,z.jsx)("h2",{className:"inter-base-semibold mb-base",children:l("collection-modal-metadata","Metadata")}),(0,z.jsx)(e$,{form:(0,eL.m)(m,"metadata")})]})]}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"gap-x-xsmall flex w-full items-center justify-end",children:[(0,z.jsx)(W.A,{variant:"secondary",size:"small",type:"button",onClick:n,children:l("collection-modal-cancel","Cancel")}),(0,z.jsx)(W.A,{variant:"primary",size:"small",loading:a?u:p,children:a?l("collection-modal-save-collection","Save collection"):l("collection-modal-publish-collection","Publish collection")})]})})]})]})})};var e4=r(32885),e8=r(13083);let e7=function(e){var t,r,n=e.size,i=void 0===n?"24px":n,a=e.color,o=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["size","color"]);return(0,z.jsx)("svg",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({width:i,height:i,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),r=r={children:(0,z.jsx)("path",{d:"M13.3334 4L6.00008 11.3333L2.66675 8",stroke:void 0===a?"currentColor":a,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))};var e9=r(73909);function te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var tt=U.forwardRef(function(e,t){var r=e.indeterminate,n=void 0!==r&&r,i=e.className,a=e.checked,o=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["indeterminate","className","checked"]),l=o.type||"checkbox",s=U.useRef(null);return((0,U.useImperativeHandle)(t,function(){return s.current}),U.useEffect(function(){s.current&&(s.current.indeterminate=n)},[s,n]),"radio"===l)?(0,z.jsx)("div",{className:"flex h-full items-center",children:(0,z.jsx)("input",te({className:(0,en.default)({"accent-violet-60":a}),type:"radio",checked:a,ref:s},o))}):(0,z.jsxs)("div",{className:"flex h-full items-center",children:[(0,z.jsx)("div",{onClick:function(){!o.disabled&&s.current&&s.current.click()},className:"rounded-base border-grey-30 text-grey-0 flex h-5 w-5 cursor-pointer justify-center border ".concat(o.disabled?a?"bg-gray-300":"":a&&"bg-violet-60"),children:(0,z.jsxs)("span",{className:"self-center",children:[a&&(0,z.jsx)(e7,{size:16}),n&&(0,z.jsx)(e9.A,{size:16})]})}),(0,z.jsx)("input",te({type:"checkbox",className:(0,en.default)("hidden",i),defaultChecked:a,ref:s},o))]})});function tr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function tn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return tr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tr(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}let ti=function(e){var t,r,n,i=e.title,a=e.options,o=e.className,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["title","options","className"]),s=tn((0,U.useState)((null==a?void 0:null===(n=a[0])||void 0===n?void 0:n.title)||"All"),2),c=s[0],u=s[1],d=tn((0,U.useState)(!1),2),f=d[0],p=d[1];return(0,z.jsxs)("div",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({className:(0,en.default)("inter-small-regular text-grey-50 mr-6 flex last:mr-0",o)},l),r=r={children:[(0,z.jsxs)("span",{className:"",children:[i,":"]}),(0,z.jsxs)(ed.bL,{onOpenChange:p,children:[(0,z.jsx)(ed.l9,{asChild:!0,className:(0,en.default)("inter-small-regular text-grey-50 active:bg-grey-5 hover:bg-grey-5 flex items-center rounded pl-1.5 pr-0.5",{"bg-grey-5":f}),children:(0,z.jsxs)("div",{className:"align-center flex",children:[c,(0,z.jsx)("div",{className:"text-grey-40 h-min",children:(0,z.jsx)(ej.A,{size:16})})]})}),(0,z.jsx)(ed.UC,{sideOffset:8,className:"bg-grey-0 border-grey-20 rounded-rounded shadow-dropdown z-40 border p-2",children:a.map(function(e,t){return(0,z.jsxs)(ed._2,{onSelect:function(){e.onClick(),u(e.title)},disabled:void 0!==e.count&&e.count<1,className:(0,en.default)("text-grey-90 inter-small-semibold my-1 flex w-48 items-center rounded py-1.5  px-3 hover:border-0 hover:outline-none",{"hover:bg-grey-10 cursor-pointer":void 0===e.count||e.count>0}),children:[c===e.title&&(0,z.jsx)("span",{className:"w-4",children:(0,z.jsx)(e7,{size:16})}),(0,z.jsxs)("div",{className:(0,en.default)("ml-3 flex w-full justify-between",{"ml-7":c!==e.title,"text-grey-30":1>(e.count||0)}),children:[e.title,(0,z.jsx)("span",{className:(0,en.default)("inter-small-regular text-grey-40 ml-3",{"text-grey-30":1>(e.count||0)}),children:e.count})]})]},"".concat(t,"-").concat(e.title))})})]})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},ta=function(e){var t,r,n=e.size,i=void 0===n?"24":n,a=e.color,o=void 0===a?"currentColor":a,l=e.ascendingColor,s=e.descendingColor,c=e.isSorted,u=void 0!==c&&c,d=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["size","color","ascendingColor","descendingColor","isSorted"]);return(0,z.jsxs)("svg",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({width:i,height:i,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},d),r=r={children:[(0,z.jsx)("path",{d:"M4.66602 10L7.99935 13.3333L11.3327 10",className:(0,en.default)({"stroke-grey-40":"desc"!==u,"stroke-current":"desc"===u}),stroke:s||o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M4.66602 6.00008L7.99935 2.66675L11.3327 6.00008",stroke:l||o,className:(0,en.default)({"stroke-grey-40":"asc"!==u,"stroke-current":"asc"===u}),strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))};var to=r(21899);let tl=function(e){var t,r,n=e.autoFocus,i=e.onSearch,a=e.placeholder,o=e.searchValue,l=e.className,s=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["autoFocus","onSearch","placeholder","searchValue","className"]);return(0,z.jsxs)("div",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({className:(0,en.default)("inter-small-regular transition-color text-grey-50 rounded-rounded border-grey-20 min-w-content focus-within:shadow-input focus-within:border-violet-60 bg-grey-5 mt-1 mb-1 flex w-60 items-center border py-1.5 pl-1",l)},s),r=r={children:[(0,z.jsx)("span",{className:"px-2.5 py-0.5",children:(0,z.jsx)(to.A,{size:16})}),(0,z.jsx)("input",{autoFocus:n,type:"text",value:o,className:(0,en.default)("inter-small-regular focus:text-grey-90 caret-violet-60 placeholder:inter-small-regular placeholder-grey-40 w-full bg-transparent focus:border-none focus:outline-none"),placeholder:void 0===a?"Search":a,onChange:function(e){i(e.target.value)}})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))};function ts(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function tc(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function tu(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var td=U.forwardRef(function(e,t){var r=e.className,n=e.children,i=e.tableActions,a=e.enableSearch,o=e.searchClassName,l=e.immediateSearchFocus,s=e.searchPlaceholder,c=e.searchValue,u=e.handleSearch,d=e.filteringOptions,f=e.containerClassName,p=tu(e,["className","children","tableActions","enableSearch","searchClassName","immediateSearchFocus","searchPlaceholder","searchValue","handleSearch","filteringOptions","containerClassName"]);if(a&&!u)throw Error("Table cannot enable search without a search handler");return(0,z.jsxs)("div",{className:"flex flex-col ".concat(f),children:[(0,z.jsxs)("div",{className:"mb-2 flex w-full justify-between",children:[d?(0,z.jsx)("div",{className:"mb-2 flex self-end",children:Array.isArray(d)?d.map(function(e,t){return(0,U.createElement)(ti,tc(ts({},e),{key:t}))}):d}):(0,z.jsx)("span",{"aria-hidden":!0}),(0,z.jsxs)("div",{className:"gap-x-xsmall flex items-center",children:[i&&(0,z.jsx)("div",{children:i}),a&&(0,z.jsx)(tl,{autoFocus:l,placeholder:s,searchValue:c,onSearch:u,className:o})]})]}),(0,z.jsx)("div",{className:"relative",children:(0,z.jsx)("table",tc(ts({ref:t,className:(0,en.default)("w-full table-auto",r)},p),{children:n}))})]})});td.Head=U.forwardRef(function(e,t){var r=e.className,n=e.children,i=tu(e,["className","children"]);return(0,z.jsx)("thead",tc(ts({ref:t,className:(0,en.default)("inter-small-semibold text-grey-50 border-grey-20 whitespace-nowrap border-t border-b",r)},i),{children:n}))}),td.HeadRow=U.forwardRef(function(e,t){var r=e.className,n=e.children,i=tu(e,["className","children"]);return(0,z.jsx)("tr",tc(ts({ref:t,className:(0,en.default)(r)},i),{children:n}))}),td.HeadCell=U.forwardRef(function(e,t){var r=e.className,n=e.children,i=tu(e,["className","children"]);return(0,z.jsx)("th",tc(ts({ref:t,className:(0,en.default)("h-[40px] text-left",r)},i),{children:n}))}),td.SortingHeadCell=U.forwardRef(function(e,t){var r=e.onSortClicked,n=e.sortDirection,i=e.setSortDirection,a=e.className,o=e.children,l=tu(e,["onSortClicked","sortDirection","setSortDirection","className","children"]);return(0,z.jsx)("th",tc(ts({ref:t,className:(0,en.default)("py-2.5 text-left",a)},l),{children:(0,z.jsxs)("div",{className:"flex cursor-pointer select-none items-center",onClick:function(e){e.preventDefault(),n?"ASC"===n?i("DESC"):i(void 0):i("ASC"),r()},children:[o,(0,z.jsx)(ta,{size:16,ascendingColor:"ASC"===n?"#111827":void 0,descendingColor:"DESC"===n?"#111827":void 0})]})}))}),td.Body=U.forwardRef(function(e,t){var r=e.className,n=e.children,i=tu(e,["className","children"]);return(0,z.jsx)("tbody",tc(ts({ref:t,className:(0,en.default)(r)},i),{children:n}))}),td.Cell=U.forwardRef(function(e,t){var r=e.className,n=e.linkTo,i=e.children,a=tu(e,["className","linkTo","children"]),o=(0,H.useNavigate)();return(0,z.jsx)("td",tc(ts({ref:t,className:(0,en.default)("inter-small-regular h-[40px]",r)},a,n&&{onClick:function(e){o(n),e.stopPropagation()}}),{children:i}))}),td.Row=U.forwardRef(function(e,t){var r=e.className,n=e.actions,i=e.children,a=e.linkTo,o=e.forceDropdown,l=e.clickable,s=tu(e,["className","actions","children","linkTo","forceDropdown","clickable"]),c=(0,H.useNavigate)();return(0,z.jsxs)("tr",tc(ts({ref:t,className:(0,en.default)("inter-small-regular border-grey-20 text-grey-90 border-t border-b",r,{"hover:bg-grey-5 cursor-pointer":void 0!==a||l})},s,a&&{onClick:function(){c(a)}}),{children:[i,n&&(0,z.jsx)(td.Cell,{onClick:function(e){return e.stopPropagation()},className:"w-[32px]",children:(0,z.jsx)(em,{forceDropdown:o,actions:n})})]}))});var tf=(0,U.createContext)({isLoading:!1}),tp=function(e){var t=e.children,r=e.isLoading;return(0,z.jsx)(tf.Provider,{value:{isLoading:r},children:t})};let tm=function(e){var t=e.children,r=e.isLoading,n={isLoading:U.useContext(tf).isLoading}.isLoading;return(0,z.jsx)("div",{className:(0,en.default)("h-fit w-fit",{"bg-grey-10 rounded-rounded animate-pulse [&>*]:opacity-0":r||void 0!==n&&n}),children:t})},th=function(e){var t,r,n=e.size,i=void 0===n?"16":n,a=e.color,o=void 0===a?"currentColor":a,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["size","color"]);return(0,z.jsxs)("svg",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({width:i,height:i,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l),r=r={children:[(0,z.jsx)("path",{d:"M3.33301 8H12.6663",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M8 3.33331L12.6667 7.99998L8 12.6666",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))};var ty=function(e){var t=e.isLoading,r=void 0!==t&&t,n=e.pagingState,i=n.title,a=n.currentPage,o=n.pageCount,l=n.pageSize,s=n.count,c=n.offset,u=n.nextPage,d=n.prevPage,f=n.hasNext,p=n.hasPrev,m=(0,ei.Bd)().t;return(0,z.jsx)(tp,{isLoading:r,children:(0,z.jsxs)("div",{className:"inter-small-regular text-grey-50 flex w-full justify-between",children:[(0,z.jsx)(tm,{children:(0,z.jsx)("div",{children:m("table-container-soothed-offset","{{soothedOffset}} - {{pageSize}} of {{count}} {{title}}",{soothedOffset:s>0?c+1:0,pageSize:l,count:s,title:i})})}),(0,z.jsxs)("div",{className:"flex space-x-4",children:[(0,z.jsx)(tm,{children:(0,z.jsx)("div",{children:m("table-container-current-page","{{currentPage}} of {{soothedPageCount}}",{currentPage:a,soothedPageCount:Math.max(1,o)})})}),(0,z.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,z.jsx)("button",{className:"disabled:text-grey-30 cursor-pointer disabled:cursor-default",disabled:!p||r,onClick:function(){return d()},children:(0,z.jsx)(ea,{})}),(0,z.jsx)("button",{className:"disabled:text-grey-30 cursor-pointer disabled:cursor-default",disabled:!f||r,onClick:function(){return u()},children:(0,z.jsx)(th,{})})]})]})]})})};let tb=function(e){var t=e.children,r=e.hasPagination,n=e.pagingState,i=e.isLoading,a=e.numberOfRows;return(0,z.jsxs)("div",{children:[(0,z.jsxs)("div",{className:"relative",style:{minHeight:((void 0===a?12:a)+1)*40},children:[i&&(0,z.jsx)("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-white bg-opacity-50",children:(0,z.jsx)(X.A,{variant:"secondary"})}),t]}),r&&n&&(0,z.jsx)("div",{className:"mt-14",children:(0,z.jsx)(ty,{pagingState:n,isLoading:i})})]})};var tv=r(50324),tg=function(e){switch(e){case"published":return(0,z.jsx)(ei.wD,{children:function(e){return(0,z.jsx)(tv.A,{title:e("collection-product-table-decide-status-published","Published"),variant:"success"})}});case"draft":return(0,z.jsx)(ei.wD,{children:function(e){return(0,z.jsx)(tv.A,{title:e("collection-product-table-draft","Draft"),variant:"default"})}});case"proposed":return(0,z.jsx)(ei.wD,{children:function(e){return(0,z.jsx)(tv.A,{title:e("collection-product-table-proposed","Proposed"),variant:"warning"})}});case"rejected":return(0,z.jsx)(ei.wD,{children:function(e){return(0,z.jsx)(tv.A,{title:e("collection-product-table-rejected","Rejected"),variant:"danger"})}});default:return null}};function tx(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function tj(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function tw(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function tO(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||tP(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tS(e){return function(e){if(Array.isArray(e))return tx(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||tP(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tP(e,t){if(e){if("string"==typeof e)return tx(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tx(e,t)}}let tC=function(e){var t=e.existingRelations,r=e.onSubmit,n=e.onClose,i=(0,ei.Bd)().t,a=tO((0,U.useState)(""),2),o=a[0],l=a[1],s=tO((0,U.useState)(0),2),c=s[0],u=s[1],d=tO((0,U.useState)(0),2),f=d[0],p=d[1],m=tO((0,U.useState)(0),2),h=m[0],y=m[1],b=tO((0,U.useState)([]),2),v=b[0],g=b[1],x=tO((0,U.useState)([]),2),j=x[0],w=x[1],O=(0,e8.d)(o,500),S=(0,J.useAdminProducts)({q:O,limit:10,offset:c}),P=S.isLoading,C=S.count,A=S.products,N=(0,U.useMemo)(function(){return[{accessor:"thumbnail",Cell:function(e){var t=e.cell.value;return(0,z.jsx)(td.Cell,{className:"w-[5%]",children:(0,z.jsx)("div",{className:"bg-grey-5 rounded-soft my-xsmall h-[40px] w-[30px] overflow-hidden",children:t?(0,z.jsx)("img",{src:t,alt:"Thumbnail",className:"h-full w-full object-cover"}):null})})}},{accessor:"title",Cell:function(e){var t=e.cell.value;return(0,z.jsx)(td.Cell,{className:"w-3/6",children:t})}},{accessor:"status",Cell:function(e){var t=e.cell.value;return(0,z.jsx)(td.Cell,{className:"pr-base w-[10%]",children:(0,z.jsx)("div",{className:"flex items-center justify-end",children:tg(t)})})}}]},[]),k=(0,e4.useTable)({data:A||[],columns:N,manualPagination:!0,initialState:{pageIndex:h,pageSize:10,selectedRowIds:t.reduce(function(e,t){return e[t.id]=!0,e},{})},pageCount:f,autoResetSelectedRows:!1,autoResetPage:!1,getRowId:function(e){return e.id}},e4.usePagination,e4.useRowSelect,function(e){e.visibleColumns.push(function(e){return[{id:"selection",Cell:function(e){var t=e.row;return(0,z.jsx)(td.Cell,{className:"pl-base w-[5%]",children:(0,z.jsx)(tt,tj({},t.getToggleRowSelectedProps()))})}}].concat(tS(e))})}),_=k.rows,E=k.prepareRow,I=k.getTableBodyProps,D=k.getTableProps,T=k.canPreviousPage,M=k.canNextPage,R=k.pageCount,L=k.nextPage,F=k.previousPage,B=k.state,q=B.pageIndex,H=B.pageSize,V=B.selectedRowIds;(0,U.useEffect)(function(){g(function(e){return tS(e.filter(function(e){return Object.keys(V).findIndex(function(t){return t===e.id})>-1})).concat(tS((null==A?void 0:A.filter(function(t){return 0>e.findIndex(function(e){return e.id===t.id})&&Object.keys(V).findIndex(function(e){return e===t.id})>-1}))||[])).filter(function(e){return 0>t.findIndex(function(t){return t.id===e.id})})}),w(tS(t.filter(function(e){return 0>Object.keys(V).findIndex(function(t){return t===e.id})})))},[V]),(0,U.useEffect)(function(){p(Math.ceil(C/10))},[A,C,10]);var G=tO((0,U.useState)(!0),2),Y=G[0],$=G[1];return(0,U.useEffect)(function(){if(v.length>0||j.length>0){$(!1);return}$(!0)},[v,j]),(0,z.jsx)(eN.A,{handleClose:n,children:(0,z.jsxs)(eN.A.Body,{children:[(0,z.jsx)(eN.A.Header,{handleClose:n,children:(0,z.jsx)("h3",{className:"inter-xlarge-semibold",children:i("collection-product-table-add-products","Add Products")})}),(0,z.jsx)(eN.A.Content,{children:(0,z.jsx)(tb,{hasPagination:!0,numberOfRows:10,isLoading:P,pagingState:{count:C,offset:c,pageSize:c+_.length,title:i("collection-product-table-products","Products"),currentPage:q+1,pageCount:R,nextPage:function(){M&&(u(function(e){return e+H}),y(function(e){return e+1}),L())},prevPage:function(){T&&(u(function(e){return e-H}),y(function(e){return e-1}),F())},hasNext:M,hasPrev:T},children:(0,z.jsx)(td,tw(tj({enableSearch:!0,handleSearch:function(e){u(0),l(e)},searchValue:o,searchPlaceholder:i("collection-product-table-search-products","Search Products")},D()),{className:"flex-grow",children:(0,z.jsx)(td.Body,tw(tj({},I()),{children:_.map(function(e){return E(e),(0,z.jsx)(td.Row,tw(tj({color:"inherit"},e.getRowProps()),{className:"px-base",children:e.cells.map(function(e,t){return e.render("Cell",{index:t})})}))})}))}))})}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"gap-x-xsmall flex w-full items-center justify-end",children:[(0,z.jsx)(W.A,{variant:"ghost",size:"small",className:"w-eventButton",onClick:n,children:i("collection-product-table-cancel","Cancel")}),(0,z.jsx)(W.A,{variant:"primary",size:"small",className:"w-eventButton",onClick:function(){r(v.map(function(e){return e.id}),j.map(function(e){return e.id}))},disabled:Y,children:i("collection-product-table-save","Save")})]})})]})})};var tA=r(72505),tN=r.n(tA),tk=r(65889),t_=tN().create({baseURL:tk.v});function tE(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t_({method:e,withCredentials:!0,url:t,data:r,json:!0})}function tI(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function tD(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function tT(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function o(e){tD(a,n,i,o,l,"next",e)}function l(e){tD(a,n,i,o,l,"throw",e)}o(void 0)})}}function tM(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return tI(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tI(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tR(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}var tL=function(e){return Object.entries(e).reduce(function(e,t){var r=tM(t,2),n=r[0],i=r[1];return i&&(e[n]=i),e},{})},tz=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object.entries(e).map(function(e){var r=tM(e,2),n=r[0],i=r[1];return"object"==typeof i?tz(i,n):"".concat(t?"".concat(t,"[").concat(n,"]"):"".concat(n),"=").concat(i)}).join("&")};let tF={returnReasons:{retrieve:function(e){return tE("GET","/admin/return-reasons/".concat(e))},list:function(){return tE("GET","/admin/return-reasons")},create:function(e){return tE("POST","/admin/return-reasons",e)},update:function(e,t){return tE("POST","/admin/return-reasons/".concat(e),t)},delete:function(e){return tE("DELETE","/admin/return-reasons/".concat(e))}},apps:{authorize:function(e){return tE("POST","/admin/apps/authorizations",e)},list:function(){return tE("GET","/admin/apps")}},auth:{session:function(){return tE("GET","/admin/auth")},authenticate:function(e){return tE("POST","/admin/auth",e)},deauthenticate:function(e){return tE("DELETE","/admin/auth")}},notifications:{list:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.keys(e).map(function(t){return"".concat(t,"=").concat(e[t])}).join("&");return tE("GET","/admin/notifications".concat(t&&"?".concat(t)))},resend:function(e,t){return tE("POST","/admin/notifications/".concat(e,"/resend"),t)}},notes:{listByResource:function(e){return tE("GET","/admin/notes?resource_id=".concat(e))},create:function(e,t,r){return tT(function(){return tR(this,function(n){return[2,tE("POST","/admin/notes/",{resource_id:e,resource_type:t,value:r})]})})()},update:function(e,t){return tE("POST","admin/notes/".concat(e),{value:t})},delete:function(e){return tE("DELETE","admin/notes/".concat(e))}},customers:{retrieve:function(e){return tE("GET","/admin/customers/".concat(e))},list:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return tE("GET","/admin/customers".concat(e))},update:function(e,t){return tE("POST","admin/customers/".concat(e),t)}},store:{retrieve:function(){return tE("GET","/admin/store")},update:function(e){return tE("POST","/admin/store",e)},addCurrency:function(e){return tE("POST","/admin/store/currencies/".concat(e))},removeCurrency:function(e){return tE("DELETE","/admin/store/currencies/".concat(e))},listPaymentProviders:function(){return tE("GET","/admin/store/payment-providers")}},shippingProfiles:{list:function(){return tE("GET","/admin/shipping-profiles")},create:function(e){return tE("POST","/admin/shipping-profiles",e)},retrieve:function(e){return tE("GET","/admin/shipping-profiles/".concat(e))},update:function(e,t){return tE("POST","/admin/shipping-profiles/".concat(e),t)}},giftCards:{create:function(e){return tE("POST","/admin/gift-cards",e)},retrieve:function(e){return tE("GET","/admin/gift-cards/".concat(e))},list:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.keys(e).map(function(t){return"".concat(t,"=").concat(e[t])}).join("&");return tE("GET","/admin/gift-cards".concat(t&&"?".concat(t)))},update:function(e,t){return tE("POST","/admin/gift-cards/".concat(e),t)},delete:function(e){return tE("DELETE","/admin/gift-cards/".concat(e))}},variants:{list:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.keys(e).map(function(t){return"".concat(t,"=").concat(e[t])}).join("&");return tE("GET","/admin/variants".concat(t&&"?".concat(t)))}},products:{create:function(e){return tE("POST","/admin/products",e)},retrieve:function(e){return tE("GET","/admin/products/".concat(e))},update:function(e,t){return tE("POST","/admin/products/".concat(e),t)},delete:function(e){return tE("DELETE","/admin/products/".concat(e))},list:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.keys(e).map(function(t){return"".concat(t,"=").concat(e[t])}).join("&");return tE("GET","/admin/products".concat(t&&"?".concat(t)))},listTypes:function(){return tE("GET","/admin/products/types")},listTagsByUsage:function(){return tE("GET","/admin/products/tag-usage")},variants:{create:function(e,t){return tE("POST","/admin/products/".concat(e,"/variants"),t)},retrieve:function(e,t){return tE("GET","/admin/products/".concat(e,"/variants/").concat(t))},update:function(e,t,r){return tE("POST","/admin/products/".concat(e,"/variants/").concat(t),r)},delete:function(e,t){return tE("DELETE","/admin/products/".concat(e,"/variants/").concat(t))},list:function(e){return tE("GET","/admin/products/".concat(e,"/variants"))}},options:{create:function(e,t){return tE("POST","/admin/products/".concat(e,"/options"),t)},delete:function(e,t){return tE("DELETE","/admin/products/".concat(e,"/options/").concat(t))},update:function(e,t,r){return tE("POST","/admin/products/".concat(e,"/options/").concat(t),r)}}},swaps:{retrieve:function(e){return tE("GET","/admin/swaps/".concat(e))},update:function(e,t){return tE("POST","/admin/orders/".concat(e),t)},list:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.keys(e).map(function(t){return""===e[t]||null===e[t]?null:"".concat(t,"=").concat(e[t])}).filter(function(e){return!!e}).join("&");return tE("GET","/admin/swaps".concat(t&&"?".concat(t)))}},returns:{list:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.keys(tL(e)).map(function(t){return"".concat(t,"=").concat(e[t])}).filter(function(e){return!!e}).join("&");return tE("GET","/admin/returns".concat(t&&"?".concat(t)))}},collections:{create:function(e){return tE("POST","/admin/collections",e)},retrieve:function(e){return tE("GET","/admin/collections/".concat(e))},list:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0],tE("GET","/admin/collections")},addProducts:function(e,t){return tE("POST","/admin/collections/".concat(e,"/products/batch"),t)},removeProducts:function(e,t){return tE("DELETE","/admin/collections/".concat(e,"/products/batch"),t)}},orders:{create:function(e){return tE("POST","/admin/orders",e)},receiveReturn:function(e,t){return tT(function(){var r,n,i,a,o,l,s;return tR(this,function(c){switch(c.label){case 0:return[4,tE("POST","/admin/returns/".concat(e,"/receive"),t)];case 1:return(null===(r=(a=c.sent()).data.return)||void 0===r?void 0:r.order_id)&&(o=a.data.return.order_id),(null===(i=a.data.return)||void 0===i?void 0:null===(n=i.swap)||void 0===n?void 0:n.id)&&(o=null===(s=a.data.return)||void 0===s?void 0:null===(l=s.swap)||void 0===l?void 0:l.order_id),[2,this.retrieve(o)]}})}).apply(this)},cancelReturn:function(e){return tE("POST","/admin/returns/".concat(e,"/cancel"))},retrieve:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object.keys(t).map(function(e){return""===t[e]||null===t[e]?null:"".concat(e,"=").concat(t[e])}).filter(function(e){return!!e}).join("&");return tE("GET","/admin/orders/".concat(e).concat(r&&"?".concat(r)))},update:function(e,t){return tE("POST","/admin/orders/".concat(e),t)},list:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.keys(tL(e)).map(function(t){return"".concat(t,"=").concat(e[t])}).filter(function(e){return!!e}).join("&");return tE("GET","/admin/orders".concat(t&&"?".concat(t)))},complete:function(e){return tE("POST","/admin/orders/".concat(e,"/complete"),{})},archive:function(e){return tE("POST","/admin/orders/".concat(e,"/archive"),{})},capturePayment:function(e){return tE("POST","/admin/orders/".concat(e,"/capture"),{})},createShipment:function(e,t){return tE("POST","/admin/orders/".concat(e,"/shipment"),t)},updateClaim:function(e,t,r){return tE("POST","/admin/orders/".concat(e,"/claims/").concat(t),r)},createSwap:function(e,t){return tE("POST","/admin/orders/".concat(e,"/swaps"),t)},cancelSwap:function(e,t){return tE("POST","/admin/orders/".concat(e,"/swaps/").concat(t,"/cancel"))},createClaim:function(e,t){return tE("POST","/admin/orders/".concat(e,"/claims"),t)},cancelClaim:function(e,t){return tE("POST","/admin/orders/".concat(e,"/claims/").concat(t,"/cancel"))},fulfillClaim:function(e,t,r){return tE("POST","/admin/orders/".concat(e,"/claims/").concat(t,"/fulfillments"),r)},cancelClaimFulfillment:function(e,t,r){return tE("POST","/admin/orders/".concat(e,"/claims/").concat(t,"/fulfillments/").concat(r,"/cancel"))},createClaimShipment:function(e,t,r){return tE("POST","/admin/orders/".concat(e,"/claims/").concat(t,"/shipments"),r)},createSwapShipment:function(e,t,r){return tE("POST","/admin/orders/".concat(e,"/swaps/").concat(t,"/shipments"),r)},fulfillSwap:function(e,t,r){return tE("POST","/admin/orders/".concat(e,"/swaps/").concat(t,"/fulfillments"),r)},cancelSwapFulfillment:function(e,t,r){return tE("POST","/admin/orders/".concat(e,"/swaps/").concat(t,"/fulfillments/").concat(r,"/cancel"))},processSwapPayment:function(e,t){return tE("POST","/admin/orders/".concat(e,"/swaps/").concat(t,"/process-payment"))},createFulfillment:function(e,t){return tE("POST","/admin/orders/".concat(e,"/fulfillment"),t)},cancelFulfillment:function(e,t){return tE("POST","/admin/orders/".concat(e,"/fulfillments/").concat(t,"/cancel"))},refund:function(e,t){return tE("POST","/admin/orders/".concat(e,"/refund"),t)},requestReturn:function(e,t){return tE("POST","/admin/orders/".concat(e,"/return"),t)},cancel:function(e){return tE("POST","/admin/orders/".concat(e,"/cancel"),{})}},shippingOptions:{create:function(e){return tE("POST","/admin/shipping-options",e)},retrieve:function(e){return tE("POST","/admin/shipping-options/".concat(e))},delete:function(e){return tE("DELETE","/admin/shipping-options/".concat(e))},list:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.keys(e).map(function(t){return"".concat(t,"=").concat(e[t])}).join("&");return tE("GET","/admin/shipping-options".concat(t&&"?".concat(t)))},update:function(e,t){return tE("POST","/admin/shipping-options/".concat(e),t)}},discounts:{create:function(e){return tE("POST","/admin/discounts",e)},retrieve:function(e){return tE("GET","/admin/discounts/".concat(e))},update:function(e,t){return tE("POST","/admin/discounts/".concat(e),t)},delete:function(e){return tE("DELETE","/admin/discounts/".concat(e))},list:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=tz(e);return tE("GET","/admin/discounts".concat(t&&"?".concat(t)))},retrieveByCode:function(e){return tE("GET","/admin/discounts/code/".concat(e))}},regions:{list:function(){return tE("GET","/admin/regions")},retrieve:function(e){return tE("GET","/admin/regions/".concat(e))},create:function(e){return tE("POST","/admin/regions",e)},update:function(e,t){return tE("POST","/admin/regions/".concat(e),t)},delete:function(e){return tE("DELETE","/admin/regions/".concat(e))},fulfillmentOptions:{list:function(e){return tE("GET","/admin/regions/".concat(e,"/fulfillment-options"))}}},uploads:{create:function(e){var t=new FormData,r=!0,n=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var l=a.value;t.append("files",l)}}catch(e){n=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(n)throw i}}return tE("POST","/admin/uploads",t)}},draftOrders:{create:function(e){return tE("POST","/admin/draft-orders",e)},addLineItem:function(e,t){return tE("POST","/admin/draft-orders/".concat(e,"/line-items"),t)},updateLineItem:function(e,t,r){return tE("POST","/admin/draft-orders/".concat(e,"/line-items/").concat(t),r)},deleteLineItem:function(e,t){return tE("DELETE","/admin/draft-orders/".concat(e,"/line-items/").concat(t))},retrieve:function(e){return tE("GET","/admin/draft-orders/".concat(e))},delete:function(e){return tE("DELETE","/admin/draft-orders/".concat(e))},update:function(e,t){return tE("POST","/admin/draft-orders/".concat(e),t)},registerSystemPayment:function(e){return tE("POST","/admin/draft-orders/".concat(e,"/pay"))},list:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.keys(e).map(function(t){return""===e[t]||null===e[t]?null:"".concat(t,"=").concat(e[t])}).filter(function(e){return!!e}).join("&");return tE("GET","/admin/draft-orders".concat(t&&"?".concat(t)))}},invites:{create:function(e){return tE("POST","/admin/invites",e)},resend:function(e){return tE("POST","/admin/invites/".concat(e,"/resend"))},delete:function(e){return tE("DELETE","/admin/invites/".concat(e))},list:function(){return tE("GET","/admin/invites")},accept:function(e){return tE("POST","/admin/invites/accept",e)}},users:{resetPasswordToken:function(e){return tE("POST","/admin/users/password-token",e)},resetPassword:function(e){return tE("POST","/admin/users/reset-password",e)},list:function(){return tE("GET","/admin/users")},retrieve:function(e){return tE("GET","/admin/users/".concat(e))},update:function(e,t){return tE("POST","/admin/users/".concat(e),t)},delete:function(e){return tE("DELETE","/admin/users/".concat(e))}}};function tB(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function tq(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function tH(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function tU(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function tV(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||tG(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tG(e,t){if(e){if("string"==typeof e)return tB(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tB(e,t)}}let tW=function(e){var t,r=e.collectionId,n=e.refetchCollection,i=tV((0,U.useState)(""),2),a=i[0],o=i[1],l=tV((0,U.useState)(0),2),s=l[0],c=l[1],u=tV((0,U.useState)(0),2),d=u[0],f=u[1],p=tV((0,U.useState)(0),2),m=p[0],h=p[1],y=(0,e8.d)(a,500),b=(0,ei.Bd)().t,v=tV((0,U.useState)(!1),2),g=v[0],x=v[1],j=tV((0,U.useState)(void 0),2),w=j[0],O=j[1],S=(0,J.useAdminProducts)({q:y,collection_id:[r],limit:10,offset:s}),P=S.isLoading,C=S.count,A=S.products,N=S.refetch;(0,U.useEffect)(function(){N()},[r]);var k=function(){w&&tF.products.update(w,{collection_id:null}).then(function(){N(),n()})},_=(0,U.useMemo)(function(){return[{id:"selection",Cell:function(e){var t=e.row;return(0,z.jsx)(td.Cell,{className:"pl-base pr-large w-[0%]",children:(0,z.jsx)("div",{children:t.index+1})})}},{accessor:"thumbnail",Cell:function(e){var t=e.cell.value;return(0,z.jsx)(td.Cell,{className:"pr-base w-[0%]",children:(0,z.jsx)("div",{className:"bg-grey-5 rounded-soft my-xsmall h-[40px] w-[30px] overflow-hidden",children:t?(0,z.jsx)("img",{src:t,alt:"Thumbnail",className:"h-full w-full object-cover"}):null})})}},{accessor:"title",Cell:function(e){var t=e.cell,r=t.row,n=t.value;return(0,z.jsx)(td.Cell,{className:"w-[20%]",children:(0,z.jsx)(H.Link,{to:"/a/products/".concat(r.original.id),children:n})})}},{accessor:"status",Cell:function(e){var t=e.cell.value;return(0,z.jsx)(td.Cell,{className:"w-[50%] justify-start",children:tg(t)})}}]},[]),E=(0,e4.useTable)({data:A||[],columns:_,manualPagination:!0,initialState:{pageIndex:m,pageSize:10},pageCount:d,getRowId:function(e){return e.id}},e4.usePagination,function(e){e.visibleColumns.push(function(e){return((function(e){if(Array.isArray(e))return tB(e)})(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||tG(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([{id:"actions",Cell:function(e){var t=e.row;return(0,z.jsx)(td.Cell,{className:"pr-2xsmall w-[0%]",children:(0,z.jsx)(W.A,{variant:"ghost",size:"small",className:"text-grey-40",onClick:function(){O(t.original.id),x(!0)},children:(0,z.jsx)(eu,{size:20})})})}}])})}),I=E.rows,D=E.prepareRow,T=E.getTableBodyProps,M=E.getTableProps,R=E.canPreviousPage,L=E.canNextPage,F=E.pageCount,B=E.nextPage,q=E.previousPage,V=E.state,G=V.pageIndex,Y=V.pageSize;return(0,U.useEffect)(function(){f(Math.ceil(C/10))},[A,C,10]),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(tb,{isLoading:P,hasPagination:!0,numberOfRows:Y,pagingState:{count:C,offset:s,pageSize:s+I.length,title:"Products",currentPage:G+1,pageCount:F,nextPage:function(){L&&(c(function(e){return e+Y}),h(function(e){return e+1}),B())},prevPage:function(){R&&(c(function(e){return e-Y}),h(function(e){return e-1}),q())},hasNext:L,hasPrev:R},children:(0,z.jsx)(td,tU(tH({enableSearch:!0,handleSearch:function(e){c(0),o(e)},searchPlaceholder:b("collection-product-table-search-products","Search Products")},M()),{className:"h-full",children:(0,z.jsx)(td.Body,tU(tH({},T()),{children:I.map(function(e){return D(e),(0,z.jsx)(td.Row,tU(tH({color:"inherit"},e.getRowProps()),{className:"px-base",children:e.cells.map(function(e,t){return e.render("Cell",{index:t})})}))})}))}))}),g&&(0,z.jsx)(e_,{onDelete:(t=function(){return function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,function(e){return[2,k()]})},function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function o(e){tq(a,n,i,o,l,"next",e)}function l(e){tq(a,n,i,o,l,"throw",e)}o(void 0)})}),handleClose:function(){return x(!g)},heading:b("collection-product-table-remove-product-from-collection","Remove product from collection"),successText:b("collection-product-table-product-removed-from-collection","Product removed from collection")})]})};var tY=r(78692),t$=function(e){var t=JSON.parse(JSON.stringify(e));if("status"in t&&"message"in t)return{status:t.status,message:t.message}};function tQ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function tK(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function tZ(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function o(e){tK(a,n,i,o,l,"next",e)}function l(e){tK(a,n,i,o,l,"throw",e)}o(void 0)})}}function tJ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tX(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){tJ(e,t,r[t])})}return e}function t0(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function t1(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return tQ(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tQ(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t2(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}let t3=function(){var e,t,r=(0,H.useParams)().id,n=(0,J.useAdminCollection)(r),i=n.collection,a=n.isLoading,o=n.error,l=n.refetch,s=(0,ei.Bd)().t,c=(0,J.useAdminDeleteCollection)(r),u=(0,J.useAdminUpdateCollection)(r),d=t1((0,U.useState)(!1),2),f=d[0],p=d[1],m=t1((0,U.useState)(!1),2),h=m[0],y=m[1],b=t1((0,U.useState)(!1),2),v=b[0],g=b[1],x=(0,H.useNavigate)(),j=(0,eC.A)(),w=t1((0,U.useState)(0),2),O=w[0],S=w[1],P=function(){c.mutate(void 0,{onSuccess:function(){return x("/a/collections")}})},C=(e=tZ(function(e,t){var r;return t2(this,function(n){switch(n.label){case 0:if(n.trys.push([0,5,,6]),!(e.length>0))return[3,2];return[4,tF.collections.addProducts(null==i?void 0:i.id,{product_ids:e})];case 1:n.sent(),n.label=2;case 2:if(!(t.length>0))return[3,4];return[4,tF.collections.removeProducts(null==i?void 0:i.id,{product_ids:t})];case 3:n.sent(),n.label=4;case 4:return g(!1),j(s("details-success","Success"),s("details-updated-products-in-collection","Updated products in collection"),"success"),l(),[3,6];case 5:return r=n.sent(),j(s("details-error","Error"),(0,eA.u)(r),"error"),[3,6];case 6:return[2]}})}),function(t,r){return e.apply(this,arguments)});(0,U.useEffect)(function(){var e;(null==i?void 0:null===(e=i.products)||void 0===e?void 0:e.length)&&S(O+1)},[null==i?void 0:i.products]);var A=(0,tY.X)().getWidgets;if(o){var N=t$(o);if(N&&404===N.status)return x("/404"),null;throw o}return a||!i?(0,z.jsx)("div",{className:"flex h-[calc(100vh-64px)] w-full items-center justify-center",children:(0,z.jsx)(X.A,{variant:"secondary"})}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("div",{className:"flex flex-col",children:[(0,z.jsx)(eo,{className:"mb-xsmall",path:"/a/products?view=collections",label:s("details-back-to-collections","Back to Collections")}),(0,z.jsxs)("div",{className:"gap-y-xsmall flex flex-col",children:[A("product_collection.details.before").map(function(e,t){return(0,z.jsx)(es.A,{entity:i,injectionZone:"product_collection.details.before",widget:e},t)}),(0,z.jsx)("div",{className:"rounded-rounded py-large px-xlarge border-grey-20 bg-grey-0 border",children:(0,z.jsxs)("div",{children:[(0,z.jsxs)("div",{children:[(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,z.jsx)("h2",{className:"inter-xlarge-semibold mb-2xsmall",children:i.title}),(0,z.jsx)(em,{forceDropdown:!0,actions:[{label:s("details-edit-collection","Edit Collection"),onClick:function(){return p(!0)},icon:(0,z.jsx)(ec,{size:"20"})},{label:s("details-delete","Delete"),onClick:function(){return y(!h)},variant:"danger",icon:(0,z.jsx)(eu,{size:"20"})}]})]}),(0,z.jsxs)("p",{className:"inter-small-regular text-grey-50",children:["/",i.handle]})]}),i.metadata&&(0,z.jsxs)("div",{className:"mt-large gap-y-base flex flex-col",children:[(0,z.jsx)("h3",{className:"inter-base-semibold",children:s("details-metadata","Metadata")}),(0,z.jsx)("div",{children:(0,z.jsx)(eP,{data:i.metadata})})]})]})}),(0,z.jsxs)(eM,{title:"Products",actions:[{label:s("details-edit-products","Edit Products"),icon:(0,z.jsx)(ec,{size:"20"}),onClick:function(){return g(!v)}}],children:[(0,z.jsx)("p",{className:"text-grey-50 inter-base-regular mt-xsmall mb-base",children:s("details-products-in-this-collection","Products in this collection")}),i&&(0,z.jsx)(tW,{collectionId:i.id,refetchCollection:l},O)]}),A("product_collection.details.after").map(function(e,t){return(0,z.jsx)(es.A,{entity:i,injectionZone:"product_collection.details.after",widget:e},t)}),(0,z.jsx)(eT,{data:i,title:s("details-raw-collection","Raw collection")})]}),(0,z.jsx)(el,{})]}),f&&(0,z.jsx)(e6,{onClose:function(){return p(!f)},onSubmit:function(e,t){var r={title:e.title,handle:e.handle};if(t){var n,a=Object.keys(null!==(n=null==i?void 0:i.metadata)&&void 0!==n?n:{}).reduce(function(e,t){return t0(tX({},e),tJ({},t,null))},{}),o=t.reduce(function(e,t){var r;return t0(tX({},e),tJ({},t.key,null!==(r=t.value)&&void 0!==r?r:null))},a);r.metadata=o}u.mutate(r,{onSuccess:function(){p(!1),l()}})},isEdit:!0,collection:i}),h&&(0,z.jsx)(e_,{handleClose:function(){return y(!h)},heading:s("details-delete-collection","Delete collection"),successText:s("details-successfully-deleted-collection","Successfully deleted collection"),onDelete:tZ(function(){return t2(this,function(e){return[2,P()]})}),confirmText:s("details-yes-delete","Yes, delete")}),v&&(0,z.jsx)(tC,{onClose:function(){return g(!1)},onSubmit:C,existingRelations:null!==(t=null==i?void 0:i.products)&&void 0!==t?t:[]})]})},t5=function(){var e=(0,(0,V.Y)().getNestedRoutes)("/collections");return(0,z.jsxs)(H.Routes,{children:[(0,z.jsx)(H.Route,{path:"/:id",element:(0,z.jsx)(t3,{})}),e.map(function(e,t){return(0,z.jsx)(H.Route,{path:e.path,element:(0,z.jsx)(Z,{route:e,previousPath:"/collections"})},t)})]})};var t6=r(2543),t4=r(55373),t8=r.n(t4);let t7=function(e){e.size;var t,r,n=e.color,i=void 0===n?"currentColor":n,a=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["size","color"]);return(0,z.jsxs)("svg",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a),r=r={children:[(0,z.jsx)("path",{d:"M15.4444 17H4.55556C3.7 17 3 16.35 3 15.5556V5.44444C3 4.65 3.7 4 4.55556 4H15.4444C16.3 4 17 4.65 17 5.44444V15.5556C17 16.35 16.3 17 15.4444 17Z",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M13 2.43994V3.43994",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M7 2.43994V3.43994",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M10 10.7632C11.1046 10.7632 12 9.86775 12 8.76318C12 7.65861 11.1046 6.76318 10 6.76318C8.89543 6.76318 8 7.65861 8 8.76318C8 9.86775 8.89543 10.7632 10 10.7632Z",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M14 14.2979C12.88 13.6312 11.52 13.2979 10 13.2979C8.48 13.2979 7.12 13.6979 6 14.2979",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))};var t9=r(95093),re=r.n(t9),rt=function(e){var t=["bg-fuschia-40","bg-pink-40","bg-orange-40","bg-teal-40","bg-cyan-40","bg-blue-40","bg-indigo-40"];return t[e%t.length]},rr=r(63597);let rn=function(e){var t=e.color,r=e.customer,n=r.first_name||r.last_name?"".concat(r.first_name," ").concat(r.last_name):r.email?r.email:"-";return(0,z.jsxs)("div",{className:"flex w-full items-center py-1.5",children:[(0,z.jsx)("div",{className:"h-[24px] w-[24px]",children:(0,z.jsx)(rr.A,{user:r,color:void 0===t?"bg-grey-80":t})}),(0,z.jsx)("span",{className:"w-40 truncate pl-2.5",children:n})]})};var ri=function(){var e=(0,ei.Bd)().t;return[(0,U.useMemo)(function(){return[{Header:e("customer-table-date-added","Date added"),accessor:"created_at",Cell:function(e){var t=e.cell.value;return re()(t).format("DD MMM YYYY")}},{Header:e("customer-table-name","Name"),accessor:"customer",Cell:function(e){var t=e.row;return(0,z.jsx)(rn,{customer:t.original,color:rt(t.index)})}},{Header:e("customer-table-email","Email"),accessor:"email"},{Header:"",accessor:"col"},{accessor:"orders",Header:function(){return(0,z.jsx)("div",{className:"text-right",children:e("customer-table-orders","Orders")})},Cell:function(e){var t=e.cell.value;return(0,z.jsx)("div",{className:"text-right",children:(null==t?void 0:t.length)||0})}},{Header:"",accessor:"col-2"}]},[])]};function ra(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ro(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function rl(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function rs(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ra(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ra(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var rc=["q","offset","limit"],ru=function(e,t){switch(t.type){case"setFilters":var r;return rl(ro({},e),{query:null==t?void 0:null===(r=t.payload)||void 0===r?void 0:r.query});case"setQuery":return rl(ro({},e),{offset:0,query:t.payload});case"setOffset":return rl(ro({},e),{offset:t.payload});case"reset":return t.payload;default:return e}},rd=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e&&"?"===e[0]&&(e=e.substring(1));var r=(0,U.useMemo)(function(){return rf(e,t)},[e,t]),n=rs((0,U.useReducer)(ru,r),2),i=n[0],a=n[1],o=function(){var e=ro({},i.additionalFilters),t=!0,r=!1,n=void 0;try{for(var a,o=Object.entries(i)[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var l=rs(a.value,2),s=l[0],c=l[1];"query"===s?c&&"string"==typeof c&&(e.q=c):("offset"===s||"limit"===s)&&(e[s]=c)}}catch(e){r=!0,n=e}finally{try{t||null==o.return||o.return()}finally{if(r)throw n}}return e},l=function(e){var t=null!=e?e:i,r={},n=!0,a=!1,o=void 0;try{for(var l,s=Object.entries(t)[Symbol.iterator]();!(n=(l=s.next()).done);n=!0){var c=rs(l.value,2),u=c[0],d=c[1];"query"===u?d&&"string"==typeof d&&(r.q=d):("offset"===u||"limit"===u)&&(r[u]=d)}}catch(e){a=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(a)throw o}}return r},s=function(){var e=l();return t8().stringify(e,{skipNulls:!0})},c=(0,U.useMemo)(function(){return o()},[i]),u=(0,U.useMemo)(function(){return l()},[i]),d=(0,U.useMemo)(function(){return s()},[i]);return rl(ro({},i),{filters:ro({},i),representationObject:u,representationString:d,queryObject:c,paginate:function(e){e>0?a({type:"setOffset",payload:i.offset+i.limit}):a({type:"setOffset",payload:Math.max(i.offset-i.limit,0)})},getQueryObject:o,getQueryString:function(){var e=o();return t8().stringify(e,{skipNulls:!0})},setQuery:function(e){a({type:"setQuery",payload:e})},setFilters:function(e){a({type:"setFilters",payload:e})},setDefaultFilters:function(e){a({type:"setDefaults",payload:e})},reset:function(){a({type:"setFilters",payload:rl(ro({},i),{offset:0,query:null})})}})},rf=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r={offset:0,limit:15,additionalFilters:t};if(e){var n=t8().parse(e),i=!0,a=!1,o=void 0;try{for(var l,s=Object.entries(n)[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=rs(l.value,2),u=c[0],d=c[1];if(rc.includes(u))switch(u){case"offset":"string"==typeof d&&(r.offset=parseInt(d));break;case"limit":"string"==typeof d&&(r.limit=parseInt(d));break;case"q":"string"==typeof d&&(r.query=d)}}}catch(e){a=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}}return r};function rp(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function rm(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function rh(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function ry(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return rp(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rp(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var rb={expand:"orders"};let rv=function(){var e=(0,H.useNavigate)(),t=(0,ei.Bd)().t,r=rd(location.search,rb),n=r.reset,i=r.paginate,a=r.setQuery,o=r.queryObject,l=r.representationObject,s=parseInt(o.offset)||0,c=parseInt(o.limit)||15,u=(0,J.useAdminCustomers)(rm({},o),{keepPreviousData:!0}),d=u.customers,f=u.isLoading,p=u.count,m=ry((0,U.useState)(o.query),2),h=m[0],y=m[1],b=ry((0,U.useState)(0),2),v=b[0],g=b[1];(0,U.useEffect)(function(){void 0!==p&&g(Math.ceil(p/c))},[p]);var x=ry(ri(),1)[0],j=(0,e4.useTable)({columns:x,data:d||[],manualPagination:!0,initialState:{pageSize:c,pageIndex:s/c},pageCount:v,autoResetPage:!1},e4.usePagination),w=j.getTableProps,O=j.getTableBodyProps,S=j.headerGroups,P=j.rows,C=j.prepareRow,A=j.canPreviousPage,N=j.canNextPage,k=j.pageCount,_=j.gotoPage,E=j.nextPage,I=j.previousPage,D=j.state.pageIndex;(0,U.useEffect)(function(){var e=setTimeout(function(){h?(a(h),_(0)):void 0!==h&&n()},400);return function(){return clearTimeout(e)}},[h]);var T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=t8().stringify(e);window.history.replaceState("/a/discounts","","".concat("?".concat(t)))},M=function(){(0,t6.isEmpty)(l)?T({offset:0,limit:15}):T(l)};return(0,U.useEffect)(function(){M()},[l]),(0,z.jsx)(tb,{hasPagination:!0,numberOfRows:o.limit,pagingState:{count:p,offset:o.offset,pageSize:o.offset+P.length,title:t("customer-table-customers","Customers"),currentPage:D+1,pageCount:k,nextPage:function(){N&&(i(1),E())},prevPage:function(){A&&(i(-1),I())},hasNext:N,hasPrev:A},isLoading:f,children:(0,z.jsxs)(td,rh(rm({enableSearch:!0,handleSearch:y,searchValue:h},w()),{children:[(0,z.jsx)(td.Head,{children:null==S?void 0:S.map(function(e){return(0,z.jsx)(td.HeadRow,rh(rm({},e.getHeaderGroupProps()),{children:e.headers.map(function(e){return(0,z.jsx)(td.HeadCell,rh(rm({className:"w-[100px]"},e.getHeaderProps()),{children:e.render("Header")}))})}))})}),(0,z.jsx)(td.Body,rh(rm({},O()),{children:P.map(function(r){return C(r),(0,z.jsx)(td.Row,rh(rm({color:"inherit",actions:[{label:t("customer-table-edit","Edit"),onClick:function(){return e(r.original.id)},icon:(0,z.jsx)(ec,{size:20})},{label:t("customer-table-details","Details"),onClick:function(){return e(r.original.id)},icon:(0,z.jsx)(t7,{size:20})}],linkTo:r.original.id},r.getRowProps()),{children:r.cells.map(function(e,t){return(0,z.jsx)(td.Cell,rh(rm({},e.getCellProps()),{children:e.render("Cell",{index:t})}))})}))})}))]}))})};var rg=r(22703),rx=function(e){var t=e.totalAmount,r=e.totalTitle,n=e.currency,i=e.variant,a=void 0===i?"regular":i,o=e.subtitle,l=void 0===o?"":o,s=e.totalColor;return(0,z.jsxs)("div",{className:"mt-4 flex items-center justify-between",children:[(0,z.jsxs)("div",{className:"flex flex-col",children:[(0,z.jsx)("div",{className:(0,en.default)("text-grey-90",{"inter-small-regular":"regular"===a,"inter-small-semibold":"large"===a||"bold"===a}),children:r}),l&&(0,z.jsx)("div",{className:"inter-small-regular text-grey-50 mt-1",children:l})]}),(0,z.jsx)(rj,{totalAmount:t,currency:n,variant:a,totalColor:void 0===s?"text-grey-90":s})]})},rj=function(e){var t=e.totalColor,r=e.variant,n=void 0===r?"regular":r,i=e.totalAmount,a=e.currency;return(0,z.jsxs)("div",{className:"flex",children:[(0,z.jsx)("div",{className:(0,en.default)(void 0===t?"text-grey-90":t,{"inter-small-regular mr-3":"regular"===n,"inter-large-semibold":"bold"===n,"inter-xlarge-semibold":"large"===n}),children:(0,rg.Q2)({amount:i,currency:a})}),"regular"===n&&(0,z.jsx)("div",{className:"inter-small-regular text-grey-50",children:a.toUpperCase()})]})},rw=function(e){var t=e.currency,r=e.swapAmount,n=e.manualRefund,i=e.swapRefund,a=e.returnRefund,o=e.paidTotal,l=e.refundedTotal,s=(0,ei.Bd)().t;return r+n+i+a===0?null:(0,z.jsxs)(z.Fragment,{children:[!!r&&(0,z.jsx)(rx,{currency:t,totalAmount:r,totalTitle:s("templates-total-for-swaps","Total for Swaps")}),!!i&&(0,z.jsx)(rx,{currency:t,totalAmount:a,totalTitle:s("templates-refunded-for-swaps","Refunded for Swaps")}),!!a&&(0,z.jsx)(rx,{currency:t,totalAmount:a,totalTitle:s("templates-refunded-for-returns","Refunded for Returns")}),!!n&&(0,z.jsx)(rx,{currency:t,totalAmount:n,totalTitle:s("templates-manually-refunded","Manually refunded")}),(0,z.jsx)(rx,{variant:"bold",currency:t,totalAmount:o-l,totalTitle:s("templates-net-total","Net Total")})]})},rO=function(e){var t,r=e.title,n=e.addr;return n?(0,z.jsxs)("div",{className:"flex flex-col pl-6",children:[(0,z.jsx)("div",{className:"inter-small-regular text-grey-50 mb-1",children:r}),(0,z.jsxs)("div",{className:"inter-small-regular flex flex-col",children:[(0,z.jsxs)("span",{children:[null==n?void 0:n.address_1," ",null==n?void 0:n.address_2]}),(0,z.jsxs)("span",{children:[null==n?void 0:n.postal_code," ",null==n?void 0:n.city,", ",(null==n?void 0:n.province)?"".concat(n.province," "):"",null==n?void 0:null===(t=n.country_code)||void 0===t?void 0:t.toUpperCase()]})]})]}):(0,z.jsxs)("div",{className:"flex flex-col pl-6",children:[(0,z.jsx)("div",{className:"inter-small-regular text-grey-50 mb-1",children:r}),(0,z.jsx)("div",{className:"inter-small-regular flex flex-col",children:"N/A"})]})},rS=function(e){var t=e.status,r=(0,ei.Bd)().t;switch(t){case"completed":return(0,z.jsx)(tv.A,{title:r("templates-completed","Completed"),variant:"success"});case"pending":return(0,z.jsx)(tv.A,{title:r("templates-processing","Processing"),variant:"default"});case"canceled":return(0,z.jsx)(tv.A,{title:r("templates-canceled","Canceled"),variant:"danger"});case"requires_action":return(0,z.jsx)(tv.A,{title:r("templates-requires-action","Requires action"),variant:"danger"});default:return null}},rP=function(e){var t=e.status,r=(0,ei.Bd)().t;switch(t){case"captured":return(0,z.jsx)(tv.A,{title:r("templates-paid","Paid"),variant:"success"});case"awaiting":return(0,z.jsx)(tv.A,{title:r("templates-awaiting-payment","Awaiting payment"),variant:"danger"});case"canceled":return(0,z.jsx)(tv.A,{title:r("templates-canceled","Canceled"),variant:"danger"});case"requires_action":return(0,z.jsx)(tv.A,{title:r("templates-payment-status-requires-action","Requires Action"),variant:"danger"});default:return null}},rC=function(e){var t=e.status,r=(0,ei.Bd)().t;switch(t){case"shipped":return(0,z.jsx)(tv.A,{title:r("templates-shipped","Shipped"),variant:"success"});case"fulfilled":return(0,z.jsx)(tv.A,{title:r("templates-fulfilled","Fulfilled"),variant:"warning"});case"canceled":return(0,z.jsx)(tv.A,{title:r("templates-canceled","Canceled"),variant:"danger"});case"partially_fulfilled":return(0,z.jsx)(tv.A,{title:r("templates-partially-fulfilled","Partially fulfilled"),variant:"warning"});case"requires_action":return(0,z.jsx)(tv.A,{title:r("templates-fulfillment-status-requires-action","Requires Action"),variant:"danger"});case"not_fulfilled":return(0,z.jsx)(tv.A,{title:r("templates-awaiting-fulfillment","Awaiting fulfillment"),variant:"danger"});case"partially_shipped":return(0,z.jsx)(tv.A,{title:r("templates-partially-shipped","Partially Shipped"),variant:"warning"});default:return null}},rA=function(e){var t=e.trackingLink;return t.url?(0,z.jsx)("a",{style:{textDecoration:"none"},target:"_blank",href:t.url,rel:"noreferrer",children:(0,z.jsxs)("div",{className:"text-blue-60 ml-2",children:[t.tracking_number," "]})}):(0,z.jsxs)("span",{className:"text-blue-60 ml-2",children:[t.tracking_number," "]})},rN=function(e){var t,r=e.order,n=e.capturePayment,i=e.showRefundMenu,a=(0,ei.Bd)().t,o=(0,eC.A)(),l=null==r?void 0:null===(t=r.payments)||void 0===t?void 0:t.some(function(e){return"system"===e.provider_id}),s=r.payment_status,c=a("templates-capture-payment","Capture payment"),u=function(){n.mutate(void 0,{onSuccess:function(){return o(a("templates-success","Success"),a("templates-successfully-captured-payment","Successfully captured payment"),"success")},onError:function(e){return o(a("templates-error","Error"),(0,eA.u)(e),"error")}})},d=n.isLoading,f=!1;switch("awaiting"===s&&l&&(f=!0),"requires_action"===s&&l&&(f=!0),!0){case"captured"===s||"partially_refunded"===s:c=a("templates-refund","Refund"),u=function(){return i()};break;case f:u=function(){return console.log("TODO: Show alert indicating, that you are capturing a system payment")};break;case"requires_action"===s:return null}return(0,z.jsx)(W.A,{variant:"secondary",size:"small",onClick:u,loading:d,className:"min-w-[130px]",children:c})},rk=r(88807);let r_=function(e){var t,r,n=e.children,i=e.variant,a=e.className,o=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["children","variant","className"]);return(0,z.jsx)(rk.A,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({variant:null!=i?i:"default",className:(0,en.default)("outline-grey-20 flex aspect-square h-[40px] w-[40px] items-center justify-center border-2 border-white outline outline-1",a)},o),r=r={children:n},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))};var rE=r(56120);let rI=function(e){var t,r,n=e.size,i=void 0===n?"16":n,a=e.color,o=void 0===a?"currentColor":a,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["size","color"]);return(0,z.jsxs)("svg",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({width:i,height:i,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l),r=r={children:[(0,z.jsx)("path",{d:"M10 17.5C14.1421 17.5 17.5 14.1421 17.5 10C17.5 5.85786 14.1421 2.5 10 2.5C5.85786 2.5 2.5 5.85786 2.5 10C2.5 14.1421 5.85786 17.5 10 17.5Z",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M5 5L15 15",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},rD=function(e){var t,r,n=e.size,i=void 0===n?"16":n,a=e.color,o=void 0===a?"currentColor":a,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["size","color"]);return(0,z.jsxs)("svg",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({width:i,height:i,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l),r=r={children:[(0,z.jsx)("path",{d:"M13.3634 8.02713L6.73047 4.21289",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M16.723 12.9577V6.98101C16.7228 6.71899 16.6536 6.46164 16.5225 6.23479C16.3913 6.00794 16.2029 5.81956 15.9759 5.68855L10.7463 2.70018C10.5192 2.56904 10.2615 2.5 9.99921 2.5C9.73692 2.5 9.47926 2.56904 9.25212 2.70018L4.02248 5.68855C3.79556 5.81956 3.60708 6.00794 3.47596 6.23479C3.34483 6.46164 3.27566 6.71899 3.27539 6.98101V12.9577C3.27566 13.2198 3.34483 13.4771 3.47596 13.704C3.60708 13.9308 3.79556 14.1192 4.02248 14.2502L9.25212 17.2386C9.47926 17.3697 9.73692 17.4388 9.99921 17.4388C10.2615 17.4388 10.5192 17.3697 10.7463 17.2386L15.9759 14.2502C16.2029 14.1192 16.3913 13.9308 16.5225 13.704C16.6536 13.4771 16.7228 13.2198 16.723 12.9577Z",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M3.47852 6.2041L10.0006 9.97691L16.5227 6.2041",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M10 17.5004V9.96973",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))};var rT=r(5338);function rM(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var rR=function(e){var t,r=e.open,n=e.heading,i=e.text,a=e.onConfirm,o=e.onCancel,l=e.confirmText,s=e.cancelText,c=e.extraConfirmation,u=void 0!==c&&c,d=e.entityName,f=function(e){if(Array.isArray(e))return e}(t=(0,U.useState)())||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(t,2)||function(e,t){if(e){if("string"==typeof e)return rM(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rM(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),p=f[0],m=f[1];return(0,z.jsx)(eN.A,{open:r,handleClose:o,isLargeModal:!1,children:(0,z.jsxs)(eN.A.Body,{children:[(0,z.jsxs)(eN.A.Content,{className:"!py-large",children:[(0,z.jsxs)("div",{className:"flex flex-col",children:[(0,z.jsx)("span",{className:"inter-large-semibold",children:n}),(0,z.jsx)("span",{className:"inter-base-regular text-grey-50 mt-1",children:i})]}),u&&(0,z.jsxs)("div",{className:"my-base flex flex-col",children:[(0,z.jsxs)("span",{className:"inter-base-regular text-grey-50 mt-1",children:["Type the name"," ",(0,z.jsxs)("span",{className:"font-semibold",children:['"',d,'"']})," to confirm."]}),(0,z.jsx)(e1.A,{autoFocus:!0,placeholder:d,className:"mt-base",onChange:function(e){return m(e.target.value)}})]})]}),(0,z.jsx)(eN.A.Footer,{className:"border-none !pt-0",children:(0,z.jsxs)("div",{className:"flex w-full justify-end",children:[(0,z.jsx)(W.A,{variant:"secondary",className:"text-small mr-2 justify-center",size:"small",onClick:o,children:void 0===s?"Cancel":s}),(0,z.jsx)(W.A,{size:"small",className:"text-small justify-center",variant:"nuclear",onClick:a,disabled:u&&d!==p,children:void 0===l?"Yes, confirm":l})]})})]})})};let rL=function(){return function(e){var t=e.heading,r=e.text,n=e.confirmText,i=e.cancelText,a=e.extraConfirmation,o=e.entityName;return new Promise(function(e){var l=(0,rT.createRoot)(document.createElement("div")),s=!0,c=function(){s=!1,e(!0),d()},u=function(){s=!1,e(!1),d()},d=function(){l.render((0,z.jsx)(rR,{heading:t,text:r,open:s,onCancel:u,onConfirm:c,confirmText:n,cancelText:i,extraConfirmation:a,entityName:o}))};d()})}};var rz=r(77535);let rF=function(){var e=(0,(0,rz.u)().isFeatureEnabled)("stockLocationService"),t=(0,J.useAdminStockLocations)({},{enabled:e}),r=t.stock_locations,n=t.refetch;return(0,U.useEffect)(function(){e&&n()},[e,n]),{stock_locations:r,getLocationNameById:function(e){var t;return null==r?void 0:null===(t=r.find(function(t){return t.id===e}))||void 0===t?void 0:t.name}}};function rB(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}var rq=function(e){var t,r,n,i=e.setFullfilmentToShip,a=e.order,o=e.fulfillmentObj,l=rL(),s=(0,eC.A)(),c=(0,ei.Bd)().t,u=(0,J.useAdminCancelFulfillment)(a.id),d=(0,J.useAdminCancelSwapFulfillment)(a.id),f=(0,J.useAdminCancelClaimFulfillment)(a.id),p=rF().getLocationNameById,m=o.fulfillment,h=!!(null===(n=m.tracking_links)||void 0===n?void 0:n.length),y=function(){switch(!0){case!!(null==m?void 0:m.claim_order_id):return{resourceId:m.claim_order_id,resourceType:"claim"};case!!(null==m?void 0:m.swap_id):return{resourceId:m.swap_id,resourceType:"swap"};default:return{resourceId:null==a?void 0:a.id,resourceType:"order"}}},b=(t=function(){var e,t,r;return function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,function(n){switch(n.label){case 0:return t=(e=y()).resourceId,r=e.resourceType,[4,l({heading:c("templates-cancel-fulfillment-heading","Cancel fulfillment?"),text:c("templates-are-you-sure-you-want-to-cancel-the-fulfillment","Are you sure you want to cancel the fulfillment?")})];case 1:if(!n.sent())return[2];switch(r){case"swap":return[2,d.mutate({swap_id:t,fulfillment_id:m.id},{onSuccess:function(){return s(c("templates-success","Success"),c("templates-successfully-canceled-swap","Successfully canceled swap"),"success")},onError:function(e){return s(c("templates-error","Error"),(0,eA.u)(e),"error")}})];case"claim":return[2,f.mutate({claim_id:t,fulfillment_id:m.id},{onSuccess:function(){return s(c("templates-success","Success"),c("templates-successfully-canceled-claim","Successfully canceled claim"),"success")},onError:function(e){return s(c("templates-error","Error"),(0,eA.u)(e),"error")}})];default:return[2,u.mutate(m.id,{onSuccess:function(){return s(c("templates-success","Success"),c("templates-successfully-canceled-fulfillment","Successfully canceled fulfillment"),"success")},onError:function(e){return s(c("templates-error","Error"),(0,eA.u)(e),"error")}})]}return[2]}})},r=function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function o(e){rB(a,n,i,o,l,"next",e)}function l(e){rB(a,n,i,o,l,"throw",e)}o(void 0)})},function(){return r.apply(this,arguments)});return(0,z.jsxs)("div",{className:"flex w-full justify-between",children:[(0,z.jsxs)("div",{className:"flex flex-col space-y-1 py-4",children:[(0,z.jsx)("div",{className:"text-grey-90",children:m.canceled_at?c("templates-fulfillment-has-been-canceled","Fulfillment has been canceled"):c("templates-fulfilled-by-provider","{{title}} Fulfilled by {{provider}}",{title:o.title,provider:(0,t6.capitalize)(m.provider_id)})}),(0,z.jsxs)("div",{className:"text-grey-50 flex",children:[m.shipped_at?c("templates-tracking","Tracking"):c("templates-not-shipped","Not shipped"),h&&m.tracking_links.map(function(e,t){return(0,z.jsx)(rA,{trackingLink:e},t)})]}),!m.canceled_at&&m.location_id&&(0,z.jsxs)("div",{className:"flex flex-col",children:[(0,z.jsxs)("div",{className:"text-grey-50 font-semibold",children:[m.shipped_at?c("templates-shipped-from","Shipped from"):c("templates-shipping-from","Shipping from")," "]}),(0,z.jsxs)("div",{className:"flex items-center pt-2",children:[(0,z.jsx)(r_,{className:"mr-2",children:(0,z.jsx)(rE.A,{})}),p(m.location_id)]})]})]}),!m.canceled_at&&!m.shipped_at&&(0,z.jsx)("div",{className:"flex items-center space-x-2",children:(0,z.jsx)(em,{actions:[{label:c("templates-mark-shipped","Mark Shipped"),icon:(0,z.jsx)(rD,{size:"20"}),onClick:function(){return i(m)}},{label:c("templates-cancel-fulfillment","Cancel Fulfillment"),icon:(0,z.jsx)(rI,{size:"20"}),onClick:function(){return b()}}]})})]})},rH=r(6663);function rU(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function rV(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var rG=(0,U.forwardRef)(function(e,t){var r=e.label,n=e.helperText,i=e.required,a=e.errors,o=e.name,l=e.children;return(0,z.jsxs)("div",{className:"gap-y-xsmall flex w-full flex-col",ref:t,children:[r&&(0,z.jsxs)("label",{className:"inter-small-semibold text-grey-50",id:"".concat(o,"_label"),children:[r,i&&(0,z.jsx)("span",{className:"text-rose-50",children:"*"})]}),l,o&&a?(0,z.jsx)(rH.A,{errors:a,name:o,className:"-mt-0.5"}):n?(0,z.jsx)("p",{className:"inter-small-regular text-grey-50",children:n}):null]})});function rW(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function rY(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}let r$=function(e){var t=e.className,r=e.cx,n=e.children,i=e.innerRef,a=e.innerProps,o=e.isDisabled,l=e.isFocused,s=e.menuIsOpen,c=e.selectProps,u=c.size,d=c.customStyles,f=c.name;return(0,z.jsx)("div",rY(rW({ref:i},a),{id:f,className:r({control:!0,"control--is-disabled":o,"control--is-focused":l,"control--menu-is-open":s},(0,en.default)("rounded-rounded border-gray-20 bg-grey-5 focus-within:shadow-cta focus-within:border-violet-60 pl-small box-border flex overflow-hidden border p-0 transition-colors",{"h-xlarge":"sm"===u,"h-10":"md"===u||!u},t,null==d?void 0:d.control)),children:(0,z.jsx)("div",{className:(0,en.default)("flex flex-1 items-center",null==d?void 0:d.inner_control),children:n})}))};var rQ=r(68685);let rK=rQ.dK;var rZ=r(23257),rJ=r.n(rZ),rX=function(e){return"object"==typeof e&&null!==e&&"isDisabled"in e},r0=function(e){return"object"==typeof e&&null!==e&&"label"in e},r1=function(e){return"object"==typeof e&&null!==e&&"prefix"in e},r2=function(e,t){var r=t.inputValue;if(r0(e))return"object"==typeof e&&null!==e&&"__isNew__"in e?e.label:(0,z.jsx)(rJ(),{searchWords:[r],textToHighlight:e.label,highlightClassName:"bg-orange-10"})};let r3=function(e){var t,r,n=e.size,i=void 0===n?"20":n,a=e.color,o=void 0===a?"currentColor":a,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["size","color"]);return(0,z.jsxs)("svg",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({width:i,height:i,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l),r=r={children:[(0,z.jsx)("path",{d:"M10.8335 4.16663H2.50016",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M10.8335 7.5H5.00016",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M10.8335 10.8334H7.50016",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M17.5 14.1666L15 16.6666L12.5 14.1666",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M15 15V3.33337",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))};function r5(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function r6(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function r4(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var r8=function(e){var t,r=e.cx,n=e.onChange,i=e.options,a=e.value,o=function(e){if(Array.isArray(e))return e}(t=(0,U.useState)(!1))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(t,2)||function(e,t){if(e){if("string"==typeof e)return r5(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return r5(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),l=o[0],s=o[1],c=(0,U.useRef)(null),u=(0,U.useMemo)(function(){if(Array.isArray(a)){var e=i.filter(function(e){return!rX(e)});return a.length===e.length}return!1},[i,a]),d=(0,U.useCallback)(function(){if(u)n([],{action:"deselect-option",option:[]});else{var e=i.filter(function(e){return!rX(e)});n(e,{action:"select-option",option:e})}},[u,n,i]);return(0,U.useEffect)(function(){return s(null!==document.activeElement&&document.activeElement===c.current),function(){s(!1)}},[]),(0,z.jsxs)(W.A,{ref:c,variant:"secondary",size:"small",className:r({option:!0,"option--is-focused":l},(0,en.default)("mx-base mb-2xsmall h-xlarge")),type:"button",onClick:d,children:[(0,z.jsx)(r3,{size:16}),(0,z.jsx)("span",{className:"inter-small-semibold",children:u?"Deselect All":"Select All"})]})},r7=function(e){var t=e.isSelected,r=e.isDisabled;return(0,z.jsx)("div",{className:(0,en.default)("w-base h-base text-grey-0 border-grey-30 rounded-base flex justify-center border transition-colors",{"bg-violet-60 border-violet-60":t,"bg-grey-5":r}),children:(0,z.jsx)("span",{className:"self-center",children:t&&(0,z.jsx)(e7,{size:10})})})},r9=r(84260);let ne={ClearIndicator:function(e){var t=e.innerProps,r=e.className,n=e.cx,i=e.children;return(0,z.jsx)("div",rY(rW({},t),{role:"button","aria-label":"Clear selected options",className:n({indicator:!0,"clear-indicator":!0},r),children:i||(0,z.jsx)(eH.A,{size:16})}))},DropdownIndicator:function(e){var t=e.innerProps,r=e.cx,n=e.children,i=e.className,a=e.selectProps.menuIsOpen;return(0,z.jsx)("div",rY(rW({},t),{className:r({indicator:!0,"dropdown-indicator":!0},(0,en.default)("transition-all",{"rotate-180":a},i)),children:n||(0,z.jsx)(ej.A,{size:16})}))},LoadingIndicator:function(e){var t=e.innerProps,r=e.className,n=e.cx;return(0,z.jsx)("div",rY(rW({},t),{className:n({indicator:!0,"loading-indicator":!0},r),children:(0,z.jsx)(X.A,{size:"small",variant:"secondary"})}))},SelectContainer:function(e){var t=e.innerProps,r=e.selectProps,n=r.isDisabled,i=r.isRtl,a=e.hasValue,o=e.cx,l=e.className,s=e.children;return(0,z.jsx)("div",rV(rU({},t),{className:o({"--is-disabled":n,"--is-rtl":i,"--has-value":a},(0,en.default)("pointer-events-auto relative",{"text-grey-40":n},l)),children:s}))},Control:r$,Input:function(e){var t,r,n=e.className,i=e.cx,a=e.value,o=e.inputClassName;return(0,z.jsx)("div",{"data-value":a||"",className:i({"input-container":!0},n),children:(0,z.jsx)(rK.Input,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),r=r={className:i({input:!0,"input--is-disabled":!!e.isDisabled},(0,en.default)("inter-base-regular text-grey-90 caret-violet-60",o))},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))})},Placeholder:function(e){var t,r,n=e.innerProps,i=e.children,a=e.className,o=e.cx;return(0,z.jsx)("div",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},n),r=r={className:o({placeholder:!0},(0,en.default)("inter-base-regular text-grey-50 absolute top-1/2 -translate-y-1/2 select-none",a)),children:i},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},Menu:function(e){var t=e.className,r=e.cx,n=e.children,i=e.innerProps,a=e.innerRef,o=e.placement,l=e.selectProps,s=l.onMenuClose,c=l.menuIsOpen,u=l.customStyles,d=l.styles;return(0,U.useEffect)(function(){var e=function(){c&&s()};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}},[c,s]),(0,z.jsx)("div",r4(r6({},i),{ref:a,style:r6({},null==d?void 0:d.menu),className:r({menu:!0},(0,en.default)("border-border bg-grey-0 rounded-rounded border-grey-20 shadow-dropdown mb-base absolute z-[60] w-full overflow-hidden border",{"top-[calc(100%+8px)]":"bottom"===o,"bottom-full":"top"===o},t,null==u?void 0:u.menu)),children:n}))},MenuList:function(e){var t=e.className,r=e.children,n=e.cx,i=e.isMulti,a=e.selectProps,o=a.selectAll,l=a.value,s=a.onChange,c=e.options;return(0,z.jsxs)(rK.MenuList,r4(r6({},e),{className:n({"menu-list":!0,"menu-list--is-multi":i},(0,en.default)("py-xsmall no-scrollbar flex flex-col overflow-y-auto",t)),children:[i&&o&&(0,z.jsx)(r8,{cx:n,onChange:s,options:c,value:l}),r]}))},Option:function(e){var t,r=e.isSelected,n=e.isDisabled,i=e.isFocused,a=e.children,o=e.cx,l=e.className,s=e.innerProps,c=e.innerRef,u=e.selectProps,d=u.hideSelectedOptions,f=u.isMulti,p=u.size,m=u.truncateOption,h=r1(e.data)?e.data.prefix:null,y="object"==typeof(t=e.data)&&null!==t&&"suffix"in t?e.data.suffix:null;return(0,z.jsxs)("div",r4(r6({role:"button",className:o({option:!0,"option--is-selected":r,"option--is-disabled":n,"option--is-focused":i},(0,en.default)("py-xsmall px-base hover:bg-grey-5 flex items-center justify-between transition-colors",{"text-grey-30 cursor-not-allowed select-none":n,"bg-grey-10":i&&!n,hidden:d&&r},{"h-xlarge":"sm"===p,"min-h-10":"md"===p||!p},l)),ref:c,"data-diabled":!!n||void 0,"aria-disabled":!!n||void 0,tabIndex:n?-1:0},s),{children:[(0,z.jsxs)("div",{className:"gap-x-small flex flex-1 items-center",children:[f&&(0,z.jsx)(r7,{isSelected:r,isDisabled:n}),(0,z.jsxs)("div",{className:(0,en.default)("gap-x-xsmall inter-base-regular flex flex-1 items-center justify-between",{truncate:!!m}),children:[h&&(0,z.jsx)("span",{className:"inter-base-semibold",children:h}),(0,z.jsx)("span",{className:"w-full",children:a}),y&&(0,z.jsx)("span",{className:"inter-base-regular text-grey-50 justify-self-end",children:y})]})]}),!f&&(0,z.jsx)("div",{className:"ml-xsmall w-5",children:r&&(0,z.jsx)(e7,{size:16})})]}))},SingleValue:function(e){var t,r,n,i,a,o,l=e.innerProps,s=e.children,c=e.cx,u=e.className,d=e.isDisabled,f=e.data,p=e.getValue,m=r1(f)?f.prefix:null,h=(r=p()).length&&null!==(t=r[0].label)&&void 0!==t?t:null,y=(0,U.useRef)(null);return(0,z.jsx)(r9.A,{className:(0,en.default)({hidden:!((n=y.current)&&null!==(i=n.offsetParent)&&void 0!==i&&i.offsetWidth&&n.offsetParent.offsetWidth<n.scrollWidth)||!h}),delayDuration:1e3,content:(0,z.jsx)("div",{children:h}),children:(0,z.jsx)("div",(a=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},l),o=o={ref:y,className:c({"single-value":!0,"single-value--is-disabled":d},(0,en.default)("absolute top-1/2 -translate-y-1/2 overflow-hidden overflow-ellipsis whitespace-nowrap",u)),children:(0,z.jsxs)("div",{className:"gap-x-xsmall inter-base-regular flex items-center",children:[m&&(0,z.jsx)("span",{className:"inter-base-semibold",children:m}),s]})},Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(o)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(o)).forEach(function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(o,e))}),a))})},MultiValue:function(){return null},MultiValueContainer:function(){return null},MultiValueRemove:function(){return null},ValueContainer:function(e){var t=e.className,r=e.children,n=e.cx,i=e.innerProps,a=e.isMulti,o=e.hasValue,l=e.selectProps,s=l.value,c=l.inputValue,u=l.label,d=l.selectedPlaceholder;return a&&Array.isArray(s)?(0,z.jsxs)("div",rV(rU({},i),{className:n({"value-container":!0,"value-container--is-multi":a,"value-container--has-value":o},(0,en.default)("scrolling-touch group relative flex flex-1 flex-wrap items-center overflow-hidden",{"gap-2xsmall":a},t)),children:[(null==s?void 0:s.length)>0&&(0,z.jsx)("div",{className:"bg-grey-20 text-grey-50 px-small inter-small-semibold rounded-rounded gap-x-2xsmall flex h-7 cursor-default items-center",children:(0,z.jsx)("span",{children:s.length})}),(0,z.jsxs)("div",{className:"relative grow",children:[r,(null==s?void 0:s.length)>0&&""===c&&(0,z.jsx)("span",{className:"inter-base-regular text-grey-50 absolute top-1/2 -translate-y-1/2",children:d||u||"Selected"})]})]})):(0,z.jsx)("div",rV(rU({},i),{className:n({"value-container":!0,"value-container--is-multi":a,"value-container--has-value":o},(0,en.default)("scrolling-touch relative flex flex-1 flex-wrap items-center overflow-hidden",{"gap-2xsmall":a},t)),children:r}))},IndicatorsContainer:function(e){var t=e.className,r=e.cx,n=e.innerProps,i=e.children;return(0,z.jsx)("div",rV(rU({},n),{className:r({"indicators-container":!0},(0,en.default)("text-grey-50 gap-x-small px-small flex items-center",t)),children:i}))},LoadingMessage:function(e){var t=e.innerProps,r=e.cx,n=e.className,i=e.selectProps.size,a=function(){return(0,z.jsx)("div",{className:(0,en.default)("px-base hover:bg-grey-5 flex w-full items-center transition-colors",{"h-xlarge":"sm"===i,"h-10":"md"===i||!i}),children:(0,z.jsx)("div",{className:"bg-grey-10 h-xsmall rounded-rounded w-1/4 animate-pulse"})})};return(0,z.jsxs)("div",r4(r6({},t),{className:r({"menu-notice":!0,"menu-notice--loading":!0},(0,en.default)("flex flex-col",n)),children:[(0,z.jsx)(a,{}),(0,z.jsx)(a,{}),(0,z.jsx)(a,{})]}))},IndicatorSeparator:null};var nt=r(2404),nr=r.n(nt);function nn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ni(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var na=function(e){var t,r=e.components,n=e.isMulti,i=(e.closeMenuOnScroll,e.hideSelectedOptions),a=e.closeMenuOnSelect,o=e.label,l=e.size,s=e.options,c=e.onChange,u=e.styles,d=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["components","isMulti","closeMenuOnScroll","hideSelectedOptions","closeMenuOnSelect","label","size","options","onChange","styles"]),f=function(e){if(Array.isArray(e))return e}(t=(0,U.useState)(s||[]))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(t,2)||function(e,t){if(e){if("string"==typeof e)return nn(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nn(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),p=f[0],m=f[1],h=function(e){var t=e||[],r=p.filter(function(e){return!t.find(function(t){return nr()(t,e)})});m(t.sort(function(e,t){return r0(e)&&r0(t)?e.label>t.label?1:t.label>e.label?-1:0:0}).concat(r))};return(0,U.useEffect)(function(){n&&s?h(d.value):m(s||[])},[s,d.value,n]),ni({label:o,components:ni({},ne,void 0===r?{}:r),styles:ni({menuPortal:function(e){var t,r;return t=ni({},e),r=r={zIndex:60},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t}},u),isMulti:n,closeMenuOnScroll:!0,closeMenuOnSelect:void 0!==a?a:!0!==n,hideSelectedOptions:void 0!==i&&i,menuPosition:"fixed",maxMenuHeight:"sm"===l?154:188,formatOptionLabel:r2,size:l,options:p,onChange:function(e,t){n&&h(e),c&&c(e,t)}},d)},no=(0,U.forwardRef)(function(e,t){var r,n,i,a=na(e),o=a.label,l=a.required,s=a.helperText,c=a.name,u=a.errors,d=(0,U.useRef)(null),f=(0,U.useContext)(eN.V).portalRef;return(0,z.jsx)(rG,{ref:d,label:o,htmlFor:c,helperText:s,required:l,name:c,errors:u,children:(0,z.jsx)(rQ.Ay,(r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({"aria-labelledby":"".concat(c,"_label"),ref:t,name:c},a),n=n={menuPortalTarget:(null==f?void 0:null===(i=f.current)||void 0===i?void 0:i.lastChild)||null,menuShouldBlockScroll:!0},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))}),r))})});function nl(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ns(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function nc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return nl(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nl(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}let nu=function(e){var t,r,n,i,a,o,l=e.order,s=e.onDismiss,c=(0,ei.Bd)().t,u=nc(U.useState(""),2),d=u[0],f=u[1],p=(0,e8.d)(d,400),m=(0,J.useAdminCustomers)({q:p,has_account:!0,limit:30,offset:0}).customers,h=(0,eC.A)(),y=nc(U.useState(null),2),b=y[0],v=y[1],g=(0,J.useAdminUpdateOrder)(l.id),x=g.mutate,j=g.isLoading,w=(0,J.useAdminCustomer)((null==b?void 0:b.value)||""),O=w.customer,S=w.isLoading,P=(t=function(){return function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,function(e){return S||!O||(O.id===l.customer_id?(h(c("transfer-orders-modal-info","Info"),c("transfer-orders-modal-customer-is-already-the-owner-of-the-order","Customer is already the owner of the order"),"info"),s()):x({customer_id:null==O?void 0:O.id,email:O.email},{onSuccess:function(){h(c("transfer-orders-modal-success","Success"),c("transfer-orders-modal-successfully-transferred-order-to-different-customer","Successfully transferred order to different customer"),"success"),s()},onError:function(){h(c("transfer-orders-modal-error","Error"),c("transfer-orders-modal-could-not-transfer-order-to-different-customer","Could not transfer order to different customer"),"error")}})),[2]})},r=function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function o(e){ns(a,n,i,o,l,"next",e)}function l(e){ns(a,n,i,o,l,"throw",e)}o(void 0)})},function(){return r.apply(this,arguments)}),C=function(e){if(e)return{value:e.id,label:e.first_name&&e.last_name?"".concat(e.first_name," ").concat(e.last_name," - ").concat(e.email):e.first_name?"".concat(e.first_name," - ").concat(e.email):e.last_name?"".concat(e.last_name," - ").concat(e.email):"".concat(e.email)}},A=U.useMemo(function(){return(null==m?void 0:m.map(function(e){return C(e)}).filter(function(e){return!!e}))||[]},[m]);return(0,z.jsx)(eN.A,{handleClose:s,children:(0,z.jsxs)(eN.A.Body,{children:[(0,z.jsx)(eN.A.Header,{handleClose:s,children:(0,z.jsx)("h2",{className:"inter-xlarge-semibold",children:c("transfer-orders-modal-transfer-order","Transfer order")})}),(0,z.jsx)(eN.A.Content,{children:(0,z.jsxs)("div",{className:"space-y-xlarge flex flex-col",children:[(0,z.jsxs)("div",{className:"space-y-xsmall",children:[(0,z.jsx)("h3",{className:"inter-base-semibold",children:c("transfer-orders-modal-order","Order")}),(0,z.jsxs)("div",{className:"border-grey-20 rounded-rounded py-xsmall flex items-center justify-between border px-2.5",children:[(0,z.jsx)(rk.A,{variant:"default",children:(0,z.jsx)("span",{className:"text-grey-60",children:"#".concat(l.display_id)})}),(0,z.jsx)("span",{className:"text-grey-50",children:re()(new Date(l.created_at)).format("MMM D, H:mm A")}),(0,z.jsx)(rP,{status:l.payment_status}),(0,z.jsx)(rC,{status:l.fulfillment_status}),(0,z.jsx)(rj,{currency:l.currency_code,totalAmount:l.total})]})]}),(0,z.jsxs)("div",{className:"grid w-full grid-cols-2",children:[(0,z.jsxs)("div",{className:"flex flex-col",children:[(0,z.jsx)("span",{className:"inter-base-semibold",children:c("transfer-orders-modal-current-owner","Current Owner")}),(0,z.jsx)("span",{className:"inter-base-regular",children:c("transfer-orders-modal-the-customer-currently-related-to-this-order","The customer currently related to this order")})]}),(0,z.jsx)("div",{className:"flex items-center",children:(0,z.jsx)(no,{isDisabled:!0,value:C({id:l.customer_id,email:l.email,first_name:l.customer.first_name||(null===(n=l.billing_address)||void 0===n?void 0:n.first_name)||(null===(i=l.shipping_address)||void 0===i?void 0:i.first_name)||void 0,last_name:l.customer.last_name||(null===(a=l.billing_address)||void 0===a?void 0:a.last_name)||(null===(o=l.shipping_address)||void 0===o?void 0:o.last_name)||void 0})})})]}),(0,z.jsxs)("div",{className:"grid w-full grid-cols-2",children:[(0,z.jsxs)("div",{className:"flex flex-col",children:[(0,z.jsx)("span",{className:"inter-base-semibold",children:c("transfer-orders-modal-new-owner","New Owner")}),(0,z.jsx)("span",{className:"inter-base-regular",children:c("transfer-orders-modal-the-customer-to-transfer-this-order-to","The customer to transfer this order to")})]}),(0,z.jsx)("div",{className:"flex items-center",children:(0,z.jsx)(no,{value:b,onChange:function(e){v(e)},isMulti:!1,options:A,isSearchable:!0,onInputChange:function(e){f(e)},truncateOption:!0})})]})]})}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsx)("div",{className:"flex w-full justify-end",children:(0,z.jsxs)("div",{className:"gap-x-xsmall flex",children:[(0,z.jsx)(W.A,{onClick:s,size:"small",className:"border-grey-20 border",variant:"ghost",children:c("transfer-orders-modal-cancel","Cancel")}),(0,z.jsx)(W.A,{type:"submit",size:"small",variant:"primary",loading:j,disabled:j||!b||S||!O,onClick:P,children:c("transfer-orders-modal-confirm","Confirm")})]})})})]})})};function nd(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var nf=function(e){var t,r=function(e){if(Array.isArray(e))return e}(t=(0,U.useState)(0))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(t,2)||function(e,t){if(e){if("string"==typeof e)return nd(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nd(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),n=r[0],i=r[1],a=(0,U.useRef)(new ResizeObserver(function(e){i(e[0].contentRect.width)}));return(0,U.useEffect)(function(){var t=e.current,r=a.current;return t&&r&&r.observe(t),function(){r&&t&&r.unobserve(t)}},[e,a]),n};let np=function(e){var t,r,n=e.size,i=void 0===n?"24":n,a=e.color,o=void 0===a?"currentColor":a,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["size","color"]);return(0,z.jsxs)("svg",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({width:i,height:i,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l),r=r={children:[(0,z.jsx)("path",{d:"M18.2222 4H5.77778C4.79594 4 4 4.79594 4 5.77778V18.2222C4 19.2041 4.79594 20 5.77778 20H18.2222C19.2041 20 20 19.2041 20 18.2222V5.77778C20 4.79594 19.2041 4 18.2222 4Z",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M9.5 11C10.3284 11 11 10.3284 11 9.5C11 8.67157 10.3284 8 9.5 8C8.67157 8 8 8.67157 8 9.5C8 10.3284 8.67157 11 9.5 11Z",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M20 15.0909L15.625 11L6 20",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},nm=function(){return(0,z.jsx)("div",{className:"rounded-soft bg-grey-5 flex h-full w-full items-center justify-center",children:(0,z.jsx)(np,{size:12})})};var nh=function(e,t){switch(e){case"captured":return(0,z.jsx)(tv.A,{variant:"success",title:t("customer-orders-table-paid","Paid")});case"awaiting":return(0,z.jsx)(tv.A,{variant:"warning",title:t("customer-orders-table-awaiting","Awaiting")});case"requires":return(0,z.jsx)(tv.A,{variant:"danger",title:t("customer-orders-table-requires-action","Requires action")});default:return(0,z.jsx)(tv.A,{variant:"primary",title:t("customer-orders-table-n-a","N/A")})}},ny=function(e,t){switch(e){case"fulfilled":return(0,z.jsx)(tv.A,{variant:"success",title:t("customer-orders-table-fulfilled","Fulfilled")});case"shipped":return(0,z.jsx)(tv.A,{variant:"success",title:t("customer-orders-table-shipped","Shipped")});case"not_fulfilled":return(0,z.jsx)(tv.A,{variant:"default",title:t("customer-orders-table-not-fulfilled","Not fulfilled")});case"partially_fulfilled":return(0,z.jsx)(tv.A,{variant:"warning",title:t("customer-orders-table-partially-fulfilled","Partially fulfilled")});case"partially_shipped":return(0,z.jsx)(tv.A,{variant:"warning",title:t("customer-orders-table-partially-shipped","Partially shipped")});case"requires":return(0,z.jsx)(tv.A,{variant:"danger",title:t("customer-orders-table-requires-action","Requires action")});default:return(0,z.jsx)(tv.A,{variant:"primary",title:t("customer-orders-table-n-a","N/A")})}},nb=function(){var e=(0,ei.Bd)().t;return(0,U.useMemo)(function(){return[{Header:e("customer-orders-table-order","Order"),accessor:"display_id",Cell:function(e){var t=e.value;return(0,z.jsxs)("span",{className:"text-grey-90",children:["#",t]})}},{accessor:"items",Cell:function(t){var r=t.value,n=(0,U.useRef)(null),i=nf(n),a=(0,U.useMemo)(function(){if(!r||0===r.length)return{visibleItems:[],remainder:0};var e=Math.max(Math.floor(i/20)-1,1);return{visibleItems:r.slice(0,e),remainder:r.length-e}},[r,i]),o=a.visibleItems,l=a.remainder;return r?(0,z.jsxs)("div",{className:"gap-x-2xsmall flex items-center",children:[(0,z.jsx)("div",{ref:n,className:"gap-x-xsmall flex",children:o.map(function(e){return(0,z.jsx)(r9.A,{content:e.title,children:(0,z.jsx)("div",{className:"rounded-rounded flex h-[35px] w-[25px] items-center justify-center overflow-hidden",children:e.thumbnail?(0,z.jsx)("img",{className:"object-cover",src:e.thumbnail,alt:e.title}):(0,z.jsx)(nm,{})})},e.id)})}),l>0&&(0,z.jsx)("span",{className:"text-grey-40 inter-small-regular",children:e("customer-orders-table-remainder-more","+ {{remainder}} more",{remainder:l})})]}):null}},{Header:e("customer-orders-table-date","Date"),accessor:"created_at",Cell:function(e){var t=e.value;return re()(t).format("DD MMM YYYY hh:mm")}},{Header:e("customer-orders-table-fulfillment","Fulfillment"),accessor:"fulfillment_status",Cell:function(t){return ny(t.value,e)}},{Header:e("customer-orders-table-status","Status"),accessor:"payment_status",Cell:function(t){return nh(t.value,e)}},{Header:function(){return(0,z.jsx)("div",{className:"text-right",children:e("customer-orders-table-total","Total")})},accessor:"total",Cell:function(e){var t=e.value,r=e.row.original.currency_code;return(0,z.jsx)("div",{className:"text-right",children:(0,rg.PA)({amount:t,currencyCode:r})})}}]},[])};function nv(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ng(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function nx(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function nj(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return nv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nv(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}let nw=function(e){var t=e.id,r=(0,ei.Bd)().t,n=nj((0,U.useState)(null),2),i=n[0],a=n[1],o=nj((0,U.useState)(0),2),l=o[0],s=o[1],c=(0,J.useAdminOrders)({customer_id:t,offset:l,limit:15},{keepPreviousData:!0}),u=c.orders,d=c.isLoading,f=c.count,p=nb(),m=(0,e4.useTable)({columns:p,data:u||[],manualPagination:!0,initialState:{pageSize:15,pageIndex:Math.floor(l/15)},pageCount:Math.ceil(f||0),autoResetPage:!1},e4.usePagination),h=m.getTableProps,y=m.getTableBodyProps,b=m.headerGroups,v=m.rows,g=m.prepareRow,x=m.canPreviousPage,j=m.canNextPage,w=m.pageCount,O=m.nextPage,S=m.previousPage,P=m.state.pageIndex;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(tb,{hasPagination:!0,isLoading:d,pagingState:{count:f,offset:l,pageSize:l+v.length,title:r("customer-orders-table-orders","Orders"),currentPage:P+1,pageCount:w,nextPage:function(){j&&(s(l+15),O())},prevPage:function(){x&&(s(l-15),S())},hasNext:j,hasPrev:x},children:(0,z.jsxs)(td,nx(ng({},h()),{children:[(0,z.jsx)(td.Head,{children:b.map(function(e){return(0,z.jsx)(td.HeadRow,nx(ng({},e.getHeaderGroupProps()),{children:e.headers.map(function(e){return(0,z.jsx)(td.HeadCell,nx(ng({},e.getHeaderProps()),{children:e.render("Header")}))})}))})}),(0,z.jsx)(td.Body,nx(ng({},y()),{children:v.map(function(e){return g(e),(0,z.jsx)(td.Row,nx(ng({forceDropdown:!0,actions:[{label:r("customer-orders-table-transfer-order","Transfer order"),icon:(0,z.jsx)(Y.A,{size:"20"}),onClick:function(){a(e.original)}}]},e.getRowProps()),{linkTo:"/a/orders/".concat(e.original.id),children:e.cells.map(function(e){return(0,z.jsx)(td.Cell,nx(ng({},e.getCellProps()),{children:e.render("Cell")}))})}))})}))]}))}),i&&(0,z.jsx)(nu,{onDismiss:function(){return a(null)},order:i})]})};var nO=r(47400);function nS(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function nP(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var nC=function(e){return{first_name:e.first_name,email:e.email,last_name:e.last_name,phone:e.phone,metadata:eJ(e.metadata)}};let nA=function(e){var t=e.handleClose,r=e.customer,n=(0,ei.Bd)().t,i=(0,eR.mN)({defaultValues:nC(r)}),a=i.register,o=i.reset,l=i.handleSubmit,s=i.formState.isDirty,c=(0,eC.A)(),u=(0,J.useAdminUpdateCustomer)(r.id),d=l(function(e){u.mutate({first_name:e.first_name,last_name:e.last_name,phone:e.phone,email:e.email,metadata:eZ(e.metadata)},{onSuccess:function(){t(),c(n("details-success","Success"),n("details-successfully-updated-customer","Successfully updated customer"),"success")},onError:function(e){t(),c(n("details-error","Error"),(0,eA.u)(e),"error")}})});return(0,U.useEffect)(function(){o(nC(r))},[r]),(0,z.jsx)(eN.A,{handleClose:t,children:(0,z.jsxs)(eN.A.Body,{children:[(0,z.jsx)(eN.A.Header,{handleClose:t,children:(0,z.jsx)("span",{className:"inter-xlarge-semibold",children:n("details-customer-details","Customer Details")})}),(0,z.jsx)(eN.A.Content,{children:(0,z.jsxs)("div",{className:"gap-y-xlarge flex flex-col",children:[(0,z.jsxs)("div",{children:[(0,z.jsx)("h2",{className:"inter-base-semibold text-grey-90 mb-4",children:n("details-general","General")}),(0,z.jsxs)("div",{className:"flex w-full space-x-2",children:[(0,z.jsx)(e1.A,nP(nS({label:n("details-first-name","First Name")},a("first_name")),{placeholder:n("details-lebron","Lebron")})),(0,z.jsx)(e1.A,nP(nS({label:n("details-last-name","Last Name")},a("last_name")),{placeholder:n("details-james","James")}))]})]}),(0,z.jsxs)("div",{children:[(0,z.jsx)("h2",{className:"inter-base-semibold text-grey-90 mb-4",children:"Contact"}),(0,z.jsxs)("div",{className:"flex space-x-2",children:[(0,z.jsx)(e1.A,nP(nS({label:n("details-email","Email")},a("email",{validate:function(e){return!!e.toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)},disabled:r.has_account})),{prefix:r.has_account&&(0,z.jsx)(nO.A,{size:16,className:"text-grey-50"}),disabled:r.has_account})),(0,z.jsx)(e1.A,nP(nS({label:n("details-phone-number","Phone number")},a("phone")),{placeholder:"+45 42 42 42 42"}))]})]}),(0,z.jsxs)("div",{children:[(0,z.jsx)("h2",{className:"inter-base-semibold mb-base",children:n("details-metadata","Metadata")}),(0,z.jsx)(e$,{form:(0,eL.m)(i,"metadata")})]})]})}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"flex w-full justify-end",children:[(0,z.jsx)(W.A,{variant:"secondary",size:"small",onClick:t,className:"mr-2",type:"button",children:n("details-cancel","Cancel")}),(0,z.jsx)(W.A,{loading:u.isLoading,disabled:!s||u.isLoading,variant:"primary",size:"small",onClick:d,children:n("details-save-and-close","Save and close")})]})})]})})};function nN(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}let nk=function(){var e,t=(0,H.useParams)().id,r=(0,H.useNavigate)(),n=(0,J.useAdminCustomer)(t),i=n.customer,a=n.isLoading,o=n.error,l=(0,ei.Bd)().t,s=function(e){if(Array.isArray(e))return e}(e=(0,U.useState)(!1))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,2)||function(e,t){if(e){if("string"==typeof e)return nN(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nN(e,2)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),c=s[0],u=s[1],d=[{label:l("details-edit","Edit"),onClick:function(){return u(!0)},icon:(0,z.jsx)(ec,{size:20})}],f=(0,tY.X)().getWidgets;if(o){var p=t$(o);if(p&&404===p.status)return r("/404"),null;throw o}return a||!i?(0,z.jsx)("div",{className:"flex h-[calc(100vh-64px)] w-full items-center justify-center",children:(0,z.jsx)(X.A,{variant:"secondary"})}):(0,z.jsxs)("div",{children:[(0,z.jsx)(eo,{label:l("details-back-to-customers","Back to Customers"),path:"/a/customers",className:"mb-xsmall"}),(0,z.jsxs)("div",{className:"gap-y-xsmall flex flex-col",children:[f("customer.details.before").map(function(e,t){return(0,z.jsx)(es.A,{entity:i,injectionZone:"customer.details.before",widget:e},t)}),(0,z.jsxs)(eM,{children:[(0,z.jsxs)("div",{className:"flex w-full items-start justify-between",children:[(0,z.jsxs)("div",{className:"gap-x-base flex w-full items-center",children:[(0,z.jsx)("div",{className:"h-[64px] w-[64px]",children:(0,z.jsx)(rr.A,{user:i,font:"inter-2xlarge-semibold w-full h-full",color:"bg-fuschia-40"})}),(0,z.jsxs)("div",{className:"flex grow flex-col",children:[(0,z.jsx)("h1",{className:"inter-xlarge-semibold text-grey-90 max-w-[50%] truncate",children:(null==i?void 0:i.first_name)&&(null==i?void 0:i.last_name)?"".concat(i.first_name," ").concat(i.last_name):null==i?void 0:i.email}),(0,z.jsx)("h3",{className:"inter-small-regular text-grey-50",children:i.email})]})]}),(0,z.jsx)(em,{actions:d,forceDropdown:!0})]}),(0,z.jsxs)("div",{className:"mt-6 flex space-x-6 divide-x",children:[(0,z.jsxs)("div",{className:"flex flex-col",children:[(0,z.jsx)("div",{className:"inter-smaller-regular text-grey-50 mb-1",children:l("details-first-seen","First seen")}),(0,z.jsx)("div",{children:re()(i.created_at).format("DD MMM YYYY")})]}),(0,z.jsxs)("div",{className:"flex flex-col pl-6",children:[(0,z.jsx)("div",{className:"inter-smaller-regular text-grey-50 mb-1",children:l("details-phone","Phone")}),(0,z.jsx)("div",{className:"max-w-[200px] truncate",children:i.phone||"N/A"})]}),(0,z.jsxs)("div",{className:"flex flex-col pl-6",children:[(0,z.jsx)("div",{className:"inter-smaller-regular text-grey-50 mb-1",children:l("details-orders","Orders")}),(0,z.jsx)("div",{children:i.orders.length})]}),(0,z.jsxs)("div",{className:"h-100 flex flex-col pl-6",children:[(0,z.jsx)("div",{className:"inter-smaller-regular text-grey-50 mb-1",children:l("details-user","User")}),(0,z.jsx)("div",{className:"h-50 flex items-center justify-center",children:(0,z.jsx)(tv.A,{variant:i.has_account?"success":"danger",title:i.has_account?"Registered":"Guest"})})]})]})]}),(0,z.jsx)(eD,{title:l("details-orders","Orders {{count}}",{count:i.orders.length}),subtitle:l("details-an-overview-of-customer-orders","An overview of Customer Orders"),children:(0,z.jsx)("div",{className:"flex  grow flex-col",children:(0,z.jsx)(nw,{id:i.id})})}),f("customer.details.after").map(function(e,t){return(0,z.jsx)(es.A,{entity:i,injectionZone:"customer.details.after",widget:e},t)}),(0,z.jsx)(eT,{data:i,title:l("details-raw-customer","Raw customer")})]}),c&&i&&(0,z.jsx)(nA,{customer:i,handleClose:function(){return u(!1)}})]})};var n_=r(62727),nE=r(63560),nI=r.n(nE);function nD(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function nT(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function nM(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function nR(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return nD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nD(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}!function(e){e[e.Up=1]="Up",e[e.Down=-1]="Down"}(n||(n={})),function(e){e.SET_QUERY="setQuery",e.SET_FILTERS="setFilters",e.SET_OFFSET="setOffset",e.SET_DEFAULTS="setDefaults"}(i||(i={}));var nL=["q","offset","limit"],nz={limit:15,offset:0};function nF(e,t){t=t||{};var r=!0,n=!1,i=void 0;try{for(var a,o=Object.entries(e)[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var l=nR(a.value,2),s=l[0],c=l[1];"q"===s?"string"==typeof c&&(c?t.q=c:delete t.q):("offset"===s||"limit"===s)&&(t[s]=c)}}catch(e){n=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(n)throw i}}return t}function nB(e){return nF(e,nT({},e.additionalFilters))}function nq(e,t){if("setFilters"===t.type){var r=nT({},e);return nI()(r,t.path,t.payload),r}return"setQuery"===t.type?nM(nT({},e),{q:t.payload,offset:0}):"setOffset"===t.type?nM(nT({},e),{offset:t.payload}):e}let nH=function(e){var t=location.search.substring(1),r=nR((0,U.useReducer)(nq,function(e,t){var r=nT({},nz,t);if(!e)return r;var n=t8().parse(e),i=!0,a=!1,o=void 0;try{for(var l,s=Object.entries(n)[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=nR(l.value,2),u=c[0],d=c[1];if("string"==typeof d&&nL.includes(u))switch(u){case"offset":case"limit":r[u]=parseInt(d);break;case"q":r.q=d}}}catch(e){a=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}return r}(t,e)),2),n=r[0],i=r[1],a=function(){var e=nF(n);return t8().stringify(e,{skipNulls:!0})},o=(0,U.useMemo)(function(){return nB(n)},[n]),l=(0,U.useMemo)(function(){return nF(n)},[n]),s=(0,U.useMemo)(function(){return a()},[n]);return nM(nT({},n),{filters:nT({},n),representationObject:l,representationString:s,queryObject:o,paginate:function(e){1===e?i({type:"setOffset",payload:n.offset+n.limit}):i({type:"setOffset",payload:Math.max(n.offset-n.limit,0)})},getQueryObject:nB,getQueryString:function(){return t8().stringify(nB(n),{skipNulls:!0})},setQuery:function(e){return i({type:"setQuery",payload:e})},setFilters:function(e,t){return i({type:"setFilters",path:e,payload:t})},setDefaultFilters:function(e){i({type:"setDefaults",payload:e})}})},nU=function(e){(0,U.useEffect)(function(){var t=new URL(window.location.href),r=!0,n=!1,i=void 0;try{for(var a,o=t.searchParams.keys()[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var l=a.value;l in e||t.searchParams.delete(l)}}catch(e){n=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(n)throw i}}for(var s in e)t.searchParams.set(s,e[s].toString());window.history.replaceState(null,"",t.toString())},[e])},nV=function(e){var t=(0,t6.sortBy)(e.groups,"name");if(!t.length)return null;var r=t.length-1,n=t[0].name,i=t.map(function(e){return e.name}).join(", ");return(0,z.jsxs)("div",{title:i,className:"text-small",children:[(0,z.jsx)("span",{children:n}),!!r&&(0,z.jsxs)("span",{className:"text-grey-40",children:[" + ",r," more"]})]})};function nG(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var nW=[{Header:function(){return(0,z.jsxs)("div",{className:"flex items-center gap-1",children:["Title ",(0,z.jsx)(ta,{size:16})]})},accessor:"name"},{Header:function(){return(0,z.jsxs)("div",{className:"flex items-center gap-1",children:["Members ",(0,z.jsx)(ta,{size:16})]})},id:"members",accessor:function(e){var t;return null===(t=e.customers)||void 0===t?void 0:t.length}}],nY=[{id:"selection",Header:function(e){var t=e.getToggleAllPageRowsSelectedProps;return(0,z.jsx)(tt,nG({},t()))},Cell:function(e){var t=e.row;return(0,z.jsx)(td.Cell,{onClick:function(e){return e.stopPropagation()},className:"w-[100px]",children:(0,z.jsx)(tt,nG({},t.getToggleRowSelectedProps()))})}},{Header:function(){return(0,z.jsxs)("div",{className:"flex items-center gap-1",children:["Name ",(0,z.jsx)(ta,{size:16})]})},id:"avatar",Cell:function(e){var t=e.row;return(0,z.jsx)(rn,{customer:t.original,color:rt(t.index)})}},{Header:function(){return(0,z.jsxs)("div",{className:"flex items-center gap-1",children:["Email ",(0,z.jsx)(ta,{size:16})]})},accessor:"email"},{accessor:"groups",Header:function(){return(0,z.jsx)("div",{className:"text-left",children:"Segments"})},Cell:function(e){var t=e.cell.value;return(0,z.jsx)(nV,{groups:t})}}],n$=[{Header:function(){return(0,z.jsxs)("div",{className:"flex items-center gap-1",children:["Name ",(0,z.jsx)(ta,{size:16})]})},id:"avatar",Cell:function(e){var t=e.row;return(0,z.jsx)(rn,{customer:t.original,color:rt(t.index)})}},{Header:function(){return(0,z.jsxs)("div",{className:"flex items-center gap-1",children:["Email ",(0,z.jsx)(ta,{size:16})]})},accessor:"email"},{accessor:"groups",disableSortBy:!0,Header:"Groups",Cell:function(e){var t=e.cell.value;return(0,z.jsx)(nV,{groups:t})}},{Header:"",id:"settings-col"}];function nQ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function nK(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var nZ={additionalFilters:{expand:"customers"},limit:15,offset:0};function nJ(){return(0,z.jsx)("div",{className:"center flex h-full min-h-[756px] items-center justify-center",children:(0,z.jsx)("span",{className:"text-xs text-gray-400",children:"No customer groups yet"})})}function nX(e){return(0,z.jsx)(td.HeadCell,nK(nQ({className:"w-[100px]"},e.col.getHeaderProps(e.col.getSortByToggleProps())),{children:e.col.render("Header")}))}function n0(e){return(0,z.jsx)(td.HeadRow,nK(nQ({},e.headerGroup.getHeaderGroupProps()),{children:e.headerGroup.headers.map(function(e){return(0,z.jsx)(nX,{col:e},e.id)})}))}function n1(e){var t=e.row,r=(0,H.useNavigate)(),n=(0,eC.A)(),i=(0,J.useAdminDeleteCustomerGroup)(t.original.id).mutate,a=(0,ei.Bd)().t,o=[{label:a("customer-group-table-details","Details"),onClick:function(){return r(t.original.id)},icon:(0,z.jsx)(t7,{size:20})},{label:a("customer-group-table-delete","Delete"),onClick:function(){i(void 0,{onSuccess:function(){n(a("customer-group-table-success","Success"),a("customer-group-table-group-deleted","Group deleted"),"success")},onError:function(){n(a("customer-group-table-error","Error"),a("customer-group-table-failed-to-delete-the-group","Failed to delete the group"),"error")}})},icon:(0,z.jsx)(eu,{size:20}),variant:"danger"}];return(0,z.jsx)(td.Row,nK(nQ({color:"inherit",actions:o,linkTo:e.row.original.id},e.row.getRowProps()),{children:e.row.cells.map(function(e,t){return(0,z.jsx)(td.Cell,nK(nQ({},e.getCellProps()),{children:e.render("Cell",{index:t})}))})}))}function n2(e){var t,r=e.customerGroups,n=e.queryObject,i=e.count,a=e.paginate,o=e.setQuery,l=e.isLoading,s=(0,ei.Bd)().t,c={columns:nW,data:r||[],initialState:{pageSize:n.limit,pageIndex:n.offset/n.limit},pageCount:Math.ceil(i/n.limit),manualPagination:!0,autoResetPage:!1},u=(0,e4.useTable)(c,e4.useSortBy,e4.usePagination);return(0,z.jsx)(tb,{isLoading:l,hasPagination:!0,numberOfRows:n.limit,pagingState:{count:i,offset:n.offset,pageSize:n.offset+u.rows.length,title:s("customer-group-table-customer-groups","Customer groups"),currentPage:u.state.pageIndex+1,pageCount:u.pageCount,nextPage:function(){u.canNextPage&&(a(1),u.nextPage())},prevPage:function(){u.canPreviousPage&&(a(-1),u.previousPage())},hasNext:u.canNextPage,hasPrev:u.canPreviousPage},children:(0,z.jsxs)(td,nK(nQ({enableSearch:!0,handleSearch:function(e){o(e),e&&u.gotoPage(0)},searchValue:n.q},u.getTableProps()),{children:[(0,z.jsx)(td.Head,{children:null===(t=u.headerGroups)||void 0===t?void 0:t.map(function(e,t){return(0,z.jsx)(n0,{headerGroup:e},t)})}),(0,z.jsx)(td.Body,nK(nQ({},u.getTableBodyProps()),{children:u.rows.map(function(e){return u.prepareRow(e),(0,z.jsx)(n1,{row:e},e.id)})}))]}))})}let n3=function(){var e=nH(nZ),t=(0,J.useAdminCustomerGroups)(e.queryObject),r=t.customer_groups,n=t.isLoading,i=t.count;return(nU(e.representationObject),(null==r?void 0:r.length)||e.queryObject.q)?(0,z.jsx)(n2,nQ({count:void 0===i?0:i,customerGroups:r||[],isLoading:n},e)):n?null:(0,z.jsx)(nJ,{})};var n5=r(58804);let n6=function(e){var t=e.views,r=e.activeView,n=void 0===r?t[0]:r,i=e.setActiveView;return(0,z.jsx)("div",{className:"inter-large-semibold gap-x-base text-grey-40 flex",children:t.map(function(e,t){var r,a,o;return(0,z.jsx)("div",{className:(0,en.default)("cursor-pointer",(r={},a="text-grey-90",o=e===n,a in r?Object.defineProperty(r,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[a]=o,r)),onClick:function(){i&&i(e)},children:(0,t6.capitalize)(e)},t)})})},n4=function(e){var t=(0,H.useNavigate)();return(0,z.jsx)(n6,{setActiveView:function(e){"customers"===e?t("/a/customers"):t("/a/customers/groups")},views:["customers","groups"],activeView:e.activeView})};var n8=r(15696),n7=function(e){var t,r,n=e.form,i=n.register,a=n.path,o=n.formState.errors;return(0,z.jsx)("div",{children:(0,z.jsx)(e1.A,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({label:"Name",required:!0},i(a("name"),{required:n8.A.required("Name")})),r=r={errors:o},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))})},n9=function(e){if(e)return{general:{name:e.name},metadata:eJ(e.metadata)}};let ie=function(e){var t=e.customerGroup,r=e.onClose,n=e.open,i=(0,ei.Bd)().t,a=(0,eR.mN)({defaultValues:n9(t)}),o=(0,J.useAdminUpdateCustomerGroup)(null==t?void 0:t.id),l=o.mutate;o.isLoading;var s=(0,J.useAdminCreateCustomerGroup)(),c=s.mutate;s.isLoading;var u=(0,eC.A)(),d=a.reset,f=a.handleSubmit;(0,U.useEffect)(function(){n&&d(n9(t))},[t,n,d]);var p=f(function(e){var n=e.general,a=e.metadata,o=function(){u(t?i("groups-group-updated","Group Updated"):i("groups-group-created","Group Created"),t?i("groups-the-customer-group-has-been-updated","The customer group has been updated"):i("groups-the-customer-group-has-been-created","The customer group has been created"),"success"),r()},s=function(e){u("Error",(0,eA.u)(e),"error")};t?l({name:n.name,metadata:eZ(a)},{onSuccess:o,onError:s}):c({name:n.name,metadata:eZ(a)},{onSuccess:o,onError:s}),r()});return(0,z.jsx)(eN.A,{open:n,handleClose:r,children:(0,z.jsxs)(eN.A.Body,{children:[(0,z.jsx)(eN.A.Header,{handleClose:r,children:(0,z.jsx)("span",{className:"inter-xlarge-semibold",children:t?i("groups-edit-customer-group","Edit Customer Group"):i("groups-create-a-new-customer-group","Create a New Customer Group")})}),(0,z.jsxs)("form",{onSubmit:p,children:[(0,z.jsx)(eN.A.Content,{children:(0,z.jsxs)("div",{className:"gap-y-xlarge flex flex-col",children:[(0,z.jsxs)("div",{children:[(0,z.jsx)("h2",{className:"inter-base-semibold mb-base",children:i("groups-details","Details")}),(0,z.jsx)(n7,{form:(0,eL.m)(a,"general")})]}),(0,z.jsxs)("div",{children:[(0,z.jsx)("h2",{className:"inter-base-semibold mb-base",children:i("groups-metadata","Metadata")}),(0,z.jsx)(e$,{form:(0,eL.m)(a,"metadata")})]})]})}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"gap-x-xsmall flex w-full justify-end",children:[(0,z.jsx)(W.A,{variant:"secondary",className:"text-small mr-2 w-32 justify-center",size:"small",type:"button",onClick:r,children:i("groups-cancel","Cancel")}),(0,z.jsx)(W.A,{size:"small",variant:"primary",type:"submit",children:(0,z.jsx)("span",{children:t?i("groups-edit-group","Edit Group"):i("groups-publish-group","Publish Group")})})]})})]})]})})};function it(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function ir(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function ii(e){var t=e.headerGroup;return(0,z.jsx)(td.HeadRow,ir(it({},t.getHeaderGroupProps()),{children:e.headerGroup.headers.map(function(e,t){var r=e.render,n=e.getHeaderProps,i=e.getSortByToggleProps;return(0,z.jsx)(td.HeadCell,ir(it({className:t?"w-[100px]":"w-[60px]"},n(i())),{children:r("Header")}))})}))}function ia(e){var t=e.row,r=e.removeCustomers,n=(0,H.useNavigate)(),i=(0,ei.Bd)().t,a=[{label:i("customer-group-table-details","Details"),onClick:function(){return n("/a/customers/".concat(t.original.id))},icon:(0,z.jsx)(t7,{size:20})},{label:i("customer-group-table-delete-from-the-group","Delete from the group"),variant:"danger",onClick:function(){return r({customer_ids:[{id:t.original.id}]})},icon:(0,z.jsx)(eu,{size:20})}];return(0,z.jsx)(td.Row,ir(it({color:"inherit",actions:a,linkTo:"/a/customers/".concat(e.row.original.id)},e.row.getRowProps()),{children:e.row.cells.map(function(e,t){return(0,z.jsx)(td.Cell,ir(it({},e.getCellProps()),{children:e.render("Cell",{index:t})}))})}))}let io=function(e){var t,r=(0,ei.Bd)().t,n=e.customers,i=e.removeCustomers,a=e.setQuery,o=e.paginate,l=e.filteringOptions,s=e.queryObject,c=e.count,u=e.isLoading,d={data:n,columns:n$,initialState:{pageSize:s.limit,pageIndex:s.offset/s.limit},pageCount:Math.ceil(c/s.limit),manualPagination:!0,autoResetPage:!1},f=(0,e4.useTable)(d,e4.useSortBy,e4.usePagination);return(0,z.jsx)(tb,{isLoading:u,hasPagination:!0,numberOfRows:s.limit,pagingState:{count:c,offset:s.offset,pageSize:s.offset+f.rows.length,title:r("customer-group-table-customer-groups-title","Customer Groups"),currentPage:f.state.pageIndex+1,pageCount:f.pageCount,nextPage:function(){f.canNextPage&&(o(1),f.nextPage())},prevPage:function(){f.canPreviousPage&&(o(-1),f.previousPage())},hasNext:f.canNextPage,hasPrev:f.canPreviousPage},children:(0,z.jsxs)(td,ir(it({enableSearch:!0,handleSearch:function(e){a(e),e&&f.gotoPage(0)},searchValue:s.q,filteringOptions:l},f.getTableProps()),{children:[(0,z.jsx)(td.Head,{children:null===(t=f.headerGroups)||void 0===t?void 0:t.map(function(e,t){return(0,z.jsx)(ii,{headerGroup:e},t)})}),(0,z.jsx)(td.Body,ir(it({},f.getTableBodyProps()),{children:f.rows.map(function(e){return f.prepareRow(e),(0,z.jsx)(ia,{row:e,removeCustomers:i},e.id)})}))]}))})};function il(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function is(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function ic(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function iu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||id(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function id(e,t){if(e){if("string"==typeof e)return il(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return il(e,t)}}var ip={additionalFilters:{expand:"groups"},limit:15};function im(e){var t=e.headerGroup;return(0,z.jsx)(td.HeadRow,ic(is({},t.getHeaderGroupProps()),{children:t.headers.map(function(e,t){return(0,z.jsx)(td.HeadCell,ic(is({className:"w-[100px]"},e.getHeaderProps()),{children:e.render("Header")}))})}))}function ih(e){return(0,z.jsx)(td.Row,ic(is({color:"inherit",linkTo:"/a/customers/".concat(e.row.original.id)},e.row.getRowProps()),{children:e.row.cells.map(function(e,t){return(0,z.jsx)(td.Cell,ic(is({},e.getCellProps()),{children:e.render("Cell",{index:t})}))})}))}let iy=function(e){var t,r,n=(0,ei.Bd)().t,i=e.setSelectedCustomerIds,a=e.selectedCustomerIds,o=e.handleSubmit,l=e.onClose,s=nH(ip),c=s.paginate,u=s.setQuery,d=s.setFilters,f=(s.filters,s.queryObject),p=iu((0,U.useState)(0),2),m=p[0],h=p[1],y=iu((0,U.useState)(),2),b=y[0],v=y[1],g=(0,J.useAdminCustomerGroups)({expand:"customers"}).customer_groups,x=(0,J.useAdminCustomers)(ic(is({},f),{groups:b?[b]:null})),j=x.customers,w=x.count,O=void 0===w?0:w,S=x.isLoading;(0,U.useEffect)(function(){void 0!==O&&h(Math.ceil(O/f.limit))},[O]);var P={columns:nY,data:void 0===j?[]:j,initialState:{pageSize:f.limit,pageIndex:f.offset/f.limit,selectedRowIds:a.reduce(function(e,t){return e[t]=!0,e},{})},pageCount:m,autoResetSelectedRows:!1,manualPagination:!0,autoResetPage:!1,getRowId:function(e){return e.id}},C=(0,e4.useTable)(P,e4.usePagination,e4.useRowSelect);(0,U.useEffect)(function(){i(Object.keys(C.state.selectedRowIds))},[C.state.selectedRowIds]),(0,U.useEffect)(function(){d("offset",0),C.gotoPage(0)},[b]);var A=[{title:n("customer-group-table-groups","Groups"),options:[{title:n("customer-group-table-all","All"),onClick:function(){return v(null)}}].concat(function(e){if(Array.isArray(e))return il(e)}(t=(g||[]).map(function(e){return{title:e.name,count:e.customers.length,onClick:function(){return v(e.id)}}}))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||id(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}];return(0,z.jsx)(eN.A,{handleClose:l,children:(0,z.jsxs)(eN.A.Body,{children:[(0,z.jsx)(eN.A.Header,{handleClose:l,children:(0,z.jsx)("h3",{className:"inter-xlarge-semibold",children:n("customer-group-table-edit-customers","Edit Customers")})}),(0,z.jsx)(eN.A.Content,{children:(0,z.jsx)(tb,{isLoading:S,hasPagination:!0,numberOfRows:f.limit,pagingState:{count:O,offset:f.offset,pageSize:f.offset+C.rows.length,title:n("customer-group-table-customers","Customers"),currentPage:C.state.pageIndex+1,pageCount:C.pageCount,nextPage:function(){C.canNextPage&&(c(1),C.nextPage())},prevPage:function(){C.canPreviousPage&&(c(-1),C.previousPage())},hasNext:C.canNextPage,hasPrev:C.canPreviousPage},children:(0,z.jsxs)(td,ic(is({filteringOptions:A,enableSearch:!0,handleSearch:function(e){u(e),e&&C.gotoPage(0)},searchValue:f.q},C.getTableProps()),{children:[(0,z.jsx)(td.Head,{children:null===(r=C.headerGroups)||void 0===r?void 0:r.map(function(e){return(0,z.jsx)(im,{headerGroup:e})})}),(0,z.jsx)(td.Body,ic(is({},C.getTableBodyProps()),{children:C.rows.map(function(e){return C.prepareRow(e),(0,z.jsx)(ih,{row:e})})}))]}))})}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"gap-x-xsmall flex w-full items-center justify-end",children:[(0,z.jsx)(W.A,{variant:"ghost",size:"small",className:"w-eventButton",onClick:l,children:n("customer-group-table-cancel","Cancel")}),(0,z.jsx)(W.A,{variant:"primary",size:"small",className:"w-eventButton",onClick:o,children:n("customer-group-table-save","Save")})]})})]})})};function ib(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function iv(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function ig(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ib(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ib(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ix={additionalFilters:{expand:"groups"},limit:15,offset:0};function ij(){var e=(0,ei.Bd)().t;return(0,z.jsx)("div",{className:"center flex h-full min-h-[756px] items-center justify-center",children:(0,z.jsx)("span",{className:"text-xs text-gray-400",children:e("groups-no-customers-in-this-group-yet","No customers in this group yet")})})}function iw(e){var t=e.group.id,r=ig((0,U.useState)(!1),2),n=r[0],i=r[1],a=(0,ei.Bd)().t,o=nH(ix),l=o.q,s=o.queryObject,c=o.paginate,u=o.setQuery,d=(0,J.useAdminCustomerGroupCustomers)(t,s,{keepPreviousData:!0}),f=d.customers,p=void 0===f?[]:f,m=d.isLoading,h=d.count,y=(0,J.useAdminAddCustomersToCustomerGroup)(t).mutate,b=(0,J.useAdminRemoveCustomersFromCustomerGroup)(t).mutate,v=ig((0,U.useState)(p.map(function(e){return e.id})),2),g=v[0],x=v[1];(0,U.useEffect)(function(){m||x(p.map(function(e){return e.id}))},[m,p]);var j=!m&&!p.length&&!l,w=[{label:"Edit customers",onClick:function(){return i(!0)},icon:(0,z.jsx)("span",{className:"text-grey-90",children:(0,z.jsx)(n_.A,{size:20})})}],O=function(){var e=p.map(function(e){return e.id});return{toAdd:(0,t6.difference)(g,e),toRemove:(0,t6.difference)(e,g)}};return(0,z.jsxs)(eD,{title:a("groups-customers","Customers"),actionables:w,className:"min-h-[756px] w-full",children:[n&&(0,z.jsx)(iy,{selectedCustomerIds:g,setSelectedCustomerIds:x,handleSubmit:function(){var e=O(),t=e.toAdd,r=e.toRemove;t.length&&y({customer_ids:t.map(function(e){return{id:e}})}),r.length&&b({customer_ids:r.map(function(e){return{id:e}})}),i(!1)},onClose:function(){return i(!1)}}),j?(0,z.jsx)(ij,{}):(0,z.jsx)(io,{query:l,count:h||0,paginate:c,setQuery:u,customers:p,groupId:e.group.id,queryObject:s,removeCustomers:b})]})}function iO(e){var t,r,n=ig((0,U.useState)(!1),2),i=n[0],a=n[1],o=(0,ei.Bd)().t,l=(0,H.useNavigate)(),s=(0,J.useAdminDeleteCustomerGroup)(e.customerGroup.id).mutate,c=(0,n5.A)(),u=c.state,d=c.close,f=c.open,p=[{label:o("groups-edit","Edit"),onClick:f,icon:(0,z.jsx)(ec,{size:20})},{label:o("groups-delete","Delete"),onClick:function(){a(!0)},variant:"danger",icon:(0,z.jsx)(eu,{size:20})}],m=(t=function(){return function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,function(e){return s(),l("/a/customers/groups"),[2]})},r=function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function o(e){iv(a,n,i,o,l,"next",e)}function l(e){iv(a,n,i,o,l,"throw",e)}o(void 0)})},function(){return r.apply(this,arguments)});return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(eD,{title:e.customerGroup.name,actionables:p,className:"min-h-0 w-full",subtitle:" "}),i&&(0,z.jsx)(e_,{onDelete:m,handleClose:function(){return a(!1)},confirmText:o("groups-yes-delete","Yes, delete"),heading:o("groups-delete-the-group","Delete the group"),successText:o("groups-group-deleted","Group deleted"),text:o("groups-confirm-delete-customer-group","Are you sure you want to delete this customer group?")}),(0,z.jsx)(ie,{open:u,onClose:d,customerGroup:e.customerGroup})]})}let iS=function(){var e=(0,H.useParams)().id,t=(0,ei.Bd)().t,r=(0,H.useNavigate)(),n=(0,J.useAdminCustomerGroup)(e),i=n.customer_group,a=n.isLoading,o=n.error,l=(0,tY.X)().getWidgets;if(o){var s=t$(o);if(s&&404===s.status)return r("/404"),null;throw o}return a||!i?(0,z.jsx)("div",{className:"flex h-[calc(100vh-64px)] w-full items-center justify-center",children:(0,z.jsx)(X.A,{variant:"secondary"})}):(0,z.jsxs)("div",{className:"-mt-4 pb-4",children:[(0,z.jsx)(eo,{path:"/a/customers/groups",label:t("groups-back-to-customer-groups","Back to customer groups"),className:"mb-4"}),(0,z.jsxs)("div",{className:"gap-y-xsmall flex flex-col",children:[l("customer_group.details.before").map(function(e,t){return(0,z.jsx)(es.A,{entity:i,injectionZone:"customer_group.details.before",widget:e},t)}),(0,z.jsx)(iO,{customerGroup:i}),l("customer_group.details.after").map(function(e,t){return(0,z.jsx)(es.A,{entity:i,injectionZone:"customer_group.details.after",widget:e},t)}),(0,z.jsx)(iw,{group:i})]})]})};function iP(){var e=(0,n5.A)(),t=e.state,r=e.open,n=e.close,i=(0,tY.X)().getWidgets,a=[{label:(0,(0,ei.Bd)().t)("groups-new-group","New group"),onClick:r,icon:(0,z.jsx)("span",{className:"text-grey-90",children:(0,z.jsx)(n_.A,{size:20})})}];return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("div",{className:"gap-y-xsmall flex h-full grow flex-col",children:[i("customer_group.list.before").map(function(e,t){return(0,z.jsx)(es.A,{entity:null,widget:e,injectionZone:"customer_group.list.before"},t)}),(0,z.jsx)(eD,{actionables:a,className:"h-auto",customHeader:(0,z.jsx)(n4,{activeView:"groups"}),children:(0,z.jsx)(n3,{})}),i("customer_group.list.after").map(function(e,t){return(0,z.jsx)(es.A,{entity:null,widget:e,injectionZone:"customer_group.list.after"},t)})]}),(0,z.jsx)(ie,{open:t,onClose:n})]})}let iC=function(){var e=(0,(0,V.Y)().getNestedRoutes)("/customers/groups");return(0,z.jsxs)(H.Routes,{children:[(0,z.jsx)(H.Route,{index:!0,element:(0,z.jsx)(iP,{})}),(0,z.jsx)(H.Route,{path:"/:id",element:(0,z.jsx)(iS,{})}),e.map(function(e,t){return(0,z.jsx)(H.Route,{path:e.path,element:(0,z.jsx)(Z,{route:e,previousPath:"/customers/groups"})},t)})]})};var iA=function(){var e=(0,tY.X)().getWidgets;return(0,z.jsxs)("div",{className:"gap-y-xsmall flex flex-col",children:[e("customer.list.before").map(function(e,t){return(0,z.jsx)(es.A,{entity:null,widget:e,injectionZone:"customer.list.before"},t)}),(0,z.jsx)(eD,{customHeader:(0,z.jsx)(n4,{activeView:"customers"}),className:"h-fit",children:(0,z.jsx)(rv,{})}),e("customer.list.after").map(function(e,t){return(0,z.jsx)(es.A,{entity:null,widget:e,injectionZone:"customer.list.after"},t)}),(0,z.jsx)(el,{})]})};let iN=function(){var e=(0,(0,V.Y)().getNestedRoutes)("/customers");return(0,z.jsxs)(H.Routes,{children:[(0,z.jsx)(H.Route,{index:!0,element:(0,z.jsx)(iA,{})}),(0,z.jsx)(H.Route,{path:"/groups/*",element:(0,z.jsx)(iC,{})}),(0,z.jsx)(H.Route,{path:"/:id",element:(0,z.jsx)(nk,{})}),e.map(function(e,t){return(0,z.jsx)(H.Route,{path:e.path,element:(0,z.jsx)(Z,{route:e,previousPath:"/customers"})},t)})]})};var ik=r(35958),i_=r(73390),iE=r(9823),iI=r(16484);function iD(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function iT(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return iD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iD(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}let iM=function(e){var t=e.submitFilters,r=e.clearFilters,n=e.triggerElement,i=e.children,a=(0,iI.v)().height,o=(0,U.useRef)(null),l=iT((0,U.useState)(!1),2),s=l[0],c=l[1],u=iT((0,U.useState)({maxHeight:a}),2),d=u[0],f=u[1];(0,U.useEffect)(function(){var e,t;f({maxHeight:a-(null!==(t=null==o?void 0:null===(e=o.current)||void 0===e?void 0:e.getBoundingClientRect().y)&&void 0!==t?t:0)-50})},[o]);var p=function(){c(!1),t()},m=function(){c(!1),r()};return(0,z.jsxs)(iE.bL,{open:s,onOpenChange:c,children:[(0,z.jsx)(iE.l9,{ref:o,asChild:!0,children:n}),(0,z.jsxs)(iE.UC,{sideOffset:8,style:d,className:"bg-grey-0 rounded-rounded shadow-dropdown z-40 max-w-[320px] overflow-y-auto pt-1",children:[U.Children.toArray(i).filter(Boolean).map(function(e,t){return(0,z.jsx)("div",{className:"border-grey-20 border-b last:border-0 last:pb-0",children:e},t)}),(0,z.jsxs)("div",{className:"border-grey-20 gap-x-small flex grid grid-cols-2 border-b px-3 py-2.5",children:[(0,z.jsx)(W.A,{size:"small",tabIndex:-1,className:"border-grey-20 mr-2 w-full border",variant:"ghost",onClick:function(){return m()},children:"Clear"}),(0,z.jsx)(W.A,{tabIndex:-1,variant:"primary",className:"w-full justify-center",size:"small",onClick:function(){return p()},children:"Apply"})]})]})]})};function iR(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var iL=function(e){var t;return(null!=(t=Date)&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t)?(e.getTime()/1e3).toFixed(0):null},iz=function(e){var t=re()(e);return re().isMoment(t)?(t.hour(0),t.minute(0),t.second(0),t.millisecond(0),t):(console.log("date is not instance of Moment: ",e),null)},iF=function(e,t){var r;return null===(r=re()(e))||void 0===r?void 0:r.add(t,"hours")},iB=function(e){var t,r=function(e){if(Array.isArray(e))return e}(t=e.split("|"))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(t,2)||function(e,t){if(e){if("string"==typeof e)return iR(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iR(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),n=r[0],i=r[1],a=re()();return a.subtract(parseInt(n),i),a=iz(a),"".concat(a.format("X"))},iq={InTheLast:"is in the last",OlderThan:"is older than",After:"is after",Before:"is before",EqualTo:"is equal to"};r(15492);var iH=r(96925),iU=r(46576);function iV(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function iG(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function iW(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var iY=function(e){var t=e.children,r=e.triggerProps,n=iW(e,["children","triggerProps"]);return(0,z.jsxs)(iH.bL,iG(iV({},n),{children:[(0,z.jsxs)(iH.bq,iG(iV({className:"inter-base-semibold flex items-center gap-3 px-2"},r),{children:[(0,z.jsx)(iH.WT,{}),(0,z.jsx)(iH.In,{children:(0,z.jsx)(ej.A,{size:16})})]})),(0,z.jsxs)(iH.UC,{position:"popper",className:"rounded-rounded scrollbar-hide border-grey-20 bg-grey-0 shadow-dropdown z-[9999] flex max-h-[305px] w-full overflow-y-auto border px-2 py-2",children:[(0,z.jsx)(iH.PP,{className:"to-grey-0 flex h-[25px] items-center justify-center bg-gradient-to-b from-transparent",children:(0,z.jsx)(iU.A,{size:16})}),(0,z.jsx)(iH.LM,{className:"p-2",children:t}),(0,z.jsx)(iH.wn,{className:"to-grey-0 flex h-[25px] items-center justify-center bg-gradient-to-b from-transparent",children:(0,z.jsx)(ej.A,{size:16})})]})]}))};iY.Item=function(e){var t=e.children,r=iW(e,["children"]);return(0,z.jsxs)(iH.q7,iG(iV({className:(0,en.default)("inter-base-regular hover:bg-grey-10 relative flex items-center justify-start rounded py-1.5 px-9")},r),{children:[(0,z.jsx)(iH.VF,{className:"bold-active-item absolute left-2.5 flex items-center justify-center pr-2.5",children:(0,z.jsx)(e7,{size:16})}),(0,z.jsx)(iH.p4,{children:t})]}))};var i$=function(e,t){for(var r=[],n=e;n<=t;n++)r.push(n);return r},iQ=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;return i$(new Date().getFullYear()-e,new Date().getFullYear()+e)},iK=["January","February","March","April","May","June","July","August","September","October","November","December"];let iZ=function(e){var t=e.date,r=e.changeYear,n=e.changeMonth,i=iK[t.getMonth()],a=t.getFullYear();return(0,z.jsxs)("div",{className:"flex w-full items-center gap-4",children:[(0,z.jsx)("div",{className:"flex flex-1 items-center justify-end gap-3",children:(0,z.jsx)(iY,{defaultValue:i,onValueChange:function(e){return n(iK.indexOf(e))},children:iK.map(function(e){return(0,z.jsx)(iY.Item,{value:e,children:e},e)})})}),(0,z.jsx)("div",{className:"flex flex-1 items-center justify-start gap-3",children:(0,z.jsx)(iY,{defaultValue:a.toString(),onValueChange:function(e){return r(parseInt(e,10))},children:iQ().map(function(e){return(0,z.jsx)(iY.Item,{value:e.toString(),children:e.toString()},e)})})})]})},iJ=function(e){var t,r,n=e.onClick,i=e.onFocusLost,a=e.children,o=e.className,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["onClick","onFocusLost","children","className"]);return(0,z.jsx)("div",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},l),r=r={tabIndex:-1,onClick:n,onBlur:function(e){i&&!e.currentTarget.contains(e.relatedTarget)&&i()},className:(0,en.default)(["bg-grey-5 inter-base-regular h-18 border-grey-20 focus-within:shadow-input focus-within:border-violet-60 rounded-rounded flex w-full cursor-text flex-col border p-3",o]),children:a},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))};var iX=r(58637),i0=r(59386),i1=r.n(i0);function i2(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function i3(){return(i3=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i5(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i2(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var i6=function(e,t){var r=!(arguments.length>2)||void 0===arguments[2]||arguments[2],n=["date"];return t&&re()(e).format("YY,MM,DD")===re()(t).format("YY,MM,DD")?n.push("chosen"):r&&re()(e).format("YY,MM,DD")<re()(new Date).format("YY,MM,DD")&&n.push("past"),n.join(" ")},i4=function(e){var t=e.date,r=e.onChange,n=e.greyPastDates,i=void 0===n||n;return(0,z.jsx)(i1(),{selected:t,inline:!0,onChange:r,calendarClassName:"date-picker",dayClassName:function(e){return i6(e,t,i)},renderCustomHeader:function(e){var t=i3({},function(e){if(null==e)throw TypeError("Cannot destructure "+e);return e}(e));return(0,z.jsx)(iZ,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},t))}})};let i8=function(e){var t=e.date,r=e.onSubmitDate,n=e.label,i=void 0===n?"start date":n,a=e.required,o=e.tooltipContent,l=e.tooltip,s=i5((0,U.useState)(t||null),2),c=s[0],u=s[1],d=i5((0,U.useState)(!1),2),f=d[0],p=d[1];(0,U.useEffect)(function(){return u(t)},[f]);var m=function(){if(!c||!t){r(null),p(!1);return}var e=new Date(t.getTime());e.setUTCDate(c.getUTCDate()),e.setUTCMonth(c.getUTCMonth()),e.setUTCFullYear(c.getUTCFullYear()),r(e),p(!1)};return(0,z.jsx)("div",{className:"w-full",children:(0,z.jsxs)(iE.bL,{open:f,onOpenChange:p,children:[(0,z.jsx)(iE.l9,{asChild:!0,children:(0,z.jsx)("button",{className:(0,en.default)("rounded-rounded w-full border ",{"shadow-input border-violet-60":f,"border-grey-20":!f}),type:"button",children:(0,z.jsxs)(iJ,{className:"shadown-none border-0 focus-within:shadow-none",children:[(0,z.jsxs)("div",{className:"text-grey-50 flex w-full justify-between pr-0.5",children:[i&&(0,z.jsx)(iX.A,{label:i,required:void 0!==a&&a,tooltipContent:o,tooltip:l}),(0,z.jsx)(ez.A,{size:16})]}),(0,z.jsx)("label",{className:"w-full text-left",children:t?re()(t).format("ddd, DD MMM YYYY"):"---, -- -- ----"})]})})}),(0,z.jsxs)(iE.UC,{side:"top",sideOffset:8,className:"rounded-rounded border-grey-20  bg-grey-0 shadow-dropdown w-full border px-8",children:[(0,z.jsx)(i4,{date:c,onChange:function(e){return u(e)}}),(0,z.jsxs)("div",{className:"mb-8 mt-5 flex w-full",children:[(0,z.jsx)(W.A,{variant:"ghost",size:"medium",onClick:function(){return p(!1)},className:"border-grey-20 mr-2 flex w-1/3 justify-center border",children:"Cancel"}),(0,z.jsx)(W.A,{size:"medium",variant:"primary",onClick:function(){return m()},className:"flex w-2/3 justify-center",children:"Set ".concat(i)})]})]})]})})};function i7(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function i9(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i7(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i7(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}let ae=function(e){var t=e.filterTitle,r=e.options,n=e.filters,i=e.open,a=e.setFilter,o=e.isLoading,l=e.hasMore,s=e.hasPrev,c=e.onShowNext,u=e.onShowPrev,d=(0,U.useMemo)(function(){try{return n.reduce(function(e,t){return e[t]=!0,e},{})}catch(e){return{}}},[n]),f=i9((0,U.useState)(d),2),p=f[0],m=f[1];(0,U.useEffect)(function(){i||m({})},[i]);var h=function(e){p[e]?p[e]=!1:p[e]=!0;var t=Object.entries(p).reduce(function(e,t){var r=i9(t,2),n=r[0];return!0===r[1]&&e.push(n),e},[]);m(p),a({open:i,filter:t})};return(0,z.jsx)("div",{className:(0,en.default)("w-full cursor-pointer py-2 px-4 ",{"inter-small-semibold":i,"inter-small-regular":!i}),children:(0,z.jsxs)(eh.bL,{className:"w-full",open:i,onOpenChange:function(e){return a({filter:n,open:e})},children:[(0,z.jsxs)(eh.l9,{className:(0,en.default)("hover:bg-grey-5 flex w-full items-center justify-between rounded py-1.5 px-3",{"inter-small-semibold":i,"inter-small-regular":!i}),children:[(0,z.jsxs)("div",{className:"flex items-center",children:[(0,z.jsx)("div",{className:"text-grey-0 border-grey-30 rounded-base flex h-5 w-5 justify-center border ".concat(i&&"bg-violet-60"),children:(0,z.jsx)("span",{className:"self-center",children:i&&(0,z.jsx)(e7,{size:16})})}),(0,z.jsx)("input",{id:t,className:"hidden",checked:i,readOnly:!0,type:"checkbox"}),(0,z.jsx)("span",{className:"ml-2",children:t})]}),i&&(0,z.jsx)("span",{className:"text-grey-50 self-end",children:(0,z.jsx)(iU.A,{size:20})})]}),(0,z.jsxs)(eh.UC,{className:"w-full",children:[s&&(0,z.jsx)("div",{className:"flex py-2 pl-6",children:(0,z.jsx)("button",{onClick:function(){u&&u()},className:"hover:text-violet-60 text-grey-90 font-semibold",children:"Back"})}),o?(0,z.jsx)("div",{className:"flex items-center justify-center py-1",children:(0,z.jsx)(X.A,{size:"large",variant:"secondary"})}):"Date"===t?(0,z.jsx)(ar,{options:r,open:i,setFilter:a,existingDate:n,filterTitle:t}):r.map(function(e,t){var r,n;return"string"==typeof e?(r=e,n=e):(r=e.value,n=e.label),(0,z.jsxs)("div",{className:(0,en.default)("hover:bg-grey-20 my-1 flex w-full items-center rounded py-1.5 pl-6",{"inter-small-semibold":p[r],"inter-small-regular":!p[r]}),onClick:function(){return h(r)},children:[(0,z.jsx)("div",{className:"text-grey-0 border-grey-30 rounded-base mr-2 flex h-5 w-5 justify-center border ".concat(!0===p[r]&&"bg-violet-60"),children:(0,z.jsx)("span",{className:"self-center",children:!0===p[r]&&(0,z.jsx)(e7,{size:16})})}),(0,z.jsx)("input",{type:"checkbox",className:"hidden",id:r,name:n,value:r,checked:!0===p[r],readOnly:!0,style:{marginRight:"5px"}}),n]},t)}),l&&(0,z.jsx)("div",{className:"flex py-2 pl-6",children:(0,z.jsx)("button",{onClick:function(){c&&c()},className:"hover:text-violet-60 text-grey-90 font-semibold",children:"Show more"})})]})]})})};var at=function(e){if(!e)return{};var t=Object.entries(e),r={sawGt:!1,sawLt:!1,sawGtRelative:!1,sawLtRelative:!1},n=!0,i=!1,a=void 0;try{for(var o,l=t[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var s=i9(o.value,2),c=s[0],u=s[1];switch(c){case"gt":r.sawGt=!0,r.sawGtRelative=u.includes("|");break;case"lt":r.sawLt=!0,r.sawLtRelative=u.includes("|")}}}catch(e){i=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(i)throw a}}if(r.sawGt&&r.sawGtRelative){var d=i9(e.gt.split("|"),2),f=d[0],p=d[1];return{filterType:iq.InTheLast,daysMonthsValue:p,relativeAmount:f,value:null}}if(r.sawLt&&r.sawLtRelative){var m=i9(e.lt.split("|"),2),h=m[0],y=m[1];return{filterType:iq.OlderThan,daysMonthsValue:y,relativeAmount:h,value:null}}if(r.sawLt&&r.sawGt){var b=e.gt;if(e.lt-b==86400)return{filterType:iq.EqualTo,value:re().unix(b).toDate()}}if(r.sawLt){var v=e.lt;return{filterType:iq.Before,value:re().unix(v).toDate()}}if(r.sawGt){var g=e.gt;return{filterType:iq.After,value:re().unix(g).toDate()}}return{}},ar=function(e){var t=e.options,r=(e.open,e.setFilter),n=e.existingDate;e.existingFilter;var i=(0,U.useMemo)(function(){var e=at(n);return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({filterType:t[0],value:null,relativeAmount:void 0,daysMonthsValue:"days"},e)},[n]),a=i9((0,U.useState)(i.filterType),2),o=a[0],l=a[1],s=i9((0,U.useState)(i.relativeAmount),2),c=s[0],u=s[1],d=i9((0,U.useState)(i.daysMonthsValue),2),f=d[0],p=d[1],m=i9((0,U.useState)(i.value),2),h=m[0],y=m[1];(0,U.useEffect)(function(){switch(o){case iq.InTheLast:case iq.OlderThan:r({open:!0,filter:b(c)});break;case iq.EqualTo:default:r({open:!0,filter:b(h)})}},[o,c,f,h]);var b=function(e){switch(o){case iq.InTheLast:return{gt:"".concat(e,"|").concat(f)};case iq.OlderThan:return{lt:"".concat(e,"|").concat(f)};case iq.EqualTo:var t=iz(e);if(t)return{gt:iL(t.toDate()),lt:iL(iF(t,24).toDate())};return{};case iq.After:var r=iz(e);if(r)return{gt:iL(r.toDate())};return{};case iq.Before:var n=iz(e);if(n)return{lt:iL(n.toDate())};return{};default:return{}}};return(0,z.jsxs)("div",{className:"pl-9",children:[(0,z.jsx)(ai,{trigger:(0,z.jsxs)("div",{className:"bg-grey-5 border-grey-20 inter-small-semibold text-grey-90 flex w-full items-center justify-between rounded border px-3 py-1.5",children:[(0,z.jsx)("label",{children:o}),(0,z.jsx)("span",{className:"text-grey-50",children:(0,z.jsx)(th,{size:16})})]}),children:(0,z.jsx)(an,{options:t,onClick:function(e){return l(e)},selectedItem:o})}),o&&(0,z.jsx)("div",{className:"w-full",children:function(){switch(o){case iq.InTheLast:case iq.OlderThan:return(0,z.jsxs)("div",{className:"flex w-full flex-col",children:[(0,z.jsx)(e1.A,{className:"pt-0 pb-1",type:"number",placeholder:"2",value:c,onChange:function(e){u(e.target.value)}}),(0,z.jsx)(ai,{trigger:(0,z.jsxs)("div",{className:"bg-grey-5 border-grey-20 inter-small-semibold text-grey-90 flex w-full items-center justify-between rounded border px-3 py-1.5",children:[(0,z.jsx)("label",{children:f}),(0,z.jsx)("span",{className:"text-grey-50",children:(0,z.jsx)(th,{size:16})})]}),children:(0,z.jsx)(an,{options:["days","months"],onClick:p,selectedItem:f})})]});case iq.EqualTo:case iq.After:case iq.Before:return(0,z.jsx)("div",{className:"flex w-full flex-col",children:(0,z.jsx)(ai,{trigger:(0,z.jsxs)("div",{className:"bg-grey-5 border-grey-20 inter-small-semibold text-grey-90 flex w-full items-center justify-between rounded border px-3 py-1.5",children:[(0,z.jsx)("label",{children:h?re()(h).format("MM.DD.YYYY"):"-"}),(0,z.jsx)("span",{className:"text-grey-50",children:(0,z.jsx)(th,{size:16})})]}),children:(0,z.jsx)(i4,{date:h,onChange:function(e){y(e)}})})})}}()})]})},an=function(e){var t=e.options,r=e.onClick,n=e.selectedItem;return(0,z.jsx)(z.Fragment,{children:t.map(function(e){return(0,z.jsxs)("div",{onClick:function(t){t.stopPropagation(),r(e)},className:(0,en.default)("hover:bg-grey-5 my-1 flex cursor-pointer items-center rounded px-3 py-1.5",{"inter-small-semibold":e===n,"inter-small-regular":e!==n}),children:[(0,z.jsx)("div",{className:(0,en.default)("mr-2 flex h-4 w-4 items-center justify-center rounded-full",{"border-violet-60 border-2":e===n,"border-grey-30 border ":e!==n}),children:e===n&&(0,z.jsx)("div",{className:"bg-violet-60 h-2 w-2 rounded-full"})}),e]})})})},ai=function(e){var t=e.trigger,r=e.children;return(0,z.jsxs)(iE.bL,{children:[(0,z.jsx)(iE.l9,{className:"my-1 w-full",children:t}),(0,z.jsx)(iE.UC,{side:"right",align:"start",alignOffset:-8,sideOffset:20,className:"bg-grey-0 rounded-rounded shadow-dropdown top-2/4 flex flex-col p-2",children:r})]})};let aa=function(e){var t=e.saveFilter,r=e.setName,n=e.name;return(0,z.jsxs)("div",{className:"mt-2 flex w-full",children:[(0,z.jsx)(e1.A,{className:"max-w-[172px] pt-0 pb-1",placeholder:"Name your filter...",onChange:function(e){return r(e.target.value)},value:n}),(0,z.jsx)(W.A,{className:"border-grey-20 ml-2 border",variant:"ghost",size:"small",onClick:function(){""!==(0,t6.trim)(n)&&(t(),r(""))},children:"Save"})]})};var ao=r(52733);let al=function(e){var t,r,n=e.label,i=e.isActive,a=e.onClick,o=e.removable,l=e.onRemove;return(0,z.jsxs)("button",{onKeyUp:function(e){o&&l&&"Backspace"===e.key&&l()},onClick:function(e){void 0!==a&&a(e)},className:(0,en.default)("bg-grey-5 border-grey-20 inter-small-regular text-grey-50 rounded-rounded focus-visible:shadow-input focus-visible:border-violet-60 flex flex h-6 items-center items-center space-x-1 border px-2 focus-visible:outline-none",((r="bg-violet-5 border-violet-60 text-violet-60 ")in(t={})?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i,t)),children:[n,o&&(0,z.jsx)("div",{onClick:function(){void 0!==l&&l()},className:"ml-1 cursor-pointer",children:(0,z.jsx)(ao.A,{size:16})})]})};function as(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ac(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function au(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return as(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return as(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ad=["normal","dynamic"];let af=function(e){var t=e.tabs,r=e.activeTab,n=e.onTabClick,i=e.onSaveTab,a=e.onRemoveTab,o=e.filters,l=e.submitFilters,s=e.clearFilters,c=(0,ei.Bd)().t,u=au((0,U.useState)(o),2),d=u[0],f=u[1],p=au((0,U.useState)(""),2),m=p[0],h=p[1],y=function(e){a&&a(e)},b=function(e){n&&n(e)};(0,U.useEffect)(function(){f(o)},[o]);var v=function(e,t){f(function(r){var n,i;return n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){ac(e,t,r[t])})}return e}({},r),i=null!=(i=ac({},e,t))?i:{},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))}),n})},g=Object.entries(o).reduce(function(e,t){var r=au(t,2),n=(r[0],r[1]);return(null==n?void 0:n.open)&&(e+=1),e},0);return(0,z.jsxs)("div",{className:"flex space-x-1",children:[(0,z.jsxs)(iM,{submitFilters:function(){l(d)},clearFilters:function(){s()},triggerElement:(0,z.jsxs)("button",{className:(0,en.default)("rounded-rounded focus-visible:shadow-input focus-visible:border-violet-60 flex items-center space-x-1 focus-visible:outline-none"),children:[(0,z.jsxs)("div",{className:"rounded-rounded bg-grey-5 border-grey-20 inter-small-semibold flex h-6 items-center border px-2",children:[c("discount-filter-dropdown-filters","Filters"),(0,z.jsx)("div",{className:"text-grey-40 ml-1 flex items-center rounded",children:(0,z.jsx)("span",{className:"text-violet-60 inter-small-semibold",children:g||"0"})})]}),(0,z.jsx)("div",{className:"rounded-rounded bg-grey-5 border-grey-20 inter-small-semibold flex items-center border p-1",children:(0,z.jsx)(n_.A,{size:14})})]}),children:[(0,z.jsx)(ae,{filterTitle:"Types",options:ad,filters:d.isDynamic.filter,open:d.isDynamic.open,setFilter:function(e){return v("isDynamic",e)}}),(0,z.jsx)(aa,{saveFilter:function(){i&&i(m,d)},name:m,setName:h})]}),t&&t.map(function(e){return(0,z.jsx)(al,{onClick:function(){return b(e.value)},label:e.label,isActive:r===e.value,removable:!!e.removable,onRemove:function(){return y(e.value)}},e.value)})]})};var ap=r(14802);!function(e){e.SCHEDULED="SCHEDULED",e.EXPIRED="EXPIRED",e.ACTIVE="ACTIVE",e.DISABLED="DISABLED"}(a||(a={}));var am=function(e){if(!e.is_disabled){var t=new Date;return new Date(e.starts_at)>t?"SCHEDULED":e.ends_at&&new Date(e.ends_at)<t||e.valid_duration&&t>(0,ap._N)((0,ap.qg)(e.valid_duration),new Date(e.starts_at))||e.usage_count===e.usage_limit?"EXPIRED":"ACTIVE"}return"DISABLED"},ah=function(e,t){switch(am(e)){case"SCHEDULED":return(0,z.jsx)(tv.A,{title:t("discount-table-scheduled","Scheduled"),variant:"warning"});case"EXPIRED":return(0,z.jsx)(tv.A,{title:t("discount-table-expired","Expired"),variant:"danger"});case"ACTIVE":return(0,z.jsx)(tv.A,{title:t("discount-table-active","Active"),variant:"success"});default:return(0,z.jsx)(tv.A,{title:t("discount-table-disabled","Disabled"),variant:"default"})}},ay=function(e){if("fixed"===e.rule.type){var t;return(null===(t=e.regions)||void 0===t?void 0:t.length)?e.regions[0].currency_code.toUpperCase():""}return""},ab=function(e,t){switch(e.rule.type){case"fixed":var r;if(!(null===(r=e.regions)||void 0===r?void 0:r.length))return"";return(0,rg.Q2)({currency:e.regions[0].currency_code,amount:e.rule.value});case"percentage":return"".concat(e.rule.value,"%");case"free_shipping":return t("discount-table-free-shipping","Free Shipping");default:return""}},av=function(){var e=(0,ei.Bd)().t;return[(0,U.useMemo)(function(){return[{Header:(0,z.jsx)("div",{className:"pl-2",children:e("discount-table-code","Code")}),accessor:"code",Cell:function(e){var t=e.cell.value;return(0,z.jsx)("div",{className:"overflow-hidden",children:(0,z.jsx)(rk.A,{className:"rounded-rounded",variant:"default",children:(0,z.jsx)("span",{className:"inter-small-regular",children:t})})})}},{Header:e("discount-table-description","Description"),accessor:"rule.description",Cell:function(e){return e.cell.value}},{Header:(0,z.jsx)("div",{className:"text-right",children:e("discount-table-amount","Amount")}),id:"amount",Cell:function(t){var r=t.row.original;return(0,z.jsx)("div",{className:"text-right",children:ab(r,e)})}},{Header:(0,z.jsx)("div",{className:"w-[60px]"}),id:"currency",Cell:function(e){var t=e.row.original;return(0,z.jsx)("div",{className:"text-grey-40 px-2",children:ay(t)})}},{Header:e("discount-table-status","Status"),accessor:"ends_at",Cell:function(t){var r=t.row.original;return(0,z.jsx)("div",{children:ah(r,e)})}},{Header:function(){return(0,z.jsx)("div",{className:"text-right",children:e("discount-table-redemptions","Redemptions")})},accessor:"usage_count",Cell:function(e){var t=e.row.original;return(0,z.jsx)("div",{className:"text-right",children:ag(t.usage_count)})}}]},[])]},ag=function(e){switch(!0){case e>9999999:return"".concat(Math.floor(e/1e6),"m");case e>9999:return"".concat(Math.floor(e/1e3),"k");default:return e}};function ax(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function aj(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function aw(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function aO(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||aP(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function aS(e){return function(e){if(Array.isArray(e))return ax(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||aP(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function aP(e,t){if(e){if("string"==typeof e)return ax(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ax(e,t)}}var aC=["status","is_dynamic","q","created_at","offset","limit"],aA={},aN=function(e,t){switch(t.type){case"setFilters":var r;return aw(aj({},e),{query:null==t?void 0:null===(r=t.payload)||void 0===r?void 0:r.query,isDynamic:t.payload.isDynamic,date:t.payload.date});case"setQuery":return aw(aj({},e),{offset:0,query:t.payload});case"setOffset":return aw(aj({},e),{offset:t.payload});case"reset":return t.payload;default:return e}},ak=function(e,t){if(e.size!==t.size)return!1;var r=!0,n=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var l=a.value;if(!t.has(l))return!1}}catch(e){n=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(n)throw i}}return!0},a_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e&&"?"===e[0]&&(e=e.substring(1));var r=(0,U.useMemo)(function(){return aD(e,t)},[e,t]),n=(0,U.useMemo)(function(){var e=localStorage.getItem("promotions::filters");if(e){var t=JSON.parse(e);if(t)return Object.entries(t).map(function(e){var t=aO(e,2),r=t[0];return{label:r,value:r,removable:!0,representationString:t[1]}})}return[]},[]),i=aO((0,U.useReducer)(aN,r),2),a=i[0],o=i[1],l=aO((0,U.useState)(n),2),s=l[0],c=l[1],u=function(){var e=aj({},a.additionalFilters),t=!0,r=!1,n=void 0;try{for(var i,o=Object.entries(a)[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var l,s=aO(i.value,2),c=s[0],u=s[1];if("query"===c)u&&"string"==typeof u&&(e.q=u);else if("offset"===c||"limit"===c)e[c]=u;else if(u.open){if("date"===c)e[aI[c]]=(l=u.filter,null===l?l:Object.entries(l).reduce(function(e,t){var r=aO(t,2),n=r[0],i=r[1];return i.includes("|")?e[n]=iB(i):e[n]=i,e},{}));else if("isDynamic"===c){var d=u.filter;d&&d.includes("normal")&&d.includes("dynamic")||(d.includes("normal")?e[aI[c]]=!1:d.includes("dynamic")?e[aI[c]]=!0:e[aI[c]]=!1)}else e[aI[c]]=u.filter}}}catch(e){r=!0,n=e}finally{try{t||null==o.return||o.return()}finally{if(r)throw n}}return e},d=function(e){var t=null!=e?e:a,r={},n=!0,i=!1,o=void 0;try{for(var l,s=Object.entries(t)[Symbol.iterator]();!(n=(l=s.next()).done);n=!0){var c=aO(l.value,2),u=c[0],d=c[1];if("query"===u)d&&"string"==typeof d&&(r.q=d);else if("isDynamic"===u){var f=d.filter;f&&f.includes("normal")&&f.includes("dynamic")?r[aI[u]]="all":f.includes("normal")?r[aI[u]]=!1:f.includes("dynamic")?r[aI[u]]=!0:r[aI[u]]=!1}else"offset"===u||"limit"===u?r[u]=d:d.open&&(r[aI[u]]=d.filter)}}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r},f=function(){var e=d();return t8().stringify(e,{skipNulls:!0})},p=(0,U.useMemo)(function(){return u()},[a]),m=(0,U.useMemo)(function(){return d()},[a]),h=(0,U.useMemo)(function(){return f()},[a]),y=(0,U.useMemo)(function(){var e=(0,t6.omit)(m,["limit","offset"]),t=t8().stringify(e),r=s.find(function(e){return e.representationString===t});if(r)return r.value;var n=!0,i=!1,a=void 0;try{for(var o,l=Object.entries(aA)[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var c=aO(o.value,2),u=c[0],d=c[1],f=!0;if(Object.keys(e).length===Object.keys(d).length){var p=!0,h=!1,y=void 0;try{for(var b,v=Object.entries(d)[Symbol.iterator]();!(p=(b=v.next()).done);p=!0){var g=aO(b.value,2),x=g[0],j=g[1];if(!(f=x in e&&(Array.isArray(j)?Array.isArray(e[x])&&ak(new Set(e[x]),new Set(j)):e[x]===j)))break}}catch(e){h=!0,y=e}finally{try{p||null==v.return||v.return()}finally{if(h)throw y}}if(f)return u}}}catch(e){i=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(i)throw a}}return null},[m,s]),b=(0,U.useMemo)(function(){return aS(s)},[s]);return aw(aj({},a),{filters:aj({},a),removeTab:function(e){var t=localStorage.getItem("promotions::filters"),r=null;t&&(r=JSON.parse(t)),r&&(delete r[e],localStorage.setItem("promotions::filters",JSON.stringify(r))),c(function(t){return t.filter(function(t){return t.value!==e})})},saveTab:function(e,t){var r=d(aj({},t)),n=(0,t6.omit)(r,["limit","offset"]),i=t8().stringify(n,{skipNulls:!0}),a=localStorage.getItem("promotions::filters"),l=null;if(a&&(l=JSON.parse(a)),l)l[e]=i,localStorage.setItem("promotions::filters",JSON.stringify(l));else{var s={};s[e]=i,localStorage.setItem("promotions::filters",JSON.stringify(s))}c(function(t){return aS(t).concat([{label:e,value:e,representationString:i,removable:!0}])}),o({type:"setFilters",payload:t})},setTab:function(e){var t=null;if(e in aA)t=aA[e];else{var r=s.find(function(t){return t.value===e});r&&(t=t8().parse(r.representationString))}if(t){var n=aw(aj({},a),{date:{open:!1,filter:null},isDynamic:{open:!1,filter:["normal"]}}),i=!0,l=!1,c=void 0;try{for(var u,d=Object.entries(t)[Symbol.iterator]();!(i=(u=d.next()).done);i=!0){var f=aO(u.value,2),p=f[0],m=f[1];n[aE[p]]={open:!0,filter:m}}}catch(e){l=!0,c=e}finally{try{i||null==d.return||d.return()}finally{if(l)throw c}}o({type:"setFilters",payload:n})}},availableTabs:b,activeFilterTab:y,representationObject:m,representationString:h,queryObject:p,paginate:function(e){e>0?o({type:"setOffset",payload:a.offset+a.limit}):o({type:"setOffset",payload:Math.max(a.offset-a.limit,0)})},getQueryObject:u,getQueryString:function(){var e=u();return t8().stringify(e,{skipNulls:!0})},setQuery:function(e){o({type:"setQuery",payload:e})},setFilters:function(e){o({type:"setFilters",payload:e})},setDefaultFilters:function(e){o({type:"setDefaults",payload:e})},reset:function(){o({type:"setFilters",payload:aw(aj({},a),{offset:0,date:{open:!1,filter:null},isDynamic:{open:!1,filter:["normal"]},query:null})})}})},aE={is_dynamic:"isDynamic",created_at:"date"},aI={isDynamic:"is_dynamic",date:"created_at"},aD=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r={date:{open:!1,filter:null},isDynamic:{open:!1,filter:["normal"]},offset:0,limit:15,additionalFilters:t};if(e){var n=t8().parse(e),i=!0,a=!1,o=void 0;try{for(var l,s=Object.entries(n)[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=aO(l.value,2),u=c[0],d=c[1];if(aC.includes(u))switch(u){case"is_dynamic":"string"==typeof d&&("true"===d?r.isDynamic={open:!0,filter:["dynamic"]}:"false"===d?r.isDynamic={open:!0,filter:["normal"]}:"all"===d&&(r.isDynamic={open:!0,filter:["normal","dynamic"]}));break;case"offset":"string"==typeof d&&(r.offset=parseInt(d));break;case"created_at":r.date={open:!0,filter:d};break;case"limit":"string"==typeof d&&(r.limit=parseInt(d));break;case"q":"string"==typeof d&&(r.query=d)}}}catch(e){a=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}}return r};let aT=function(e){var t,r,n=e.size,i=void 0===n?"20":n,a=e.color,o=void 0===a?"currentColor":a,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["size","color"]);return(0,z.jsxs)("svg",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({width:i,height:i,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l),r=r={children:[(0,z.jsx)("path",{d:"M9.16667 3.33334H4C3.60218 3.33334 3.22064 3.48385 2.93934 3.75176C2.65804 4.01967 2.5 4.38303 2.5 4.76191V11.9048C2.5 12.2837 2.65804 12.647 2.93934 12.9149C3.22064 13.1828 3.60218 13.3333 4 13.3333H16C16.3978 13.3333 16.7794 13.1828 17.0607 12.9149C17.342 12.647 17.5 12.2837 17.5 11.9048V11.6667",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M7.08301 16.6667H12.9163",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M10 13.3333V16.6667",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M13.333 7.50001L17.4997 3.33334",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M13.333 3.33334H17.4997V7.50001",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},aM=function(e){var t,r,n=e.size,i=void 0===n?"20":n,a=e.color,o=void 0===a?"currentColor":a,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["size","color"]);return(0,z.jsxs)("svg",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({width:i,height:i,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l),r=r={children:[(0,z.jsx)("path",{d:"M9.16667 3.33333H4C3.60218 3.33333 3.22064 3.48384 2.93934 3.75175C2.65804 4.01966 2.5 4.38302 2.5 4.7619V11.9048C2.5 12.2836 2.65804 12.647 2.93934 12.9149C3.22064 13.1828 3.60218 13.3333 4 13.3333H16C16.3978 13.3333 16.7794 13.1828 17.0607 12.9149C17.342 12.647 17.5 12.2836 17.5 11.9048V11.6667",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M7.08301 16.6667H12.9163",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M10 13.3333V16.6667",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M17.4997 3.33333L13.333 7.49999",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M13.333 3.33333L17.4997 7.49999",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))};function aR(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function aL(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return aR(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return aR(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var az=function(e){return Object.entries(e).reduce(function(e,t){var r=aL(t,2),n=r[0],i=r[1];return i&&(e[n]=i),e},{})},aF=function(e){return Object.entries(e).reduce(function(e,t){var r=aL(t,2),n=r[0],i=r[1];return null!=i&&(e[n]=i),e},{})};function aB(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}let aq=function(){var e,t,r=(0,ei.Bd)().t,n=(0,H.useNavigate)(),i=(0,eC.A)(),a=(0,J.useAdminCreateDiscount)();return e=function(e){var t;return function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,function(o){switch(o.label){case 0:return t={code:"".concat(e.code,"_COPY"),is_disabled:e.is_disabled,is_dynamic:e.is_dynamic,starts_at:e.starts_at,regions:e.regions.map(function(e){return e.id})},e.ends_at&&(t.ends_at=e.ends_at),e.valid_duration&&(t.valid_duration=e.valid_duration),"number"==typeof e.usage_limit&&(t.usage_limit=e.usage_limit),e.metadata&&(t.metadata=e.metadata),t.rule={type:e.rule.type,value:e.rule.value,description:e.rule.description},e.rule.allocation&&(t.rule.allocation=e.rule.allocation),e.rule.conditions&&(t.rule.conditions=e.rule.conditions.map(function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({operator:e.operator},az({products:e.products.map(function(e){return e.id}),product_types:e.product_types,product_tags:e.product_tags,product_collections:e.product_collections,customer_groups:e.customer_groups}))})),[4,a.mutate(t,{onSuccess:function(e){n("/a/discounts/".concat(e.discount.id)),i(r("discount-table-success","Success"),r("discount-table-successfully-copied-discount","Successfully copied discount"),"success")},onError:function(e){i(r("discount-table-error","Error"),(0,eA.u)(e),"error")}})];case 1:return o.sent(),[2]}})},t=function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function o(e){aB(a,n,i,o,l,"next",e)}function l(e){aB(a,n,i,o,l,"throw",e)}o(void 0)})},function(e){return t.apply(this,arguments)}};function aH(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}let aU=function(e){var t,r,n=(0,ei.Bd)().t,i=(0,H.useNavigate)(),a=(0,eC.A)(),o=rL(),l=aq(),s=(0,J.useAdminUpdateDiscount)(e.id),c=(0,J.useAdminDeleteDiscount)(null==e?void 0:e.id),u=(t=function(){return function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,function(e){switch(e.label){case 0:return[4,o({heading:n("discount-table-delete-discount","Delete Discount"),text:n("discount-table-confirm-delete","Are you sure you want to delete this Discount?")})];case 1:return e.sent()&&c.mutate(),[2]}})},r=function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function o(e){aH(a,n,i,o,l,"next",e)}function l(e){aH(a,n,i,o,l,"throw",e)}o(void 0)})},function(){return r.apply(this,arguments)});return{getRowActions:function(){return[{label:"Edit",icon:(0,z.jsx)(ec,{size:20}),onClick:function(){return i("/a/discounts/".concat(e.id))}},{label:e.is_disabled?n("discount-table-publish","Publish"):n("discount-table-unpublish","Unpublish"),icon:e.is_disabled?(0,z.jsx)(aT,{size:20}):(0,z.jsx)(aM,{size:20}),onClick:function(){s.mutate({is_disabled:!e.is_disabled},{onSuccess:function(){a(n("discount-table-success","Success"),e.is_disabled?n("discount-table-successfully-published-discount","Successfully published discount"):n("discount-table-successfully-unpublished-discount","Successfully unpublished discount"),"success")},onError:function(e){return a(n("discount-table-error","Error"),(0,eA.u)(e),"error")}})}},{label:n("discount-table-duplicate","Duplicate"),icon:(0,z.jsx)(eB,{size:20}),onClick:function(){return l(e)}},{label:n("discount-table-delete","Delete"),icon:(0,z.jsx)(eu,{size:20}),variant:"danger",onClick:u}]}}};function aV(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function aG(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function aW(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function aY(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return aV(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return aV(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var a$={},aQ=function(e){var t=e.row,r=aU(t.original).getRowActions;return(0,z.jsx)(td.Row,aW(aG({color:"inherit",linkTo:t.original.id},t.getRowProps()),{actions:r(),className:"group",children:t.cells.map(function(e){return(0,z.jsx)(td.Cell,aW(aG({},e.getCellProps()),{children:e.render("Cell")}))})}))};let aK=function(){var e=(0,ei.Bd)().t,t=a_(location.search,a$),r=t.removeTab,n=t.setTab,i=t.saveTab,a=t.availableTabs,o=t.activeFilterTab,l=t.reset,s=t.paginate,c=t.setFilters,u=t.filters,d=t.setQuery,f=t.queryObject,p=t.representationObject,m=(0,i_.s)().trackNumberOfDiscounts,h=parseInt(null==f?void 0:f.offset)||0,y=parseInt(f.limit)||15,b=(0,J.useAdminDiscounts)(aG({is_dynamic:!1,expand:"rule,rule.conditions,rule.conditions.products,regions"},f),{keepPreviousData:!0,onSuccess:function(e){m({count:e.count})}}),v=b.discounts,g=b.isLoading,x=b.count,j=aY((0,U.useState)(""),2),w=j[0],O=j[1],S=aY((0,U.useState)(0),2),P=S[0],C=S[1];(0,U.useEffect)(function(){if(x&&f.limit){var e=Math.ceil(x/f.limit);e!==P&&C(e)}},[x,f.limit]);var A=aY(av(),1)[0],N=(0,e4.useTable)({columns:A,data:v||[],manualPagination:!0,initialState:{pageSize:y,pageIndex:h/y},pageCount:P,autoResetPage:!1},e4.usePagination),k=N.getTableProps,_=N.getTableBodyProps,E=N.headerGroups,I=N.rows,D=N.prepareRow,T=N.canPreviousPage,M=N.canNextPage,R=N.pageCount,L=N.gotoPage,F=N.nextPage,B=N.previousPage,q=N.state.pageIndex;(0,U.useEffect)(function(){var e=setTimeout(function(){w?(d(w),L(0)):l()},400);return function(){return clearTimeout(e)}},[w]);var H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=t8().stringify(e);window.history.replaceState("/a/discounts","","".concat("?".concat(t)))},V=function(){(0,t6.isEmpty)(p)?H({offset:0,limit:15}):H(p)};return(0,U.useEffect)(function(){V()},[p]),(0,z.jsx)(tb,{hasPagination:!0,isLoading:g,numberOfRows:f.limit,pagingState:{count:x,offset:f.offset,pageSize:f.offset+I.length,title:e("discount-table-discounts","Discounts"),currentPage:q+1,pageCount:R,nextPage:function(){M&&(s(1),F())},prevPage:function(){T&&(s(-1),B())},hasNext:M,hasPrev:T},children:(0,z.jsxs)(td,aW(aG({filteringOptions:(0,z.jsx)(af,{filters:u,submitFilters:c,clearFilters:function(){l(),O("")},tabs:a,onTabClick:n,activeTab:o,onRemoveTab:r,onSaveTab:i}),enableSearch:!0,handleSearch:O,searchPlaceholder:e("discount-table-search-by-code-or-description","Search by code or description..."),searchValue:w},k()),{children:[(0,z.jsx)(td.Head,{children:null==E?void 0:E.map(function(e){return(0,z.jsx)(td.HeadRow,aW(aG({},e.getHeaderGroupProps()),{children:e.headers.map(function(e){return(0,z.jsx)(td.HeadCell,aW(aG({},e.getHeaderProps()),{children:e.render("Header")}))})}))})}),(0,z.jsx)(td.Body,aW(aG({},_()),{children:I.map(function(e){return D(e),(0,z.jsx)(aQ,{row:e},e.original.id)})}))]}))})};function aZ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function aJ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aX(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){aJ(e,t,r[t])})}return e}function a0(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function a1(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return aZ(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return aZ(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}!function(e){e.PRODUCTS="products",e.PRODUCT_TYPES="product_types",e.PRODUCT_COLLECTIONS="product_collections",e.PRODUCT_TAGS="product_tags",e.CUSTOMER_GROUPS="customer_groups"}(o||(o={})),function(e){e.IN="in",e.NOT_IN="not_in"}(l||(l={})),function(e){e.ITEM="item",e.TOTAL="total"}(s||(s={})),function(e){e.FIXED="fixed",e.PERCENTAGE="percentage",e.FREE_SHIPPING="free_shipping"}(c||(c={}));var a2={products:{id:void 0,operator:l.IN,type:o.PRODUCTS,items:[]},product_collections:{id:void 0,operator:l.IN,type:o.PRODUCT_COLLECTIONS,items:[]},product_tags:{id:void 0,operator:l.IN,type:o.PRODUCT_TAGS,items:[]},product_types:{id:void 0,operator:l.IN,type:o.PRODUCT_TYPES,items:[]},customer_groups:{id:void 0,operator:l.IN,type:o.CUSTOMER_GROUPS,items:[]}},a3=function(e){var t=e.children,r=a1((0,U.useState)(!1),2),n=r[0],i=r[1],a=a1((0,U.useState)(!1),2),o=a[0],l=a[1],u=a1((0,U.useState)(null),2),d=u[0],f=u[1],p=a1((0,U.useState)(null),2),m=p[0],h=p[1],y=a1((0,U.useState)(a2),2),b=y[0],v=y[1],g=(0,eR.mN)({defaultValues:{rule:{type:c.PERCENTAGE,allocation:s.TOTAL}},shouldUnregister:!0}),x=g.watch("rule.type"),j=g.watch("is_dynamic"),w=g.watch("usage_limit"),O=g.watch("valid_duration"),S=g.watch("ends_at"),P=g.watch("starts_at");(0,U.useEffect)(function(){n&&!S&&g.setValue("ends_at",new Date(new Date().getTime()+6048e5)),!n&&S&&g.setValue("ends_at",null)},[S,n]),(0,U.useEffect)(function(){o&&!P&&g.setValue("starts_at",new Date(new Date().getTime())),!o&&P&&g.setValue("starts_at",void 0)},[S,n]);var C=function(){v(a2),g.reset({rule:{type:c.PERCENTAGE,allocation:s.TOTAL}})};return(0,U.useEffect)(function(){C()},[]),(0,z.jsx)(eR.Op,a0(aX({},g),{children:(0,z.jsx)(a5.Provider,{value:{type:x,isDynamic:j,hasExpiryDate:n,setHasExpiryDate:i,hasStartDate:o,setHasStartDate:l,handleConfigurationChanged:function(e){e.indexOf("ends_at")>-1&&!n?i(!0):-1===e.indexOf("ends_at")&&n&&i(!1),-1===e.indexOf("starts_at")&&o?l(!1):e.indexOf("starts_at")>-1&&!o&&l(!0),-1===e.indexOf("usage_limit")&&w?(f(w),setTimeout(function(){g.setValue("usage_limit",null)},300)):e.indexOf("usage_limit")>-1&&w&&g.setValue("usage_limit",d),-1===e.indexOf("valid_duration")&&""!==O?(h(O),setTimeout(function(){g.setValue("valid_duration","")},300)):e.indexOf("valid_duration")>-1&&""===O&&g.setValue("valid_duration",m)},conditions:b,updateCondition:function(e){var t=e.type,r=e.items,n=e.operator;v(function(e){return a0(aX({},e),aJ({},t,a0(aX({},e[t]),{items:r,operator:n})))})},setConditions:v,handleReset:C,form:g},children:t})}))},a5=U.createContext(null),a6=function(){var e=U.useContext(a5),t=(0,eR.xW)(),r=(0,ei.Bd)().t;if(!e)throw Error(r("form-use-discount-form-must-be-a-child-of-discount-form-context","useDiscountForm must be a child of DiscountFormContext"));return aX({},t,e)};let a4=function(e){var t=e.actions,r=e.index,n=e.title,i=e.description;return(0,z.jsxs)("div",{className:"p-base rounded-rounded gap-base flex items-center justify-between border",children:[(0,z.jsxs)("div",{className:"gap-base flex w-full overflow-hidden",children:[(0,z.jsx)("div",{children:(0,z.jsxs)(rk.A,{className:"inter-base-semibold flex h-[40px] w-[40px] items-center justify-center",variant:"default",children:["\xa7",r]})}),(0,z.jsxs)("div",{className:"flex w-full flex-1 flex-col justify-center truncate",children:[(0,z.jsx)("div",{className:"inter-small-semibold",children:n}),i&&("string"==typeof i?(0,z.jsx)("div",{className:"inter-small-regular text-grey-50",children:i}):i)]})]}),t&&(0,z.jsx)("div",{children:(0,z.jsx)(em,{forceDropdown:!0,actions:t})})]})},a8=function(e){var t,r,n=e.size,i=void 0===n?"24":n,a=e.color,o=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["size","color"]);return(0,z.jsx)("svg",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({width:i,height:i,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),r=r={children:(0,z.jsx)("path",{d:"M6 12L10 8L6 4",stroke:void 0===a?"currentColor":a,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))};var a7=r(38852);function a9(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function ot(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function or(e,t){if(e){if("string"==typeof e)return a9(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a9(e,t)}}var on=function(e){var t,r,n=e.label,i=e.resourceName,a=e.selectedIds,o=e.isLoading,l=e.totalCount,s=void 0===l?0:l,c=e.data,u=e.columns,d=e.onChange,f=e.options,p=e.renderRow,m=e.renderHeaderGroup,h=e.setQuery,y=e.queryObject,b=e.paginate,v=(0,U.useMemo)(function(){return c||[]},[c]),g=(0,e4.useTable)({columns:u,data:v,manualPagination:!0,initialState:{pageIndex:y.offset/y.limit,pageSize:y.limit,selectedRowIds:(void 0===a?[]:a).reduce(function(e,t){return e[t]=!0,e},{})},pageCount:Math.ceil(s/y.limit),autoResetSelectedRows:!1,autoResetPage:!1,getRowId:function(e){return e.id}},e4.useSortBy,e4.usePagination,e4.useRowSelect,oi);(0,U.useEffect)(function(){d&&d(Object.keys(g.state.selectedRowIds))},[g.state.selectedRowIds]);var x=(0,U.useCallback)(function(e){h(e),e&&g.gotoPage(0)},[h,g]),j=function(e){if(Array.isArray(e))return e}(t=(0,U.useState)(""))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(t,2)||or(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),w=j[0],O=j[1],S=(0,e8.d)(w,500);return(0,U.useEffect)(function(){x(S)},[S]),(0,z.jsxs)("div",{children:[n&&(0,z.jsx)("div",{className:"inter-base-semibold my-large",children:n}),(0,z.jsx)(tb,{isLoading:o,numberOfRows:y.limit,hasPagination:!0,pagingState:{count:s,offset:y.offset,pageSize:y.offset+g.rows.length,title:void 0===i?"":i,currentPage:g.state.pageIndex+1,pageCount:g.pageCount,nextPage:function(){g.canNextPage&&(b(1),g.nextPage())},prevPage:function(){g.canPreviousPage&&(b(-1),g.previousPage())},hasNext:g.canNextPage,hasPrev:g.canPreviousPage},children:(0,z.jsxs)(td,ot(oe({},f,g.getTableProps()),{handleSearch:f.enableSearch?O:void 0,searchValue:w,className:"relative",children:[m&&(0,z.jsx)(td.Head,{children:null===(r=g.headerGroups)||void 0===r?void 0:r.map(function(e){return m({headerGroup:e})})}),(0,z.jsx)(td.Body,ot(oe({},g.getTableBodyProps()),{children:g.rows.map(function(e){return g.prepareRow(e),p({row:e})})}))]}))})]})},oi=function(e){e.visibleColumns.push(function(e){return[{id:"selection",Header:function(e){var t=e.getToggleAllRowsSelectedProps;return(0,z.jsx)("div",{className:"flex justify-center",children:(0,z.jsx)(tt,ot(oe({},t()),{onClick:function(e){return e.stopPropagation()}}))})},Cell:function(e){var t=e.row;return(0,z.jsx)("div",{className:"flex justify-center",children:(0,z.jsx)(tt,ot(oe({},t.getToggleRowSelectedProps()),{onClick:function(e){return e.stopPropagation()}}))})}}].concat(function(e){if(Array.isArray(e))return a9(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||or(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())})};function oa(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function oo(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var ol=function(e){var t=e.row;return(0,z.jsx)(td.Row,oo(oa({},t.getRowProps()),{children:t.cells.map(function(e){return(0,z.jsx)(td.Cell,oo(oa({},e.getCellProps()),{children:e.render("Cell")}))})}))},os=function(e){var t=e.headerGroup;return(0,z.jsx)(td.HeadRow,oo(oa({},t.getHeaderGroupProps()),{children:t.headers.map(function(e){return(0,z.jsx)(td.HeadCell,oo(oa({className:"w-[100px]"},e.getHeaderProps(e.getSortByToggleProps())),{children:e.render("Header")}))})}))},oc=function(){var e=(0,ei.Bd)().t;return(0,U.useMemo)(function(){return[{Header:function(){return(0,z.jsxs)("div",{className:"flex min-w-[546px] items-center gap-1",children:[e("shared-title","Title")," ",(0,z.jsx)(ta,{size:16})]})},accessor:"title",Cell:function(e){var t=e.row.original;return(0,z.jsx)("span",{children:t.title})}},{Header:function(){return(0,z.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[e("shared-products","Products")," ",(0,z.jsx)(ta,{size:16})]})},id:"products",accessor:function(e){var t;return null==e?void 0:null===(t=e.products)||void 0===t?void 0:t.length},Cell:function(e){var t=e.cell.value;return(0,z.jsx)("div",{className:"text-right",children:t})}}]},[])},ou={limit:12,offset:0},od=r(39451);function of(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function op(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){of(e,t,r[t])})}return e}function om(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function oh(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}let oy={Root:od.bL,Item:function(e){var t=e.label,r=e.sublabel,n=e.description,i=e.className,a=e.disabled,o=e.disabledTooltip,l=e.children,s=oh(e,["label","sublabel","description","className","disabled","disabledTooltip","children"]);return(0,z.jsxs)("label",{className:(0,en.default)("rounded-rounded border-grey-20 p-base mb-xsmall gap-base relative flex cursor-pointer items-start border",{"bg-grey-5 text-grey-40":a},i),htmlFor:s.value,children:[a?(0,z.jsx)(r9.A,{content:o,children:(0,z.jsx)(nO.A,{size:20,className:"text-grey-40"})}):(0,z.jsxs)(od.q7,om(op({},s),{id:s.value,disabled:a,className:(0,en.default)("radio-outer-ring outline-0","shadow-grey-20 rounded-circle h-[20px] w-[20px] shrink-0 shadow-[0_0_0_1px]"),children:[(0,z.jsx)(od.C1,{className:(0,en.default)("indicator relative flex h-full w-full items-center justify-center","after:bg-violet-60 after:rounded-circle after:absolute after:inset-0 after:m-auto after:block after:h-[12px] after:w-[12px]")}),(0,z.jsx)(od.C1,{"aria-hidden":"true",className:(0,en.default)("shadow-violet-60 rounded-rounded absolute inset-0 shadow-[0_0_0_2px]")})]})),(0,z.jsxs)("div",{className:"truncate",children:[(0,z.jsx)("div",{className:"flex items-center",children:(0,z.jsxs)("p",{className:"inter-base-semibold truncate",children:[t," ",r?(0,z.jsx)("span",{className:"inter-base-regular text-grey-50",children:r}):null]})}),n&&(0,z.jsx)("p",{className:(0,en.default)("inter-small-regular text-grey-50 mt-2xsmall truncate",{"text-grey-40":a}),children:n}),l]})]})},SimpleItem:function(e){var t=e.label,r=e.description,n=e.className,i=oh(e,["label","description","className"]);return(0,z.jsxs)("label",{className:(0,en.default)("mr-large flex items-center last:mr-0",of({},"pointer-events-none select-none opacity-50",i.disabled),n),htmlFor:i.value,children:[(0,z.jsx)(od.q7,om(op({},i),{id:i.value,className:(0,en.default)("radio-outer-ring outline-0","rounded-circle h-[20px] w-[20px] shrink-0 shadow-[0_0_0_1px] shadow-[#D1D5DB]"),children:(0,z.jsx)(od.C1,{className:(0,en.default)("indicator relative flex h-full w-full items-center justify-center","after:bg-violet-60 after:rounded-circle after:absolute after:inset-0 after:m-auto after:block after:h-[12px] after:w-[12px]")})})),(0,z.jsxs)("div",{className:"ml-small inter-base-regular w-full cursor-pointer",children:[(0,z.jsx)("span",{children:t&&t}),(0,z.jsx)("span",{children:r&&r})]})]})}},ob=function(e){var t=e.value,r=e.onChange,n=(0,ei.Bd)().t;return(0,z.jsxs)(oy.Root,{value:t,onValueChange:r,className:"gap-base mb-4 grid grid-cols-2",children:[(0,z.jsx)(oy.Item,{className:"w-full",label:"In",value:l.IN,description:n("shared-applies-to-the-selected-items","Applies to the selected items.")}),(0,z.jsx)(oy.Item,{className:"w-full",label:"Not in",value:l.NOT_IN,description:n("shared-applies-to-all-items-except-the-selected-items","Applies to all items except the selected items.")})]})},ov=function(e){var t=e.type,r=e.items,n=e.operator,i=e.onClose,a=(0,ei.Bd)().t,o=(0,U.useContext)(a7.H8),l=o.pop,s=o.reset,c=a6().updateCondition;return(0,z.jsxs)("div",{className:"gap-x-xsmall flex w-full justify-end",children:[(0,z.jsx)(W.A,{variant:"ghost",size:"small",onClick:function(){i(),s()},children:a("add-condition-tables-cancel","Cancel")}),(0,z.jsx)(W.A,{variant:"primary",size:"small",onClick:function(){c({type:t,items:r,operator:n}),l()},children:a("add-condition-tables-save-and-add-more","Save and add more")}),(0,z.jsx)(W.A,{variant:"primary",size:"small",onClick:function(){c({type:t,items:r,operator:n}),i(),s()},children:a("add-condition-tables-save-and-close","Save and close")})]})};function og(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ox(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return og(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return og(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}let oj=function(e){var t,r=e.onClose,n=(0,ei.Bd)().t,i=nH(ou),a=a6().conditions,o=ox((0,U.useState)((null===(t=a.product_collections)||void 0===t?void 0:t.items)||[]),2),l=o[0],s=o[1],c=ox((0,U.useState)(a.product_collections.operator),2),u=c[0],d=c[1],f=(0,J.useAdminCollections)(i.queryObject,{keepPreviousData:!0}),p=f.isLoading,m=f.count,h=f.collections,y=oc();return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(eN.A.Content,{children:[(0,z.jsx)(ob,{value:u,onChange:d}),(0,z.jsx)(on,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({options:{enableSearch:!0,immediateSearchFocus:!0,searchPlaceholder:n("add-condition-tables-search-by-title","Search by title...")},resourceName:"Collections",totalCount:m||0,selectedIds:null==l?void 0:l.map(function(e){return e.id}),data:h,columns:y,isLoading:p,onChange:function(e){s(((null==h?void 0:h.filter(function(t){return e.includes(t.id)}))||[]).map(function(e){return{id:e.id,label:e.title}}))},renderRow:ol,renderHeaderGroup:os},i))]}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsx)(ov,{type:"product_collections",items:l,onClose:r,operator:u})})]})};function ow(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function oO(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var oS=function(e){var t=e.headerGroup;return(0,z.jsx)(td.HeadRow,oO(ow({},t.getHeaderGroupProps()),{children:t.headers.map(function(e){return(0,z.jsx)(td.HeadCell,oO(ow({className:"w-[100px]"},e.getHeaderProps(e.getSortByToggleProps())),{children:e.render("Header")}))})}))},oP=function(e){var t=e.row;return(0,z.jsx)(td.Row,oO(ow({},t.getRowProps()),{children:t.cells.map(function(e){return(0,z.jsx)(td.Cell,oO(ow({},e.getCellProps()),{children:e.render("Cell")}))})}))},oC=function(){var e=(0,ei.Bd)().t;return(0,U.useMemo)(function(){return[{Header:function(){return(0,z.jsxs)("div",{className:"flex min-w-[540px] items-center gap-1",children:[e("shared-title","Title")," ",(0,z.jsx)(ta,{size:16})]})},accessor:"name"},{Header:function(){return(0,z.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[e("shared-members","Members")," ",(0,z.jsx)(ta,{size:16})]})},id:"members",accessor:function(e){var t;return null===(t=e.customers)||void 0===t?void 0:t.length},Cell:function(e){var t=e.cell.value;return(0,z.jsx)("div",{className:"text-right",children:t})}}]},[])};function oA(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function oN(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return oA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return oA(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}let ok=function(e){var t,r=e.onClose,n=(0,ei.Bd)().t,i=nH(ou),a=a6().conditions,o=oN((0,U.useState)((null==a?void 0:null===(t=a.customer_groups)||void 0===t?void 0:t.items)||[]),2),l=o[0],s=o[1],c=oN((0,U.useState)(a.customer_groups.operator),2),u=c[0],d=c[1],f=(0,J.useAdminCustomerGroups)(i.queryObject,{keepPreviousData:!0}),p=f.isLoading,m=f.count,h=f.customer_groups,y=oC();return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(eN.A.Content,{children:[(0,z.jsx)(ob,{value:u,onChange:d}),(0,z.jsx)(on,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({options:{enableSearch:!0,immediateSearchFocus:!0,searchPlaceholder:n("add-condition-tables-search-groups","Search groups...")},resourceName:"Customer groups",totalCount:m||0,selectedIds:l.map(function(e){return e.id}),data:h,columns:y,isLoading:p,onChange:function(e){s(((null==h?void 0:h.filter(function(t){return e.includes(t.id)}))||[]).map(function(e){return{id:e.id,label:e.name}}))},renderRow:oP,renderHeaderGroup:oS},i))]}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsx)(ov,{type:"customer_groups",items:l,onClose:r,operator:u})})]})};function o_(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function oE(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var oI=function(e){switch(e){case"proposed":return"warning";case"published":return"success";case"rejected":return"danger";default:return"default"}},oD=function(e){var t=e.row;return(0,z.jsx)(td.Row,oE(o_({},t.getRowProps()),{children:t.cells.map(function(e){return(0,z.jsx)(td.Cell,oE(o_({},e.getCellProps()),{children:e.render("Cell")}))})}))},oT=function(e){var t=e.headerGroup;return(0,z.jsx)(td.HeadRow,oE(o_({},t.getHeaderGroupProps()),{children:t.headers.map(function(e){return(0,z.jsx)(td.HeadCell,oE(o_({className:"w-[100px]"},e.getHeaderProps(e.getSortByToggleProps())),{children:e.render("Header")}))})}))},oM=function(){var e=(0,ei.Bd)().t;return(0,U.useMemo)(function(){return[{Header:function(){return(0,z.jsxs)("div",{className:"flex min-w-[443px] items-center gap-1",children:[e("shared-title","Title")," ",(0,z.jsx)(ta,{size:16})]})},accessor:"title",Cell:function(e){var t=e.row.original;return(0,z.jsxs)("div",{className:"flex items-center",children:[(0,z.jsx)("div",{className:"my-1.5 mr-4 flex h-[40px] w-[30px] items-center",children:t.thumbnail?(0,z.jsx)("img",{src:t.thumbnail,className:"rounded-soft h-full object-cover"}):(0,z.jsx)(nm,{})}),(0,z.jsx)("div",{className:"flex flex-col",children:(0,z.jsx)("span",{children:t.title})})]})}},{Header:function(){return(0,z.jsxs)("div",{className:"flex items-center gap-1",children:[e("shared-status","Status")," ",(0,z.jsx)(ta,{size:16})]})},accessor:"status",Cell:function(e){var t=e.row.original;return(0,z.jsx)(tv.A,{title:"".concat(t.status.charAt(0).toUpperCase()).concat(t.status.slice(1)),variant:oI(t.status)})}},{Header:function(){return(0,z.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[e("shared-variants","Variants")," ",(0,z.jsx)(ta,{size:16})]})},id:"variants",accessor:function(e){return e.variants.length},Cell:function(e){var t=e.cell.value;return(0,z.jsx)("div",{className:"text-right",children:t})}}]},[])};function oR(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function oL(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return oR(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return oR(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}let oz=function(e){var t,r=e.onClose,n=(0,ei.Bd)().t,i=nH(ou),a=a6().conditions,o=oL((0,U.useState)((null===(t=a.products)||void 0===t?void 0:t.items)||[]),2),l=o[0],s=o[1],c=oL((0,U.useState)(a.products.operator),2),u=c[0],d=c[1],f=(0,J.useAdminProducts)(i.queryObject,{keepPreviousData:!0}),p=f.isLoading,m=f.count,h=f.products,y=oM();return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(eN.A.Content,{children:[(0,z.jsx)(ob,{value:u,onChange:d}),(0,z.jsx)(on,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({options:{enableSearch:!0,immediateSearchFocus:!0,searchPlaceholder:n("add-condition-tables-search-products","Search products...")},resourceName:"Products",totalCount:m||0,selectedIds:l.map(function(e){return e.id}),data:h,columns:y,isLoading:p,onChange:function(e){s(((null==h?void 0:h.filter(function(t){return e.includes(t.id)}))||[]).map(function(e){return{id:e.id,label:e.title}}))},renderRow:oD,renderHeaderGroup:oT},i))]}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsx)(ov,{type:"products",items:l,onClose:r,operator:u})})]})};function oF(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function oB(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var oq=[{Header:function(){return(0,z.jsx)("div",{className:"flex items-center gap-1",children:(0,z.jsx)(ei.wD,{children:function(e){return(0,z.jsxs)(z.Fragment,{children:[e("shared-tag","Tag")," ",(0,z.jsx)(ta,{size:16})]})}})})},accessor:"value",Cell:function(e){var t=e.row.original;return(0,z.jsx)("div",{className:"w-[220px]",children:(0,z.jsxs)("span",{className:"bg-grey-10 rounded-rounded px-2 py-0.5",children:["#",t.value]})})}}],oH=function(e){var t=e.headerGroup;return(0,z.jsx)(td.HeadRow,oB(oF({},t.getHeaderGroupProps()),{children:t.headers.map(function(e){return(0,z.jsx)(td.HeadCell,oB(oF({},e.getHeaderProps(e.getSortByToggleProps())),{className:"w-[20px]",children:e.render("Header")}))})}))},oU=function(e){var t=e.row;return(0,z.jsx)(td.Row,oB(oF({},t.getRowProps()),{children:t.cells.map(function(e){return(0,z.jsx)(td.Cell,oB(oF({},e.getCellProps()),{children:e.render("Cell")}))})}))};function oV(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function oG(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return oV(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return oV(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}let oW=function(e){var t,r=e.onClose,n=(0,ei.Bd)().t,i=nH(ou),a=a6().conditions,o=oG((0,U.useState)((null===(t=a.product_tags)||void 0===t?void 0:t.items)||[]),2),l=o[0],s=o[1],c=oG((0,U.useState)(a.product_tags.operator),2),u=c[0],d=c[1],f=(0,J.useAdminProductTags)(i.queryObject,{keepPreviousData:!0}),p=f.isLoading,m=f.count,h=f.product_tags;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(eN.A.Content,{children:[(0,z.jsx)(ob,{value:u,onChange:d}),(0,z.jsx)(on,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({options:{enableSearch:!0,immediateSearchFocus:!0,searchPlaceholder:n("add-condition-tables-search-by-tag","Search by tag...")},resourceName:"Tags",totalCount:m||0,selectedIds:l.map(function(e){return e.id}),data:h,columns:oq,isLoading:p,onChange:function(e){s(((null==h?void 0:h.filter(function(t){return e.includes(t.id)}))||[]).map(function(e){return{id:e.id,label:e.value}}))},renderRow:oU,renderHeaderGroup:oH},i))]}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsx)(ov,{type:"product_tags",items:l,onClose:r,operator:u})})]})};function oY(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function o$(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var oQ=function(e){var t=e.row;return(0,z.jsx)(td.Row,o$(oY({},t.getRowProps()),{children:t.cells.map(function(e){return(0,z.jsx)(td.Cell,o$(oY({},e.getCellProps()),{children:e.render("Cell")}))})}))},oK=function(e){var t=e.headerGroup;return(0,z.jsx)(td.HeadRow,o$(oY({},t.getHeaderGroupProps()),{children:t.headers.map(function(e){return(0,z.jsx)(td.HeadCell,o$(oY({className:"w-[100px]"},e.getHeaderProps(e.getSortByToggleProps())),{children:e.render("Header")}))})}))},oZ=function(){return(0,U.useMemo)(function(){return[{Header:function(){return(0,z.jsx)(ei.wD,{children:function(e){return(0,z.jsxs)("div",{className:"flex min-w-[626px] items-center gap-1",children:[e("shared-type","Type")," ",(0,z.jsx)(ta,{size:16})]})}})},accessor:"value",Cell:function(e){var t=e.row.original;return(0,z.jsx)("span",{children:t.value})}}]},[])};function oJ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function oX(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return oJ(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return oJ(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}let o0=function(e){var t,r=e.onClose,n=(0,ei.Bd)().t,i=nH(ou),a=a6().conditions,o=oX((0,U.useState)((null===(t=a.product_types)||void 0===t?void 0:t.items)||[]),2),l=o[0],s=o[1],c=oX((0,U.useState)(a.product_types.operator),2),u=c[0],d=c[1],f=(0,J.useAdminProductTypes)(i.queryObject,{keepPreviousData:!0}),p=f.isLoading,m=f.count,h=f.product_types,y=oZ();return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(eN.A.Content,{children:[(0,z.jsx)(ob,{value:u,onChange:d}),(0,z.jsx)(on,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({options:{enableSearch:!0,immediateSearchFocus:!0,searchPlaceholder:n("add-condition-tables-search-by-type","Search by type...")},resourceName:"Types",totalCount:m||0,selectedIds:null==l?void 0:l.map(function(e){return e.id}),data:h,columns:y,isLoading:p,onChange:function(e){s(((null==h?void 0:h.filter(function(t){return e.includes(t.id)}))||[]).map(function(e){return{id:e.id,label:e.value}}))},renderRow:oQ,renderHeaderGroup:oK},i))]}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsx)(ov,{type:"product_types",items:l,onClose:r,operator:u})})]})};function o1(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function o2(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o3(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){o2(e,t,r[t])})}return e}function o5(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var o6={products:{id:void 0,operator:l.IN,type:o.PRODUCTS,items:[]},product_collections:{id:void 0,operator:l.IN,type:o.PRODUCT_COLLECTIONS,items:[]},product_tags:{id:void 0,operator:l.IN,type:o.PRODUCT_TAGS,items:[]},product_types:{id:void 0,operator:l.IN,type:o.PRODUCT_TYPES,items:[]},customer_groups:{id:void 0,operator:l.IN,type:o.CUSTOMER_GROUPS,items:[]}},o4=(0,U.createContext)(null),o8=function(e){var t,r=e.discount,n=e.children,i=(0,ei.Bd)().t,a=function(e){if(Array.isArray(e))return e}(t=(0,U.useState)(o6))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(t,2)||function(e,t){if(e){if("string"==typeof e)return o1(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o1(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),o=a[0],l=a[1],s=(0,J.useAdminUpdateDiscount)(r.id).mutate,c=(0,eC.A)(),u=function(){if(r.rule.conditions.length){var e=o6,t=!0,n=!1,i=void 0;try{for(var a,o=r.rule.conditions[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var s=a.value;e=o5(o3({},e),o2({},s.type,o5(o3({},e[s.type]),{id:s.id}))),l(e)}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}}else l(o6)};(0,U.useEffect)(function(){u()},[r]);var d=function(e){var t=Object.values(e).filter(function(e){return e.items.length}).map(function(e){var t;return o2(t={},e.type,e.items.map(function(e){return e.id})),o2(t,"operator",e.operator),t});t.length&&s({rule:{id:r.rule.id,conditions:t}},{onSuccess:function(){c(i("add-condition-conditions-were-successfully-added","Conditions were successfully added"),i("add-condition-discount-conditions-updated","Discount conditions updated"),"success")},onError:function(e){c("Error",(0,eA.u)(e),"error")}})};return(0,z.jsx)(o4.Provider,{value:{conditions:o,updateCondition:function(e){var t=e.type,r=e.items,n=e.operator;l(function(e){return o5(o3({},e),o2({},t,o5(o3({},e[t]),{items:r,operator:n})))})},reset:u,save:function(){d(o)},updateAndSave:function(e){var t=e.type,r=e.items,n=e.operator;d(o5(o3({},o),o2({},t,o5(o3({},o[t]),{items:r,operator:n}))))}},children:n})},o7=function(){var e=(0,ei.Bd)().t,t=(0,U.useContext)(o4);if(null===t)throw Error(e("add-condition-use-conditions-must-be-used-within-a-conditions-provider","useConditions must be used within a ConditionsProvider"));return t};let o9=function(e){var t=e.type,r=e.items,n=e.operator,i=e.onClose,a=(0,ei.Bd)().t,o=(0,U.useContext)(a7.H8),l=o.pop,s=o.reset,c=o7(),u=c.updateCondition,d=c.updateAndSave;return(0,z.jsxs)("div",{className:"gap-x-xsmall flex w-full justify-end",children:[(0,z.jsx)(W.A,{variant:"ghost",size:"small",onClick:i,children:a("details-condition-tables-cancel","Cancel")}),(0,z.jsx)(W.A,{variant:"primary",size:"small",onClick:function(){u({type:t,items:r,operator:n}),l()},children:a("details-condition-tables-save-and-add-more","Save and add more")}),(0,z.jsx)(W.A,{variant:"primary",size:"small",onClick:function(){d({type:t,items:r,operator:n}),i(),s()},children:a("details-condition-tables-save-and-close","Save and close")})]})};function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function lt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return le(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return le(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}let lr=function(e){var t,r=e.onClose,n=(0,ei.Bd)().t,i=nH(ou),a=o7().conditions,o=lt((0,U.useState)((null===(t=a.product_collections)||void 0===t?void 0:t.items)||[]),2),l=o[0],s=o[1];(0,U.useEffect)(function(){},[a]);var c=lt((0,U.useState)(a.product_collections.operator),2),u=c[0],d=c[1],f=(0,J.useAdminCollections)(i.queryObject,{keepPreviousData:!0}),p=f.isLoading,m=f.count,h=f.collections,y=oc();return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(eN.A.Content,{children:[(0,z.jsx)(ob,{value:u,onChange:d}),(0,z.jsx)(on,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({options:{enableSearch:!0,immediateSearchFocus:!0,searchPlaceholder:n("details-condition-tables-search-by-title","Search by title...")},resourceName:"Collections",totalCount:m||0,selectedIds:null==l?void 0:l.map(function(e){return e.id}),data:h,columns:y,isLoading:p,onChange:function(e){s(((null==h?void 0:h.filter(function(t){return e.includes(t.id)}))||[]).map(function(e){return{id:e.id,label:e.title}}))},renderRow:ol,renderHeaderGroup:os},i))]}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsx)(o9,{type:"product_collections",items:l,onClose:r,operator:u})})]})};function ln(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function li(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ln(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ln(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}let la=function(e){var t,r=e.onClose,n=(0,ei.Bd)().t,i=nH(ou),a=o7().conditions,o=li((0,U.useState)((null==a?void 0:null===(t=a.customer_groups)||void 0===t?void 0:t.items)||[]),2),l=o[0],s=o[1],c=li((0,U.useState)(a.customer_groups.operator),2),u=c[0],d=c[1],f=(0,J.useAdminCustomerGroups)(i.queryObject,{keepPreviousData:!0}),p=f.isLoading,m=f.count,h=f.customer_groups,y=oC();return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(eN.A.Content,{children:[(0,z.jsx)(ob,{value:u,onChange:d}),(0,z.jsx)(on,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({options:{enableSearch:!0,immediateSearchFocus:!0,searchPlaceholder:n("details-condition-tables-search-groups","Search groups...")},resourceName:"Customer groups",totalCount:m||0,selectedIds:l.map(function(e){return e.id}),data:h,columns:y,isLoading:p,onChange:function(e){s(((null==h?void 0:h.filter(function(t){return e.includes(t.id)}))||[]).map(function(e){return{id:e.id,label:e.name}}))},renderRow:oP,renderHeaderGroup:oS},i))]}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsx)(o9,{type:"customer_groups",items:l,onClose:r,operator:u})})]})};function lo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ll(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return lo(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lo(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}let ls=function(e){var t,r=e.onClose,n=(0,ei.Bd)().t,i=nH(ou),a=o7().conditions,o=ll((0,U.useState)((null===(t=a.products)||void 0===t?void 0:t.items)||[]),2),l=o[0],s=o[1],c=ll((0,U.useState)(a.products.operator),2),u=c[0],d=c[1],f=(0,J.useAdminProducts)(i.queryObject,{keepPreviousData:!0}),p=f.isLoading,m=f.count,h=f.products,y=oM();return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(eN.A.Content,{children:[(0,z.jsx)(ob,{value:u,onChange:d}),(0,z.jsx)(on,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({options:{enableSearch:!0,immediateSearchFocus:!0,searchPlaceholder:n("details-condition-tables-search-products","Search products...")},resourceName:"Products",totalCount:m||0,selectedIds:l.map(function(e){return e.id}),data:h,columns:y,isLoading:p,onChange:function(e){s(((null==h?void 0:h.filter(function(t){return e.includes(t.id)}))||[]).map(function(e){return{id:e.id,label:e.title}}))},renderRow:oD,renderHeaderGroup:oT},i))]}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsx)(o9,{type:"products",items:l,onClose:r,operator:u})})]})};function lc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function lu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return lc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lc(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}let ld=function(e){var t,r=e.onClose,n=(0,ei.Bd)().t,i=nH(ou),a=o7().conditions,o=lu((0,U.useState)((null===(t=a.product_tags)||void 0===t?void 0:t.items)||[]),2),l=o[0],s=o[1],c=lu((0,U.useState)(a.product_tags.operator),2),u=c[0],d=c[1],f=(0,J.useAdminProductTags)(i.queryObject,{keepPreviousData:!0}),p=f.isLoading,m=f.count,h=f.product_tags;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(eN.A.Content,{children:[(0,z.jsx)(ob,{value:u,onChange:d}),(0,z.jsx)(on,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({options:{enableSearch:!0,immediateSearchFocus:!0,searchPlaceholder:n("details-condition-tables-search-by-tag","Search by tag...")},resourceName:"Tags",totalCount:m||0,selectedIds:l.map(function(e){return e.id}),data:h,columns:oq,isLoading:p,onChange:function(e){s(((null==h?void 0:h.filter(function(t){return e.includes(t.id)}))||[]).map(function(e){return{id:e.id,label:e.value}}))},renderRow:oU,renderHeaderGroup:oH},i))]}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsx)(o9,{type:"product_tags",items:l,onClose:r,operator:u})})]})};function lf(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function lp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return lf(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lf(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}let lm=function(e){var t,r=e.onClose,n=(0,ei.Bd)().t,i=nH(ou),a=o7().conditions,o=lp((0,U.useState)((null===(t=a.product_types)||void 0===t?void 0:t.items)||[]),2),l=o[0],s=o[1],c=lp((0,U.useState)(a.product_types.operator),2),u=c[0],d=c[1],f=(0,J.useAdminProductTypes)(i.queryObject,{keepPreviousData:!0}),p=f.isLoading,m=f.count,h=f.product_types,y=oZ();return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(eN.A.Content,{children:[(0,z.jsx)(ob,{value:u,onChange:d}),(0,z.jsx)(on,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({options:{enableSearch:!0,immediateSearchFocus:!0,searchPlaceholder:n("details-condition-tables-search-by-type","Search by type...")},resourceName:"Types",totalCount:m||0,selectedIds:null==l?void 0:l.map(function(e){return e.id}),data:h,columns:y,isLoading:p,onChange:function(e){s(((null==h?void 0:h.filter(function(t){return e.includes(t.id)}))||[]).map(function(e){return{id:e.id,label:e.value}}))},renderRow:oQ,renderHeaderGroup:oK},i))]}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsx)(o9,{type:"product_types",items:l,onClose:r,operator:u})})]})},lh=function(e){var t=e.isDetails,r=e.onClose,n=(0,U.useContext)(a7.H8),i=(0,ei.Bd)().t;return(0,U.useMemo)(function(){return[{label:i("discount-form-product","Product"),value:o.PRODUCTS,description:i("discount-form-only-for-specific-products","Only for specific products"),onClick:function(){return n.push({title:i("discount-form-choose-products","Choose products"),onBack:function(){return n.pop()},view:t?(0,z.jsx)(ls,{onClose:r}):(0,z.jsx)(oz,{onClose:r})})}},{label:i("discount-form-customer-group","Customer group"),value:o.CUSTOMER_GROUPS,description:i("discount-form-only-for-specific-customer-groups","Only for specific customer groups"),onClick:function(){n.push({title:i("discount-form-choose-groups","Choose groups"),onBack:function(){return n.pop()},view:t?(0,z.jsx)(la,{onClose:r}):(0,z.jsx)(ok,{onClose:r})})}},{label:i("discount-form-tag","Tag"),value:o.PRODUCT_TAGS,description:i("discount-form-only-for-specific-tags","Only for specific tags"),onClick:function(){return n.push({title:"Choose tags",onBack:function(){return n.pop()},view:t?(0,z.jsx)(ld,{onClose:r}):(0,z.jsx)(oW,{onClose:r})})}},{label:i("discount-form-collection","Collection"),value:o.PRODUCT_COLLECTIONS,description:i("discount-form-only-for-specific-product-collections","Only for specific product collections"),onClick:function(){return n.push({title:i("discount-form-choose-collections","Choose collections"),onBack:function(){return n.pop()},view:t?(0,z.jsx)(lr,{onClose:r}):(0,z.jsx)(oj,{onClose:r})})}},{label:i("discount-form-type","Type"),value:o.PRODUCT_TYPES,description:i("discount-form-only-for-specific-product-types","Only for specific product types"),onClick:function(){return n.push({title:i("discount-form-choose-types","Choose types"),onBack:function(){return n.pop()},view:t?(0,z.jsx)(lm,{onClose:r}):(0,z.jsx)(o0,{onClose:r})})}}]},[t])};function ly(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function lb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ly(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ly(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var lv=function(e){var t=e.label,r=e.description,n=e.onClick;return(0,z.jsxs)("button",{onClick:n,className:"border-1 hover:bg-grey-5 mb-2 flex w-full cursor-pointer items-center justify-between rounded-lg border p-4 transition-all",children:[(0,z.jsxs)("div",{className:"flex flex-col items-start",children:[(0,z.jsx)("div",{className:"font-semibold ",children:t}),(0,z.jsx)("div",{className:"text-grey-50",children:r})]}),(0,z.jsx)(a8,{width:16,height:32,className:"text-grey-50"})]})};let lg=function(e){var t=e.onClose,r=e.conditions,n=e.save,i=e.isDetails,a=void 0!==i&&i,o=(0,ei.Bd)().t,l=(0,U.useContext)(a7.H8),s=lb((0,U.useState)(lh({onClose:t,isDetails:a})),2),c=s[0],u=s[1];return(0,U.useEffect)(function(){var e=[],t=!0,n=!1,i=void 0;try{for(var o,l=Object.entries(r)[Symbol.iterator]();!(t=(o=l.next()).done);t=!0){var s=lb(o.value,2),d=s[0],f=s[1];(a?f.id:f.items.length)&&e.push(d)}}catch(e){n=!0,i=e}finally{try{t||null==l.return||l.return()}finally{if(n)throw i}}u(c.filter(function(t){return!e.includes(t.value)}))},[r]),(0,z.jsx)(a7.Ay,{context:l,handleClose:t,children:(0,z.jsxs)(eN.A.Body,{className:"flex h-[calc(100vh-134px)] flex-col",children:[(0,z.jsxs)(eN.A.Header,{handleClose:t,children:[(0,z.jsx)("span",{className:"inter-xlarge-semibold",children:o("discount-form-add-conditions","Add Conditions")}),(0,z.jsxs)("span",{className:"text-grey-90 mt-6 flex items-center gap-1 font-semibold",children:[o("discount-form-choose-a-condition-type","Choose a condition type")," ",(0,z.jsx)(e0.A,{content:o("discount-form-you-can-only-add-one-of-each-type-of-condition","You can only add one of each type of condition")})]})]}),(0,z.jsx)(eN.A.Content,{className:"flex-1",children:c.length?c.map(function(e){return(0,z.jsx)(lv,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),e.value)}):(0,z.jsx)("div",{className:"flex h-full flex-1 flex-col items-center justify-center",children:(0,z.jsx)("span",{className:"inter-base-regular text-grey-40",children:o("discount-form-you-cannot-add-any-more-conditions","You cannot add any more conditions")})})}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"flex h-8 w-full justify-end",children:[(0,z.jsx)(W.A,{variant:"ghost",className:"text-small mr-2 w-32 justify-center",size:"small",onClick:t,children:o("discount-form-cancel","Cancel")}),(0,z.jsx)(W.A,{onClick:function(){n&&n(),t()},size:"small",className:"text-small w-32 justify-center",variant:"primary",children:o("discount-form-save","Save")})]})})]})})},lx=function(e){var t=e.show,r=e.onClose,n=o7(),i=n.conditions,a=n.save,o=n.reset;return(0,z.jsx)("div",{children:t&&(0,z.jsx)(lg,{isDetails:!0,onClose:function(){r(),o()},conditions:i,save:a})})};var lj=(0,U.createContext)(null),lw=function(e){var t=e.condition,r=e.discount,n=e.onClose,i=e.children,a=(0,ei.Bd)().t,o=(0,eC.A)(),l=(0,U.useContext)(a7.H8),s=l.pop,c=l.reset,u=(0,J.useAdminAddDiscountConditionResourceBatch)(r.id,t.id),d=(0,J.useAdminDeleteDiscountConditionResourceBatch)(r.id,t.id),f=function(e,t){u.mutate({resources:e.map(function(e){return{id:e}})},{onSuccess:function(){o(a("edit-condition-success","Success"),a("edit-condition-the-resources-were-successfully-added","The resources were successfully added"),"success"),null==t||t()},onError:function(){return o(a("edit-condition-error","Error"),a("edit-condition-failed-to-add-resources","Failed to add resources"),"error")}})};return(0,z.jsx)(lj.Provider,{value:{condition:t,discount:r,removeConditionResources:function(e){d.mutate({resources:e.map(function(e){return{id:e}})},{onSuccess:function(){o(a("edit-condition-success","Success"),a("edit-condition-the-resources-were-successfully-removed","The resources were successfully removed"),"success")},onError:function(){return o(a("edit-condition-error","Error"),a("edit-condition-failed-to-remove-resources","Failed to remove resources"),"error")}})},saveAndClose:function(e){f(e,function(){return n()}),c()},saveAndGoBack:function(e){f(e),s()},isLoading:u.isLoading||d.isLoading},children:i})},lO=function(){var e=(0,ei.Bd)().t,t=(0,U.useContext)(lj);if(null===t)throw Error(e("edit-condition-use-edit-condition-context-must-be-used-within-an-edit-condition-provider","useEditConditionContext must be used within an EditConditionProvider"));return t};function lS(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}let lP=function(){var e,t=(0,ei.Bd)().t,r=nH(ou),n=(0,U.useContext)(a7.H8).pop,i=function(e){if(Array.isArray(e))return e}(e=(0,U.useState)([]))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,2)||function(e,t){if(e){if("string"==typeof e)return lS(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lS(e,2)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),a=i[0],o=i[1],l=oc(),s=(0,J.useAdminCollections)(r.queryObject,{keepPreviousData:!0}),c=s.isLoading,u=s.count,d=s.collections,f=s.refetch,p=lO(),m=p.saveAndClose,h=p.saveAndGoBack;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(eN.A.Content,{children:(0,z.jsx)(on,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({options:{enableSearch:!0,immediateSearchFocus:!0,searchPlaceholder:t("collections-search","Search...")},resourceName:"Collections",totalCount:null!=u?u:0,selectedIds:a,data:d||[],columns:l,isLoading:c,onChange:function(e){return o(e)},renderRow:ol,renderHeaderGroup:os},r))}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"space-x-xsmall flex w-full justify-end",children:[(0,z.jsx)(W.A,{variant:"secondary",size:"small",onClick:n,children:t("collections-cancel","Cancel")}),(0,z.jsx)(W.A,{variant:"primary",size:"small",onClick:function(){return h(a,function(){return f()})},children:t("collections-save-and-go-back","Save and go back")}),(0,z.jsx)(W.A,{variant:"primary",size:"small",onClick:function(){return m(a)},children:t("collections-save-and-close","Save and close")})]})})]})};function lC(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}let lA=function(){var e,t=(0,ei.Bd)().t,r=nH(ou),n=(0,U.useContext)(a7.H8).pop,i=function(e){if(Array.isArray(e))return e}(e=(0,U.useState)([]))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,2)||function(e,t){if(e){if("string"==typeof e)return lC(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lC(e,2)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),a=i[0],o=i[1],l=oC(),s=(0,J.useAdminCustomerGroups)(r.queryObject,{keepPreviousData:!0}),c=s.isLoading,u=s.count,d=s.customer_groups,f=s.refetch,p=lO(),m=p.saveAndClose,h=p.saveAndGoBack;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(eN.A.Content,{children:(0,z.jsx)(on,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({options:{enableSearch:!0,immediateSearchFocus:!0,searchPlaceholder:t("customer-groups-search","Search...")},resourceName:"Groups",totalCount:null!=u?u:0,selectedIds:a,data:d||[],columns:l,isLoading:c,onChange:function(e){return o(e)},renderRow:oP,renderHeaderGroup:oS},r))}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"space-x-xsmall flex w-full justify-end",children:[(0,z.jsx)(W.A,{variant:"secondary",size:"small",onClick:n,children:t("customer-groups-cancel","Cancel")}),(0,z.jsx)(W.A,{variant:"primary",size:"small",onClick:function(){return h(a,function(){return f()})},children:t("customer-groups-save-and-go-back","Save and go back")}),(0,z.jsx)(W.A,{variant:"primary",size:"small",onClick:function(){return m(a)},children:t("customer-groups-save-and-close","Save and close")})]})})]})};function lN(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}let lk=function(){var e,t=(0,ei.Bd)().t,r=nH(ou),n=(0,U.useContext)(a7.H8).pop,i=function(e){if(Array.isArray(e))return e}(e=(0,U.useState)([]))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,2)||function(e,t){if(e){if("string"==typeof e)return lN(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lN(e,2)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),a=i[0],o=i[1],l=oZ(),s=(0,J.useAdminProductTypes)(r.queryObject,{keepPreviousData:!0}),c=s.isLoading,u=s.count,d=s.product_types,f=s.refetch,p=lO(),m=p.saveAndClose,h=p.saveAndGoBack;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(eN.A.Content,{children:(0,z.jsx)(on,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({options:{enableSearch:!0,immediateSearchFocus:!0,searchPlaceholder:t("product-types-search","Search...")},resourceName:"Types",totalCount:null!=u?u:0,selectedIds:a,data:d||[],columns:l,isLoading:c,onChange:function(e){return o(e)},renderRow:oQ,renderHeaderGroup:oK},r))}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"space-x-xsmall flex w-full justify-end",children:[(0,z.jsx)(W.A,{variant:"secondary",size:"small",onClick:n,children:t("product-types-cancel","Cancel")}),(0,z.jsx)(W.A,{variant:"primary",size:"small",onClick:function(){return h(a,function(){return f()})},children:t("product-types-save-and-go-back","Save and go back")}),(0,z.jsx)(W.A,{variant:"primary",size:"small",onClick:function(){return m(a)},children:t("product-types-save-and-close","Save and close")})]})})]})};function l_(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}let lE=function(){var e,t=(0,ei.Bd)().t,r=nH(ou),n=(0,U.useContext)(a7.H8).pop,i=function(e){if(Array.isArray(e))return e}(e=(0,U.useState)([]))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,2)||function(e,t){if(e){if("string"==typeof e)return l_(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l_(e,2)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),a=i[0],o=i[1],l=oM(),s=(0,J.useAdminProducts)(r.queryObject,{keepPreviousData:!0}),c=s.isLoading,u=s.count,d=s.products,f=lO(),p=f.saveAndClose,m=f.saveAndGoBack;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(eN.A.Content,{children:(0,z.jsx)(on,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({options:{enableSearch:!0,immediateSearchFocus:!0,searchPlaceholder:t("products-search","Search...")},resourceName:"Products",totalCount:null!=u?u:0,selectedIds:a,data:d||[],columns:l,isLoading:c,onChange:function(e){return o(e)},renderRow:oD,renderHeaderGroup:oT},r))}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"space-x-xsmall flex w-full justify-end",children:[(0,z.jsx)(W.A,{variant:"secondary",size:"small",onClick:n,children:t("products-cancel","Cancel")}),(0,z.jsx)(W.A,{variant:"primary",size:"small",onClick:function(){return m(a)},children:t("products-save-and-go-back","Save and go back")}),(0,z.jsx)(W.A,{variant:"primary",size:"small",onClick:function(){return p(a)},children:t("products-save-and-close","Save and close")})]})})]})};function lI(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}let lD=function(){var e,t=(0,ei.Bd)().t,r=nH(ou),n=(0,U.useContext)(a7.H8).pop,i=function(e){if(Array.isArray(e))return e}(e=(0,U.useState)([]))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,2)||function(e,t){if(e){if("string"==typeof e)return lI(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lI(e,2)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),a=i[0],o=i[1],l=(0,J.useAdminProductTags)(r.queryObject,{keepPreviousData:!0}),s=l.isLoading,c=l.count,u=l.product_tags,d=lO(),f=d.saveAndClose,p=d.saveAndGoBack;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(eN.A.Content,{children:(0,z.jsx)(on,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({options:{enableSearch:!0,immediateSearchFocus:!0,searchPlaceholder:t("tags-search","Search...")},resourceName:"Tags",totalCount:null!=c?c:0,selectedIds:a,data:u||[],columns:oq,isLoading:s,onChange:function(e){return o(e)},renderRow:oU,renderHeaderGroup:oH},r))}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"space-x-xsmall flex w-full justify-end",children:[(0,z.jsx)(W.A,{variant:"secondary",size:"small",onClick:n,children:t("tags-cancel","Cancel")}),(0,z.jsx)(W.A,{variant:"primary",size:"small",onClick:function(){return p(a)},children:t("tags-save-and-go-back","Save and go back")}),(0,z.jsx)(W.A,{variant:"primary",size:"small",onClick:function(){return f(a)},children:t("tags-save-and-close","Save and close")})]})})]})};var lT=function(e){var t=(0,ei.Bd)().t,r=U.useContext(a7.H8).pop;return{title:t("edit-condition-add-conditions","Add conditions"),onBack:r,view:function(){switch(e.type){case"products":return(0,z.jsx)(lE,{});case"product_collections":return(0,z.jsx)(lP,{});case"product_types":return(0,z.jsx)(lk,{});case"product_tags":return(0,z.jsx)(lD,{});case"customer_groups":return(0,z.jsx)(lA,{})}}()}};let lM=function(e){var t=e.numberOfSelectedRows,r=e.onDeselect,n=e.onRemove,i=(0,ei.Bd)().t,a=lT(lO().condition),o=!!t,l=(0,U.useContext)(a7.H8).push;return(0,z.jsx)("div",{className:"space-x-xsmall flex h-[34px] overflow-hidden",children:(0,z.jsxs)("div",{className:(0,en.default)("transition-all duration-200",{"translate-y-[-42px]":!o,"translate-y-[0px]":o}),children:[(0,z.jsxs)("div",{className:"mb-2 flex h-[34px] items-center divide-x",children:[(0,z.jsx)("span",{className:"inter-small-regular text-grey-50 mr-3",children:i("edit-condition-selected-with-count","{{count}}",{count:t})}),(0,z.jsxs)("div",{className:"space-x-xsmall flex pl-3",children:[(0,z.jsx)(W.A,{onClick:r,size:"small",variant:"ghost",className:"border-grey-20 border",children:i("edit-condition-deselect","Deselect")}),(0,z.jsx)(W.A,{onClick:n,size:"small",variant:"ghost",className:"border-grey-20 border text-rose-50",children:i("edit-condition-remove","Remove")})]})]}),(0,z.jsx)("div",{className:"flex h-[34px] justify-end",children:(0,z.jsxs)(W.A,{size:"small",variant:"ghost",className:"border-grey-20 border",onClick:function(){return l(a)},children:[(0,z.jsx)(n_.A,{size:20})," ",i("edit-condition-add","Add")]})})]})})};function lR(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function lL(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}let lz=function(){var e,t=nH(ou),r=function(e){if(Array.isArray(e))return e}(e=(0,U.useState)([]))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,2)||function(e,t){if(e){if("string"==typeof e)return lR(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lR(e,2)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),n=r[0],i=r[1],a=lO(),o=a.condition,l=a.removeConditionResources,s=a.isLoading,c=(0,J.useAdminProducts)(lL({discount_condition_id:o.id},t.queryObject),{keepPreviousData:!0}),u=c.isLoading,d=c.count,f=c.products,p=c.refetch,m=oM(),h=function(){i([])};return(0,U.useEffect)(function(){s||(p(),h())},[s]),(0,z.jsx)(eN.A.Content,{children:(0,z.jsx)(on,lL({options:{enableSearch:!1,tableActions:(0,z.jsx)(lM,{numberOfSelectedRows:n.length,onDeselect:h,onRemove:function(){l(n),h()}})},resourceName:"Products",totalCount:null!=d?d:0,selectedIds:n,data:f||[],columns:m,isLoading:u,onChange:function(e){return i(e)},renderRow:oD,renderHeaderGroup:oT},t))})};function lF(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function lB(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}let lq=function(){var e,t=nH(ou),r=function(e){if(Array.isArray(e))return e}(e=(0,U.useState)([]))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,2)||function(e,t){if(e){if("string"==typeof e)return lF(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lF(e,2)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),n=r[0],i=r[1],a=lO(),o=a.condition,l=a.removeConditionResources,s=a.isLoading,c=(0,J.useAdminCollections)(lB({discount_condition_id:o.id},t.queryObject),{keepPreviousData:!0}),u=c.isLoading,d=c.count,f=c.collections,p=c.refetch,m=oc(),h=function(){i([])};return(0,U.useEffect)(function(){s||(p(),h())},[s]),(0,z.jsx)(eN.A.Content,{children:(0,z.jsx)(on,lB({options:{enableSearch:!1,tableActions:(0,z.jsx)(lM,{numberOfSelectedRows:n.length,onDeselect:h,onRemove:function(){l(n),h()},deleting:s})},resourceName:"Collections",totalCount:null!=d?d:0,selectedIds:n,data:f||[],columns:m,isLoading:u,onChange:function(e){return i(e)},renderRow:ol,renderHeaderGroup:os},t))})};function lH(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function lU(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}let lV=function(){var e,t=nH(ou),r=lO(),n=r.condition,i=r.removeConditionResources,a=r.isLoading,o=(0,J.useAdminProductTypes)(lU({discount_condition_id:n.id},t.queryObject),{keepPreviousData:!0}),l=o.isLoading,s=o.count,c=o.product_types,u=o.refetch,d=oZ(),f=function(e){if(Array.isArray(e))return e}(e=(0,U.useState)([]))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,2)||function(e,t){if(e){if("string"==typeof e)return lH(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lH(e,2)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),p=f[0],m=f[1],h=function(){m([])};return(0,U.useEffect)(function(){a||(u(),h())},[a]),(0,z.jsx)(eN.A.Content,{children:(0,z.jsx)(on,lU({options:{enableSearch:!1,tableActions:(0,z.jsx)(lM,{numberOfSelectedRows:p.length,onDeselect:h,onRemove:function(){i(p),h()},deleting:a})},resourceName:"Types",totalCount:null!=s?s:0,selectedIds:p,data:c||[],columns:d,isLoading:l,onChange:function(e){return m(e)},renderRow:oQ,renderHeaderGroup:oK},t))})};function lG(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function lW(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}let lY=function(){var e,t=nH(ou),r=lO(),n=r.condition,i=r.removeConditionResources,a=r.isLoading,o=(0,J.useAdminProductTags)(lW({discount_condition_id:n.id},t.queryObject),{keepPreviousData:!0}),l=o.isLoading,s=o.count,c=o.product_tags,u=o.refetch,d=function(e){if(Array.isArray(e))return e}(e=(0,U.useState)([]))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,2)||function(e,t){if(e){if("string"==typeof e)return lG(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lG(e,2)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),f=d[0],p=d[1],m=function(){p([])};return(0,U.useEffect)(function(){a||(u(),m())},[a]),(0,z.jsx)(eN.A.Content,{children:(0,z.jsx)(on,lW({options:{enableSearch:!1,tableActions:(0,z.jsx)(lM,{numberOfSelectedRows:f.length,onDeselect:m,onRemove:function(){i(f),m()},deleting:a})},resourceName:"Tags",totalCount:null!=s?s:0,selectedIds:f,data:c||[],columns:oq,isLoading:l,onChange:function(e){return p(e)},renderRow:oU,renderHeaderGroup:oH},t))})};function l$(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function lQ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}let lK=function(){var e,t=nH(ou),r=lO(),n=r.condition,i=r.removeConditionResources,a=r.isLoading,o=(0,J.useAdminCustomerGroups)(lQ({discount_condition_id:n.id},t.queryObject),{keepPreviousData:!0}),l=o.isLoading,s=o.count,c=o.customer_groups,u=o.refetch,d=oC(),f=function(e){if(Array.isArray(e))return e}(e=(0,U.useState)([]))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,2)||function(e,t){if(e){if("string"==typeof e)return l$(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l$(e,2)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),p=f[0],m=f[1],h=function(){m([])};return(0,U.useEffect)(function(){a||(u(),h())},[a]),(0,z.jsx)(eN.A.Content,{children:(0,z.jsx)(on,lQ({options:{enableSearch:!1,tableActions:(0,z.jsx)(lM,{numberOfSelectedRows:p.length,onDeselect:h,onRemove:function(){i(p),h()},deleting:a})},resourceName:"Groups",totalCount:null!=s?s:0,selectedIds:p,data:c||[],columns:d,isLoading:l,onChange:function(e){return m(e)},renderRow:oP,renderHeaderGroup:oS},t))})};!function(e){e.PRODUCTS="products",e.PRODUCT_TYPES="product_types",e.PRODUCT_COLLECTIONS="product_collections",e.PRODUCT_TAGS="product_tags",e.CUSTOMER_GROUPS="customer_groups"}(u||(u={}));var lZ=function(e,t){switch(e){case"products":return t("utils-products","products");case"customer_groups":return t("utils-groups","groups");case"product_tags":return t("utils-tags","tags");case"product_collections":return t("utils-collections","collections");case"product_types":return t("utils-types","types")}};let lJ=function(e){var t=e.open,r=e.condition,n=e.discount,i=e.onClose,a=(0,ei.Bd)().t,o=(0,U.useContext)(a7.H8);return(0,z.jsx)(lw,{condition:r,discount:n,onClose:i,children:(0,z.jsx)(a7.Ay,{open:t,handleClose:i,context:o,children:(0,z.jsxs)(eN.A.Body,{children:[(0,z.jsx)(eN.A.Header,{handleClose:i,children:(0,z.jsx)("h1",{className:"inter-xlarge-semibold",children:a("edit-condition-title","Edit {{type}} in Discount Condition",{type:(0,t6.capitalize)(lZ(null==r?void 0:r.type,a))})})}),function(){switch(r.type){case"products":return(0,z.jsx)(lz,{});case"product_collections":return(0,z.jsx)(lq,{});case"product_types":return(0,z.jsx)(lV,{});case"product_tags":return(0,z.jsx)(lY,{});case"customer_groups":return(0,z.jsx)(lK,{})}}(),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsx)("div",{className:"flex w-full items-center justify-end",children:(0,z.jsx)(W.A,{variant:"primary",size:"small",type:"button",onClick:i,children:a("edit-condition-close","Close")})})})]})})})};function lX(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var l0=function(e){var t,r=(0,ei.Bd)().t,n=function(e){if(Array.isArray(e))return e}(t=(0,U.useState)(null))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(t,2)||function(e,t){if(e){if("string"==typeof e)return lX(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lX(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),i=n[0],a=n[1],o=(0,J.useAdminDiscount)(e.id).refetch,l=(0,J.useAdminGetDiscountCondition)(e.id,i,{expand:"product_collections,product_tags,product_types,customer_groups,products"},{enabled:!!i,cacheTime:0}).discount_condition,s=(0,J.useAdminDiscountRemoveCondition)(e.id).mutate,c=(0,eC.A)(),u=function(e){s(e,{onSuccess:function(){c(r("conditions-success","Success"),r("conditions-condition-removed","Condition removed"),"success"),o()},onError:function(e){c(r("conditions-error","Error"),(0,eA.u)(e),"error")}})};return{conditions:e.rule.conditions.map(function(e){return{type:e.type,title:l1(e.type),description:l2(e.type,r),actions:[{label:r("conditions-edit-condition","Edit condition"),icon:(0,z.jsx)(ec,{size:16}),variant:"ghost",onClick:function(){return a(e.id)}},{label:r("conditions-delete-condition","Delete condition"),icon:(0,z.jsx)(eu,{size:16}),variant:"danger",onClick:function(){return u(e.id)}}]}}),selectedCondition:l,deSelectCondition:function(){a(null)}}},l1=function(e){switch(e){case o.PRODUCTS:return"Product";case o.PRODUCT_COLLECTIONS:return"Collection";case o.PRODUCT_TAGS:return"Tag";case o.PRODUCT_TYPES:return"Type";case o.CUSTOMER_GROUPS:return"Customer Group"}},l2=function(e,t){switch(e){case o.PRODUCTS:return t("conditions-discount-is-applicable-to-specific-products","Discount is applicable to specific products");case o.PRODUCT_COLLECTIONS:return t("conditions-discount-is-applicable-to-specific-collections","Discount is applicable to specific collections");case o.PRODUCT_TAGS:return t("conditions-discount-is-applicable-to-specific-product-tags","Discount is applicable to specific product tags");case o.PRODUCT_TYPES:return t("conditions-discount-is-applicable-to-specific-product-types","Discount is applicable to specific product types");case o.CUSTOMER_GROUPS:return t("conditions-discount-is-applicable-to-specific-customer-groups","Discount is applicable to specific customer groups")}};function l3(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}let l5=function(e){var t,r=e.discount,n=(0,ei.Bd)().t,i=function(e){if(Array.isArray(e))return e}(t=(0,U.useState)(!1))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(t,2)||function(e,t){if(e){if("string"==typeof e)return l3(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l3(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),a=i[0],o=i[1],l=l0(r),s=l.conditions,c=l.selectedCondition,u=l.deSelectCondition;return(0,z.jsx)(o8,{discount:r,children:(0,z.jsxs)("div",{children:[(0,z.jsx)(eD,{title:n("conditions-conditions","Conditions"),className:"min-h-[200px]",forceDropdown:!0,actionables:[{label:n("conditions-add-condition-label","Add condition"),icon:(0,z.jsx)(n_.A,{size:16}),onClick:function(){return o(!0)}}],children:s.length?(0,z.jsx)("div",{style:{gridTemplateRows:"repeat(".concat(Math.ceil((null==s?void 0:s.length)/2),", minmax(0, 1fr))")},className:"gap-y-base gap-x-xlarge grid grid-flow-col grid-cols-2",children:s.map(function(e,t){return(0,z.jsx)(a4,{title:e.title,index:t+1,description:e.description,actions:e.actions},t)})}):(0,z.jsx)("div",{className:"gap-y-small flex flex-1 flex-col items-center justify-center",children:(0,z.jsx)("span",{className:"inter-base-regular text-grey-50",children:n("conditions-this-discount-has-no-conditions","This discount has no conditions")})})}),(0,z.jsx)(lx,{show:a,onClose:function(){return o(!1)}}),c&&(0,z.jsx)(lJ,{open:!!c,condition:c,discount:r,onClose:function(){return u()}})]})})},l6=function(e){var t,r,n=e.size,i=void 0===n?"20":n,a=e.color,o=void 0===a?"currentColor":a,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["size","color"]);return(0,z.jsxs)("svg",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({width:i,height:i,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l),r=r={children:[(0,z.jsx)("path",{d:"M8 14C11.3137 14 14 11.3137 14 8C14 4.68629 11.3137 2 8 2C4.68629 2 2 4.68629 2 8C2 11.3137 4.68629 14 8 14Z",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M8 4.66669V8.16669L10 9.33335",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},l4=function(e){var t,r,n=e.numbers,i=e.selected,a=e.onSelect,o=e.className,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["numbers","selected","onSelect","className"]);return(0,z.jsx)("div",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},l),r=r={className:(0,en.default)("time-list flex h-[305px] flex-col overflow-y-auto",o),children:n.map(function(e,t){return(0,z.jsx)("div",{className:(0,en.default)("inter-base-regular hover:bg-grey-20 h-[40px] w-[40px] rounded last:mb-4",{"bg-violet-60 text-grey-0 inter-base-semibold hover:bg-violet-50":e===i}),children:(0,z.jsx)("button",{onClick:function(){return a(e)},className:"h-full w-full py-2",type:"button",children:e.toLocaleString("en-US",{minimumIntegerDigits:2})})},t)})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))};function l8(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function l7(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||se(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l9(e){return function(e){if(Array.isArray(e))return l8(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||se(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function se(e,t){if(e){if("string"==typeof e)return l8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l8(e,t)}}let st=function(e){var t=e.date,r=e.onSubmitDate,n=e.label,i=e.required,a=e.tooltipContent,o=e.tooltip,l=l7((0,U.useState)(new Date(t).getUTCMinutes()),2),s=l[0],c=l[1],u=l7((0,U.useState)(new Date(t).getUTCHours()),2),d=u[0],f=u[1];(0,U.useEffect)(function(){c(new Date(t).getUTCMinutes()),f(new Date(t).getUTCHours())},[t]),(0,U.useEffect)(function(){if(t&&!(0,t6.isNil)(d)&&!(0,t6.isNil)(s)){var e=new Date(new Date(t).getTime());e.setUTCHours(d),e.setUTCMinutes(s),r(e)}},[s,d]);var p=l7((0,U.useState)(!1),2),m=p[0],h=p[1],y=l9(Array(60).keys()),b=l9(Array(24).keys());return(0,z.jsx)("div",{className:"w-full",children:(0,z.jsxs)(iE.bL,{open:m,onOpenChange:h,children:[(0,z.jsx)(iE.l9,{asChild:!0,children:(0,z.jsx)("button",{className:(0,en.default)("rounded-rounded w-full border ",{"shadow-input border-violet-60":m,"border-grey-20":!m}),type:"button",children:(0,z.jsxs)(iJ,{className:"shadown-none border-0 focus-within:shadow-none",children:[(0,z.jsxs)("div",{className:"text-grey-50 flex w-full justify-between pr-0.5",children:[(0,z.jsx)(iX.A,{label:void 0===n?"start date":n,required:void 0!==i&&i,tooltipContent:a,tooltip:o}),(0,z.jsx)(ez.A,{size:16})]}),(0,z.jsxs)("div",{className:"text-grey-40 flex w-full items-center text-left",children:[(0,z.jsx)(l6,{size:16}),(0,z.jsx)("span",{className:"mx-1",children:"UTC"}),(0,z.jsx)("span",{className:"text-grey-90",children:t?re().utc(t).format("HH:mm"):"--:--"})]})]})})}),(0,z.jsxs)(iE.UC,{side:"top",sideOffset:8,className:"rounded-rounded scrollbar-hide border-grey-20 bg-grey-0 shadow-dropdown flex w-full border px-6 pt-6 pb-4",children:[(0,z.jsx)(l4,{numbers:b,selected:d,onSelect:function(e){return f(e)},className:"pr-4"}),(0,z.jsx)(l4,{numbers:y,selected:s,onSelect:function(e){return c(e)}}),(0,z.jsx)("div",{className:"to-grey-0 h-xlarge absolute bottom-4 left-0 right-0 z-10 bg-gradient-to-b from-transparent"})]})]})})};function sr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function sn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return sr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sr(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var si=function(e){return parseFloat(e.target.value)};let sa=function(e){var t=e.value,r=e.onChange,n=t?(0,ap.qg)(t):{},i=sn((0,U.useState)(n.years||0),2),a=i[0],o=i[1],l=sn((0,U.useState)(n.months||0),2),s=l[0],c=l[1],u=sn((0,U.useState)(n.days||0),2),d=u[0],f=u[1],p=sn((0,U.useState)(n.hours||0),2),m=p[0],h=p[1],y=sn((0,U.useState)(n.minutes||0),2),b=y[0],v=y[1];return(0,U.useEffect)(function(){r("P".concat(a||0,"Y").concat(s||0,"M").concat(d||0,"DT").concat(m||0,"H").concat(b||0,"M"))},[a,s,d,m,b]),(0,z.jsx)("div",{children:(0,z.jsxs)("div",{className:"gap-x-xsmall gap-y-base mt-xlarge grid grid-cols-3 grid-rows-2",children:[(0,z.jsx)(e1.A,{label:"Years",type:"number",placeholder:"0",value:a,onChange:function(e){return o(si(e))},min:0}),(0,z.jsx)(e1.A,{label:"Months",type:"number",placeholder:"0",value:s,onChange:function(e){return c(si(e))},min:0}),(0,z.jsx)(e1.A,{label:"Days",type:"number",placeholder:"0",value:d,onChange:function(e){return f(si(e))},min:0}),(0,z.jsx)(e1.A,{label:"Hours",type:"number",placeholder:"0",value:m,onChange:function(e){return h(si(e))},min:0}),(0,z.jsx)(e1.A,{label:"Minutes",type:"number",placeholder:"0",value:b,onChange:function(e){return v(si(e))},min:0})]})})};var so=r(55554);let sl=function(e){var t=e.title,r=e.description,n=e.tooltip,i=e.open,a=void 0!==i&&i,o=e.onSwitch,l=e.children;return(0,z.jsxs)("div",{children:[(0,z.jsxs)("div",{className:"flex items-start justify-between",children:[(0,z.jsxs)("div",{className:"flex flex-col",children:[(0,z.jsxs)("div",{className:"gap-x-2xsmall flex items-center",children:[(0,z.jsx)("p",{className:"inter-base-semibold",children:t}),n&&(0,z.jsx)(e0.A,{content:n})]}),(0,z.jsx)("p",{className:"inter-small-regular text-grey-50 mt-1",children:r})]}),(0,z.jsx)(so.A,{checked:a,onClick:o,type:"button",className:"cursor-pointer"})]}),(0,z.jsx)("div",{className:(0,en.default)("overflow-hidden transition-[max-height,opacity] duration-500 ease-in-out",{"max-h-[1000px] opacity-100":a,"max-h-0 opacity-0":!a}),children:(0,z.jsx)("div",{className:"mt-base",children:l})})]})},ss=function(e){var t=e.form,r=e.isDynamic,n=t.control,i=t.path;return(0,z.jsx)("div",{children:(0,z.jsxs)("div",{className:"gap-y-large flex flex-col",children:[(0,z.jsx)(eR.xI,{name:i("starts_at"),control:n,render:function(e){var t=e.field,r=t.onChange,n=t.value;return(0,z.jsx)(sl,{open:!!n,onSwitch:function(){n?r(null):r(new Date)},title:"Discount has a start date?",description:"Schedule the discount to activate in the future.",children:(0,z.jsxs)("div",{className:"gap-x-xsmall flex items-center",children:[(0,z.jsx)(i8,{date:n,label:"Start date",onSubmitDate:r}),(0,z.jsx)(st,{label:"Start time",date:n,onSubmitDate:r})]})})}}),(0,z.jsx)(eR.xI,{name:i("ends_at"),control:n,render:function(e){var t=e.field,r=t.value,n=t.onChange;return(0,z.jsx)(sl,{open:!!r,onSwitch:function(){r?n(null):n(new Date(new Date().getTime()+6048e5))},title:"Discount has an expiry date?",description:"Schedule the discount to deactivate in the future.",children:(0,z.jsxs)("div",{className:"gap-x-xsmall flex items-center",children:[(0,z.jsx)(i8,{date:r,label:"Expiry date",onSubmitDate:n}),(0,z.jsx)(st,{label:"Expiry time",date:r,onSubmitDate:n})]})})}}),(0,z.jsx)(eR.xI,{name:i("usage_limit"),control:n,render:function(e){var t=e.field,r=t.value,n=t.onChange;return(0,z.jsx)(sl,{open:!!r,onSwitch:function(){r?n(null):n(10)},title:"Limit the number of redemtions?",description:"Limit applies across all customers, not per customer.",children:(0,z.jsx)(e1.A,{label:"Number of redemptions",type:"number",placeholder:"5",min:1,defaultValue:null!=r?r:void 0,onChange:function(e){return n(e.target.valueAsNumber)}})})}}),r&&(0,z.jsx)(eR.xI,{name:i("valid_duration"),control:n,render:function(e){var t=e.field,r=t.onChange,n=t.value;return(0,z.jsx)(sl,{open:!!n,onSwitch:function(){n?r(null):r("P0Y0M0DT00H00M")},title:"Availability duration?",description:"Set the duration of the discount.",children:(0,z.jsx)(sa,{value:null!=n?n:void 0,onChange:r})})}})]})})};var sc=function(e){return{config:{starts_at:new Date(e.starts_at),ends_at:e.ends_at?new Date(e.ends_at):null,usage_limit:e.usage_limit,valid_duration:e.valid_duration}}};let su=function(e){var t=e.discount,r=e.onClose,n=e.open,i=(0,ei.Bd)().t,a=(0,J.useAdminUpdateDiscount)(t.id),o=a.mutate,l=a.isLoading,s=(0,eC.A)(),c=(0,eR.mN)({defaultValues:sc(t)}),u=c.handleSubmit,d=c.reset,f=u(function(e){var t;o({starts_at:null!==(t=e.config.starts_at)&&void 0!==t?t:new Date,ends_at:e.config.ends_at,usage_limit:e.config.usage_limit&&e.config.usage_limit>0?e.config.usage_limit:null,valid_duration:e.config.valid_duration},{onSuccess:function(e){var t=e.discount;s(i("configurations-success","Success"),i("configurations-discount-updated-successfully","Discount updated successfully"),"success"),d(sc(t)),r()},onError:function(e){s(i("configurations-error","Error"),(0,eA.u)(e),"error")}})});return(0,U.useEffect)(function(){n&&d(sc(t))},[t,d,n]),(0,z.jsx)(eN.A,{open:n,handleClose:r,isLargeModal:!0,children:(0,z.jsxs)(eN.A.Body,{children:[(0,z.jsx)(eN.A.Header,{handleClose:r,children:(0,z.jsx)("h1",{className:"inter-xlarge-semibold",children:i("configurations-edit-configurations","Edit configurations")})}),(0,z.jsxs)("form",{onSubmit:f,children:[(0,z.jsx)(eN.A.Content,{children:(0,z.jsx)(ss,{form:(0,eL.m)(c,"config")})}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"gap-x-xsmall flex w-full items-center justify-end",children:[(0,z.jsx)(W.A,{variant:"ghost",size:"small",className:"min-w-[128px]",type:"button",onClick:r,children:i("configurations-cancel","Cancel")}),(0,z.jsx)(W.A,{variant:"primary",size:"small",className:"min-w-[128px]",type:"submit",loading:l,disabled:l,children:i("configurations-save","Save")})]})})]})]})})};function sd(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function sf(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function sp(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function o(e){sf(a,n,i,o,l,"next",e)}function l(e){sf(a,n,i,o,l,"throw",e)}o(void 0)})}}function sm(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}var sh=function(e){var t=e.date;return(0,z.jsxs)("div",{className:"text-grey-50 inter-small-regular flex ",children:[re().utc(t).format("ddd, DD MMM YYYY"),(0,z.jsxs)("span",{className:"ml-3 flex items-center",children:[(0,z.jsx)(l6,{size:16}),(0,z.jsx)("span",{className:"ml-2.5",children:re().utc(t).format("UTC HH:mm")})]})]})},sy=function(e){var t=e.text;return(0,z.jsx)("span",{className:"text-grey-50 inter-small-regular",children:t})};let sb=function(e){var t=(0,ei.Bd)().t,r=(0,J.useAdminUpdateDiscount)(e.id),n=(0,eC.A)(),i=[];return i.push({title:t("configurations-start-date","Start date"),description:(0,z.jsx)(sh,{date:e.starts_at})}),e.ends_at&&i.push({title:t("configurations-end-date","End date"),description:(0,z.jsx)(sh,{date:e.ends_at}),actions:[{label:t("configurations-delete-configuration","Delete configuration"),icon:(0,z.jsx)(eu,{size:20}),variant:"danger",onClick:sp(function(){return sm(this,function(e){switch(e.label){case 0:return[4,r.mutateAsync({ends_at:null},{onSuccess:function(){n(t("configurations-success","Success"),t("configurations-discount-end-date-removed","Discount end date removed"),"success")},onError:function(e){n(t("configurations-error","Error"),(0,eA.u)(e),"error")}})];case 1:return[2,e.sent()]}})})}]}),e.usage_limit&&i.push({title:t("configurations-number-of-redemptions","Number of redemptions"),description:(0,z.jsx)(sy,{text:e.usage_limit.toLocaleString("en")}),actions:[{label:t("configurations-delete-configuration","Delete configuration"),icon:(0,z.jsx)(eu,{size:20}),variant:"danger",onClick:sp(function(){return sm(this,function(e){switch(e.label){case 0:return[4,r.mutateAsync({usage_limit:null},{onSuccess:function(){n(t("configurations-success","Success"),t("configurations-redemption-limit-removed","Redemption limit removed"),"success")},onError:function(e){n(t("configurations-error","Error"),(0,eA.u)(e),"error")}})];case 1:return[2,e.sent()]}})})}]}),e.valid_duration&&i.push({title:"Duration",description:(0,z.jsx)(sy,{text:Object.entries(az((0,ap.qg)(e.valid_duration))).map(function(e){var t=function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,2)||function(e,t){if(e){if("string"==typeof e)return sd(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sd(e,2)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),r=t[0],n=t[1];return"".concat(n," ").concat(r)}).join(", ")}),actions:[{label:t("configurations-delete-setting","Delete setting"),icon:(0,z.jsx)(eu,{size:20}),variant:"danger",onClick:sp(function(){return sm(this,function(e){switch(e.label){case 0:return[4,r.mutateAsync({valid_duration:null},{onSuccess:function(){n(t("configurations-success","Success"),t("configurations-discount-duration-removed","Discount duration removed"),"success")},onError:function(e){n(t("configurations-error","Error"),(0,eA.u)(e),"error")}})];case 1:return[2,e.sent()]}})})}]}),i},sv=function(e){var t=e.discount,r=(0,ei.Bd)().t,n=sb(t),i=(0,n5.A)(),a=i.state,o=i.open,l=i.close;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(eD,{title:r("configurations-configurations","Configurations"),className:"min-h-[200px]",actionables:[{label:r("configurations-edit-configurations","Edit configurations"),onClick:o,icon:(0,z.jsx)(ec,{size:20})}],forceDropdown:!0,children:(0,z.jsx)("div",{style:{gridTemplateRows:"repeat(".concat(Math.ceil(n.length/2),", minmax(0, 1fr))")},className:"gap-y-base gap-x-xlarge grid grid-flow-col grid-cols-2",children:n.map(function(e,t){return(0,z.jsx)(a4,{title:e.title,index:t+1,description:e.description,actions:e.actions},t)})})}),(0,z.jsx)(su,{discount:t,onClose:l,open:a})]})},sg=function(e){var t=e.isDraft,r=e.draftState,n=e.activeState,i=e.onChange;return(0,z.jsx)("div",{children:(0,z.jsxs)(ed.bL,{children:[(0,z.jsx)(ed.l9,{asChild:!0,children:(0,z.jsx)(W.A,{variant:"ghost",size:"small",children:(0,z.jsx)(tv.A,{title:t?r:n,variant:t?"default":"active"})})}),(0,z.jsx)(ed.UC,{sideOffset:5,className:"bg-grey-0 border-grey-20 rounded-rounded shadow-dropdown p-xsmall z-30 min-w-[200px] border",children:(0,z.jsx)(ed.q7,{children:(0,z.jsx)(W.A,{variant:"ghost",size:"small",className:"w-full justify-start",onClick:i,children:(0,z.jsx)(tv.A,{title:t?n:r,variant:t?"active":"default"})})})})]})})};var sx=r(66963),sj=(0,U.forwardRef)(function(e,t){var r=na(e),n=r.label,i=r.helperText,a=r.required,o=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(r,["label","helperText","required"]);return(0,z.jsx)(rG,{label:n,helperText:i,required:a,children:(0,z.jsx)(sx.A,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({ref:t},o))})}),sw=r(6631),sO=r(25004),sS=r(3894);function sP(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}let sC=function(e){var t,r=e.name,n=e.currencyCode,i=e.errors,a=e.amount,o=e.onChange,l=e.label,s=e.required,c=sS.q[n.toUpperCase()],u=c.symbol_native,d=c.decimal_digits,f=(0,U.useCallback)(function(e){return"".concat(e/Math.pow(10,d))},[d]),p=function(e){if(Array.isArray(e))return e}(t=(0,U.useState)(null!=a?f(a):void 0))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(t,2)||function(e,t){if(e){if("string"==typeof e)return sP(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sP(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),m=p[0],h=p[1];(0,U.useEffect)(function(){a&&h(f(a))},[a,d,f]);var y=function(e,t){"number"==typeof t?o(Math.round(t*Math.pow(10,d))):o(null),h(e)},b=Math.pow(10,-d);return(0,z.jsxs)("div",{children:[l&&(0,z.jsx)(iX.A,{label:l,required:s,className:"mb-xsmall"}),(0,z.jsxs)("div",{className:(0,en.default)("bg-grey-5 border-gray-20 px-small py-xsmall rounded-rounded focus-within:shadow-input focus-within:border-violet-60 flex h-10 w-full items-center border",{"border-rose-50":i&&r&&i[r]}),children:[(0,z.jsx)("span",{className:"inter-base-regular text-grey-40",children:u}),(0,z.jsx)(sO.default,{step:b,value:m,onValueChange:function(e,t,r){return y(e,null==r?void 0:r.float)},allowNegativeValue:!1,placeholder:"-",decimalScale:d,className:"remove-number-spinner leading-base text-grey-90 caret-violet-60 placeholder-grey-40 w-full bg-transparent text-right font-normal outline-none outline-0"})]}),(0,z.jsx)(rH.A,{name:r,errors:i})]})};function sA(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}!function(e){e.FIXED="fixed",e.PERCENTAGE="percentage",e.FREE_SHIPPING="free_shipping"}(d||(d={}));let sN=function(e){var t=e.form,r=e.type,n=e.isEdit,i=t.register,a=t.path,o=t.control,l=t.formState.errors,s=(0,J.useAdminRegions)().regions,c=(0,U.useMemo)(function(){return(null==s?void 0:s.map(function(e){return{value:e.id,label:e.name,currency_code:e.currency_code}}))||[]},[s]),u=(0,eR.FH)({control:o,name:a("region_ids.0.currency_code"),defaultValue:"usd"});return(0,z.jsxs)("div",{className:"gap-y-large flex flex-col",children:[(0,z.jsx)(eR.xI,{name:a("region_ids"),control:o,rules:{required:n8.A.required("Regions")},render:function(e){var t=e.field,n=t.value,i=t.onChange,a=t.name,o=t.ref;return(0,z.jsx)(no,{name:a,ref:o,value:n,onChange:function(e){i("fixed"===r?[e]:e)},label:"Choose valid regions",isMulti:"fixed"!==r,selectAll:"fixed"!==r,isSearchable:!0,required:!0,options:c,errors:l})}}),(0,z.jsxs)("div",{children:[(0,z.jsxs)("div",{className:(0,en.default)("gap-small grid",{"grid-cols-2":"fixed"===r||"percentage"===r,"grid-cols-1":"free_shipping"===r}),children:[(0,z.jsx)(e1.A,sA({label:"Code",required:!0,errors:l},i(a("code"),{required:n8.A.required("Code")}))),"fixed"===r?(0,z.jsx)(eR.xI,{name:a("value"),rules:{required:n8.A.required("Amount"),shouldUnregister:!0},render:function(e){var t=e.field,r=t.value,n=t.onChange;return(0,z.jsx)(sC,{label:"Amount",amount:r,onChange:n,currencyCode:u,errors:l})}}):"percentage"===r?(0,z.jsx)(e1.A,sA({label:"Percentage",placeholder:"Percentage",errors:l,prefix:"%",required:!0},i(a("value"),{valueAsNumber:!0,required:n8.A.required("Percentage"),shouldUnregister:!0}))):null]}),(0,z.jsx)("p",{className:"inter-small-regular text-grey-50 mt-small max-w-[60%]",children:"The code your customers will enter during checkout. This will appear on your customer's invoice. Uppercase letters and numbers only."})]}),(0,z.jsx)("div",{children:(0,z.jsx)(sw.A,sA({label:"Description",errors:l,required:!0},i(a("description"),{required:n8.A.required("Description")})))}),!n&&(0,z.jsx)("div",{children:(0,z.jsx)(eR.xI,{name:a("is_dynamic"),control:o,render:function(e){var t=e.field,r=t.value,n=t.onChange,i=t.ref;return(0,z.jsxs)("div",{children:[(0,z.jsxs)("div",{className:"flex items-center",children:[(0,z.jsx)(tt,{checked:r,onChange:n,ref:i}),(0,z.jsx)("p",{className:"ml-small mr-xsmall",children:"Template discount"}),(0,z.jsx)(e0.A,{content:"Template discounts allow you to define a set of rules that can be used across a group of discounts. This is useful in campaigns that should generate unique codes for each user, but where the rules for all unique codes should be the same."})]}),(0,z.jsx)(rH.A,{errors:l,name:a("is_dynamic")})]})}})})]})};var sk=function(e){return{general:{code:e.code,description:e.rule.description,region_ids:e.regions.map(function(e){return{label:e.name,value:e.id,currency_code:e.currency_code}}),value:e.rule.value},metadata:eJ(e.metadata)}};let s_=function(e){var t=e.discount,r=e.open,n=e.onClose,i=(0,ei.Bd)().t,a=(0,J.useAdminUpdateDiscount)(t.id),o=a.mutate,l=a.isLoading,s=(0,eC.A)(),c=(0,eR.mN)({defaultValues:sk(t)}),u=c.handleSubmit,d=c.reset,f=u(function(e){o({regions:e.general.region_ids.map(function(e){return e.value}),code:e.general.code,rule:{id:t.rule.id,description:e.general.description,value:e.general.value,allocation:t.rule.allocation},metadata:eZ(e.metadata)},{onSuccess:function(){s(i("general-success","Success"),i("general-discount-updated-successfully","Discount updated successfully"),"success"),n()},onError:function(e){s(i("general-error","Error"),(0,eA.u)(e),"error")}})});return(0,U.useEffect)(function(){r&&d(sk(t))},[t,d,r]),(0,z.jsx)(eN.A,{open:r,handleClose:n,children:(0,z.jsxs)(eN.A.Body,{children:[(0,z.jsx)(eN.A.Header,{handleClose:n,children:(0,z.jsx)("h1",{className:"inter-xlarge-semibold",children:i("general-edit-general-information","Edit general information")})}),(0,z.jsxs)("form",{onSubmit:f,children:[(0,z.jsx)(eN.A.Content,{children:(0,z.jsxs)("div",{className:"gap-y-xlarge flex flex-col",children:[(0,z.jsxs)("div",{children:[(0,z.jsx)("h2",{className:"inter-base-semibold mb-base",children:i("general-details","Details")}),(0,z.jsx)(sN,{form:(0,eL.m)(c,"general"),type:t.rule.type,isEdit:!0})]}),(0,z.jsxs)("div",{children:[(0,z.jsx)("h2",{className:"inter-base-semibold mb-base",children:i("general-metadata","Metadata")}),(0,z.jsx)(e$,{form:(0,eL.m)(c,"metadata")})]})]})}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"gap-x-xsmall flex w-full items-center justify-end",children:[(0,z.jsx)(W.A,{variant:"secondary",size:"small",type:"button",onClick:n,children:i("general-cancel","Cancel")}),(0,z.jsx)(W.A,{variant:"primary",size:"small",type:"submit",disabled:l,loading:l,children:i("general-save-and-close","Save and close")})]})})]})]})})};function sE(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function sI(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function o(e){sE(a,n,i,o,l,"next",e)}function l(e){sE(a,n,i,o,l,"throw",e)}o(void 0)})}}function sD(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}var sT=function(e,t){switch(e.rule.type){case"fixed":return(0,z.jsxs)("div",{className:"flex items-baseline",children:[(0,z.jsx)("h2",{className:"inter-xlarge-regular",children:(0,rg.Q2)({currency:e.regions[0].currency_code,amount:e.rule.value})}),(0,z.jsx)("span",{className:"inter-base-regular text-grey-50 ml-1",children:e.regions[0].currency_code.toUpperCase()})]});case"percentage":return(0,z.jsxs)("div",{className:"flex items-baseline",children:[(0,z.jsx)("h2",{className:"inter-xlarge-regular text-grey-90",children:e.rule.value}),(0,z.jsx)("span",{className:"inter-base-regular text-grey-50 ml-1",children:"%"})]});case"free_shipping":return(0,z.jsx)("h2",{className:"inter-xlarge-regular text-grey-90",children:t("general-free-shipping","FREE SHIPPING")});default:return t("general-unknown-discount-type","Unknown discount type")}};let sM=function(e){var t,r,n=e.discount,i=(0,ei.Bd)().t,a=rL(),o=(0,H.useNavigate)(),l=(0,eC.A)(),s=(0,J.useAdminUpdateDiscount)(n.id),c=(0,J.useAdminDeleteDiscount)(n.id),u=(t=sI(function(){return sD(this,function(e){switch(e.label){case 0:return[4,a({heading:i("general-delete-promotion","Delete Promotion"),text:i("general-confirm-delete-promotion","Are you sure you want to delete this promotion?")})];case 1:return e.sent()&&c.mutate(void 0,{onSuccess:function(){l(i("general-success","Success"),i("general-promotion-deleted-successfully","Promotion deleted successfully"),"success"),o("/a/discounts/")},onError:function(e){l(i("general-error","Error"),(0,eA.u)(e),"error")}}),[2]}})}),function(){return t.apply(this,arguments)}),d=(r=sI(function(){return sD(this,function(e){return s.mutate({is_disabled:!n.is_disabled},{onSuccess:function(e){var t=e.discount.is_disabled;l(i("general-success","Success"),t?i("general-discount-drafted-successfully","Discount drafted successfully"):i("general-discount-published-successfully","Discount published successfully"),"success")},onError:function(e){l(i("general-error","Error"),(0,eA.u)(e),"error")}}),[2]})}),function(){return r.apply(this,arguments)}),f=(0,n5.A)(),p=f.state,m=f.open,h=f.close,y=[{label:i("general-edit-general-information","Edit general information"),onClick:m,icon:(0,z.jsx)(ec,{size:20})},{label:i("general-delete-discount","Delete discount"),onClick:u,variant:"danger",icon:(0,z.jsx)(eu,{size:20})}];return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(eD,{actionables:y,title:n.code,subtitle:n.rule.description,forceDropdown:!0,className:"min-h-[200px]",status:(0,z.jsxs)("div",{className:"gap-x-2xsmall flex items-center",children:[n.is_dynamic&&(0,z.jsx)("span",{children:(0,z.jsx)(rk.A,{variant:"default",children:(0,z.jsx)("span",{className:"text-grey-90 inter-small-regular",children:i("general-template-discount","Template discount")})})}),(0,z.jsx)(sg,{isDraft:null==n?void 0:n.is_disabled,activeState:i("general-published","Published"),draftState:i("general-draft","Draft"),onChange:d})]}),children:(0,z.jsxs)("div",{className:"flex",children:[(0,z.jsxs)("div",{className:"border-grey-20 border-l pl-6",children:[sT(n,i),(0,z.jsx)("span",{className:"inter-small-regular text-grey-50",children:i("general-discount-amount","Discount Amount")})]}),(0,z.jsxs)("div",{className:"border-grey-20 ml-12 border-l pl-6",children:[(0,z.jsx)("h2",{className:"inter-xlarge-regular text-grey-90",children:n.regions.length.toLocaleString("en-US")}),(0,z.jsx)("span",{className:"inter-small-regular text-grey-50",children:i("general-valid-regions","Valid Regions")})]}),(0,z.jsxs)("div",{className:"border-grey-20 ml-12 border-l pl-6",children:[(0,z.jsx)("h2",{className:"inter-xlarge-regular text-grey-90",children:n.usage_count.toLocaleString("en-US")}),(0,z.jsx)("span",{className:"inter-small-regular text-grey-50",children:i("general-total-redemptions","Total Redemptions")})]})]})}),(0,z.jsx)(s_,{discount:n,onClose:h,open:p})]})};function sR(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function sL(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}let sz=function(){var e,t,r=(0,ei.Bd)().t,n=(0,H.useParams)().id,i=(0,H.useNavigate)(),a=(0,J.useAdminDiscount)(n,{expand:"rule,rule.conditions"},{enabled:!!n}),o=a.discount,l=a.isLoading,s=a.error,c=function(e){if(Array.isArray(e))return e}(e=(0,U.useState)(!1))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,2)||function(e,t){if(e){if("string"==typeof e)return sR(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sR(e,2)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),u=c[0],d=c[1],f=(0,J.useAdminDeleteDiscount)(n),p=(0,eC.A)(),m=(0,tY.X)().getWidgets,h=function(){f.mutate(void 0,{onSuccess:function(){p(r("details-success","Success"),r("details-discount-deleted","Discount deleted"),"success")},onError:function(e){p(r("details-error","Error"),(0,eA.u)(e),"error")}})};if(s){var y=t$(s);if(y&&404===y.status)return i("/404"),null;throw s}return l||!o?(0,z.jsx)("div",{className:"flex h-[calc(100vh-64px)] w-full items-center justify-center",children:(0,z.jsx)(X.A,{variant:"secondary"})}):(0,z.jsxs)("div",{className:"pb-xlarge",children:[u&&(0,z.jsx)(e_,{handleClose:function(){return d(!u)},onDelete:(t=function(){return function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,function(e){return[2,h()]})},function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function o(e){sL(a,n,i,o,l,"next",e)}function l(e){sL(a,n,i,o,l,"throw",e)}o(void 0)})}),successText:r("details-discount-deleted","Discount deleted"),confirmText:r("details-yes-delete","Yes, delete"),text:r("details-confirm-delete-discount","Are you sure you want to delete this discount?"),heading:r("details-delete-discount","Delete discount")}),(0,z.jsx)(eo,{label:r("details-back-to-discounts","Back to Discounts"),path:"/a/discounts",className:"mb-xsmall"}),(0,z.jsx)("div",{className:"gap-y-xsmall flex flex-col",children:(0,z.jsxs)(a3,{children:[m("discount.details.before").map(function(e,t){return(0,z.jsx)(es.A,{entity:o,widget:e,injectionZone:"discount.details.before"},t)}),(0,z.jsx)(sM,{discount:o}),(0,z.jsx)(sv,{discount:o}),(0,z.jsx)(l5,{discount:o}),m("discount.details.after").map(function(e,t){return(0,z.jsx)(es.A,{entity:o,widget:e,injectionZone:"discount.details.after"},t)}),(0,z.jsx)(eT,{data:o,title:r("details-raw-discount","Raw discount")})]})})]})};var sF=r(64356),sB=r(1584);function sq(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function sH(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function sU(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var sV=function(e){var t=e.children,r=sU(e,["children"]);return(0,z.jsx)(sB.bL,sH(sq({},r),{children:t}))};sV.Item=function(e){var t=e.title,r=e.subtitle,n=e.description,i=e.required,a=e.tooltip,o=e.children,l=e.className,s=e.headingSize,c=void 0===s?"large":s,u=e.customTrigger,d=e.forceMountContent,f=sU(e,["title","subtitle","description","required","tooltip","children","className","headingSize","customTrigger","forceMountContent"]),p=(0,en.default)({"inter-small-semibold":"small"===c,"inter-base-semibold":"medium"===c,"inter-large-semibold":"large"===c}),m=(0,en.default)({"pb-0 mb-6 ":"medium"===c,"pb-5 radix-state-open:pb-5xlarge mb-5 ":"large"===c});return(0,z.jsxs)(sB.q7,sH(sq({},f),{className:(0,en.default)("border-grey-20 group border-b last:mb-0",{"opacity-30":f.disabled},m,l),children:[(0,z.jsx)(sB.Y9,{className:"px-1",children:(0,z.jsx)(sB.l9,{className:"w-full",asChild:!0,children:(0,z.jsxs)("div",{className:"flex flex-col",children:[(0,z.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,z.jsxs)("div",{className:"gap-x-2xsmall flex items-center",children:[(0,z.jsxs)("span",{className:p,children:[t,i&&(0,z.jsx)("span",{className:"text-rose-50",children:"*"})]}),a&&(0,z.jsx)(e0.A,{content:a})]}),(void 0===u?void 0:u)||(0,z.jsx)(sG,{})]}),r&&(0,z.jsx)("span",{className:"inter-small-regular text-grey-50 mt-1",children:r})]})})}),(0,z.jsx)(sB.UC,{forceMount:void 0===d?void 0:d,className:(0,en.default)("radix-state-closed:animate-accordion-close radix-state-open:animate-accordion-open radix-state-closed:pointer-events-none px-1"),children:(0,z.jsxs)("div",{className:"inter-base-regular group-radix-state-closed:animate-accordion-close",children:[n&&(0,z.jsx)("p",{className:"text-grey-50 ",children:n}),(0,z.jsx)("div",{className:"w-full",children:o})]})})]}))};var sG=function(){return(0,z.jsx)("div",{className:"btn-ghost rounded-rounded group relative p-[6px]",children:(0,z.jsxs)("div",{className:"h-5 w-5",children:[(0,z.jsx)("span",{className:"bg-grey-50 rounded-circle group-radix-state-open:rotate-90 absolute inset-y-[31.75%] left-[48%] right-1/2 w-[1.5px] duration-300"}),(0,z.jsx)("span",{className:"bg-grey-50 rounded-circle group-radix-state-open:rotate-90 group-radix-state-open:left-1/2 group-radix-state-open:right-1/2 absolute inset-x-[31.75%] top-[48%] bottom-1/2 h-[1.5px] duration-300"})]})})};function sW(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}!function(e){e.PRODUCTS="products",e.PRODUCT_TYPES="product_types",e.PRODUCT_COLLECTIONS="product_collections",e.PRODUCT_TAGS="product_tags",e.CUSTOMER_GROUPS="customer_groups"}(f||(f={}));var sY=function(e){var t=[],r=!0,n=!1,i=void 0;try{for(var a,o=Object.entries(e)[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var l,s,c,u=(l=a.value,function(e){if(Array.isArray(e))return e}(l)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(l,2)||function(e,t){if(e){if("string"==typeof e)return sW(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sW(e,2)}}(l,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),d=u[0],f=u[1];f&&f.items.length&&t.push((s={operator:f.operator},c=f.items.map(function(e){return e.id}),d in s?Object.defineProperty(s,d,{value:c,enumerable:!0,configurable:!0,writable:!0}):s[d]=c,s))}}catch(e){n=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(n)throw i}}if(t.length)return t},s$=function(e,t){var r,n,i;return{code:e.code,rule:{allocation:e.rule.type===c.FIXED?e.rule.allocation:s.TOTAL,type:e.rule.type,value:"free_shipping"!==e.rule.type?e.rule.value:0,description:e.rule.description,conditions:sY(t)},is_dynamic:e.is_dynamic,ends_at:null!==(i=e.ends_at)&&void 0!==i?i:void 0,regions:(null===(r=e.regions)||void 0===r?void 0:r.map(function(e){return e.value}))||[],starts_at:e.starts_at,usage_limit:e.usage_limit&&e.usage_limit>0?e.usage_limit:void 0,valid_duration:e.is_dynamic&&(null===(n=e.valid_duration)||void 0===n?void 0:n.length)?e.valid_duration:void 0,metadata:eZ(e.metadata)}};function sQ(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function sK(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function o(e){sQ(a,n,i,o,l,"next",e)}function l(e){sQ(a,n,i,o,l,"throw",e)}o(void 0)})}}function sZ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function sJ(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function sX(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}var s0=function(){var e,t,r=(0,H.useNavigate)(),n=(0,J.useAdminCreateDiscount)(),i=a6().conditions;return{onSaveAsInactive:(e=sK(function(e){return sX(this,function(t){switch(t.label){case 0:return[4,n.mutateAsync(sJ(sZ({},s$(e,i)),{is_disabled:!0}),{onSuccess:function(){r("/a/discounts")}})];case 1:return t.sent(),[2]}})}),function(t){return e.apply(this,arguments)}),onSaveAsActive:(t=sK(function(e){return sX(this,function(t){switch(t.label){case 0:return[4,n.mutateAsync(sJ(sZ({},s$(e,i)),{is_disabled:!1}),{onSuccess:function(){r("/a/discounts")}})];case 1:return t.sent(),[2]}})}),function(e){return t.apply(this,arguments)})}};let s1=function(e){var t=e.type,r=e.items,n=e.operator,i=e.onClose,a=(0,ei.Bd)().t,o=a6().updateCondition;return(0,z.jsxs)("div",{className:"gap-x-xsmall flex w-full items-center justify-end",children:[(0,z.jsx)(W.A,{variant:"secondary",size:"small",onClick:i,children:a("edit-condition-tables-cancel","Cancel")}),(0,z.jsx)(W.A,{variant:"danger",size:"small",onClick:function(){o({type:t,items:[],operator:l.IN}),i()},children:a("edit-condition-tables-delete-condition","Delete condition")}),(0,z.jsx)(W.A,{variant:"primary",size:"small",onClick:function(){o({type:t,items:r,operator:n}),i()},className:"min-w-[128px]",children:a("edit-condition-tables-save","Save")})]})};function s2(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function s3(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return s2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s2(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}let s5=function(e){var t,r=e.onClose,n=(0,ei.Bd)().t,i=nH(ou),a=a6().conditions,o=s3((0,U.useState)((null===(t=a.product_collections)||void 0===t?void 0:t.items)||[]),2),l=o[0],s=o[1],c=s3((0,U.useState)(a.product_collections.operator),2),u=c[0],d=c[1],f=(0,J.useAdminCollections)(i.queryObject,{keepPreviousData:!0}),p=f.isLoading,m=f.count,h=f.collections,y=oc();return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(eN.A.Content,{children:[(0,z.jsx)(ob,{value:u,onChange:d}),(0,z.jsx)(on,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({options:{enableSearch:!0,immediateSearchFocus:!0,searchPlaceholder:n("edit-condition-tables-search-by-title","Search by title..."),filters:[{title:n("edit-condition-tables-title","Title"),name:"title"}]},resourceName:"Collections",totalCount:m||0,selectedIds:null==l?void 0:l.map(function(e){return e.id}),data:h,columns:y,isLoading:p,onChange:function(e){s(((null==h?void 0:h.filter(function(t){return e.includes(t.id)}))||[]).map(function(e){return{id:e.id,label:e.title}}))},renderRow:ol,renderHeaderGroup:os},i))]}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsx)(s1,{type:"product_collections",items:l,operator:u,onClose:r})})]})};function s6(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function s4(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return s6(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s6(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}let s8=function(e){var t,r=e.onClose,n=(0,ei.Bd)().t,i=nH(ou),a=a6().conditions,o=s4((0,U.useState)((null===(t=a.customer_groups)||void 0===t?void 0:t.items)||[]),2),l=o[0],s=o[1],c=s4((0,U.useState)(a.customer_groups.operator),2),u=c[0],d=c[1],f=(0,J.useAdminCustomerGroups)(i.queryObject,{keepPreviousData:!0}),p=f.isLoading,m=f.count,h=f.customer_groups,y=oC();return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(eN.A.Content,{children:[(0,z.jsx)(ob,{value:u,onChange:d}),(0,z.jsx)(on,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({options:{enableSearch:!0,immediateSearchFocus:!0,searchPlaceholder:n("edit-condition-tables-search-groups","Search groups...")},resourceName:"Customer groups",totalCount:m||0,selectedIds:l.map(function(e){return e.id}),data:h,columns:y,isLoading:p,onChange:function(e){s(((null==h?void 0:h.filter(function(t){return e.includes(t.id)}))||[]).map(function(e){return{id:e.id,label:e.name}}))},renderRow:oP,renderHeaderGroup:oS},i))]}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsx)(s1,{type:"customer_groups",items:l,operator:u,onClose:r})})]})};function s7(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function s9(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return s7(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s7(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}let ce=function(e){var t,r=e.onClose,n=(0,ei.Bd)().t,i=nH(ou),a=a6().conditions,o=s9((0,U.useState)((null===(t=a.products)||void 0===t?void 0:t.items)||[]),2),l=o[0],s=o[1],c=s9((0,U.useState)(a.products.operator),2),u=c[0],d=c[1],f=(0,J.useAdminProducts)(i.queryObject,{keepPreviousData:!0}),p=f.isLoading,m=f.count,h=f.products,y=oM();return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(eN.A.Content,{children:[(0,z.jsx)(ob,{value:u,onChange:d}),(0,z.jsx)(on,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({options:{enableSearch:!0,immediateSearchFocus:!0,searchPlaceholder:n("edit-condition-tables-search-products","Search products...")},resourceName:"Products",totalCount:m||0,selectedIds:l.map(function(e){return e.id}),data:h,columns:y,isLoading:p,onChange:function(e){s(((null==h?void 0:h.filter(function(t){return e.includes(t.id)}))||[]).map(function(e){return{id:e.id,label:e.title}}))},renderRow:oD,renderHeaderGroup:oT},i))]}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsx)(s1,{type:"products",items:l,operator:u,onClose:r})})]})};function ct(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function cr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ct(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ct(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}let cn=function(e){var t,r=e.onClose,n=(0,ei.Bd)().t,i=nH(ou),a=a6().conditions,o=cr((0,U.useState)((null===(t=a.product_tags)||void 0===t?void 0:t.items)||[]),2),l=o[0],s=o[1],c=cr((0,U.useState)(a.product_tags.operator),2),u=c[0],d=c[1],f=(0,J.useAdminProductTags)(i.queryObject,{keepPreviousData:!0}),p=f.isLoading,m=f.count,h=f.product_tags;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(eN.A.Content,{children:p?(0,z.jsx)(X.A,{}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(ob,{value:u,onChange:d}),(0,z.jsx)(on,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({options:{enableSearch:!0,immediateSearchFocus:!0,searchPlaceholder:n("edit-condition-tables-search-by-tag","Search by tag...")},resourceName:"Tags",totalCount:m||0,selectedIds:l.map(function(e){return e.id}),data:h,columns:oq,isLoading:p,onChange:function(e){s(((null==h?void 0:h.filter(function(t){return e.includes(t.id)}))||[]).map(function(e){return{id:e.id,label:e.value}}))},renderRow:oU,renderHeaderGroup:oH},i))]})}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsx)(s1,{type:"product_tags",items:l,operator:u,onClose:r})})]})};function ci(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ca(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ci(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ci(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}let co=function(e){var t,r=e.onClose,n=(0,ei.Bd)().t,i=nH(ou),a=a6().conditions,o=ca((0,U.useState)((null===(t=a.product_types)||void 0===t?void 0:t.items)||[]),2),l=o[0],s=o[1],c=ca((0,U.useState)(a.product_types.operator),2),u=c[0],d=c[1],f=(0,J.useAdminProductTypes)(i.queryObject,{keepPreviousData:!0}),p=f.isLoading,m=f.count,h=f.product_types,y=oZ();return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(eN.A.Content,{children:[(0,z.jsx)(ob,{value:u,onChange:d}),(0,z.jsx)(on,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({options:{enableSearch:!0,immediateSearchFocus:!0,searchPlaceholder:n("edit-condition-tables-search-by-type","Search by type...")},resourceName:"Types",totalCount:m||0,selectedIds:null==l?void 0:l.map(function(e){return e.id}),data:h,columns:y,isLoading:p,onChange:function(e){s(((null==h?void 0:h.filter(function(t){return e.includes(t.id)}))||[]).map(function(e){return{id:e.id,label:e.value}}))},renderRow:oQ,renderHeaderGroup:oK},i))]}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsx)(s1,{type:"product_types",items:l,operator:u,onClose:r})})]})};var cl=function(e){var t=e.view,r=e.onClose;switch(t){case o.PRODUCTS:return(0,z.jsx)(ce,{onClose:r});case o.CUSTOMER_GROUPS:return(0,z.jsx)(s8,{onClose:r});case o.PRODUCT_COLLECTIONS:return(0,z.jsx)(s5,{onClose:r});case o.PRODUCT_TAGS:return(0,z.jsx)(cn,{onClose:r});case o.PRODUCT_TYPES:return(0,z.jsx)(co,{onClose:r})}};let cs=function(e){var t=e.onClose,r=e.view,n=(0,ei.Bd)().t;return(0,z.jsxs)(eN.A,{open:!0,handleClose:t,children:[(0,z.jsx)(eN.A.Header,{handleClose:t,children:(0,z.jsx)("h1",{className:"inter-xlarge-semibold",children:n("edit-conditions-modal-title","Edit {{title}}",{title:lZ(r,n)})})}),(0,z.jsx)(eN.A.Body,{children:(0,z.jsx)(cl,{view:r,onClose:t})})]})};function cc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function cu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function cd(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function cf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return cc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cc(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var cp=function(e,t){switch(e){case o.PRODUCTS:return t("conditions-product","Product");case o.PRODUCT_COLLECTIONS:return t("conditions-collection","Collection");case o.PRODUCT_TAGS:return t("conditions-tag","Tag");case o.CUSTOMER_GROUPS:return t("conditions-customer-group","Customer group");case o.PRODUCT_TYPES:return t("conditions-type","Type")}};let cm=function(e){var t=e.index,r=e.discountId,n=e.conditionId,i=e.type,a=e.setCondition,s=e.items,c=(0,ei.Bd)().t,u=(0,U.useMemo)(function(){switch(i){case o.PRODUCTS:return{expand:"products"};case o.PRODUCT_COLLECTIONS:return{expand:"product_collections"};case o.PRODUCT_TAGS:return{expand:"product_tags"};case o.CUSTOMER_GROUPS:return{expand:"customer_groups"};case o.PRODUCT_TYPES:return{expand:"product_types"}}},[i]),d=(0,J.useAdminGetDiscountCondition)(r,n,u,{enabled:!!r&&!!n,cacheTime:0}).discount_condition,f=a6().updateCondition,p=cf((0,U.useState)(!1),2),m=p[0],h=p[1];(0,U.useEffect)(function(){if(d)switch(i){case o.PRODUCTS:a(function(e){return cd(cu({},e),{products:cd(cu({},e.products),{id:d.id,operator:d.operator,items:d.products.map(function(e){return{id:e.id,label:e.title}})})})});break;case o.PRODUCT_COLLECTIONS:a(function(e){return cd(cu({},e),{product_collections:cd(cu({},e.product_collections),{id:d.id,operator:d.operator,items:d.product_collections.map(function(e){return{id:e.id,label:e.title}})})})});break;case o.PRODUCT_TAGS:a(function(e){return cd(cu({},e),{product_tags:cd(cu({},e.product_tags),{id:d.id,operator:d.operator,items:d.product_tags.map(function(e){return{id:e.id,label:e.value}})})})});break;case o.CUSTOMER_GROUPS:a(function(e){return cd(cu({},e),{customer_groups:cd(cu({},e.customer_groups),{id:d.id,operator:d.operator,items:d.customer_groups.map(function(e){return{id:e.id,label:e.name}})})})});break;case o.PRODUCT_TYPES:a(function(e){return cd(cu({},e),{product_types:cd(cu({},e.product_types),{id:d.id,operator:d.operator,items:d.product_types.map(function(e){return{id:e.id,label:e.value}})})})})}},[d,i]);var y=cf((0,U.useMemo)(function(){var e=Math.max(Math.floor(400/110)-1,1);return[s.slice(0,e),s.length-e]},[s]),2),b=y[0],v=y[1];return s.length?(0,z.jsxs)("div",{children:[(0,z.jsxs)("div",{className:"p-base rounded-rounded gap-base flex items-center justify-between border",children:[(0,z.jsxs)("div",{className:"gap-base flex w-full overflow-hidden",children:[(0,z.jsx)("div",{children:(0,z.jsxs)(rk.A,{className:"inter-base-semibold flex h-[40px] w-[40px] items-center justify-center",variant:"default",children:["\xa7",t+1]})}),(0,z.jsxs)("div",{className:"flex w-full flex-1 flex-col justify-center truncate",children:[(0,z.jsx)("div",{className:"inter-small-semibold",children:cp(i,c)}),(0,z.jsx)("div",{className:"inter-small-regular gap-x-xsmall flex w-full flex-1 items-center",children:(0,z.jsxs)("div",{className:"gap-x-2xsmall text-grey-50 inter-small-regular flex w-full flex-1 items-center",children:[b.map(function(e,t){return(0,z.jsxs)("span",{children:[i===o.PRODUCT_TAGS&&"#",e.label,t!==b.length-1&&", "]},t)}),v>0&&(0,z.jsx)("span",{className:"text-grey-40 ml-2",children:c("condition-item-remainder-more","+{{remainder}} more",{remainder:v})})]})})]})]}),(0,z.jsx)("div",{children:(0,z.jsx)(em,{forceDropdown:!0,actions:[{label:c("conditions-edit","Edit"),onClick:function(){return h(!0)},icon:(0,z.jsx)(ec,{size:16})},{label:c("conditions-delete-condition","Delete condition"),onClick:function(){return f({type:i,items:[],operator:l.IN})},icon:(0,z.jsx)(eu,{size:16}),variant:"danger"}]})})]}),m&&(0,z.jsx)(cs,{onClose:function(){return h(!1)},view:i})]}):null};function ch(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function cy(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cb(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){cy(e,t,r[t])})}return e}function cv(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}let cg=function(e){var t,r,n=e.discount,i=(0,ei.Bd)().t,a=a6(),o=a.setConditions,l=a.conditions,s=function(e){if(Array.isArray(e))return e}(t=(0,U.useState)(!1))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(t,2)||function(e,t){if(e){if("string"==typeof e)return ch(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ch(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),c=s[0],u=s[1];(0,U.useEffect)(function(){var e;if(null==n?void 0:null===(e=n.rule)||void 0===e?void 0:e.conditions){var t=!0,r=!1,i=void 0;try{for(var a,s=n.rule.conditions[Symbol.iterator]();!(t=(a=s.next()).done);t=!0)!function(){var e=a.value;o(function(t){return cv(cb({},t),cy({},e.type,cv(cb({},l[e.type]),{id:e.id,operator:e.operator,type:e.type})))})}()}catch(e){r=!0,i=e}finally{try{t||null==s.return||s.return()}finally{if(r)throw i}}}},[null==n?void 0:null===(r=n.rule)||void 0===r?void 0:r.conditions]);var d=(0,U.useMemo)(function(){return Object.values(l).every(function(e){return e.items.length})},[l]),f=(0,U.useMemo)(function(){return Object.values(l).filter(function(e){return e.id||e.items.length})},[l]);return(0,z.jsxs)("div",{className:"pt-5",children:[(0,z.jsx)("div",{className:"gap-y-small flex flex-col",children:f.map(function(e,t){return(0,z.jsx)(cm,{index:t,discountId:null==n?void 0:n.id,conditionId:e.id,type:e.type,setCondition:o,items:e.items},t)})}),!d&&(0,z.jsxs)(W.A,{size:"small",variant:"ghost",onClick:function(){return u(!0)},className:"rounded-rounded mt-4 w-full border p-2",children:[(0,z.jsx)(n_.A,{size:18}),(0,z.jsx)("span",{children:i("conditions-add-condition","Add Condition")})]}),c&&(0,z.jsx)(lg,{onClose:function(){return u(!1)},conditions:l})]})};function cx(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function cj(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||cw(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cw(e,t){if(e){if("string"==typeof e)return cx(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cx(e,t)}}var cO=function(e){var t=[];return null!==e.usage_limit&&t.push("usage_limit"),null!==e.starts_at&&t.push("starts_at"),null!==e.ends_at&&t.push("ends_at"),null!==e.valid_duration&&t.push("valid_duration"),t};let cS=function(e){var t,r,n,i=e.promotion,a=e.isEdit,o=a6(),l=o.register,s=o.control,c=o.isDynamic,u=o.hasExpiryDate,d=o.handleConfigurationChanged,f=(0,ei.Bd)().t,p=cj(U.useState(void 0!==a&&a&&i?cO(i):function(e){if(Array.isArray(e))return cx(e)}(t=u?["ends_at"]:[])||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||cw(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),2),m=p[0],h=p[1],y="transition-[margin] duration-300 ease-[cubic-bezier(0.87, 0, 0.13, 1) forwards]",b=cj((0,U.useState)(!1),2),v=b[0],g=b[1];return(0,U.useEffect)(function(){setTimeout(function(){return g(!0)},300)},[]),(0,z.jsx)("div",{className:"flex flex-col",children:(0,z.jsx)(sV,{className:"text-grey-90 pt-7",type:"multiple",value:m||[],onValueChange:function(e){d(e),h(e)},children:v&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(sV.Item,{headingSize:"medium",forceMountContent:!0,className:"border-b-0",title:f("sections-start-date","Start date"),subtitle:f("sections-schedule-the-discount-to-activate-in-the-future","Schedule the discount to activate in the future."),tooltip:f("sections-select-discount-start-date","If you want to schedule the discount to activate in the future, you can set a start date here, otherwise the discount will be active immediately."),value:"starts_at",customTrigger:(0,z.jsx)(so.A,{checked:m.indexOf("starts_at")>-1}),children:(0,z.jsx)("div",{className:(0,en.default)("gap-xsmall flex items-center",y,{"mt-4":m.indexOf("starts_at")>-1}),children:(0,z.jsx)(eR.xI,{name:"starts_at",control:s,render:function(e){var t=e.field,r=t.value,n=t.onChange,i=r||new Date;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(i8,{date:i,label:f("sections-start-date","Start date"),onSubmitDate:n}),(0,z.jsx)(st,{label:f("sections-start-time","Start time"),date:i,onSubmitDate:n})]})}})})}),(0,z.jsx)(sV.Item,{headingSize:"medium",forceMountContent:!0,className:"border-b-0",title:f("sections-discount-has-an-expiry-date","Discount has an expiry date?"),subtitle:f("sections-schedule-the-discount-to-deactivate-in-the-future","Schedule the discount to deactivate in the future."),tooltip:f("sections-select-discount-end-date","If you want to schedule the discount to deactivate in the future, you can set an expiry date here."),value:"ends_at",customTrigger:(0,z.jsx)(so.A,{checked:m.indexOf("ends_at")>-1}),children:(0,z.jsx)("div",{className:(0,en.default)("gap-xsmall flex items-center",y,{"mt-4":m.indexOf("ends_at")>-1}),children:(0,z.jsx)(eR.xI,{name:"ends_at",control:s,render:function(e){var t=e.field,r=t.value,n=t.onChange,i=r||new Date(new Date().getTime()+6048e5);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(i8,{date:i,label:f("sections-expiry-date","Expiry date"),onSubmitDate:n}),(0,z.jsx)(st,{label:f("sections-expiry-time","Expiry time"),date:i,onSubmitDate:n})]})}})})}),(0,z.jsx)(sV.Item,{headingSize:"medium",forceMountContent:!0,className:"border-b-0",title:f("sections-limit-the-number-of-redemptions","Limit the number of redemptions?"),subtitle:f("sections-limit-applies-across-all-customers-not-per-customer","Limit applies across all customers, not per customer."),tooltip:f("sections-limit-discount-number-of-uses","If you wish to limit the amount of times a customer can redeem this discount, you can set a limit here."),value:"usage_limit",customTrigger:(0,z.jsx)(so.A,{checked:m.indexOf("usage_limit")>-1}),children:(0,z.jsx)("div",{className:(0,en.default)(y,{"mt-4":m.indexOf("usage_limit")>-1}),children:(0,z.jsx)(e1.A,(r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},l("usage_limit",{valueAsNumber:!0})),n=n={label:f("sections-number-of-redemptions","Number of redemptions"),type:"number",placeholder:"5",min:1},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))}),r))})}),c&&(0,z.jsx)(sV.Item,{disabled:!c,headingSize:"medium",forceMountContent:!0,title:f("sections-availability-duration","Availability duration?"),className:"border-b-0",subtitle:f("sections-set-the-duration-of-the-discount","Set the duration of the discount."),tooltip:f("sections-select-a-discount-type","Select a discount type"),value:"valid_duration",customTrigger:(0,z.jsx)(so.A,{checked:m.indexOf("valid_duration")>-1}),children:(0,z.jsx)("div",{className:(0,en.default)(y,{"mt-4":m.indexOf("valid_duration")>-1}),children:(0,z.jsx)(eR.xI,{name:"valid_duration",control:s,render:function(e){var t=e.field,r=t.value,n=t.onChange;return(0,z.jsx)(sa,{value:null!=r?r:void 0,onChange:n})}})})})]})})})},cP=function(){var e=a6().control,t=(0,ei.Bd)().t;return(0,z.jsx)(eR.xI,{name:"rule.allocation",control:e,rules:{required:!0},render:function(e){var r=e.field,n=r.onChange,i=r.value;return(0,z.jsxs)(oy.Root,{value:i,onValueChange:n,className:(0,en.default)("gap-base mt-base flex items-center px-1"),children:[(0,z.jsx)(oy.Item,{value:s.TOTAL,className:"flex-1",label:t("sections-total-amount","Total amount"),description:t("sections-apply-to-the-total-amount","Apply to the total amount")}),(0,z.jsx)(oy.Item,{value:s.ITEM,className:"flex-1",label:t("sections-item-specific","Item specific"),description:t("sections-apply-to-every-allowed-item","Apply to every allowed item")})]})}})},cC=function(){var e=a6().control,t=(0,ei.Bd)().t,r=(0,eR.FH)({control:e,name:"regions"});return(0,z.jsx)(eR.xI,{name:"rule.type",control:e,rules:{required:!0},render:function(e){var n=e.field,i=n.onChange,a=n.value;return(0,z.jsxs)(oy.Root,{value:a,onValueChange:i,className:(0,en.default)("gap-base mt-base flex items-center px-1"),children:[(0,z.jsx)(oy.Item,{value:c.PERCENTAGE,className:"flex-1",label:t("sections-percentage","Percentage"),description:"Discount applied in %"}),(0,z.jsx)(oy.Item,{value:c.FIXED,className:"flex-1",label:t("sections-fixed-amount","Fixed amount"),description:t("sections-discount-in-whole-numbers","Discount in whole numbers"),disabled:Array.isArray(r)&&r.length>1,disabledTooltip:t("sections-you-can-only-select-one-valid-region-if-you-want-to-use-the-fixed-amount-type","You can only select one valid region if you want to use the fixed amount type")}),(0,z.jsx)(oy.Item,{value:c.FREE_SHIPPING,className:"flex-1",label:t("sections-free-shipping","Free shipping"),description:t("sections-override-delivery-amount","Override delivery amount")})]})}})};var cA=U.forwardRef(function(e,t){var r=e.label,n=e.value,i=e.className,a=e.id,o=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["label","value","className","id"]),l=U.useRef(null);return(0,U.useImperativeHandle)(t,function(){return l.current}),(0,z.jsxs)("label",{className:(0,en.default)("flex cursor-pointer items-center",i),htmlFor:a,children:[(0,z.jsx)("input",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({type:"checkbox",ref:l,className:"form-checkbox rounded-base text-violet-60 mr-small border-grey-30 h-[20px] w-[20px] focus:ring-0",value:n,id:a},o)),r]})}),cN=r(8539),ck=r(93943);function c_(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function cE(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function cI(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var cD=function(e){var t=e.isSelected;return(0,z.jsx)("div",{className:(0,en.default)("text-grey-0 border-grey-30 rounded-base flex h-5 w-5 justify-center border",{"bg-violet-60":t}),children:(0,z.jsx)("span",{className:"self-center",children:t&&(0,z.jsx)(e7,{size:16})})})},cT=function(e){var t=e.isSelected;return(0,z.jsx)("div",{className:(0,en.default)("radio-outer-ring outline-0","rounded-circle h-[20px] w-[20px] shrink-0",{"shadow-[0_0_0_1px] shadow-[#D1D5DB]":!t,"shadow-violet-60 shadow-[0_0_0_2px]":t}),children:t&&(0,z.jsx)("div",{className:(0,en.default)("group relative flex h-full w-full items-center justify-center","after:bg-violet-60 after:rounded-circle after:absolute after:inset-0 after:m-auto after:block after:h-[12px] after:w-[12px]")})})},cM={Menu:function(e){e.className;var t=cI(e,["className"]);return(0,z.jsx)(rQ.dK.Menu,cE(c_({className:(0,en.default)("!rounded-rounded",{"z-60 -mt-1":!t.selectProps.isSearchable&&"bottom"===t.menuPlacement,"z-60 mb-3":!t.selectProps.isSearchable&&"top"===t.menuPlacement})},t),{children:t.children}))},MenuList:function(e){var t=e.className,r=cI(e,["className"]);return(0,z.jsx)(rQ.dK.MenuList,c_({className:(0,en.default)(t,"!rounded-rounded !no-scrollbar")},r))},Placeholder:function(e){return e.selectProps.menuIsOpen?null:(0,z.jsx)(rQ.dK.Placeholder,cE(c_({},e),{className:"!text-grey-40 !mx-0"}))},SingleValue:function(e){var t=e.children,r=cI(e,["children"]);return r.selectProps.menuIsOpen&&r.selectProps.isSearchable?null:(0,z.jsx)(rQ.dK.SingleValue,cE(c_({},r),{children:t}))},DropdownIndicator:function(e){var t=e.innerProps,r=e.selectProps.menuIsOpen;return(0,z.jsx)("div",cE(c_({},t),{className:"flex items-center justify-center",children:(0,z.jsx)(ej.A,{size:16,className:(0,en.default)("text-grey-50 transition-all",{"rotate-180":r})})}))},SelectContainer:function(e){return(0,z.jsx)("div",{className:"bg-grey-5 border-grey-20 rounded-rounded focus-within:shadow-cta focus-within:border-violet-60 px-small h-10 border",children:(0,z.jsx)(rQ.dK.SelectContainer,c_({},e))})},Input:function(e){return!e.isHidden&&e.selectProps.menuIsOpen&&e.selectProps.isSearchable?(0,z.jsx)("div",{className:"space-between flex h-full w-full items-center",children:(0,z.jsxs)("div",{className:"flex w-full items-center",children:[(0,z.jsx)("span",{className:"text-grey-40 mr-2",children:(0,z.jsx)(to.A,{size:16})}),(0,z.jsx)(rQ.dK.Input,c_({},e))]})}):(0,z.jsx)(rQ.dK.Input,cE(c_({},e),{className:"pointer-events-none"}))},ClearIndicator:function(e){var t=e.innerProps,r=e.selectProps,n=r.isMulti;return r.menuIsOpen||n?(0,z.jsx)(z.Fragment,{}):(0,z.jsx)("div",cE(c_({},t),{className:"hover:bg-grey-10 text-grey-50 cursor-pointer rounded",children:(0,z.jsx)(eH.A,{size:16})}))},CheckboxAdornment:cD,RadioAdornment:cT,NoOptionsMessage:function(e){var t=e.innerProps,r=e.selectProps.isLoading;return(0,z.jsx)("div",cE(c_({className:"text-grey-50 inter-small-semibold p-xsmall text-center"},t),{children:(0,z.jsx)("p",{children:r?"Loading...":"No options"})}))},Option:function(e){e.className;var t,r,n=cI(e,["className"]);return(0,z.jsx)(rQ.dK.Option,cE(c_({},n),{className:"bg-grey-0 active:bg-grey-0 my-1 py-0 px-2",children:(0,z.jsx)("div",{className:"item-renderer hover:bg-grey-10 h-full cursor-pointer rounded py-2 px-2",children:(0,z.jsx)("div",{className:"flex h-full items-center",children:(null===(t=n.data)||void 0===t?void 0:t.value)!=="all"&&(null===(r=n.data)||void 0===r?void 0:r.label)!=="Select All"?(0,z.jsxs)(z.Fragment,{children:[n.isMulti?(0,z.jsx)(cD,{isSelected:n.isSelected}):(0,z.jsx)(cT,{isSelected:n.isSelected}),(0,z.jsx)("span",{className:"text-grey-90 inter-base-regular ml-3",children:n.data.label})]}):(0,z.jsx)("span",{className:"text-grey-90 inter-base-regular",children:n.data.label})})})}))},IndicatorSeparator:function(){return null},MultiValueRemove:function(){return null},MultiValueLabel:function(e){var t=e.innerProps,r=e.data,n=e.selectProps,i=n.value,a=n.isSearchable,o=n.menuIsOpen,l=e.children,s=!Array.isArray(i)||i[i.length-1]===r;return o&&a?null:(0,z.jsx)("div",cE(c_({},t),{className:(0,en.default)("bg-grey-5 inter-base-regular mx-0 p-0",{"after:content-[',']":!s}),children:l}))}};function cR(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function cL(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function cz(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||cF(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cF(e,t){if(e){if("string"==typeof e)return cR(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cR(e,t)}}var cB=U.forwardRef(function(e,t){var r,n=e.label,i=e.name,a=e.fullWidth,o=e.required,l=e.value,s=e.onChange,c=e.className,u=e.isMultiSelect,d=e.hasSelectAll,f=e.tooltipContent,p=e.tooltip,m=e.enableSearch,h=void 0===m||m,y=e.clearSelected,b=e.isCreatable,v=e.filterOptions,g=e.placeholder,x=e.options,j=e.onCreateOption,w=e.menuPortalStyles,O=void 0===w?{}:w,S=(0,U.useContext)(eN.V).portalRef,P=cz((0,U.useState)(!1),2),C=P[0],A=P[1],N=cz((0,U.useState)(!0),2),k=N[0],_=N[1];(0,U.useEffect)(function(){window.addEventListener("resize",function(){var e;A(!1),null==E||null===(e=E.current)||void 0===e||e.blur()})},[]);var E=(0,U.useRef)(null);(0,U.useImperativeHandle)(t,function(){return E.current});var I=(0,U.useRef)(null);return(0,U.useEffect)(function(){var e=setTimeout(function(){C&&_(!1)},50);return function(){return clearTimeout(e)}},[C]),(0,z.jsx)("div",{ref:I,className:(0,en.default)({"w-full":void 0!==a&&a}),children:(0,z.jsxs)("div",{className:(0,en.default)(c,{"rounded-t-rounded bg-white":C}),children:[(0,z.jsx)("div",{className:"text-grey-50 pointer-events-none mb-2 flex w-full cursor-pointer justify-between pr-0.5",children:(0,z.jsx)(iX.A,{label:n,required:o,tooltip:p,tooltipContent:f})}),(0,z.jsx)(cq,{isCreatable:b,searchBackend:v,options:d&&u?[{value:"all",label:"Select All"}].concat(function(e){if(Array.isArray(e))return cR(e)}(x)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(x)||cF(x)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()):x,ref:E,value:l,isMulti:u,openMenuOnFocus:u,isSearchable:h,isClearable:void 0!==y&&y,onChange:function(e){for(var t,r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];(null==e?void 0:e.length)&&(null==e?void 0:e.find(function(e){return"all"===e.value}))&&d&&u?s(x):(s(e),u||(null==E||null===(t=E.current)||void 0===t||t.blur(),A(!1)))},onMenuOpen:function(){A(!0)},onMenuClose:function(){_(!0),A(!1)},closeMenuOnScroll:function(e){var t;if(!k&&(null===(t=e.target)||void 0===t?void 0:t.contains(I.current))&&e.target!==document)return!0},closeMenuOnSelect:!u,blurInputOnSelect:!u,styles:{menuPortal:function(e){return cL({},e,O)}},hideSelectedOptions:!1,menuPortalTarget:(null==S?void 0:null===(r=S.current)||void 0===r?void 0:r.lastChild)||document.body,menuPlacement:"auto",backspaceRemovesValue:!1,classNamePrefix:"react-select",placeholder:void 0===g?"Search...":g,className:"react-select-container",onCreateOption:function(e){if(j){var t;j(e),A(!1),null==E||null===(t=E.current)||void 0===t||t.blur()}},components:cM}),C&&h&&(0,z.jsx)("div",{className:"h-5 w-full"})]},i)})}),cq=U.forwardRef(function(e,t){var r,n,i=e.isCreatable,a=e.searchBackend,o=e.onCreateOption,l=(e.handleClose,function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["isCreatable","searchBackend","onCreateOption","handleClose"]));return i?a?(0,z.jsx)(ck.A,cL({ref:t,defaultOptions:!0,onCreateOption:o,isSearchable:!0,loadOptions:a},l)):(0,z.jsx)(sx.A,(r=cL({},l),n=n={isSearchable:!0,ref:t,onCreateOption:o},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))}),r)):a?(0,z.jsx)(cN.A,cL({ref:t,defaultOptions:!0,loadOptions:a},l)):(0,z.jsx)(rQ.Ay,cL({ref:t},l))});function cH(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function cU(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return cH(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cH(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var cV=U.createContext({currencyInfo:void 0}),cG=function(e){if(e)return sS.q[e.toUpperCase()]};let cW={Root:function(e){var t,r=e.currentCurrency,n=e.currencyCodes,i=e.size,a=void 0===i?"full":i,o=e.readOnly,l=void 0!==o&&o,s=e.hideCurrency,c=e.onChange,u=e.children,d=e.className,f=null!==(t=null==n?void 0:n.map(function(e){return{label:e.toUpperCase(),value:e}}))&&void 0!==t?t:[],p=(0,ei.Bd)().t,m=cU((0,U.useState)(cG(r)),2),h=m[0],y=m[1],b=cU((0,U.useState)(r?{label:r.toUpperCase(),value:r}:null),2),v=b[0],g=b[1];return(0,U.useEffect)(function(){r&&(y(cG(r)),g({label:r.toUpperCase(),value:r}))},[r]),(0,z.jsx)(cV.Provider,{value:{currencyInfo:h},children:(0,z.jsxs)("div",{className:(0,en.default)("gap-x-xsmall flex items-center",d),children:[!(void 0!==s&&s)&&(0,z.jsx)("div",{className:(0,en.default)({"w-[144px]":"medium"===a},{"w-[120px]":"small"===a},{"flex-1":"full"===a}),children:l?(0,z.jsx)(e1.A,{label:p("currency-input-currency","Currency"),value:null==v?void 0:v.label,readOnly:!0,className:"pointer-events-none",tabIndex:-1}):(0,z.jsx)(cB,{enableSearch:!0,label:p("currency-input-currency","Currency"),value:v,onChange:function(e){e&&(g(e),y(cG(e.value)),c&&c(e.value))},options:f,disabled:l})}),u&&(0,z.jsx)("div",{className:"flex-1",children:u})]})})},Amount:(0,U.forwardRef)(function(e,t){var r,n,i=e.label,a=e.required,o=e.amount,l=e.step,s=void 0===l?1:l,c=e.allowNegative,u=void 0!==c&&c,d=e.onChange,f=e.onValidate,p=e.invalidMessage,m=e.errors,h=e.name,y=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["label","required","amount","step","allowNegative","onChange","onValidate","invalidMessage","errors","name"]),b=(0,ei.Bd)().t,v=(0,U.useContext)(cV).currencyInfo,g=cU((0,U.useState)(!1),2),x=g[0],j=g[1],w=cU((0,U.useState)(o?"".concat((0,rg.kP)(null==v?void 0:v.code,o)):void 0),2),O=w[0],S=w[1],P=(0,U.useRef)(null);(0,U.useImperativeHandle)(t,function(){return P.current}),(0,U.useEffect)(function(){var e;null===(e=P.current)||void 0===e||e.dispatchEvent(new Event("blur"))},[null==v?void 0:v.decimal_digits]),(0,U.useEffect)(function(){v&&o&&S("".concat((0,rg.kP)(null==v?void 0:v.code,o)))},[o]);var C=function(e,t){var r=void 0;if(r="number"==typeof t&&v?Math.round((0,rg.bS)(v.code,t)):void 0,d){var n=!0;if(f&&(n=f(r)),n)d(r),j(!1);else{j(!0);return}}S(e)},A=function(e){var t=parseFloat(null!=O?O:"0")+e;(u||!(t<0))&&C("".concat(t),t)};return(0,z.jsxs)("div",(r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},y),n=n={children:[(0,z.jsx)(iX.A,{label:i,required:void 0!==a&&a,className:"mb-xsmall"}),(0,z.jsxs)("div",{className:(0,en.default)("bg-grey-5 border-gray-20 px-small py-xsmall rounded-rounded focus-within:shadow-input focus-within:border-violet-60 flex h-10 w-full items-center border",{"focus-within:shadow-cta focus-within:shadow-rose-60/10 border-rose-50 focus-within:border-rose-50":m&&h&&m[h]}),children:[(null==v?void 0:v.symbol_native)&&(0,z.jsx)(r9.A,{open:x,side:"top",content:p||b("currency-input-amount-is-not-valid","Amount is not valid"),children:(0,z.jsx)("span",{className:"inter-base-regular text-grey-40 mr-xsmall",children:v.symbol_native})}),(0,z.jsx)(sO.default,{className:"remove-number-spinner leading-base text-grey-90 caret-violet-60 placeholder-grey-40 w-full bg-transparent font-normal outline-none outline-0",decimalScale:null==v?void 0:v.decimal_digits,value:O,onValueChange:function(e,t,r){return C(e,null==r?void 0:r.float)},ref:P,step:s,allowNegativeValue:u,placeholder:"0.00",name:h}),(0,z.jsxs)("div",{className:"flex items-center",children:[(0,z.jsx)("button",{className:"text-grey-50 hover:bg-grey-10 rounded-soft mr-2 h-4 w-4 cursor-pointer",type:"button",onClick:function(){return A(-s)},children:(0,z.jsx)(e9.A,{size:16})}),(0,z.jsx)("button",{type:"button",className:"text-grey-50 hover:bg-grey-10 rounded-soft h-4 w-4 cursor-pointer",onClick:function(){return A(s)},children:(0,z.jsx)(n_.A,{size:16})})]})]}),(0,z.jsx)(rH.A,{name:h,errors:m})]},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))}),r))})};function cY(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function c$(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}let cQ=function(e){var t,r,n=e.discount,i=(null==n?void 0:null===(r=n.regions)||void 0===r?void 0:r[0].currency_code)||void 0,a=(0,ei.Bd)().t,o=function(e){if(Array.isArray(e))return e}(t=(0,U.useState)(i))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(t,2)||function(e,t){if(e){if("string"==typeof e)return cY(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cY(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),l=o[0],s=o[1],c=(0,J.useAdminRegions)(),u=c.regions,d=c.isLoading,f=a6(),p=f.register,m=f.control,h=f.type,y=(0,eR.FH)({control:m,name:"regions"});(0,U.useEffect)(function(){if("fixed"===h&&y){e=Array.isArray(y)&&y.length?y[0].value:y.value;var e,t=null==u?void 0:u.find(function(t){return t.id===e});t&&s(t.currency_code)}},[h,u,y]);var b=(0,U.useMemo)(function(){return(null==u?void 0:u.map(function(e){return{value:e.id,label:e.name}}))||[]},[u]);return(0,z.jsx)("div",{className:"pt-5",children:!d&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(eR.xI,{name:"regions",control:m,rules:{required:a("sections-at-least-one-region-is-required","At least one region is required"),validate:function(e){return Array.isArray(e)?e.length>0:!!e}},render:function(e){var t=e.field,r=t.onChange,n=t.value;return(0,z.jsx)(no,{value:n||null,onChange:function(e){r("fixed"===h?[e]:e)},label:a("sections-choose-valid-regions","Choose valid regions"),isMulti:"fixed"!==h,selectAll:"fixed"!==h,isSearchable:!0,required:!0,options:b})}}),(0,z.jsxs)("div",{className:"gap-x-base gap-y-base my-base flex",children:[(0,z.jsx)(e1.A,c$({label:a("sections-code","Code"),className:"flex-1",placeholder:a("sections-summersale-10","SUMMERSALE10"),required:!0},p("code",{required:a("sections-code-is-required","Code is required")}))),"free_shipping"!==h&&(0,z.jsx)(z.Fragment,{children:"fixed"===h?(0,z.jsx)("div",{className:"flex-1",children:(0,z.jsx)(cW.Root,{size:"small",currentCurrency:l,readOnly:!0,hideCurrency:!0,children:(0,z.jsx)(eR.xI,{name:"rule.value",control:m,rules:{required:a("sections-amount-is-required","Amount is required"),min:1},render:function(e){var t=e.field,r=t.value,n=t.onChange;return(0,z.jsx)(cW.Amount,{label:a("sections-amount","Amount"),required:!0,amount:r,onChange:n})}})})}):(0,z.jsx)("div",{className:"flex-1",children:(0,z.jsx)(e1.A,c$({label:a("sections-percentage","Percentage"),min:0,required:!0,type:"number",placeholder:"10",prefix:"%"},p("rule.value",{required:!0,valueAsNumber:!0})))})})]}),(0,z.jsxs)("div",{className:"text-grey-50 inter-small-regular mb-6 flex flex-col",children:[(0,z.jsx)("span",{children:a("sections-customer-invoice-code","The code your customers will enter during checkout. This will appear on your customer’s invoice.")}),(0,z.jsx)("span",{children:a("sections-uppercase-letters-and-numbers-only","Uppercase letters and numbers only.")})]}),(0,z.jsx)(sw.A,c$({label:a("sections-description","Description"),required:!0,placeholder:a("sections-summer-sale-2022","Summer Sale 2022"),rows:1},p("rule.description",{required:!0}))),(0,z.jsxs)("div",{className:"mt-xlarge flex items-center",children:[(0,z.jsx)(eR.xI,{name:"is_dynamic",control:m,render:function(e){var t=e.field,r=t.onChange,n=t.value;return(0,z.jsx)(cA,{label:a("sections-this-is-a-template-discount","This is a template discount"),name:"is_dynamic",id:"is_dynamic",checked:n,onChange:function(e){return r(e.target.checked)}})}}),(0,z.jsx)(e0.A,{content:a("sections-template-discounts-description","Template discounts allow you to define a set of rules that can be used across a group of discounts. This is useful in campaigns that should generate unique codes for each user, but where the rules for all unique codes should be the same.")})]})]})})};function cK(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function cZ(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function o(e){cK(a,n,i,o,l,"next",e)}function l(e){cK(a,n,i,o,l,"throw",e)}o(void 0)})}}function cJ(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}let cX=function(e){var t,r,n=e.closeForm,i=(0,H.useNavigate)(),a=(0,eC.A)(),o=a6(),l=o.handleSubmit,s=o.handleReset,u=o.control,d=o.form,f=(0,ei.Bd)().t,p=s0(),m=p.onSaveAsActive,h=p.onSaveAsInactive,y=function(){n?n():i("/a/discounts"),s()},b=(t=cZ(function(e){return cJ(this,function(t){return h(e).then(function(){y(),s()}).catch(function(e){a(f("discount-form-error","Error"),(0,eA.u)(e),"error")}),[2]})}),function(e){return t.apply(this,arguments)}),v=(r=cZ(function(e){var t;return cJ(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,m(e)];case 1:return r.sent(),y(),s(),[3,3];case 2:return t=r.sent(),a(f("discount-form-error","Error"),(0,eA.u)(t),"error"),[3,3];case 3:return[2]}})}),function(e){return r.apply(this,arguments)}),g=(0,eR.FH)({control:u,name:"rule.type"});return(0,z.jsxs)(sF.A,{children:[(0,z.jsx)(sF.A.Header,{children:(0,z.jsxs)("div",{className:"medium:w-8/12 flex w-full justify-between px-8",children:[(0,z.jsx)(W.A,{size:"small",variant:"ghost",onClick:n,className:"rounded-rounded h-8 w-8 border",children:(0,z.jsx)(ao.A,{size:20})}),(0,z.jsxs)("div",{className:"gap-x-small flex",children:[(0,z.jsx)(W.A,{onClick:l(b),size:"small",variant:"ghost",className:"rounded-rounded border",children:f("discount-form-save-as-draft","Save as draft")}),(0,z.jsx)(W.A,{size:"small",variant:"primary",onClick:l(v),className:"rounded-rounded",children:f("discount-form-publish-discount","Publish discount")})]})]})}),(0,z.jsx)(sF.A.Main,{children:(0,z.jsx)("div",{className:"mb-[25%] flex justify-center",children:(0,z.jsxs)("div",{className:"w-full max-w-[700px] pt-16",children:[(0,z.jsx)("h1",{className:"inter-xlarge-semibold",children:f("discount-form-create-new-discount","Create new discount")}),(0,z.jsxs)(sV,{className:"text-grey-90 pt-7",defaultValue:["promotion-type"],type:"multiple",children:[(0,z.jsxs)(sV.Item,{forceMountContent:!0,title:f("discount-form-discount-type","Discount type"),required:!0,tooltip:f("discount-form-select-a-discount-type","Select a discount type"),value:"promotion-type",children:[(0,z.jsx)(cC,{}),g===c.FIXED&&(0,z.jsxs)("div",{className:"mt-xlarge",children:[(0,z.jsxs)("h3",{className:"inter-base-semibold",children:[f("discount-form-allocation","Allocation"),(0,z.jsx)("span",{className:"text-rose-50",children:"*"})]}),(0,z.jsx)(cP,{})]})]}),(0,z.jsx)(sV.Item,{title:f("discount-form-general","General"),required:!0,value:"general",forceMountContent:!0,children:(0,z.jsx)(cQ,{})}),(0,z.jsx)(sV.Item,{forceMountContent:!0,title:f("discount-form-configuration","Configuration"),value:"configuration",description:f("discount-form-discount-code-application-disclaimer","Discount code applies from when you hit the publish button and forever if left untouched."),children:(0,z.jsx)(cS,{})}),(0,z.jsx)(sV.Item,{forceMountContent:!0,title:f("discount-form-conditions","Conditions"),description:f("discount-form-discount-code-apply-to-all-products-if-left-untouched","Discount code apply to all products if left untouched."),value:"conditions",tooltip:f("discount-form-add-conditions-to-your-discount","Add conditions to your Discount"),children:(0,z.jsx)(cg,{})}),(0,z.jsx)(sV.Item,{title:f("discount-form-metadata","Metadata"),subtitle:f("discount-form-metadata-usage-description","Metadata allows you to add additional information to your discount."),value:"metadata",forceMountContent:!0,children:(0,z.jsx)("div",{className:"mt-small",children:(0,z.jsx)(e$,{form:(0,eL.m)(d,"metadata")})})})]})]})})})]})},c0=function(){return(0,z.jsx)("div",{className:"pb-xlarge",children:(0,z.jsx)(a3,{children:(0,z.jsx)(cX,{})})})};function c1(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var c2=function(){var e,t=(0,ei.Bd)().t,r=function(e){if(Array.isArray(e))return e}(e=(0,U.useState)(!1))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,2)||function(e,t){if(e){if("string"==typeof e)return c1(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c1(e,2)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),n=r[0],i=r[1],a=[{label:t("discounts-add-discount","Add Discount"),onClick:function(){return i(!0)},icon:(0,z.jsx)(n_.A,{size:20})}],o=(0,tY.X)().getWidgets;return(0,z.jsxs)("div",{className:"flex h-full flex-col",children:[(0,z.jsxs)("div",{className:"gap-y-xsmall flex w-full grow flex-col",children:[o("discount.list.before").map(function(e,t){return(0,z.jsx)(es.A,{widget:e,injectionZone:"discount.list.before",entity:null},t)}),(0,z.jsx)(eD,{actionables:a,customHeader:(0,z.jsx)(n6,{views:["discounts"]}),className:"h-fit",children:(0,z.jsx)(aK,{})}),o("discount.list.after").map(function(e,t){return(0,z.jsx)(es.A,{widget:e,injectionZone:"discount.list.after",entity:null},t)}),(0,z.jsx)(el,{})]}),(0,z.jsx)(a3,{children:(0,z.jsx)(ik.A,{isVisible:n,isFullScreen:!0,children:(0,z.jsx)(cX,{closeForm:function(){return i(!1)}})})})]})};let c3=function(){var e=(0,(0,V.Y)().getNestedRoutes)("/discounts");return(0,z.jsxs)(H.Routes,{children:[(0,z.jsx)(H.Route,{index:!0,element:(0,z.jsx)(c2,{})}),(0,z.jsx)(H.Route,{path:"/new",element:(0,z.jsx)(c0,{})}),(0,z.jsx)(H.Route,{path:"/:id",element:(0,z.jsx)(sz,{})}),e.map(function(e,t){return(0,z.jsx)(H.Route,{path:e.path,element:(0,z.jsx)(Z,{route:e,previousPath:"/discounts"})},t)})]})},c5=function(e){var t,r,n=e.size,i=void 0===n?"24":n,a=e.color,o=void 0===a?"currentColor":a,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["size","color"]);return(0,z.jsxs)("svg",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({width:i,height:i,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l),r=r={children:[(0,z.jsx)("path",{d:"M12 3V21",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M17 6H9.5C8.57174 6 7.6815 6.31607 7.02513 6.87868C6.36875 7.44129 6 8.20435 6 9C6 9.79565 6.36875 10.5587 7.02513 11.1213C7.6815 11.6839 8.57174 12 9.5 12H14.5C15.4283 12 16.3185 12.3161 16.9749 12.8787C17.6313 13.4413 18 14.2044 18 15C18 15.7956 17.6313 16.5587 16.9749 17.1213C16.3185 17.6839 15.4283 18 14.5 18H6",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},c6=function(e){var t=e.form,r=t.control,n=t.path;return(0,z.jsx)(eR.xI,{name:n("ends_at"),control:r,render:function(e){var t=e.field,r=t.value,n=t.onChange;return(0,z.jsx)(sl,{open:!!r,onSwitch:function(){r?n(null):n(new Date(new Date().getTime()+6048e5))},title:"Gift Card has an expiry date?",description:"Schedule the Gift Card to deactivate in the future.",children:(0,z.jsxs)("div",{className:"gap-x-xsmall flex items-center",children:[(0,z.jsx)(i8,{date:r,label:"Expiry date",onSubmitDate:n}),(0,z.jsx)(st,{label:"Expiry time",date:r,onSubmitDate:n})]})})}})},c4=function(e){var t=e.form,r=t.control,n=t.path,i=t.formState.errors,a=t.setValue,o=(0,J.useAdminRegions)({limit:100}).regions,l=(0,U.useMemo)(function(){return(null==o?void 0:o.map(function(e){return{label:e.name,value:e.id,currency_code:e.currency_code}}))||[]},[o]),s=(0,eR.FH)({control:r,name:n("region_id")});return(0,U.useEffect)(function(){s||a(n("region_id"),l[0],{shouldDirty:!0})},[s,l,a,n]),(0,z.jsx)(eR.xI,{name:n("region_id"),rules:{required:n8.A.required("Region")},control:r,render:function(e){var t,r,n=e.field;return(0,z.jsx)(no,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({label:"Region",required:!0},n),r=r={errors:i,options:l},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}})};var c8=function(e){return{region:{region_id:{label:e.region.name,value:e.region.id,currency_code:e.region.currency_code}},ends_at:{ends_at:e.ends_at}}};let c7=function(e){var t=e.open,r=e.onClose,n=e.giftCard,i=(0,ei.Bd)().t,a=(0,eR.mN)({defaultValues:c8(n)}),o=a.handleSubmit,l=a.reset,s=a.formState.isDirty,c=(0,J.useAdminUpdateGiftCard)(n.id),u=c.mutate,d=c.isLoading,f=(0,eC.A)(),p=o(function(e){u({region_id:e.region.region_id.value,ends_at:e.ends_at.ends_at},{onSuccess:function(){f(i("details-updated-gift-card","Updated Gift card"),i("details-gift-card-was-successfully-updated","Gift card was successfully updated"),"success"),r()},onError:function(e){f(i("details-failed-to-update-gift-card","Failed to update Gift card"),(0,eA.u)(e),"error")}})});return(0,U.useEffect)(function(){t&&l(c8(n))},[t,l,n]),(0,z.jsx)(eN.A,{open:t,handleClose:r,children:(0,z.jsxs)(eN.A.Body,{children:[(0,z.jsx)(eN.A.Header,{handleClose:r,children:(0,z.jsx)("h1",{className:"inter-xlarge-semibold",children:i("details-edit-gift-card","Edit Gift Card")})}),(0,z.jsxs)("form",{onSubmit:p,children:[(0,z.jsx)(eN.A.Content,{children:(0,z.jsxs)("div",{className:"gap-y-xlarge flex flex-col",children:[(0,z.jsxs)("div",{children:[(0,z.jsx)("h2",{className:"inter-base-semibold mb-base",children:i("details-details","Details")}),(0,z.jsx)(c4,{form:(0,eL.m)(a,"region")})]}),(0,z.jsx)(c6,{form:(0,eL.m)(a,"ends_at")})]})}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"gap-x-xsmall flex w-full justify-end",children:[(0,z.jsx)(W.A,{variant:"secondary",size:"small",onClick:r,type:"button",children:i("details-cancel","Cancel")}),(0,z.jsx)(W.A,{variant:"primary",size:"small",type:"submit",disabled:d||!s,loading:d,children:i("details-save-and-close","Save and close")})]})})]})]})})},c9=function(e){var t=e.form,r=e.currencyCode,n=e.originalAmount,i=t.control,a=t.path,o=t.formState.errors;return(0,z.jsx)(eR.xI,{name:a("amount"),rules:{required:n8.A.required("Balance"),min:{value:0,message:"Balance must be greater than 0"},max:n?{value:n,message:"The updated balance cannot exceed the original value of ".concat((0,rg.Q2)({amount:n,currency:r}))}:void 0},control:i,render:function(e){var t=e.field,n=t.value,i=t.onChange,a=t.name;return(0,z.jsx)(sC,{label:"Amount",currencyCode:r,onChange:i,amount:n,name:a,errors:o,required:!0})}})};var ue=function(e){return{balance:{amount:e.balance}}};let ut=function(e){var t=e.open,r=e.onClose,n=e.giftCard,i=(0,ei.Bd)().t,a=(0,eR.mN)({defaultValues:ue(n)}),o=a.handleSubmit,l=a.reset,s=a.formState.isDirty,c=(0,J.useAdminUpdateGiftCard)(n.id),u=c.mutate,d=c.isLoading,f=(0,eC.A)(),p=o(function(e){u({balance:e.balance.amount},{onSuccess:function(){f(i("details-balance-updated","Balance updated"),i("details-gift-card-balance-was-updated","Gift card balance was updated"),"success"),r()},onError:function(e){f(i("details-failed-to-update-balance","Failed to update balance"),(0,eA.u)(e),"error")}})});return(0,U.useEffect)(function(){t&&l(ue(n))},[t,l,n]),(0,z.jsx)(eN.A,{open:t,handleClose:r,children:(0,z.jsxs)(eN.A.Body,{children:[(0,z.jsx)(eN.A.Header,{handleClose:r,children:(0,z.jsx)("h1",{className:"inter-xlarge-semibold",children:i("details-update-balance","Update Balance")})}),(0,z.jsxs)("form",{onSubmit:p,children:[(0,z.jsx)(eN.A.Content,{children:(0,z.jsx)(c9,{form:(0,eL.m)(a,"balance"),currencyCode:n.region.currency_code,originalAmount:n.value})}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"gap-x-xsmall flex w-full justify-end",children:[(0,z.jsx)(W.A,{variant:"secondary",size:"small",onClick:r,type:"button",children:i("details-cancel","Cancel")}),(0,z.jsx)(W.A,{variant:"primary",size:"small",type:"submit",loading:d,disabled:d||!s,children:i("details-save-and-close","Save and close")})]})})]})]})})},ur=function(){var e=(0,H.useParams)().id,t=(0,ei.Bd)().t,r=(0,J.useAdminGiftCard)(e,{enabled:!!e}),n=r.gift_card,i=r.isLoading,a=(0,J.useAdminUpdateGiftCard)(null==n?void 0:n.id),o=(0,tY.X)().getWidgets,l=(0,eC.A)(),s=(0,n5.A)(),c=s.state,u=s.open,d=s.close,f=(0,n5.A)(),p=f.state,m=f.open,h=f.close,y=[{label:t("details-edit-details","Edit details"),onClick:u,icon:(0,z.jsx)(ec,{size:20})},{label:t("details-update-balance-label","Update balance"),onClick:m,icon:(0,z.jsx)(c5,{size:20})}],b=function(e){a.mutate({is_disabled:e.is_disabled},{onSuccess:function(){l(t("details-updated-status","Updated status"),t("details-successfully-updated-the-status-of-the-gift-card","Successfully updated the status of the Gift Card"),"success")},onError:function(e){return l(t("details-error","Error"),(0,eA.u)(e),"error")}})};return(0,z.jsxs)("div",{children:[(0,z.jsx)(eo,{label:t("details-back-to-gift-cards","Back to Gift Cards"),path:"/a/gift-cards",className:"mb-xsmall"}),i||!n?(0,z.jsx)("div",{className:"bg-grey-0 border-grey-20 rounded-rounded py-xlarge flex w-full items-center justify-center border",children:(0,z.jsx)(X.A,{size:"large",variant:"secondary"})}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("div",{className:"gap-y-xsmall flex flex-col",children:[o("custom_gift_card.before").map(function(e,t){return(0,z.jsx)(es.A,{widget:e,entity:n,injectionZone:"custom_gift_card.before"},t)}),(0,z.jsx)(eD,{className:"h-auto min-h-0 w-full",title:"".concat(null==n?void 0:n.code),status:(0,z.jsx)(sg,{isDraft:!!(null==n?void 0:n.is_disabled),activeState:"Active",draftState:"Disable",onChange:function(){return b({is_disabled:!n.is_disabled})}}),actionables:y,children:(0,z.jsx)("div",{className:"flex justify-between",children:(0,z.jsxs)("div",{className:"flex space-x-6 divide-x",children:[(0,z.jsxs)("div",{className:"flex flex-col",children:[(0,z.jsx)("div",{className:"inter-smaller-regular text-grey-50 mb-1",children:t("details-original-amount","Original amount")}),(0,z.jsx)("div",{children:(0,rg.Q2)({amount:n.value,currency:n.region.currency_code})})]}),(0,z.jsxs)("div",{className:"flex flex-col pl-6",children:[(0,z.jsx)("div",{className:"inter-smaller-regular text-grey-50 mb-1",children:t("details-balance","Balance")}),(0,z.jsx)("div",{children:(0,rg.Q2)({amount:n.balance,currency:n.region.currency_code})})]}),(0,z.jsxs)("div",{className:"flex flex-col pl-6",children:[(0,z.jsx)("div",{className:"inter-smaller-regular text-grey-50 mb-1",children:t("details-region","Region")}),(0,z.jsx)("div",{children:n.region.name})]}),n.ends_at&&(0,z.jsxs)("div",{className:"flex flex-col pl-6",children:[(0,z.jsx)("div",{className:"inter-smaller-regular text-grey-50 mb-1",children:t("details-expires-on","Expires on")}),(0,z.jsx)("div",{children:re()(n.ends_at).format("DD MMM YYYY")})]}),(0,z.jsxs)("div",{className:"flex flex-col pl-6",children:[(0,z.jsx)("div",{className:"inter-smaller-regular text-grey-50 mb-1",children:t("details-created","Created")}),(0,z.jsx)("div",{children:re()(n.created_at).format("DD MMM YYYY")})]})]})})}),o("custom_gift_card.after").map(function(e,t){return(0,z.jsx)(es.A,{widget:e,entity:n,injectionZone:"custom_gift_card.after"},t)}),(0,z.jsx)(eT,{data:n,title:t("details-raw-gift-card","Raw gift card")})]}),(0,z.jsx)(ut,{giftCard:n,onClose:h,open:p}),(0,z.jsx)(c7,{onClose:d,open:c,giftCard:n})]})]})},un=function(e){var t,r,n=e.size,i=void 0===n?"24":n,a=e.color,o=void 0===a?"currentColor":a,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["size","color"]);return(0,z.jsxs)("svg",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({width:i,height:i,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l),r=r={children:[(0,z.jsx)("path",{d:"M21 9H3V7L12 3L21 7V9Z",stroke:o,strokeWidth:"1.5",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M10 20.75C10.4142 20.75 10.75 20.4142 10.75 20C10.75 19.5858 10.4142 19.25 10 19.25V20.75ZM3 20L2.28 19.79C2.2139 20.0166 2.25836 20.2611 2.4 20.45C2.54164 20.6389 2.76393 20.75 3 20.75V20ZM3.875 17V16.25C3.54167 16.25 3.24833 16.47 3.155 16.79L3.875 17ZM10 17.75C10.4142 17.75 10.75 17.4142 10.75 17C10.75 16.5858 10.4142 16.25 10 16.25V17.75ZM10 19.25H3V20.75H10V19.25ZM3.72 20.21L4.595 17.21L3.155 16.79L2.28 19.79L3.72 20.21ZM3.875 17.75H10V16.25H3.875V17.75Z",fill:o}),(0,z.jsx)("path",{d:"M5 9V17M9 17V9",stroke:o,strokeWidth:"1.5"}),(0,z.jsx)("path",{d:"M20.5625 13.4375L14.4375 19.5625",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M14.75 14.5C15.1642 14.5 15.5 14.1642 15.5 13.75C15.5 13.3358 15.1642 13 14.75 13C14.3358 13 14 13.3358 14 13.75C14 14.1642 14.3358 14.5 14.75 14.5Z",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M20.25 20C20.6642 20 21 19.6642 21 19.25C21 18.8358 20.6642 18.5 20.25 18.5C19.8358 18.5 19.5 18.8358 19.5 19.25C19.5 19.6642 19.8358 20 20.25 20Z",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},ui=function(e){var t=e.includesTax;return(0,z.jsx)(r9.A,{content:t?"Tax incl. price":"Tax excl. price",children:(0,z.jsx)("div",{className:"w-large h-large rounded-rounded border-grey-20 flex items-center justify-center border",children:(0,z.jsx)(un,{size:16,className:(0,en.default)({"text-grey-50":t,"text-grey-30":!t})})})})},ua=function(e){var t,r,n=e.size,i=void 0===n?"24":n,a=e.color,o=void 0===a?"currentColor":a,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["size","color"]);return(0,z.jsxs)("svg",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({width:i,height:i,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l),r=r={children:[(0,z.jsx)("path",{d:"M8.39844 13.2534C11.1599 13.2534 13.3984 11.0148 13.3984 8.25336C13.3984 5.49193 11.1599 3.25336 8.39844 3.25336C5.63701 3.25336 3.39844 5.49193 3.39844 8.25336C3.39844 11.0148 5.63701 13.2534 8.39844 13.2534Z",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M18.187 11.7466C18.8282 12.1161 19.3757 12.6281 19.7872 13.2431C20.1987 13.8582 20.4631 14.5596 20.56 15.2932C20.6569 16.0268 20.5837 16.7729 20.346 17.4737C20.1083 18.1744 19.7125 18.8111 19.1892 19.3343C18.666 19.8576 18.0293 20.2534 17.3286 20.4911C16.6278 20.7288 15.8818 20.802 15.1481 20.7051C14.4145 20.6082 13.7131 20.3438 13.0981 19.9323C12.4831 19.5208 11.971 18.9733 11.6016 18.3321",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M7.39844 6.75336H8.39844V9.75336",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M15.9874 13.6536L16.5964 14.2129L14.1602 16.4501",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},uo=function(e){var t=e.form,r=t.control,n=t.path,i=t.formState.errors,a=(0,eR.jz)({control:r,name:n("currencyDenominations"),keyName:"fieldKey"}).fields,o=(0,eR.FH)({control:r,name:n("defaultDenomination")}),l=(0,eR.FH)({control:r,name:n("useSameValue")});return(0,z.jsxs)("div",{className:"gap-y-xlarge flex flex-col",children:[(0,z.jsxs)("div",{children:[(0,z.jsxs)("div",{className:"gap-x-2xsmall flex items-center",children:[(0,z.jsx)("h2",{className:"inter-base-semibold",children:"Default currency"}),(0,z.jsx)(e0.A,{type:"info",content:"The denomination in your store's default currency"})]}),(0,z.jsxs)("div",{className:"pt-small gap-x-base rounded-rounded relative grid grid-cols-[1fr_223px] justify-between transition-colors",children:[(0,z.jsxs)("div",{className:"gap-x-small flex items-center",children:[(0,z.jsx)("div",{className:"bg-grey-10 rounded-rounded text-grey-50 flex h-10 w-10 items-center justify-center",children:(0,z.jsx)(ua,{size:20})}),(0,z.jsxs)("div",{className:"gap-x-xsmall flex items-center",children:[(0,z.jsx)("span",{className:"inter-base-semibold",children:o.currency_code.toUpperCase()}),(0,z.jsx)("span",{className:"inter-base-regular text-grey-50",children:sS.q[o.currency_code.toUpperCase()].name}),(0,z.jsx)(ui,{includesTax:o.includes_tax})]})]}),(0,z.jsx)(eR.xI,{name:n("defaultDenomination.amount"),control:r,rules:{required:"An amount for your store's default currency is required"},render:function(e){var t=e.field,r=t.value,n=t.onChange,a=t.name;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(sC,{onChange:n,amount:null!==r?r:void 0,currencyCode:o.currency_code,errors:i}),(0,z.jsx)(rH.A,{errors:i,name:a})]})}})]})]}),(0,z.jsx)("div",{children:(0,z.jsxs)("div",{className:"flex items-start justify-between",children:[(0,z.jsxs)("div",{className:"gap-y-2xsmall flex flex-col",children:[(0,z.jsx)("h2",{className:"inter-base-semibold",children:"Use value for all currencies?"}),(0,z.jsx)("p",{className:"inter-small-regular text-grey-50 max-w-[60%]",children:"If enabled the value used for the store's default currency code will also be applied to all other currencies in your store."})]}),(0,z.jsx)(eR.xI,{control:r,name:n("useSameValue"),render:function(e){var t=e.field,r=t.value,n=t.onChange,i=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e.field,["value","onChange"]);return(0,z.jsx)(so.A,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({checked:r,onCheckedChange:n},i))}})]})}),!l&&(0,z.jsxs)("div",{children:[(0,z.jsxs)("div",{className:"gap-x-2xsmall flex items-center",children:[(0,z.jsx)("h2",{className:"inter-base-semibold",children:"Other currencies"}),(0,z.jsx)(e0.A,{type:"info",content:"The denomination in your store's other currencies"})]}),(0,z.jsx)("div",{className:"gap-y-xsmall pt-small flex flex-col",children:a.map(function(e,t){return(0,z.jsxs)("div",{className:"gap-x-base rounded-rounded relative grid grid-cols-[1fr_223px] justify-between transition-colors",children:[(0,z.jsxs)("div",{className:"gap-x-small flex items-center",children:[(0,z.jsx)("div",{className:"bg-grey-10 rounded-rounded text-grey-50 flex h-10 w-10 items-center justify-center",children:(0,z.jsx)(ua,{size:20})}),(0,z.jsxs)("div",{className:"gap-x-xsmall flex items-center",children:[(0,z.jsx)("span",{className:"inter-base-semibold",children:e.currency_code.toUpperCase()}),(0,z.jsx)("span",{className:"inter-base-regular text-grey-50",children:sS.q[e.currency_code.toUpperCase()].name}),(0,z.jsx)(ui,{includesTax:e.includes_tax})]})]}),(0,z.jsx)(eR.xI,{name:n("currencyDenominations.".concat(t,".amount")),control:r,render:function(t){var r=t.field,n=r.value,i=r.onChange,a=t.formState.errors;return(0,z.jsx)(sC,{onChange:i,amount:null!==n?n:void 0,currencyCode:e.currency_code,errors:a})}})]},e.fieldKey)})})]}),(0,z.jsxs)("div",{children:[(0,z.jsx)("h2",{className:"inter-base-semibold mb-base",children:"Metadata"}),(0,z.jsx)(e$,{form:(0,eL.m)(t,"metadata")})]})]})},ul=function(e){var t=e.open,r=e.onClose,n=e.giftCard,i=(0,ei.Bd)().t,a=(0,J.useAdminCreateVariant)(n.id),o=a.mutate,l=a.isLoading,s=(0,J.useAdminStore)().store,c=(0,U.useMemo)(function(){var e;if(s)return{denominations:{defaultDenomination:{currency_code:s.default_currency_code,includes_tax:null===(e=s.currencies.find(function(e){return e.code===s.default_currency_code}))||void 0===e?void 0:e.includes_tax},currencyDenominations:s.currencies.filter(function(e){return e.code!==s.default_currency_code}).map(function(e){return{currency_code:e.code,includes_tax:e.includes_tax}})}}},[s]),u=(0,eR.mN)({defaultValues:c}),d=u.handleSubmit,f=u.reset,p=u.formState.isDirty,m=(0,eC.A)(),h=(0,U.useCallback)(function(){f(c),r()},[f,c,r]),y=d(function(e){var t={title:"".concat(n.variants.length),options:[{value:"".concat(e.denominations.defaultDenomination.amount),option_id:n.options[0].id}],prices:[{amount:e.denominations.defaultDenomination.amount,currency_code:e.denominations.defaultDenomination.currency_code}],inventory_quantity:0,manage_inventory:!1};e.denominations.currencyDenominations.forEach(function(r){(null!==r.amount&&void 0!==r.amount||e.denominations.useSameValue)&&t.prices.push({amount:e.denominations.useSameValue?e.denominations.defaultDenomination.amount:r.amount,currency_code:r.currency_code})}),o(t,{onSuccess:function(){m(i("gift-card-denominations-section-denomination-added","Denomination added"),i("gift-card-denominations-section-a-new-denomination-was-successfully-added","A new denomination was successfully added"),"success"),h()},onError:function(e){var t,r;m(i("gift-card-denominations-section-error","Error"),(null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.type)==="duplicate_error"?i("gift-card-denominations-section-a-denomination-with-that-default-value-already-exists","A denomination with that default value already exists"):(0,eA.u)(e),"error")}})});return(0,z.jsx)(eN.A,{open:t,handleClose:h,children:(0,z.jsxs)(eN.A.Body,{children:[(0,z.jsx)(eN.A.Header,{handleClose:h,children:(0,z.jsx)("h1",{className:"inter-xlarge-semibold",children:i("gift-card-denominations-section-add-denomination","Add Denomination")})}),(0,z.jsxs)("form",{onSubmit:y,children:[(0,z.jsx)(eN.A.Content,{children:(0,z.jsx)(uo,{form:(0,eL.m)(u,"denominations")})}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"gap-x-xsmall flex w-full items-center justify-end",children:[(0,z.jsx)(W.A,{variant:"secondary",size:"small",type:"button",onClick:h,children:i("gift-card-denominations-section-cancel","Cancel")}),(0,z.jsx)(W.A,{variant:"primary",size:"small",type:"submit",disabled:l||!p,loading:l,children:i("gift-card-denominations-section-save-and-close","Save and close")})]})})]})]})})};var us=r(21845),uc=r(70208),uu=function(e,t){if(e){var r,n={denominations:{defaultDenomination:{currency_code:e.default_currency_code,includes_tax:null===(r=e.currencies.find(function(t){return t.code===e.default_currency_code}))||void 0===r?void 0:r.includes_tax,amount:ud(e.default_currency_code,t)},currencyDenominations:e.currencies.filter(function(t){return t.code!==e.default_currency_code}).map(function(e){return{currency_code:e.code,includes_tax:e.includes_tax,amount:ud(e.code,t)}})}};return n.denominations.currencyDenominations.every(function(e){return e.amount===n.denominations.defaultDenomination.amount})&&(n.denominations.useSameValue=!0),n}},ud=function(e,t){var r;return null===(r=t.find(function(t){return t.currency_code===e&&null===t.region_id&&null===t.price_list_id}))||void 0===r?void 0:r.amount};let uf=function(e){var t=e.denomination,r=e.onClose,n=e.open,i=(0,ei.Bd)().t,a=(0,J.useAdminStore)().store,o=(0,J.useAdminUpdateVariant)(t.product_id),l=o.mutate,s=o.isLoading,c=(0,uc.useQueryClient)(),u=(0,eR.mN)({defaultValues:uu(a,t.prices)}),d=u.handleSubmit,f=u.reset,p=u.formState.isDirty,m=(0,eC.A)();(0,U.useEffect)(function(){n&&f(uu(a,t.prices))},[n,a,t.prices,f]);var h=(0,U.useCallback)(function(){f(),r()},[f,r]),y=d(function(e){var r={prices:[{amount:e.denominations.defaultDenomination.amount,currency_code:e.denominations.defaultDenomination.currency_code}]};e.denominations.currencyDenominations.forEach(function(t){(void 0!==t.amount&&null!==t.amount||e.denominations.useSameValue)&&r.prices.push({amount:e.denominations.useSameValue?e.denominations.defaultDenomination.amount:t.amount,currency_code:t.currency_code})}),l(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({variant_id:t.id},r),{onSuccess:function(){m(i("gift-card-denominations-section-denomination-updated","Denomination updated"),i("gift-card-denominations-section-a-new-denomination-was-successfully-updated","A new denomination was successfully updated"),"success"),c.invalidateQueries(J.adminProductKeys.all),h()},onError:function(e){m(i("gift-card-denominations-section-error","Error"),(0,eA.u)(e),"error")}})});return(0,z.jsx)(eN.A,{open:n,handleClose:h,children:(0,z.jsxs)(eN.A.Body,{children:[(0,z.jsx)(eN.A.Header,{handleClose:h,children:(0,z.jsx)("h1",{className:"inter-xlarge-semibold",children:i("gift-card-denominations-section-edit-denomination","Edit Denomination")})}),(0,z.jsxs)("form",{onSubmit:y,children:[(0,z.jsx)(eN.A.Content,{children:(0,z.jsx)(uo,{form:(0,eL.m)(u,"denominations")})}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"gap-x-2xsmall flex w-full items-center justify-end",children:[(0,z.jsx)(W.A,{variant:"secondary",size:"small",type:"button",onClick:h,children:i("gift-card-denominations-section-cancel","Cancel")}),(0,z.jsx)(W.A,{variant:"primary",size:"small",type:"submit",loading:s,disabled:!p||s,children:i("gift-card-denominations-section-save-and-close","Save and close")})]})})]})]})})};function up(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}var um=(0,us.createColumnHelper)(),uh=function(){var e=(0,J.useAdminStore)().store,t=(0,ei.Bd)().t;return(0,U.useMemo)(function(){if(!e)return[];var r=e.default_currency_code;return[um.display({header:t("gift-card-denominations-section-denomination","Denomination"),id:"denomination",cell:function(e){var t=e.row.original.prices.find(function(e){return e.currency_code===r&&null===e.region_id&&null===e.price_list_id});return t?(0,z.jsxs)("p",{children:[(0,rg.kP)(r,t.amount)," ",(0,z.jsx)("span",{className:"text-grey-50",children:r.toUpperCase()})]}):"-"}}),um.display({header:t("gift-card-denominations-section-in-other-currencies","In other currencies"),id:"other_currencies",cell:function(e){var n=e.row.original.prices.filter(function(e){return e.currency_code!==r&&null===e.region_id&&null===e.price_list_id}),i=[];return n.length>2&&(i=n.splice(2)),n.length>0?(0,z.jsxs)("p",{children:[n.map(function(e,t){return(0,z.jsxs)("span",{children:[(0,rg.kP)(e.currency_code,e.amount)," ",(0,z.jsx)("span",{className:"text-grey-50",children:e.currency_code.toUpperCase()}),t<n.length-1&&", "]},t)}),i.length>0&&(0,z.jsx)(r9.A,{content:(0,z.jsx)("ul",{children:i.map(function(e,t){return(0,z.jsx)("li",{children:(0,z.jsxs)("p",{children:[(0,rg.kP)(e.currency_code,e.amount)," ",(0,z.jsx)("span",{className:"text-grey-50",children:e.currency_code.toUpperCase()})]})},t)})}),children:(0,z.jsx)("span",{className:"text-grey-50 cursor-default",children:t("gift-card-denominations-section-and-more",", and {{count}} more",{count:i.length})})})]}):"-"}}),um.display({id:"actions",cell:function(e){var t=e.row.original;return(0,z.jsx)(uy,{original:t})}})]},[e])},uy=function(e){var t,r,n=e.original,i=(0,ei.Bd)().t,a=(0,n5.A)(),o=a.state,l=a.open,s=a.close,c=(0,J.useAdminDeleteVariant)(n.product_id).mutateAsync,u=(0,eC.A)(),d=rL(),f=(t=function(){return function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,function(e){switch(e.label){case 0:return[4,d({heading:i("gift-card-denominations-section-delete-denomination","Delete denomination"),text:i("gift-card-denominations-section-confirm-delete","Are you sure you want to delete this denomination?")})];case 1:return e.sent()&&c(n.id,{onSuccess:function(){u(i("gift-card-denominations-section-denomination-deleted","Denomination deleted"),i("gift-card-denominations-section-denomination-was-successfully-deleted","Denomination was successfully deleted"),"success")},onError:function(e){u(i("gift-card-denominations-section-error","Error"),(0,eA.u)(e),"error")}}),[2]}})},r=function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function o(e){up(a,n,i,o,l,"next",e)}function l(e){up(a,n,i,o,l,"throw",e)}o(void 0)})},function(){return r.apply(this,arguments)}),p=[{label:i("gift-card-denominations-section-edit","Edit"),onClick:l,icon:(0,z.jsx)(ec,{size:20})},{label:i("gift-card-denominations-section-delete","Delete"),onClick:f,icon:(0,z.jsx)(eu,{size:20}),variant:"danger"}];return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{className:"flex items-center justify-end",children:(0,z.jsx)(em,{actions:p,forceDropdown:!0})}),(0,z.jsx)(uf,{open:o,onClose:s,denomination:n})]})};let ub=function(e){var t=e.denominations,r=uh(),n=(0,us.useReactTable)({columns:r,data:t,getCoreRowModel:(0,us.getCoreRowModel)()}),i=n.getHeaderGroups,a=n.getRowModel;return(0,z.jsxs)(td,{children:[(0,z.jsx)(td.Head,{children:i().map(function(e){return(0,z.jsx)(td.HeadRow,{children:e.headers.map(function(e){return(0,z.jsx)(td.HeadCell,{className:"inter-small-semibold text-grey-50",style:{width:e.getSize(),maxWidth:e.getSize()},children:(0,us.flexRender)(e.column.columnDef.header,e.getContext())},e.id)})},e.id)})}),(0,z.jsx)(td.Body,{children:a().rows.map(function(e){return(0,z.jsx)(td.Row,{className:"last-of-type:border-b-0",children:e.getVisibleCells().map(function(e){return(0,z.jsx)(td.Cell,{style:{width:e.column.getSize(),maxWidth:e.column.getSize()},children:(0,us.flexRender)(e.column.columnDef.cell,e.getContext())},e.id)})},e.id)})})]})};function uv(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}let ug=function(e){var t,r=e.giftCard,n=(0,ei.Bd)().t,i=(0,n5.A)(),a=i.state,o=i.close,l=i.open;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(eM,{title:n("gift-card-denominations-section-denominations","Denominations"),forceDropdown:!0,actions:[{label:n("gift-card-denominations-section-add-denomination","Add Denomination"),onClick:l,icon:(0,z.jsx)(n_.A,{size:20})}],children:(0,z.jsx)("div",{className:"mb-large mt-base",children:(0,z.jsx)(ub,{denominations:function(e){if(Array.isArray(e))return uv(e)}(t=r.variants)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return uv(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return uv(e,void 0)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()})})}),(0,z.jsx)(ul,{giftCard:r,open:a,onClose:o})]})};function ux(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}let uj=function(e){var t,r,n=rL(),i=(0,H.useNavigate)(),a=(0,eC.A)(),o=(0,J.useAdminProduct)(e),l=(0,J.useAdminUpdateProduct)(e),s=(0,J.useAdminDeleteProduct)(e),c=(0,J.useAdminUpdateVariant)(e),u=(0,J.useAdminDeleteVariant)(e),d=(0,J.useAdminCreateVariant)(e),f=(0,uc.useQueryClient)(),p=(0,rz.u)().isFeatureEnabled,m=(0,J.useMedusa)().client,h=(t=function(){return function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,function(e){switch(e.label){case 0:return[4,n({heading:"Delete Product",text:"Are you sure you want to delete this product"})];case 1:if(!e.sent())return[3,4];if(!(p("inventoryService")&&o.product))return[3,3];return[4,m.admin.variants.list({id:o.product.variants.map(function(e){return e.id}),expand:"inventory_items"})];case 2:e.sent().variants.filter(function(e){var t=e.inventory_items;return!!(null==t?void 0:t.length)}).map(function(e){var t=e.inventory_items;return m.admin.inventoryItems.delete(t[0].inventory_item_id)}),f.invalidateQueries(J.adminInventoryItemsKeys.lists()),e.label=3;case 3:s.mutate(void 0,{onSuccess:function(){a("Success","Product deleted successfully","success"),i("/a/products/")},onError:function(e){a("Error",(0,eA.u)(e),"error")}}),e.label=4;case 4:return[2]}})},r=function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function o(e){ux(a,n,i,o,l,"next",e)}function l(e){ux(a,n,i,o,l,"throw",e)}o(void 0)})},function(){return r.apply(this,arguments)});return{getProduct:o,onDelete:h,onStatusChange:function(e){var t="published"===e?"draft":"published";l.mutate({status:t},{onSuccess:function(){var e="published"===t?"published":"drafted";a("Success","Product ".concat(e," successfully"),"success")},onError:function(e){a("Ooops",(0,eA.u)(e),"error")}})},onUpdate:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Product was successfully updated";l.mutate(e,{onSuccess:function(){a("Success",r,"success"),t()},onError:function(e){a("Error",(0,eA.u)(e),"error")}})},onAddVariant:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Variant was created successfully";d.mutate(e,{onSuccess:function(e){a("Success",r,"success"),o.refetch(),t(e.product)},onError:function(e){a("Error",(0,eA.u)(e),"error")}})},onUpdateVariant:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Variant was updated successfully";c.mutate(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({variant_id:e},t),{onSuccess:function(){a("Success",n,"success"),o.refetch(),r()},onError:function(e){a("Error",(0,eA.u)(e),"error")}})},onDeleteVariant:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Variant was successfully deleted";u.mutate(e,{onSuccess:function(){a("Success",r,"success"),o.refetch(),t&&t()},onError:function(e){a("Error",(0,eA.u)(e),"error")}})},updating:l.isLoading,deleting:s.isLoading,addingVariant:d.isLoading,updatingVariant:c.isLoading,deletingVariant:u.isLoading}};var uw={AF:"Afghanistan",AX:"Aland Islands",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua And Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia And Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:"Congo",CD:"Congo, Democratic Republic",CK:"Cook Islands",CR:"Costa Rica",CI:"Cote D'Ivoire",HR:"Croatia",CU:"Cuba",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island & Mcdonald Islands",VA:"Holy See (Vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran, Islamic Republic Of",IQ:"Iraq",IE:"Ireland",IM:"Isle Of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KR:"South Korea",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"Macedonia",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia, Federated States Of",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",AN:"Netherlands Antilles",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestinian Territory, Occupied",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Reunion",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",BL:"Saint Barthelemy",SH:"Saint Helena",KN:"Saint Kitts And Nevis",LC:"Saint Lucia",MF:"Saint Martin",PM:"Saint Pierre And Miquelon",VC:"Saint Vincent And Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome And Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia And Sandwich Isl.",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard And Jan Mayen",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad And Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks And Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UM:"United States Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela",VN:"Viet Nam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis And Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"},uO=[{alpha2:"AF",name:"Afghanistan",alpha3:"AFG",numeric:"004"},{alpha2:"AL",name:"Albania",alpha3:"ALB",numeric:"008"},{alpha2:"DZ",name:"Algeria",alpha3:"DZA",numeric:"012"},{alpha2:"AS",name:"American Samoa",alpha3:"ASM",numeric:"016"},{alpha2:"AD",name:"Andorra",alpha3:"AND",numeric:"020"},{alpha2:"AO",name:"Angola",alpha3:"AGO",numeric:"024"},{alpha2:"AI",name:"Anguilla",alpha3:"AIA",numeric:"660"},{alpha2:"AQ",name:"Antarctica",alpha3:"ATA",numeric:"010"},{alpha2:"AG",name:"Antigua and Barbuda",alpha3:"ATG",numeric:"028"},{alpha2:"AR",name:"Argentina",alpha3:"ARG",numeric:"032"},{alpha2:"AM",name:"Armenia",alpha3:"ARM",numeric:"051"},{alpha2:"AW",name:"Aruba",alpha3:"ABW",numeric:"533"},{alpha2:"AU",name:"Australia",alpha3:"AUS",numeric:"036"},{alpha2:"AT",name:"Austria",alpha3:"AUT",numeric:"040"},{alpha2:"AZ",name:"Azerbaijan",alpha3:"AZE",numeric:"031"},{alpha2:"BS",name:"Bahamas",alpha3:"BHS",numeric:"044"},{alpha2:"BH",name:"Bahrain",alpha3:"BHR",numeric:"048"},{alpha2:"BD",name:"Bangladesh",alpha3:"BGD",numeric:"050"},{alpha2:"BB",name:"Barbados",alpha3:"BRB",numeric:"052"},{alpha2:"BY",name:"Belarus",alpha3:"BLR",numeric:"112"},{alpha2:"BE",name:"Belgium",alpha3:"BEL",numeric:"056"},{alpha2:"BZ",name:"Belize",alpha3:"BLZ",numeric:"084"},{alpha2:"BJ",name:"Benin",alpha3:"BEN",numeric:"204"},{alpha2:"BM",name:"Bermuda",alpha3:"BMU",numeric:"060"},{alpha2:"BT",name:"Bhutan",alpha3:"BTN",numeric:"064"},{alpha2:"BO",name:"Bolivia",alpha3:"BOL",numeric:"068"},{alpha2:"BQ",name:"Bonaire",alpha3:"BES",numeric:"535"},{alpha2:"BA",name:"Bosnia and Herzegovina",alpha3:"BIH",numeric:"070"},{alpha2:"BW",name:"Botswana",alpha3:"BWA",numeric:"072"},{alpha2:"BV",name:"Bouvet Island",alpha3:"BVD",numeric:"074"},{alpha2:"BR",name:"Brazil",alpha3:"BRA",numeric:"076"},{alpha2:"IO",name:"British Indian Ocean Territory",alpha3:"IOT",numeric:"086"},{alpha2:"BN",name:"Brunei Darussalam",alpha3:"BRN",numeric:"096"},{alpha2:"BG",name:"Bulgaria",alpha3:"BGR",numeric:"100"},{alpha2:"BF",name:"Burkina Faso",alpha3:"BFA",numeric:"854"},{alpha2:"BI",name:"Burundi",alpha3:"BDI",numeric:"108"},{alpha2:"KH",name:"Cambodia",alpha3:"KHM",numeric:"116"},{alpha2:"CM",name:"Cameroon",alpha3:"CMR",numeric:"120"},{alpha2:"CA",name:"Canada",alpha3:"CAN",numeric:"124"},{alpha2:"CV",name:"Cape Verde",alpha3:"CPV",numeric:"132"},{alpha2:"KY",name:"Cayman Islands",alpha3:"CYM",numeric:"136"},{alpha2:"CF",name:"Central African Republic",alpha3:"CAF",numeric:"140"},{alpha2:"TD",name:"Chad",alpha3:"TCD",numeric:"148"},{alpha2:"CL",name:"Chile",alpha3:"CHL",numeric:"152"},{alpha2:"CN",name:"China",alpha3:"CHN",numeric:"156"},{alpha2:"CX",name:"Christmas Island",alpha3:"CXR",numeric:"162"},{alpha2:"CC",name:"Cocos (Keeling) Islands",alpha3:"CCK",numeric:"166"},{alpha2:"CO",name:"Colombia",alpha3:"COL",numeric:"170"},{alpha2:"KM",name:"Comoros",alpha3:"COM",numeric:"174"},{alpha2:"CG",name:"Congo",alpha3:"COG",numeric:"178"},{alpha2:"CD",name:"D.R. Congo",alpha3:"COD",numeric:"180"},{alpha2:"CK",name:"Cook Islands",alpha3:"COK",numeric:"184"},{alpha2:"CR",name:"Costa Rica",alpha3:"CRI",numeric:"188"},{alpha2:"CI",name:"Cote D'Ivoire",alpha3:"CIV",numeric:"384"},{alpha2:"HR",name:"Croatia",alpha3:"HRV",numeric:"191"},{alpha2:"CU",name:"Cuba",alpha3:"CUB",numeric:"192"},{alpha2:"CW",name:"Cura\xe7ao",alpha3:"CUW",numeric:"531"},{alpha2:"CY",name:"Cyprus",alpha3:"CYP",numeric:"196"},{alpha2:"CZ",name:"Czech Republic",alpha3:"CZE",numeric:"203"},{alpha2:"DK",name:"Denmark",alpha3:"DNK",numeric:"208"},{alpha2:"DJ",name:"Djibouti",alpha3:"DJI",numeric:"262"},{alpha2:"DM",name:"Dominica",alpha3:"DMA",numeric:"212"},{alpha2:"DO",name:"Dominican Republic",alpha3:"DOM",numeric:"214"},{alpha2:"EC",name:"Ecuador",alpha3:"ECU",numeric:"218"},{alpha2:"EG",name:"Egypt",alpha3:"EGY",numeric:"818"},{alpha2:"SV",name:"El Salvador",alpha3:"SLV",numeric:"222"},{alpha2:"GQ",name:"Equatorial Guinea",alpha3:"GNQ",numeric:"226"},{alpha2:"ER",name:"Eritrea",alpha3:"ERI",numeric:"232"},{alpha2:"EE",name:"Estonia",alpha3:"EST",numeric:"233"},{alpha2:"ET",name:"Ethiopia",alpha3:"ETH",numeric:"231"},{alpha2:"FK",name:"Falkland Islands (Malvinas)",alpha3:"FLK",numeric:"238"},{alpha2:"FO",name:"Faroe Islands",alpha3:"FRO",numeric:"234"},{alpha2:"FJ",name:"Fiji",alpha3:"FJI",numeric:"242"},{alpha2:"FI",name:"Finland",alpha3:"FIN",numeric:"246"},{alpha2:"FR",name:"France",alpha3:"FRA",numeric:"250"},{alpha2:"GF",name:"French Guiana",alpha3:"GUF",numeric:"254"},{alpha2:"PF",name:"French Polynesia",alpha3:"PYF",numeric:"258"},{alpha2:"TF",name:"French Southern Territories",alpha3:"ATF",numeric:"260"},{alpha2:"GA",name:"Gabon",alpha3:"GAB",numeric:"266"},{alpha2:"GM",name:"Gambia",alpha3:"GMB",numeric:"270"},{alpha2:"GE",name:"Georgia",alpha3:"GEO",numeric:"268"},{alpha2:"DE",name:"Germany",alpha3:"DEU",numeric:"276"},{alpha2:"GH",name:"Ghana",alpha3:"GHA",numeric:"288"},{alpha2:"GI",name:"Gibraltar",alpha3:"GIB",numeric:"292"},{alpha2:"GR",name:"Greece",alpha3:"GRC",numeric:"300"},{alpha2:"GL",name:"Greenland",alpha3:"GRL",numeric:"304"},{alpha2:"GD",name:"Grenada",alpha3:"GRD",numeric:"308"},{alpha2:"GP",name:"Guadeloupe",alpha3:"GLP",numeric:"312"},{alpha2:"GU",name:"Guam",alpha3:"GUM",numeric:"316"},{alpha2:"GT",name:"Guatemala",alpha3:"GTM",numeric:"320"},{alpha2:"GG",name:"Guernsey",alpha3:"GGY",numeric:"831"},{alpha2:"GN",name:"Guinea",alpha3:"GIN",numeric:"324"},{alpha2:"GW",name:"Guinea-Bissau",alpha3:"GNB",numeric:"624"},{alpha2:"GY",name:"Guyana",alpha3:"GUY",numeric:"328"},{alpha2:"HT",name:"Haiti",alpha3:"HTI",numeric:"332"},{alpha2:"HN",name:"Honduras",alpha3:"HND",numeric:"340"},{alpha2:"HK",name:"Hong Kong",alpha3:"HKG",numeric:"344"},{alpha2:"HU",name:"Hungary",alpha3:"HUN",numeric:"348"},{alpha2:"IS",name:"Iceland",alpha3:"ISL",numeric:"352"},{alpha2:"IN",name:"India",alpha3:"IND",numeric:"356"},{alpha2:"ID",name:"Indonesia",alpha3:"IDN",numeric:"360"},{alpha2:"IR",name:"Iran, Islamic Republic of",alpha3:"IRN",numeric:"364"},{alpha2:"IQ",name:"Iraq",alpha3:"IRQ",numeric:"368"},{alpha2:"IE",name:"Ireland",alpha3:"IRL",numeric:"372"},{alpha2:"IM",name:"Isle Of Man",alpha3:"IMN",numeric:"833"},{alpha2:"IL",name:"Israel",alpha3:"ISR",numeric:"376"},{alpha2:"IT",name:"Italy",alpha3:"ITA",numeric:"380"},{alpha2:"JM",name:"Jamaica",alpha3:"JAM",numeric:"388"},{alpha2:"JP",name:"Japan",alpha3:"JPN",numeric:"392"},{alpha2:"JE",name:"Jersey",alpha3:"JEY",numeric:"832"},{alpha2:"JO",name:"Jordan",alpha3:"JOR",numeric:"400"},{alpha2:"KZ",name:"Kazakhstan",alpha3:"KAZ",numeric:"398"},{alpha2:"KE",name:"Kenya",alpha3:"KEN",numeric:"404"},{alpha2:"KI",name:"Kiribati",alpha3:"KIR",numeric:"296"},{alpha2:"KR",name:"South Korea",alpha3:"KOR",numeric:"410"},{alpha2:"XK",name:"Kosovo",alpha3:"XKX",numeric:"900"},{alpha2:"KW",name:"Kuwait",alpha3:"KWT",numeric:"414"},{alpha2:"KG",name:"Kyrgyzstan",alpha3:"KGZ",numeric:"417"},{alpha2:"LV",name:"Latvia",alpha3:"LVA",numeric:"428"},{alpha2:"LB",name:"Lebanon",alpha3:"LBN",numeric:"422"},{alpha2:"LS",name:"Lesotho",alpha3:"LSO",numeric:"426"},{alpha2:"LR",name:"Liberia",alpha3:"LBR",numeric:"430"},{alpha2:"LY",name:"Libya",alpha3:"LBY",numeric:"434"},{alpha2:"LI",name:"Liechtenstein",alpha3:"LIE",numeric:"438"},{alpha2:"LT",name:"Lithuania",alpha3:"LTU",numeric:"440"},{alpha2:"LU",name:"Luxembourg",alpha3:"LUX",numeric:"442"},{alpha2:"MO",name:"Macao",alpha3:"MAC",numeric:"446"},{alpha2:"MK",name:"Macedonia",alpha3:"MKD",numeric:"807"},{alpha2:"MG",name:"Madagascar",alpha3:"MDG",numeric:"450"},{alpha2:"MW",name:"Malawi",alpha3:"MWI",numeric:"454"},{alpha2:"MY",name:"Malaysia",alpha3:"MYS",numeric:"458"},{alpha2:"MV",name:"Maldives",alpha3:"MDV",numeric:"462"},{alpha2:"ML",name:"Mali",alpha3:"MLI",numeric:"466"},{alpha2:"MT",name:"Malta",alpha3:"MLT",numeric:"470"},{alpha2:"MH",name:"Marshall Islands",alpha3:"MHL",numeric:"584"},{alpha2:"MQ",name:"Martinique",alpha3:"MTQ",numeric:"474"},{alpha2:"MR",name:"Mauritania",alpha3:"MRT",numeric:"478"},{alpha2:"MU",name:"Mauritius",alpha3:"MUS",numeric:"480"},{alpha2:"YT",name:"Mayotte",alpha3:"MYT",numeric:"175"},{alpha2:"MX",name:"Mexico",alpha3:"MEX",numeric:"484"},{alpha2:"FM",name:"Micronesia, Federated States of",alpha3:"FSM",numeric:"583"},{alpha2:"MD",name:"Moldova, Republic of",alpha3:"MDA",numeric:"498"},{alpha2:"MC",name:"Monaco",alpha3:"MCO",numeric:"492"},{alpha2:"MN",name:"Mongolia",alpha3:"MNG",numeric:"496"},{alpha2:"ME",name:"Montenegro",alpha3:"MNE",numeric:"499"},{alpha2:"MS",name:"Montserrat",alpha3:"MSR",numeric:"500"},{alpha2:"MA",name:"Morocco",alpha3:"MAR",numeric:"504"},{alpha2:"MZ",name:"Mozambique",alpha3:"MOZ",numeric:"508"},{alpha2:"MM",name:"Myanmar",alpha3:"MMR",numeric:"104"},{alpha2:"NA",name:"Namibia",alpha3:"NAM",numeric:"516"},{alpha2:"NR",name:"Nauru",alpha3:"NRU",numeric:"520"},{alpha2:"NP",name:"Nepal",alpha3:"NPL",numeric:"524"},{alpha2:"NL",name:"Netherlands",alpha3:"NLD",numeric:"528"},{alpha2:"NC",name:"New Caledonia",alpha3:"NCL",numeric:"540"},{alpha2:"NZ",name:"New Zealand",alpha3:"NZL",numeric:"554"},{alpha2:"NI",name:"Nicaragua",alpha3:"NIC",numeric:"558"},{alpha2:"NE",name:"Niger",alpha3:"NER",numeric:"562"},{alpha2:"NG",name:"Nigeria",alpha3:"NGA",numeric:"566"},{alpha2:"NU",name:"Niue",alpha3:"NIU",numeric:"570"},{alpha2:"NF",name:"Norfolk Island",alpha3:"NFK",numeric:"574"},{alpha2:"MP",name:"Northern Mariana Islands",alpha3:"MNP",numeric:"580"},{alpha2:"NO",name:"Norway",alpha3:"NOR",numeric:"578"},{alpha2:"OM",name:"Oman",alpha3:"OMN",numeric:"512"},{alpha2:"PK",name:"Pakistan",alpha3:"PAK",numeric:"586"},{alpha2:"PW",name:"Palau",alpha3:"PLW",numeric:"585"},{alpha2:"PS",name:"Palestinian Territory, Occupied",alpha3:"PSE",numeric:"275"},{alpha2:"PA",name:"Panama",alpha3:"PAN",numeric:"591"},{alpha2:"PG",name:"Papua New Guinea",alpha3:"PNG",numeric:"598"},{alpha2:"PY",name:"Paraguay",alpha3:"PRY",numeric:"600"},{alpha2:"PE",name:"Peru",alpha3:"PER",numeric:"604"},{alpha2:"PH",name:"Philippines",alpha3:"PHL",numeric:"608"},{alpha2:"PN",name:"Pitcairn",alpha3:"PCN",numeric:"612"},{alpha2:"PL",name:"Poland",alpha3:"POL",numeric:"616"},{alpha2:"PT",name:"Portugal",alpha3:"PRT",numeric:"620"},{alpha2:"PR",name:"Puerto Rico",alpha3:"PRI",numeric:"630"},{alpha2:"QA",name:"Qatar",alpha3:"QAT",numeric:"634"},{alpha2:"RE",name:"Reunion",alpha3:"REU",numeric:"638"},{alpha2:"RO",name:"Romania",alpha3:"ROU",numeric:"642"},{alpha2:"RO",name:"Romania",alpha3:"ROM",numeric:"642"},{alpha2:"RU",name:"Russian Federation",alpha3:"RUS",numeric:"643"},{alpha2:"RW",name:"Rwanda",alpha3:"RWA",numeric:"646"},{alpha2:"BL",name:"Saint Barth\xe9lemy",alpha3:"BLM",numeric:"652"},{alpha2:"SH",name:"Saint Helena",alpha3:"SHN",numeric:"654"},{alpha2:"KN",name:"Saint Kitts and Nevis",alpha3:"KNA",numeric:"659"},{alpha2:"LC",name:"Saint Lucia",alpha3:"LCA",numeric:"662"},{alpha2:"MF",name:"Saint Martin (French part)",alpha3:"MAF",numeric:"663"},{alpha2:"PM",name:"Saint Pierre and Miquelon",alpha3:"SPM",numeric:"666"},{alpha2:"VC",name:"Saint Vincent and the Grenadines",alpha3:"VCT",numeric:"670"},{alpha2:"WS",name:"Samoa",alpha3:"WSM",numeric:"882"},{alpha2:"SM",name:"San Marino",alpha3:"SMR",numeric:"674"},{alpha2:"ST",name:"Sao Tome and Principe",alpha3:"STP",numeric:"678"},{alpha2:"SA",name:"Saudi Arabia",alpha3:"SAU",numeric:"682"},{alpha2:"SN",name:"Senegal",alpha3:"SEN",numeric:"686"},{alpha2:"RS",name:"Serbia",alpha3:"SRB",numeric:"688"},{alpha2:"SC",name:"Seychelles",alpha3:"SYC",numeric:"690"},{alpha2:"SL",name:"Sierra Leone",alpha3:"SLE",numeric:"694"},{alpha2:"SG",name:"Singapore",alpha3:"SGP",numeric:"702"},{alpha2:"SX",name:"Sint Maarten",alpha3:"SXM",numeric:"534"},{alpha2:"SK",name:"Slovakia",alpha3:"SVK",numeric:"703"},{alpha2:"SI",name:"Slovenia",alpha3:"SVN",numeric:"705"},{alpha2:"SB",name:"Solomon Islands",alpha3:"SLB",numeric:"090"},{alpha2:"SO",name:"Somalia",alpha3:"SOM",numeric:"706"},{alpha2:"ZA",name:"South Africa",alpha3:"ZAF",numeric:"710"},{alpha2:"SS",name:"South Sudan",alpha3:"SSD",numeric:"728"},{alpha2:"ES",name:"Spain",alpha3:"ESP",numeric:"724"},{alpha2:"LK",name:"Sri Lanka",alpha3:"LKA",numeric:"144"},{alpha2:"SD",name:"Sudan",alpha3:"SDN",numeric:"729"},{alpha2:"SR",name:"Suriname",alpha3:"SUR",numeric:"740"},{alpha2:"SJ",name:"Svalbard and Jan Mayen",alpha3:"SJM",numeric:"744"},{alpha2:"SZ",name:"Swaziland",alpha3:"SWZ",numeric:"748"},{alpha2:"SE",name:"Sweden",alpha3:"SWE",numeric:"752"},{alpha2:"CH",name:"Switzerland",alpha3:"CHE",numeric:"756"},{alpha2:"SY",name:"Syrian Arab Republic",alpha3:"SYR",numeric:"760"},{alpha2:"TW",name:"Taiwan, Province of China",alpha3:"TWN",numeric:"158"},{alpha2:"TJ",name:"Tajikistan",alpha3:"TJK",numeric:"762"},{alpha2:"TZ",name:"Tanzania, United Republic of",alpha3:"TZA",numeric:"834"},{alpha2:"TH",name:"Thailand",alpha3:"THA",numeric:"764"},{alpha2:"TL",name:"Timor Leste",alpha3:"TLS",numeric:"626"},{alpha2:"TG",name:"Togo",alpha3:"TGO",numeric:"768"},{alpha2:"TK",name:"Tokelau",alpha3:"TKL",numeric:"772"},{alpha2:"TO",name:"Tonga",alpha3:"TON",numeric:"776"},{alpha2:"TT",name:"Trinidad and Tobago",alpha3:"TTO",numeric:"780"},{alpha2:"TN",name:"Tunisia",alpha3:"TUN",numeric:"788"},{alpha2:"TR",name:"Turkey",alpha3:"TUR",numeric:"792"},{alpha2:"TM",name:"Turkmenistan",alpha3:"TKM",numeric:"795"},{alpha2:"TC",name:"Turks and Caicos Islands",alpha3:"TCA",numeric:"796"},{alpha2:"TV",name:"Tuvalu",alpha3:"TUV",numeric:"798"},{alpha2:"UG",name:"Uganda",alpha3:"UGA",numeric:"800"},{alpha2:"UA",name:"Ukraine",alpha3:"UKR",numeric:"804"},{alpha2:"AE",name:"United Arab Emirates",alpha3:"ARE",numeric:"784"},{alpha2:"GB",name:"United Kingdom",alpha3:"GBR",numeric:"826"},{alpha2:"US",name:"United States",alpha3:"USA",numeric:"840"},{alpha2:"UM",name:"United States Minor Outlying Islands",alpha3:"UMI",numeric:"581"},{alpha2:"UY",name:"Uruguay",alpha3:"URY",numeric:"858"},{alpha2:"UZ",name:"Uzbekistan",alpha3:"UZB",numeric:"860"},{alpha2:"VU",name:"Vanuatu",alpha3:"VUT",numeric:"548"},{alpha2:"VE",name:"Venezuela",alpha3:"VEN",numeric:"862"},{alpha2:"VN",name:"Viet Nam",alpha3:"VNM",numeric:"704"},{alpha2:"VG",name:"Virgin Islands, British",alpha3:"VGB",numeric:"092"},{alpha2:"VI",name:"Virgin Islands, U.S.",alpha3:"VIR",numeric:"850"},{alpha2:"WF",name:"Wallis and Futuna",alpha3:"WLF",numeric:"876"},{alpha2:"EH",name:"Western Sahara",alpha3:"ESH",numeric:"732"},{alpha2:"YE",name:"Yemen",alpha3:"YEM",numeric:"887"},{alpha2:"ZM",name:"Zambia",alpha3:"ZMB",numeric:"894"},{alpha2:"ZW",name:"Zimbabwe",alpha3:"ZWE",numeric:"716"},{alpha2:"AX",name:"\xc5land Islands",alpha3:"ALA",numeric:"248"}];function uS(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function uP(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}let uC=function(e){var t=e.form,r=t.register,n=t.path,i=t.control,a=t.formState.errors,o=uO.map(function(e){return{label:e.name,value:e.alpha2}});return(0,z.jsxs)("div",{className:"gap-large pb-2xsmall grid grid-cols-2",children:[(0,z.jsx)(e1.A,uP(uS({label:"MID Code",placeholder:"XDSKLAD9999..."},r(n("mid_code"),{pattern:n8.A.whiteSpaceRule("MID Code")})),{errors:a})),(0,z.jsx)(e1.A,uP(uS({label:"HS Code",placeholder:"BDJSK39277W..."},r(n("hs_code"),{pattern:n8.A.whiteSpaceRule("HS Code")})),{errors:a})),(0,z.jsx)(eR.xI,{name:n("origin_country"),control:i,render:function(e){var t=e.field;return(0,z.jsx)(no,uS({label:"Country of origin",placeholder:"Choose a country",options:o,isSearchable:!0,isClearable:!0},t))}})]})};function uA(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function uN(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}let uk=function(e){var t=e.form,r=t.register,n=t.path,i=t.formState.errors;return(0,z.jsxs)("div",{className:"gap-x-large grid grid-cols-4",children:[(0,z.jsx)(e1.A,uN(uA({label:"Width",placeholder:"100...",type:"number"},r(n("width"),{min:n8.A.nonNegativeNumberRule("Width"),valueAsNumber:!0})),{errors:i})),(0,z.jsx)(e1.A,uN(uA({label:"Length",placeholder:"100...",type:"number"},r(n("length"),{min:n8.A.nonNegativeNumberRule("Length"),valueAsNumber:!0})),{errors:i})),(0,z.jsx)(e1.A,uN(uA({label:"Height",placeholder:"100...",type:"number"},r(n("height"),{min:n8.A.nonNegativeNumberRule("Height"),valueAsNumber:!0})),{errors:i})),(0,z.jsx)(e1.A,uN(uA({label:"Weight",placeholder:"100...",type:"number"},r(n("weight"),{min:n8.A.nonNegativeNumberRule("Weight"),valueAsNumber:!0})),{errors:i}))]})};var u_=function(e){var t=uO.find(function(t){return t.alpha2===e.origin_country}),r=t?{label:t.name,value:t.alpha2}:null;return{dimensions:{weight:e.weight,width:e.width,height:e.height,length:e.length},customs:{mid_code:e.mid_code,hs_code:e.hs_code,origin_country:r}}};let uE=function(e){var t=e.product,r=e.open,n=e.onClose,i=(0,ei.Bd)().t,a=uj(t.id),o=a.onUpdate,l=a.updating,s=(0,eR.mN)({defaultValues:u_(t)}),c=s.formState.isDirty,u=s.handleSubmit,d=s.reset;(0,U.useEffect)(function(){d(u_(t))},[t]);var f=function(){d(u_(t)),n()},p=u(function(e){var t;o({weight:e.dimensions.weight,width:e.dimensions.width,height:e.dimensions.height,length:e.dimensions.length,mid_code:e.customs.mid_code,hs_code:e.customs.hs_code,origin_country:null===(t=e.customs.origin_country)||void 0===t?void 0:t.value},f)});return(0,z.jsx)(eN.A,{open:r,handleClose:f,isLargeModal:!0,children:(0,z.jsxs)(eN.A.Body,{children:[(0,z.jsx)(eN.A.Header,{handleClose:f,children:(0,z.jsx)("h1",{className:"inter-xlarge-semibold m-0",children:i("product-attributes-section-edit-attributes","Edit Attributes")})}),(0,z.jsxs)("form",{onSubmit:p,children:[(0,z.jsxs)(eN.A.Content,{children:[(0,z.jsxs)("div",{className:"mb-xlarge",children:[(0,z.jsx)("h2",{className:"inter-large-semibold mb-2xsmall",children:i("product-attributes-section-dimensions","Dimensions")}),(0,z.jsx)("p",{className:"inter-base-regular text-grey-50 mb-large",children:i("product-attributes-section-configure-to-calculate-the-most-accurate-shipping-rates","Configure to calculate the most accurate shipping rates")}),(0,z.jsx)(uk,{form:(0,eL.m)(s,"dimensions")})]}),(0,z.jsxs)("div",{children:[(0,z.jsx)("h2",{className:"inter-large-semibold mb-2xsmall",children:i("product-attributes-section-customs","Customs")}),(0,z.jsx)("p",{className:"inter-base-regular text-grey-50 mb-large",children:i("product-attributes-section-configure-to-calculate-the-most-accurate-shipping-rates","Configure to calculate the most accurate shipping rates")}),(0,z.jsx)(uC,{form:(0,eL.m)(s,"customs")})]})]}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"flex w-full justify-end gap-x-2",children:[(0,z.jsx)(W.A,{size:"small",variant:"secondary",type:"button",onClick:f,children:i("product-attributes-section-cancel","Cancel")}),(0,z.jsx)(W.A,{size:"small",variant:"primary",type:"submit",disabled:!c,loading:l,children:i("product-attributes-section-save","Save")})]})})]})]})})};var uI=function(e){var t=e.attribute,r=e.value;return(0,z.jsxs)("div",{className:"inter-base-regular text-grey-50 flex w-full items-center justify-between",children:[(0,z.jsx)("p",{children:t}),(0,z.jsx)("p",{children:r||"–"})]})};let uD=function(e){var t=e.product,r=(0,ei.Bd)().t,n=(0,n5.A)(),i=n.state,a=n.toggle,o=n.close,l=[{label:"Edit Attributes",onClick:a,icon:(0,z.jsx)(ec,{size:20})}];return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(eM,{title:r("product-attributes-section-title","Attributes"),actions:l,forceDropdown:!0,children:[(0,z.jsxs)("div",{className:"gap-y-xsmall mb-large mt-base flex flex-col",children:[(0,z.jsx)("h2",{className:"inter-base-semibold",children:r("product-attributes-section-dimensions","Dimensions")}),(0,z.jsxs)("div",{className:"gap-y-xsmall flex flex-col",children:[(0,z.jsx)(uI,{attribute:r("product-attributes-section-height","Height"),value:t.height}),(0,z.jsx)(uI,{attribute:r("product-attributes-section-width","Width"),value:t.width}),(0,z.jsx)(uI,{attribute:r("product-attributes-section-length","Length"),value:t.length}),(0,z.jsx)(uI,{attribute:r("product-attributes-section-weight","Weight"),value:t.weight})]})]}),(0,z.jsxs)("div",{className:"gap-y-xsmall flex flex-col",children:[(0,z.jsx)("h2",{className:"inter-base-semibold",children:r("product-attributes-section-customs","Customs")}),(0,z.jsxs)("div",{className:"gap-y-xsmall flex flex-col",children:[(0,z.jsx)(uI,{attribute:r("product-attributes-section-mid-code","MID Code"),value:t.mid_code}),(0,z.jsx)(uI,{attribute:r("product-attributes-section-hs-code","HS Code"),value:t.hs_code}),(0,z.jsx)(uI,{attribute:r("product-attributes-section-country-of-origin","Country of origin"),value:t.origin_country})]})]})]}),(0,z.jsx)(uE,{onClose:o,open:i,product:t})]})},uT=function(e){var t=e.featureFlag,r=e.showOnlyWhenDisabled,n=e.children;return(0,(0,rz.u)().isFeatureEnabled)(t)===!(void 0!==r&&r)?(0,z.jsx)(z.Fragment,{children:n}):null},uM=function(e){var t,r,n=e.size,i=void 0===n?"24px":n,a=e.color,o=void 0===a?"currentColor":a,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["size","color"]);return(0,z.jsxs)("svg",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({width:i,height:i,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l),r=r={children:[(0,z.jsx)("path",{d:"M17.6627 7.05C18.7811 7.05 19.6877 6.14338 19.6877 5.025C19.6877 3.90662 18.7811 3 17.6627 3C16.5443 3 15.6377 3.90662 15.6377 5.025C15.6377 6.14338 16.5443 7.05 17.6627 7.05Z",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M17.6627 14.025C18.7811 14.025 19.6877 13.1184 19.6877 12C19.6877 10.8816 18.7811 9.97498 17.6627 9.97498C16.5443 9.97498 15.6377 10.8816 15.6377 12C15.6377 13.1184 16.5443 14.025 17.6627 14.025Z",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M5.5123 14.025C6.63068 14.025 7.5373 13.1184 7.5373 12C7.5373 10.8816 6.63068 9.97498 5.5123 9.97498C4.39393 9.97498 3.4873 10.8816 3.4873 12C3.4873 13.1184 4.39393 14.025 5.5123 14.025Z",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M17.6627 21C18.7811 21 19.6877 20.0933 19.6877 18.975C19.6877 17.8566 18.7811 16.95 17.6627 16.95C16.5443 16.95 15.6377 17.8566 15.6377 18.975C15.6377 20.0933 16.5443 21 17.6627 21Z",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M15.6369 5.02502H13.3869C12.3924 5.02502 11.5869 5.83052 11.5869 6.82502V17.175C11.5869 18.1695 12.3924 18.975 13.3869 18.975H15.6369",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M15.6361 12H7.53613",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},uR=function(e){var t=e.list,r=e.delimit,n=void 0===r?1:r;if(!t.length)return(0,z.jsx)(z.Fragment,{});var i=t.slice(0,n).join(", "),a=t.length>n,o=t.length-n;return(0,z.jsxs)("span",{className:"inter-base-regular text-grey-50",children:[i,a&&(0,z.jsx)(r9.A,{content:(0,z.jsx)(function(){return(0,z.jsx)("div",{className:"flex flex-col",children:t.slice(n).map(function(e){return(0,z.jsx)("span",{children:e},e)})})},{}),children:(0,z.jsxs)("span",{className:"text-grey-40",children:[" ","+ ",o," more"]})})]})};var uL=function(e){var t=e.channel;return(0,z.jsx)(rk.A,{variant:"ghost",className:"px-3 py-1.5",children:(0,z.jsx)("div",{className:"flex items-center",children:(0,z.jsx)("span",{className:"inter-small-regular text-grey-90",children:t.name})})})};let uz=function(e){var t=e.channels,r=void 0===t?[]:t,n=(0,J.useAdminSalesChannels)().count,i=Math.max(r.length-3,0);(0,ei.Bd)().t;var a=r.length?r.length:0,o=n||0;return(0,z.jsxs)("div",{className:"gap-y-small flex flex-col",children:[r.length>0&&(0,z.jsxs)("div",{className:"flex gap-x-1",children:[(0,z.jsx)("div",{className:"flex max-w-[600px] gap-x-1 overflow-clip",children:r.slice(0,3).map(function(e){return(0,z.jsx)(uL,{channel:e},e.id)})}),i>0&&(0,z.jsx)(r9.A,{content:(0,z.jsx)("div",{className:"flex flex-col",children:r.slice(3).map(function(e){return(0,z.jsx)("span",{children:e.name},e.id)})}),children:(0,z.jsx)(rk.A,{variant:"ghost",className:"px-3 py-1.5",children:(0,z.jsxs)("div",{className:"inter-small-regular text-grey-50 flex h-full items-center",children:["+ ",i," more"]})})})]}),(0,z.jsx)("p",{className:"inter-base-regular text-grey-50",children:(0,z.jsxs)(ei.x6,{i18nKey:"sales-channels-display-available-count",availableChannelsCount:a,totalChannelsCount:o,children:["Available in"," ",(0,z.jsx)("span",{className:"inter-base-semibold text-grey-90",children:{availableChannelsCount:a}})," ","out of"," ",(0,z.jsx)("span",{className:"inter-base-semibold text-grey-90",children:{totalChannelsCount:o}})," ","Sales Channels"]})})]})};var uF=U.createContext(null),uB=function(){var e=(0,U.useContext)(uF);if(null===e)throw Error("useSalesChannelsModal must be used within a SalesChannelsModalProvider");return e};function uq(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function uH(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||uV(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uU(e){return function(e){if(Array.isArray(e))return uq(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||uV(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uV(e,t){if(e){if("string"==typeof e)return uq(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return uq(e,t)}}var uG=function(){var e=uH(u$(),1)[0],t=uH((0,U.useState)(void 0),2),r=t[0],n=t[1],i=uH((0,U.useState)(0),2),a=i[0],o=i[1],l=(0,e8.d)(r,500),s=(0,J.useAdminSalesChannels)({q:l,limit:15,offset:a}),c=s.sales_channels,u=s.count,d=s.isLoading,f=uB(),p=f.source,m=f.onClose,h=f.onSave,y=U.useMemo(function(){var e=p.map(function(e){return e.id})||[];return(null==c?void 0:c.filter(function(t){var r=t.id;return!e.includes(r)}))||[]},[c,p]),b=(0,a7.lK)(),v=b.pop,g=b.reset,x=(0,e4.useTable)({columns:e,data:y,manualPagination:!0,initialState:{pageIndex:Math.floor(a/15),pageSize:15},autoResetPage:!1,autoResetSelectedRows:!1,getRowId:function(e){return e.id},pageCount:Math.ceil((u||0)/15)},e4.usePagination,e4.useRowSelect),j=(0,U.useMemo)(function(){return 0===x.selectedFlatRows.length},[x.selectedFlatRows.length]);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(eN.A.Content,{children:(0,z.jsx)(uK,{isLoading:d,count:u||0,limit:15,offset:a,setOffset:o,setQuery:n,tableState:x})}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"space-x-xsmall flex w-full justify-end",children:[(0,z.jsx)(W.A,{variant:"secondary",size:"small",onClick:v,children:"Cancel"}),(0,z.jsx)(W.A,{variant:"primary",size:"small",onClick:function(){h(uU(p).concat(uU(x.selectedFlatRows.map(function(e){return e.original})))),v()},disabled:j,children:"Save and go back"}),(0,z.jsx)(W.A,{variant:"primary",size:"small",onClick:function(){h(uU(p).concat(uU(x.selectedFlatRows.map(function(e){return e.original})))),g(),m()},disabled:j,children:"Save and close"})]})})]})};function uW(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function uY(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var u$=function(){return[(0,U.useMemo)(function(){return[{width:30,id:"selection",Header:function(e){var t=e.getToggleAllPageRowsSelectedProps;return(0,z.jsx)("span",{className:"flex w-[30px] justify-center",children:(0,z.jsx)(tt,uW({},t()))})},Cell:function(e){var t=e.row;return(0,z.jsx)("span",{onClick:function(e){return e.stopPropagation()},className:"flex w-[30px] justify-center",children:(0,z.jsx)(tt,uW({},t.getToggleRowSelectedProps()))})}},{Header:"Title",accessor:"name"},{Header:"Description",accessor:"description"}]},[])]},uQ=function(e){var t=e.numberOfSelectedRows,r=e.onDeselect,n=e.onRemove,i={title:"Add Sales Channels",onBack:(0,a7.lK)().pop,view:(0,z.jsx)(uG,{})},a=!!t,o=(0,a7.lK)().push;return(0,z.jsx)("div",{className:"space-x-xsmall flex h-[34px] overflow-hidden",children:(0,z.jsxs)("div",{className:(0,en.default)("transition-all duration-200",{"translate-y-[-42px]":!a,"translate-y-[0px]":a}),children:[(0,z.jsxs)("div",{className:"mb-2 flex h-[34px] items-center divide-x",children:[(0,z.jsxs)("span",{className:"inter-small-regular text-grey-50 mr-3",children:[t," selected"]}),(0,z.jsxs)("div",{className:"space-x-xsmall flex pl-3",children:[(0,z.jsx)(W.A,{onClick:r,size:"small",variant:"ghost",className:"border-grey-20 border",children:"Deselect"}),(0,z.jsx)(W.A,{onClick:n,size:"small",variant:"ghost",className:"border-grey-20 border text-rose-50",children:"Remove"})]})]}),(0,z.jsx)("div",{className:"flex h-[34px] justify-end",children:(0,z.jsxs)(W.A,{size:"small",variant:"ghost",className:"border-grey-20 border",onClick:function(){return o(i)},children:[(0,z.jsx)(n_.A,{size:20})," Add Channels"]})})]})})};let uK=function(e){var t=e.count,r=e.limit,n=e.offset,i=e.setOffset,a=e.setQuery,o=e.tableState,l=e.setSelectedRowIds,s=e.tableAction,c=e.isLoading,u=o.getTableProps,d=o.getTableBodyProps,f=o.headerGroups,p=o.rows,m=o.prepareRow,h=o.canPreviousPage,y=o.canNextPage,b=o.pageCount,v=o.nextPage,g=o.previousPage,x=o.state.pageIndex,j=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(o.state,["pageIndex"]);return U.useEffect(function(){l&&l(Object.keys(j.selectedRowIds))},[Object.keys(j.selectedRowIds).length]),(0,z.jsx)(tb,{hasPagination:!0,pagingState:{count:t,offset:n,pageSize:n+p.length,title:"Sales Channels",currentPage:x+1,pageCount:b,nextPage:function(){y&&(i(n+r),v())},prevPage:function(){h&&(i(Math.max(n-r,0)),g())},hasNext:y,hasPrev:h},numberOfRows:r,isLoading:c,children:(0,z.jsxs)(td,uY(uW({},u()),{enableSearch:!0,handleSearch:a,tableActions:s,children:[(0,z.jsx)(td.Head,{children:null==f?void 0:f.map(function(e){return(0,z.jsx)(td.HeadRow,uY(uW({},e.getHeaderGroupProps()),{children:e.headers.map(function(e){return(0,z.jsx)(td.HeadCell,uY(uW({},e.getHeaderProps()),{children:e.render("Header")}))})}))})}),(0,z.jsx)(td.Body,uY(uW({},d()),{children:p.map(function(e){return m(e),(0,z.jsx)(td.Row,uY(uW({color:"inherit"},e.getRowProps()),{children:e.cells.map(function(e){return(0,z.jsx)(td.Cell,uY(uW({},e.getCellProps()),{children:e.render("Cell")}))})}))})}))]}))})};function uZ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function uJ(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return uZ(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return uZ(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}let uX=function(){var e=uB(),t=e.source,r=e.onSave,n=uJ(u$(),1)[0],i=uJ((0,U.useState)(void 0),2),a=i[0],o=i[1],l=uJ((0,U.useState)(0),2),s=l[0],c=l[1],u=uJ((0,U.useState)([]),2),d=u[0],f=u[1],p=(0,e8.d)(a,500),m=U.useMemo(function(){return p?null==t?void 0:t.filter(function(e){var t=e.name,r=e.description;return t.toLowerCase().includes(p.toLowerCase())||(null==r?void 0:r.toLowerCase().includes(p.toLowerCase()))}):t},[t,p]),h=(0,e4.useTable)({columns:n,data:m,manualPagination:!0,initialState:{pageIndex:Math.floor(s/12),pageSize:12},autoResetPage:!1,autoResetSelectedRows:!1,getRowId:function(e){return e.id},pageCount:Math.ceil(m.length/12)},e4.usePagination,e4.useRowSelect),y=function(){f([]),h.toggleAllRowsSelected(!1)};return(0,z.jsx)(eN.A.Content,{children:(0,z.jsx)(uK,{count:t.length,tableAction:(0,z.jsx)(uQ,{numberOfSelectedRows:d.length,onRemove:function(){r(t.filter(function(e){return!d.includes(e.id)})),y()},onDeselect:y}),setSelectedRowIds:f,limit:12,offset:s,setOffset:c,setQuery:o,tableState:h})})},u0=function(e){var t=e.open,r=e.source,n=e.onClose,i=e.onSave,a=(0,a7.lK)();return(0,z.jsx)(uF.Provider,{value:{source:void 0===r?[]:r,onClose:n,onSave:i},children:(0,z.jsx)(a7.Ay,{open:t,handleClose:n,context:a,children:(0,z.jsxs)(eN.A.Body,{children:[(0,z.jsx)(eN.A.Header,{handleClose:n,children:(0,z.jsx)("h1",{className:"inter-xlarge-semibold",children:"Current Sales Channels"})}),(0,z.jsx)(uX,{}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsx)("div",{className:"flex w-full items-center justify-end",children:(0,z.jsx)(W.A,{variant:"primary",size:"small",type:"button",onClick:n,children:"Close"})})})]})})})};function u1(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}let u2=function(e){var t,r,n=e.product,i=e.open,a=e.onClose,o=(0,eC.A)(),l=(0,ei.Bd)().t,s=(0,J.useAdminUpdateProduct)(n.id).mutateAsync,c=(t=function(e){return function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,s({sales_channels:e.map(function(e){return{id:e.id}})})];case 1:return t.sent(),o(l("product-general-section-success","Success"),l("product-general-section-successfully-updated-sales-channels","Successfully updated sales channels"),"success"),[3,3];case 2:return t.sent(),o(l("product-general-section-error","Error"),l("product-general-section-failed-to-update-sales-channels","Failed to update sales channels"),"error"),[3,3];case 3:return[2]}})},r=function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function o(e){u1(a,n,i,o,l,"next",e)}function l(e){u1(a,n,i,o,l,"throw",e)}o(void 0)})},function(e){return r.apply(this,arguments)});return(0,z.jsx)(u0,{onClose:a,open:i,source:n.sales_channels,onSave:c})},u3=function(e){var t=e.form,r=e.isGiftCard,n=t.control,i=t.path;return(0,z.jsxs)("div",{children:[(0,z.jsxs)("div",{className:"mb-2xsmall flex items-center justify-between",children:[(0,z.jsx)("h2",{className:"inter-base-semibold",children:"Discountable"}),(0,z.jsx)(eR.xI,{control:n,name:i("value"),render:function(e){var t=e.field,r=t.value,n=t.onChange;return(0,z.jsx)(so.A,{checked:r,onCheckedChange:n})}})]}),(0,z.jsxs)("p",{className:"inter-base-regular text-grey-50",children:["When unchecked discounts will not be applied to this"," ",r?"gift card":"product","."]})]})};function u5(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function u6(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}let u4=function(e){var t=e.form,r=e.requireHandle,n=void 0===r||r,i=e.isGiftCard,a=t.register,o=t.path,l=t.formState.errors;return(0,z.jsxs)("div",{children:[(0,z.jsxs)("div",{className:"gap-x-large mb-small grid grid-cols-2",children:[(0,z.jsx)(e1.A,u6(u5({label:"Title",placeholder:i?"Gift Card":"Winter Jacket",required:!0},a(o("title"),{required:"Title is required",minLength:{value:1,message:"Title must be at least 1 character"},pattern:n8.A.whiteSpaceRule("Title")})),{errors:l})),(0,z.jsx)(e1.A,u6(u5({label:"Subtitle",placeholder:"Warm and cozy..."},a(o("subtitle"),{pattern:n8.A.whiteSpaceRule("Subtitle")})),{errors:l}))]}),(0,z.jsxs)("p",{className:"inter-base-regular text-grey-50 mb-large",children:["Give your ",i?"gift card":"product"," a short and clear title.",(0,z.jsx)("br",{}),"50-60 characters is the recommended length for search engines."]}),(0,z.jsxs)("div",{className:"gap-x-large mb-large grid grid-cols-2",children:[(0,z.jsx)(e1.A,u6(u5({label:"Handle",tooltipContent:n?void 0:"The handle is the part of the URL that identifies the ".concat(i?"gift card":"product",". If not specified, it will be generated from the title."),placeholder:i?"gift-card":"winter-jacket",required:n},a(o("handle"),{required:n?"Handle is required":void 0,minLength:n8.A.minOneCharRule("Handle"),pattern:n8.A.whiteSpaceRule("Handle")})),{prefix:"/",errors:l})),(0,z.jsx)(e1.A,u6(u5({label:"Material",placeholder:i?"Paper":"100% Cotton"},a(o("material"),{minLength:n8.A.minOneCharRule("Material"),pattern:n8.A.whiteSpaceRule("Material")})),{errors:l}))]}),(0,z.jsx)(sw.A,u6(u5({label:"Description",placeholder:i?"The gift card is...":"A warm and cozy jacket...",rows:3,className:"mb-small"},a(o("description"))),{errors:l})),(0,z.jsxs)("p",{className:"inter-base-regular text-grey-50",children:["Give your ",i?"gift card":"product"," a short and clear description.",(0,z.jsx)("br",{}),"120-160 characters is the recommended length for search engines."]})]})};var u8=r(30591),u7=r(31156);function u9(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function de(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function dt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return u9(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u9(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var dr=function(e){return(0,z.jsx)("div",{className:"flex flex-col",children:e.list.map(function(e){return(0,z.jsx)("span",{children:e},e)})})};function dn(e){var t=e.placeholder,r=e.isOpen,n=e.selected,i=e.openPopup,a=e.resetSelected,o=e.options,l=e.disabled,s=Object.keys(n).length,c=(0,ei.Bd)().t,u=(0,U.useMemo)(function(){var e=[],t=function(r){var i;n[r.value]&&e.push(r.label),null===(i=r.children)||void 0===i||i.forEach(t)};return o.forEach(t),e},[n,o]);return(0,z.jsxs)("div",{onClick:i,className:(0,en.default)("rounded-rounded border-grey-20 bg-grey-5 px-small focus-within:border-violet-60 focus-within:shadow-cta flex h-10 items-center justify-between border",{"opacity-50":l},{"pointer-events-none":l}),children:[(0,z.jsxs)("div",{className:"flex items-center gap-1",children:[!!s&&(0,z.jsx)(r9.A,{side:"top",delayDuration:1500,content:(0,z.jsx)(dr,{list:u}),children:(0,z.jsxs)("span",{className:"rounded-rounded bg-grey-10 text-small flex h-[28px] items-center gap-2 border px-2 font-medium text-gray-500",children:[s,(0,z.jsx)(ao.A,{className:"cursor-pointer",onClick:a,size:16})]})}),0===s?(0,z.jsx)("span",{className:"text-grey-50",children:t||c("multiselect-choose-categories","Choose categories")}):null]}),(0,z.jsx)(ej.A,{size:16,style:{transition:".2s transform",transform:"rotate(".concat(r?180:0,"deg)")}})]})}var di=function(e){var t=e.isSelected;return(0,z.jsx)("div",{className:(0,en.default)("rounded-base border-grey-30 text-grey-0 flex h-5 w-5 justify-center border",{"bg-violet-60":t}),children:(0,z.jsx)("span",{className:"self-center",children:t&&(0,z.jsx)(e7,{size:12})})})};function da(e){var t,r=e.option,n=e.isSelected,i=e.onOptionClick,a=e.onOptionCheckboxClick,o=e.selectedSubcategoriesCount,l=(0,ei.Bd)().t,s=!!(null===(t=r.children)||void 0===t?void 0:t.length);return(0,z.jsxs)("div",{onClick:function(e){e.stopPropagation(),s&&i(r)},className:(0,en.default)("flex h-[40px] items-center justify-between gap-2 px-3",{"hover:bg-grey-10 cursor-pointer":s}),children:[(0,z.jsxs)("div",{className:"flex items-center gap-2",children:[(0,z.jsx)("div",{className:"cursor-pointer",onClick:function(e){e.stopPropagation(),a(r)},children:(0,z.jsx)(di,{isSelected:n})}),r.label]}),s&&(0,z.jsxs)("div",{className:"flex items-center gap-2",children:[!!o&&(0,z.jsx)("span",{className:"text-small text-gray-400",children:l("domain-categories-multiselect-selected-with-counts","{{count}}",{count:o})}),(0,z.jsx)(a8,{size:16})]})]})}function dl(e){var t=e.activeOption,r=e.onOptionClick,n=e.onOptionCheckboxClick,i=e.pop,a=e.selected,o=e.selectedSubcategoriesCount,l=!!t.value;return(0,z.jsxs)("div",{style:{top:8,overflow:"scroll",boxShadow:"0px 2px 16px rgba(0, 0, 0, 0.08)",maxHeight:null===t.value?228:242},className:"rounded-rounded relative z-50 w-[100%] border bg-white",children:[l&&(0,z.jsxs)("div",{onClick:function(e){e.stopPropagation(),i()},className:"border-grey-20 hover:bg-grey-10 mb-1 flex h-[50px] cursor-pointer items-center gap-2 border-b px-3",children:[(0,z.jsx)(u8.A,{size:16}),(0,z.jsx)("span",{className:"font-medium",children:t.label})]}),t.children.map(function(e){return(0,z.jsx)(da,{option:e,isSelected:a[e.value],onOptionClick:r,onOptionCheckboxClick:n,selectedSubcategoriesCount:o[e.value]},e.value)})]})}let ds=function(e){var t=e.options,r=e.initiallySelected,n=e.onSelect,i=e.placeholder,a=dt((0,n5.A)(!1),3),o=a[0],l=a[1],s=a[2],c=U.useRef(null);(0,u7.A)(s,c,!0);var u=dt((0,U.useState)({value:null,label:null,children:t}),2),d=u[0],f=u[1],p=dt((0,U.useState)(r||{}),2),m=p[0],h=p[1],y=function(e){var t=de({},m);t[e.value]=!0,h(t)},b=function(e){var t=de({},m);delete t[e.value],h(t)};(0,U.useEffect)(function(){o||f({value:null,label:null,children:t})},[o]),(0,U.useEffect)(function(){n(Object.keys(m))},[m]);var v=(0,U.useMemo)(function(){var e={},r=function(t){var n,i=(0,t6.sum)(null===(n=t.children)||void 0===n?void 0:n.map(r));return e[t.value]=i,m[t.value]?i+1:i};return t.forEach(r),e},[m,t]);return(0,z.jsxs)("div",{ref:c,className:" h-[40px]",children:[(0,z.jsx)(dn,{isOpen:o,openPopup:l,resetSelected:function(){h({}),s()},selected:m,options:t,placeholder:i,disabled:!(null==t?void 0:t.length)}),o&&!!(null==t?void 0:t.length)&&(0,z.jsx)(dl,{pop:function(){var e,r=function(t){var n,i;(null===(n=t.children)||void 0===n?void 0:n.some(function(e){return e.value===d.value}))&&(e=t),null===(i=t.children)||void 0===i||i.forEach(r)};r({value:null,label:null,children:t}),e&&f(e)},selected:m,activeOption:d,onOptionClick:function(e){f(e)},onOptionCheckboxClick:function(e){m[e.value]?b(e):y(e)},selectedSubcategoriesCount:v})]})};function dc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function du(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||dp(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function df(e){return function(e){if(Array.isArray(e))return dc(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||dp(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dp(e,t){if(e){if("string"==typeof e)return dc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dc(e,t)}}let dm=function(e){var t,r=e.onChange,n=e.onValidate,i=e.values,a=void 0===i?[]:i,o=e.label,l=e.showLabel,s=(e.containerProps,e.className),c=e.required,u=e.placeholder,d=(e.withTooltip,e.tooltipContent),f=e.tooltip,p=e.invalidMessage,m=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["onChange","onValidate","values","label","showLabel","containerProps","className","required","placeholder","withTooltip","tooltipContent","tooltip","invalidMessage"]),h=dd((0,U.useState)(!1),2),y=h[0],b=h[1],v=dd((0,U.useState)(-1),2),g=v[0],x=v[1],j=(0,U.useRef)(null),w=function(e){var t=e;void 0!==n&&(t=n(e)),t?(r(df(a).concat([t])),(null==j?void 0:j.current)&&(j.current.value="")):b(!0)},O=function(e){var t=df(a);t.splice(e,1),r(t)};return(0,z.jsxs)("div",{className:s,children:[(void 0===l||l)&&(0,z.jsx)(iX.A,{label:o||"Tags (comma separated)",required:c,tooltipContent:d,tooltip:f,className:"mb-2"}),(0,z.jsx)(r9.A,{open:y,side:"top",content:(0,z.jsxs)("p",{className:"text-rose-50",children:[null==j?void 0:null===(t=j.current)||void 0===t?void 0:t.value," ",void 0===p?"is not a valid tag":p]}),children:(0,z.jsx)("div",{className:(0,en.default)("bg-grey-5 shadow-border focus-within:outline-violet-60/10 focus-within:shadow-focus-border rounded-rounded box-border flex h-auto min-h-[40px] items-center px-3 transition-colors focus-within:outline focus-within:outline-4",{"shadow-error-border focus-within:shadow-error-border focus-within:outline-rose-60/10":y}),children:(0,z.jsx)("div",{className:"h-full",children:(0,z.jsxs)("div",{className:"gap-xsmall h-28px box-border flex w-full flex-wrap py-1.5",children:[a.map(function(e,t){return(0,z.jsxs)("div",{className:(0,en.default)("bg-grey-20 rounded-rounded flex w-max items-center justify-center gap-x-1 whitespace-nowrap px-3 py-1",du({},"!bg-grey-90",t===g)),children:[(0,z.jsx)("span",{className:(0,en.default)("text-grey-50 inter-small-semibold inline-block",du({},"text-grey-20",t===g)),children:e}),(0,z.jsx)(ao.A,{className:"text-grey-40 inline cursor-pointer",size:"16",onClick:function(){return O(t)}})]},t)}),(0,z.jsx)("input",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){du(e,t,r[t])})}return e}({id:"tag-input",ref:j,onBlur:function(e){var t,r=null==j?void 0:null===(t=j.current)||void 0===t?void 0:t.value;x(-1),r&&w(r)},onKeyDown:function(e){if(y&&b(!1),null==j?void 0:j.current){var t=j.current,n=t.value,i=t.selectionStart;switch(e.keyCode){case 37:-1!==g?g>0&&x(g-1):i||(x(a.length-1),e.preventDefault());break;case 39:-1!==g&&(g<a.length-1?(x(g+1),e.preventDefault()):x(-1));break;case 13:e.preventDefault();break;case 9:n&&(w(n),e.preventDefault());break;case 8:if(j.current.selectionStart||-1!==g||(x(a.length-1),e.preventDefault()),-1!==g){var o=df(a);o.splice(g,1),r(o),x(-1)}break;default:x(-1)}}},onChange:function(){if(null==j?void 0:j.current){var e=j.current.value;(null==e?void 0:e.endsWith(","))&&(j.current.value=e.slice(0,-1),w(e.slice(0,-1)))}},className:(0,en.default)("flex-1 bg-transparent focus:outline-none"),placeholder:(null==a?void 0:a.length)?"":u},m))]})})})})]})};function dh(e){var t,r=(null===(t=e.category_children)||void 0===t?void 0:t.map(dh))||[];return{value:e.id,label:e.name,children:r}}let dy=function(){var e=(0,rz.u)().isFeatureEnabled,t=(0,J.useAdminProductTypes)(void 0,{staleTime:0,refetchOnWindowFocus:!0}).product_types,r=(0,J.useAdminCollections)().collections,n=(0,J.useAdminProductCategories)({parent_category_id:"null",include_descendants_tree:!0},{enabled:e(rz.TO.PRODUCT_CATEGORIES)}).product_categories,i=void 0===n?[]:n;return{productTypeOptions:(0,U.useMemo)(function(){return(null==t?void 0:t.map(function(e){return{value:e.id,label:e.value}}))||[]},[t]),collectionOptions:(0,U.useMemo)(function(){return(null==r?void 0:r.map(function(e){return{value:e.id,label:e.title}}))||[]},[r]),categoriesOptions:(0,U.useMemo)(function(){return null==i?void 0:i.map(dh)},[i])}},db=function(e){var t=e.form,r=t.control,n=t.path,i=t.setValue,a=dy(),o=a.productTypeOptions,l=a.collectionOptions,s=a.categoriesOptions,c=void 0===s?[]:s,u=(0,rz.u)().isFeatureEnabled,d=function(e){o.push({label:e,value:e}),i(n("type"),{label:e,value:e},{shouldDirty:!0})};return(0,z.jsxs)("div",{children:[(0,z.jsxs)("div",{className:"mb-large gap-x-large grid grid-cols-2",children:[(0,z.jsx)(eR.xI,{name:n("type"),control:r,render:function(e){var t=e.field,r=t.value,n=t.onChange;return(0,z.jsx)(sj,{label:"Type",onChange:n,options:o,value:r||null,placeholder:"Choose a type",onCreateOption:d,isClearable:!0})}}),(0,z.jsx)(eR.xI,{name:n("collection"),control:r,render:function(e){var t=e.field,r=t.value,n=t.onChange;return(0,z.jsx)(no,{label:"Collection",onChange:n,options:l,value:r,placeholder:"Choose a collection",isClearable:!0})}})]}),u(rz.TO.PRODUCT_CATEGORIES)?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(iX.A,{label:"Categories",className:"mb-2"}),(0,z.jsx)(eR.xI,{name:n("categories"),control:r,render:function(e){var t=e.field,r=t.value,n=t.onChange,i=(r||[]).reduce(function(e,t){return e[t]=!0,e},{});return(0,z.jsx)(ds,{placeholder:(null==c?void 0:c.length)?"Choose categories":"No categories available",onSelect:n,options:c,initiallySelected:i})}})]}):null,(0,z.jsx)("div",{className:"mb-large"}),(0,z.jsx)(eR.xI,{control:r,name:n("tags"),render:function(e){var t=e.field,r=t.value,n=t.onChange;return(0,z.jsx)(dm,{onChange:n,values:r||[]})}})]})};var dv=function(e){var t;return{general:{title:e.title,subtitle:e.subtitle,material:e.material,handle:e.handle,description:e.description||null},organize:{collection:e.collection?{label:e.collection.title,value:e.collection.id}:null,type:e.type?{label:e.type.value,value:e.type.id}:null,tags:e.tags?e.tags.map(function(e){return e.value}):null,categories:null===(t=e.categories)||void 0===t?void 0:t.map(function(e){return e.id})},discountable:{value:e.discountable},metadata:eJ(e.metadata)}};let dg=function(e){var t=e.product,r=e.open,n=e.onClose,i=(0,ei.Bd)().t,a=uj(t.id),o=a.onUpdate,l=a.updating,s=(0,eR.mN)({defaultValues:dv(t)}),c=s.formState.isDirty,u=s.handleSubmit,d=s.reset;(0,U.useEffect)(function(){d(dv(t))},[t,d]);var f=function(){d(dv(t)),n()},p=u(function(e){var t,r;o({title:e.general.title,handle:e.general.handle,material:e.general.material,subtitle:e.general.subtitle,description:e.general.description,type:e.organize.type?{id:e.organize.type.value,value:e.organize.type.label}:null,collection_id:e.organize.collection?e.organize.collection.value:null,tags:e.organize.tags?e.organize.tags.map(function(e){return{value:e}}):null,categories:(null===(r=e.organize)||void 0===r?void 0:null===(t=r.categories)||void 0===t?void 0:t.length)?e.organize.categories.map(function(e){return{id:e}}):[],discountable:e.discountable.value,metadata:eZ(e.metadata)},f)});return(0,z.jsx)(eN.A,{open:r,handleClose:f,isLargeModal:!0,children:(0,z.jsxs)(eN.A.Body,{children:[(0,z.jsx)(eN.A.Header,{handleClose:f,children:(0,z.jsx)("h1",{className:"inter-xlarge-semibold m-0",children:i("product-general-section-edit-general-information","Edit General Information")})}),(0,z.jsxs)("form",{onSubmit:p,children:[(0,z.jsxs)(eN.A.Content,{children:[(0,z.jsx)(u4,{form:(0,eL.m)(s,"general"),isGiftCard:t.is_giftcard}),(0,z.jsxs)("div",{className:"my-xlarge",children:[(0,z.jsxs)("h2",{className:"inter-base-semibold mb-base",children:["Organize"," ",t.is_giftcard?i("product-general-section-gift-card","Gift Card"):i("product-general-section-product","Product")]}),(0,z.jsx)(db,{form:(0,eL.m)(s,"organize")})]}),(0,z.jsx)(u3,{form:(0,eL.m)(s,"discountable"),isGiftCard:t.is_giftcard}),(0,z.jsxs)("div",{className:"mt-xlarge",children:[(0,z.jsx)("h2",{className:"inter-base-semibold mb-base",children:i("product-general-section-metadata","Metadata")}),(0,z.jsx)(e$,{form:(0,eL.m)(s,"metadata")})]})]}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"flex w-full justify-end gap-x-2",children:[(0,z.jsx)(W.A,{size:"small",variant:"secondary",type:"button",onClick:f,children:i("product-general-section-cancel","Cancel")}),(0,z.jsx)(W.A,{size:"small",variant:"primary",type:"submit",disabled:!c,loading:l,children:i("product-general-section-save","Save")})]})})]})]})})};var dx=function(e){var t=e.title,r=e.value;return(0,z.jsxs)("div",{className:"inter-base-regular text-grey-50 flex items-center justify-between",children:[(0,z.jsx)("p",{children:t}),(0,z.jsx)(function(){return Array.isArray(r)?r.length?(0,z.jsx)(uR,{list:r,delimit:2}):(0,z.jsx)("p",{children:"–"}):(0,z.jsx)("p",{children:r||"–"})},{})]})},dj=function(e){var t,r,n,i=e.product,a=(0,rz.u)().isFeatureEnabled,o=(0,ei.Bd)().t;return(0,z.jsxs)("div",{className:"mt-8 flex flex-col gap-y-3",children:[(0,z.jsx)("h2",{className:"inter-base-semibold",children:o("product-general-section-details","Details")}),(0,z.jsx)(dx,{title:o("product-general-section-subtitle","Subtitle"),value:i.subtitle}),(0,z.jsx)(dx,{title:o("product-general-section-handle","Handle"),value:i.handle}),(0,z.jsx)(dx,{title:o("product-general-section-type","Type"),value:null===(t=i.type)||void 0===t?void 0:t.value}),(0,z.jsx)(dx,{title:o("product-general-section-collection","Collection"),value:null===(r=i.collection)||void 0===r?void 0:r.title}),a(rz.TO.PRODUCT_CATEGORIES)&&(0,z.jsx)(dx,{title:o("product-general-section-category","Category"),value:null===(n=i.categories)||void 0===n?void 0:n.map(function(e){return e.name})}),(0,z.jsx)(dx,{title:o("product-general-section-discountable","Discountable"),value:i.discountable?o("product-general-section-true","True"):o("product-general-section-false","False")}),(0,z.jsx)(dx,{title:o("product-general-section-metadata","Metadata"),value:Object.entries(i.metadata||{}).length>0?o("product-general-section-count","{{count}}",{count:Object.keys(i.metadata||{}).length}):void 0})]})},dw=function(e){var t,r=e.product;return(null===(t=r.tags)||void 0===t?void 0:t.length)===0?null:(0,z.jsx)("ul",{className:"mt-4 flex flex-wrap items-center gap-1",children:r.tags.map(function(e){return(0,z.jsx)("li",{children:(0,z.jsx)("div",{className:"text-grey-50 bg-grey-10 inter-small-semibold rounded-rounded px-3 py-[6px]",children:e.value})},e.id)})})},dO=function(e){var t=e.product,r=(0,ei.Bd)().t;return(0,z.jsx)(uT,{featureFlag:"sales_channels",children:(0,z.jsxs)("div",{className:"mt-xlarge",children:[(0,z.jsx)("h2",{className:"inter-base-semibold mb-xsmall",children:r("product-general-section-sales-channels","Sales channels")}),(0,z.jsx)(uz,{channels:t.sales_channels})]})})};let dS=function(e){var t=e.product,r=(0,ei.Bd)().t,n=uj(t.id),i=n.onDelete,a=n.onStatusChange,o=(0,n5.A)(),l=o.state,s=o.close,c=o.toggle,u=(0,n5.A)(!1),d=u.state,f=u.close,p=u.toggle,m=(0,rz.u)().isFeatureEnabled,h=[{label:r("product-general-section-edit-general-information","Edit General Information"),onClick:c,icon:(0,z.jsx)(ec,{size:20})},{label:r("product-general-section-delete","Delete"),onClick:i,variant:"danger",icon:(0,z.jsx)(eu,{size:20})}];return m("sales_channels")&&h.splice(1,0,{label:r("product-general-section-edit-sales-channels","Edit Sales Channels"),onClick:p,icon:(0,z.jsx)(uM,{size:20})}),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(eM,{title:t.title,actions:h,forceDropdown:!0,status:(0,z.jsx)(sg,{isDraft:(null==t?void 0:t.status)==="draft",activeState:r("product-general-section-published","Published"),draftState:r("product-general-section-draft","Draft"),onChange:function(){return a(t.status)}}),children:[(0,z.jsx)("p",{className:"inter-base-regular text-grey-50 mt-2 whitespace-pre-wrap",children:t.description}),(0,z.jsx)(dw,{product:t}),(0,z.jsx)(dj,{product:t}),(0,z.jsx)(dO,{product:t})]}),(0,z.jsx)(dg,{product:t,open:l,onClose:s}),(0,z.jsx)(uT,{featureFlag:"sales_channels",children:(0,z.jsx)(u2,{product:t,open:d,onClose:f})})]})};function dP(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function dC(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function dA(e){return function(e){if(Array.isArray(e))return dP(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return dP(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dP(e,void 0)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var dN=function(e){var t=[],r=[];return e.forEach(function(e){e.nativeFile?t.push(e):r.push(e)}),{uploadImages:t,existingImages:r}},dk=function(){var e,t=(e=function(e){var t,r,n,i,a;return function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,function(o){switch(o.label){case 0:if(r=(t=dN(e)).uploadImages,n=t.existingImages,i=[],!(r.length>0))return[3,2];return a=r.map(function(e){return e.nativeFile}),[4,tF.uploads.create(a).then(function(e){return e.data.uploads})];case 1:i=o.sent(),o.label=2;case 2:return[2,dA(n).concat(dA(i))]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function o(e){dC(a,n,i,o,l,"next",e)}function l(e){dC(a,n,i,o,l,"throw",e)}o(void 0)})});return function(e){return t.apply(this,arguments)}}();function d_(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var dE=(0,z.jsxs)("span",{children:["Drop your images here, or"," ",(0,z.jsx)("span",{className:"text-violet-60",children:"click to browse"})]});let dI=function(e){var t,r=e.onFileChosen,n=e.filetypes,i=e.errorMessage,a=e.className,o=e.text,l=e.placeholder,s=e.multiple,c=(0,U.useRef)(null),u=function(e){if(Array.isArray(e))return e}(t=(0,U.useState)(!1))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(t,2)||function(e,t){if(e){if("string"==typeof e)return d_(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d_(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),d=u[0],f=u[1];return(0,z.jsxs)("div",{onClick:function(){var e;return null==c?void 0:null===(e=c.current)||void 0===e?void 0:e.click()},onDrop:function(e){f(!1),e.preventDefault();var t=[];if(e.dataTransfer.items){for(var i=0;i<e.dataTransfer.items.length;i++)if("file"===e.dataTransfer.items[i].kind){var a=e.dataTransfer.items[i].getAsFile();a&&n.indexOf(a.type)>-1&&t.push(a)}}else for(var o=0;o<e.dataTransfer.files.length;o++)n.indexOf(e.dataTransfer.files[o].type)>-1&&t.push(e.dataTransfer.files[o]);1===t.length?r(t):f(!0)},onDragOver:function(e){return e.preventDefault()},className:(0,en.default)("inter-base-regular text-grey-50 rounded-rounded border-grey-20 hover:border-violet-60 hover:text-grey-40 flex h-full w-full cursor-pointer select-none flex-col items-center justify-center border-2 border-dashed transition-colors",a),children:[(0,z.jsxs)("div",{className:"flex flex-col items-center",children:[(0,z.jsx)("p",{children:void 0===o?dE:o}),void 0===l?"":l]}),d&&(0,z.jsx)("span",{className:"text-rose-60",children:i||"Please upload an image file"}),(0,z.jsx)("input",{ref:c,accept:n.join(", "),multiple:void 0!==s&&s,type:"file",onChange:function(e){var t=e.target.files;t&&r(Array.from(t))},className:"hidden"})]})};var dD=r(57578),dT=function(e){var t=e.image,r=e.index,n=e.form,i=e.remove,a=n.control,o=n.path,l=[{label:"Delete",onClick:function(){return i(r)},icon:(0,z.jsx)(eu,{size:20}),variant:"danger"}];return(0,z.jsx)(eR.xI,{name:o("images.".concat(r,".selected")),control:a,render:function(e){var r=e.field,n=r.value,i=r.onChange;return(0,z.jsxs)("div",{className:"relative",children:[(0,z.jsxs)("button",{className:(0,en.default)("px-base py-xsmall hover:bg-grey-5 rounded-rounded group flex items-center justify-between",{"bg-grey-5":n}),type:"button",onClick:function(){return i(!n)},children:[(0,z.jsxs)("div",{className:"gap-x-large flex items-center",children:[(0,z.jsx)("div",{className:"flex h-16 w-16 items-center justify-center",children:(0,z.jsx)("img",{src:t.url,alt:t.name||"Uploaded image",className:"rounded-rounded max-h-[64px] max-w-[64px]"})}),(0,z.jsxs)("div",{className:"inter-small-regular flex flex-col text-left",children:[(0,z.jsx)("p",{children:t.name}),(0,z.jsx)("p",{className:"text-grey-50",children:t.size?"".concat((t.size/1024).toFixed(2)," KB"):""})]})]}),(0,z.jsx)("div",{className:"gap-x-base flex items-center",children:(0,z.jsx)("span",{className:(0,en.default)("hidden",{"!text-violet-60 !block":n}),children:(0,z.jsx)(dD.A,{size:24})})})]}),(0,z.jsx)("div",{className:"right-base absolute top-0 bottom-0 flex items-center",children:(0,z.jsx)(em,{actions:l,forceDropdown:!0})})]})}})},dM=function(e){var t=e.number,r=e.onRemove,n=e.onDeselect;return(0,z.jsx)("div",{className:"flex h-10 items-center overflow-y-hidden pr-1",children:(0,z.jsxs)("div",{className:(0,en.default)("gap-x-small flex items-center transition-all duration-200",{"translate-y-[-42px]":!t,"translate-y-[0px]":t}),children:[(0,z.jsxs)("span",{children:[t," selected"]}),(0,z.jsx)("div",{className:"bg-grey-20 h-5 w-px"}),(0,z.jsxs)("div",{className:"gap-x-xsmall flex items-center",children:[(0,z.jsx)(W.A,{variant:"secondary",size:"small",type:"button",onClick:n,children:"Deselect"}),(0,z.jsx)(W.A,{variant:"danger",size:"small",type:"button",onClick:r,children:"Delete"})]})]})})};let dR=function(e){var t=e.form,r=t.control,n=t.path,i=t.setValue,a=(0,eR.jz)({control:r,name:n("images")}),o=a.fields,l=a.append,s=a.remove,c=(0,eR.FH)({control:r,name:n("images"),defaultValue:[]}),u=(0,U.useMemo)(function(){var e=[];return c.forEach(function(t,r){t.selected&&e.push(r)}),e},[c]);return(0,z.jsxs)("div",{children:[(0,z.jsx)("div",{children:(0,z.jsx)("div",{children:(0,z.jsx)(dI,{onFileChosen:function(e){e.length&&l(e.map(function(e){return{url:URL.createObjectURL(e),name:e.name,size:e.size,nativeFile:e,selected:!1}}))},placeholder:"1200 x 1600 (3:4) recommended, up to 10MB each",multiple:!0,filetypes:["image/gif","image/jpeg","image/png","image/webp"],className:"py-large"})})}),o.length>0&&(0,z.jsxs)("div",{className:"mt-large",children:[(0,z.jsxs)("div",{className:"mb-small flex items-center justify-between",children:[(0,z.jsx)("h2",{className:"inter-large-semibold",children:"Uploads"}),(0,z.jsx)(dM,{number:u.length,onDeselect:function(){u.forEach(function(e){i(n("images.".concat(e,".selected")),!1)})},onRemove:function(){s(u)}})]}),(0,z.jsx)("div",{className:"gap-y-2xsmall flex flex-col",children:o.map(function(e,r){return(0,z.jsx)(dT,{image:e,index:r,remove:s,form:t},e.id)})})]})]})};function dL(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}var dz=function(e){var t;return{media:{images:(null===(t=e.images)||void 0===t?void 0:t.map(function(e){return{url:e.url,selected:!1}}))||[]}}};let dF=function(e){var t,r,n=e.product,i=e.open,a=e.onClose,o=(0,ei.Bd)().t,l=uj(n.id),s=l.onUpdate,c=l.updating,u=(0,eR.mN)({defaultValues:dz(n)}),d=u.formState.isDirty,f=u.handleSubmit,p=u.reset,m=(0,eC.A)();(0,U.useEffect)(function(){p(dz(n))},[n,p]);var h=function(){p(dz(n)),a()},y=f((t=function(e){var t,r,n;return function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,function(i){switch(i.label){case 0:t=[],i.label=1;case 1:return i.trys.push([1,3,,4]),[4,dk(e.media.images)];case 2:return t=i.sent(),[3,4];case 3:return r=i.sent(),n=o("product-media-section-upload-images-error","Something went wrong while trying to upload images."),500===r.response.status&&(n=n+" "+o("product-media-section-file-service-not-configured","You might not have a file service configured. Please contact your administrator")),m(o("product-media-section-error","Error"),n,"error"),[2];case 4:return s({images:t.map(function(e){return e.url})},h),[2]}})},r=function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function o(e){dL(a,n,i,o,l,"next",e)}function l(e){dL(a,n,i,o,l,"throw",e)}o(void 0)})},function(e){return r.apply(this,arguments)}));return(0,z.jsx)(eN.A,{open:i,handleClose:h,isLargeModal:!0,children:(0,z.jsxs)(eN.A.Body,{children:[(0,z.jsx)(eN.A.Header,{handleClose:h,children:(0,z.jsx)("h1",{className:"inter-xlarge-semibold m-0",children:o("product-media-section-edit-media","Edit Media")})}),(0,z.jsxs)("form",{onSubmit:y,children:[(0,z.jsx)(eN.A.Content,{children:(0,z.jsxs)("div",{children:[(0,z.jsx)("h2",{className:"inter-large-semibold mb-2xsmall",children:o("product-media-section-media","Media")}),(0,z.jsx)("p",{className:"inter-base-regular text-grey-50 mb-large",children:o("product-media-section-add-images-to-your-product","Add images to your product.")}),(0,z.jsx)("div",{children:(0,z.jsx)(dR,{form:(0,eL.m)(u,"media")})})]})}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"flex w-full justify-end gap-x-2",children:[(0,z.jsx)(W.A,{size:"small",variant:"secondary",type:"button",onClick:h,children:o("product-media-section-cancel","Cancel")}),(0,z.jsx)(W.A,{size:"small",variant:"primary",type:"submit",disabled:!d,loading:c,children:o("product-media-section-save-and-close","Save and close")})]})})]})]})})},dB=function(e){var t=e.product,r=(0,n5.A)(),n=r.state,i=r.close,a=r.toggle,o=[{label:(0,(0,ei.Bd)().t)("product-media-section-edit-media","Edit Media"),onClick:a}];return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(eM,{title:"Media",actions:o,children:t.images&&t.images.length>0&&(0,z.jsx)("div",{className:"gap-xsmall mt-base grid grid-cols-3",children:t.images.map(function(e,t){return(0,z.jsx)("div",{className:"flex aspect-square items-center justify-center",children:(0,z.jsx)("img",{src:e.url,alt:"Image ".concat(t+1),className:"rounded-rounded max-h-full max-w-full object-contain"})},e.id)})})}),(0,z.jsx)(dF,{product:t,open:n,onClose:i})]})},dq=function(e){var t=e.product,r=(0,ei.Bd)().t;return(0,z.jsx)(eM,{title:t.is_giftcard?r("product-raw-section-raw-gift-card","Raw Gift Card"):r("product-raw-section-raw-product","Raw Product"),children:(0,z.jsx)("div",{className:"pt-base",children:(0,z.jsx)(eP,{data:t})})})};function dH(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var dU=(0,U.forwardRef)(function(e,t){var r,n=e.onDelete,i=e.deleting,a=void 0!==i&&i,o=e.children,l=e.className,s=function(e){if(Array.isArray(e))return e}(r=(0,U.useState)(!1))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(r,2)||function(e,t){if(e){if("string"==typeof e)return dH(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dH(e,2)}}(r,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),c=s[0],u=s[1],d=(0,U.useRef)(null);(0,U.useImperativeHandle)(t,function(){return d.current});var f=(0,U.useCallback)(function(e){d.current&&!d.current.contains(e.target)&&c&&u(!1)},[c]);return(0,U.useEffect)(function(){return document.addEventListener("mousedown",f),function(){document.removeEventListener("mousedown",f)}},[f]),(0,z.jsxs)("button",{className:(0,en.default)("flex items-center justify-center rounded-lg border transition-all",{"border-rose-50 bg-rose-50 px-3 py-1.5":c,"border-gray-20 bg-transparent p-1.5":!c},{"!bg-grey-40 !border-grey-40 !p-1.5":a},l),disabled:a,onClick:function(){if(!c){u(!0);return}n(),u(!1)},ref:d,children:[(0,z.jsx)("div",{className:(0,en.default)("inter-small-semibold text-rose-50",{hidden:c||a}),children:o||(0,z.jsx)(eu,{className:"text-grey-50",size:20})}),(0,z.jsx)("span",{className:(0,en.default)("inter-small-semibold text-white",{hidden:!c||a}),children:(0,z.jsx)(r9.A,{content:"Are you sure?",side:"top",sideOffset:16,open:c,children:"Confirm"})}),(0,z.jsx)("span",{className:(0,en.default)("flex items-center justify-center",{hidden:!a}),children:(0,z.jsx)(X.A,{size:"medium"})})]})}),dV=function(e){var t=e.image,r=e.index,n=e.remove,i=[{label:"Delete",onClick:function(){return n(r)},icon:(0,z.jsx)(eu,{size:20}),variant:"danger"}];return(0,z.jsxs)("div",{className:"px-base py-xsmall hover:bg-grey-5 rounded-rounded group flex items-center justify-between",children:[(0,z.jsxs)("div",{className:"gap-x-large flex items-center",children:[(0,z.jsx)("div",{className:"flex h-16 w-16 items-center justify-center",children:(0,z.jsx)("img",{src:t.url,alt:t.name||"Uploaded image",className:"rounded-rounded max-h-[64px] max-w-[64px]"})}),(0,z.jsxs)("div",{className:"inter-small-regular flex flex-col text-left",children:[(0,z.jsx)("p",{children:t.name}),(0,z.jsx)("p",{className:"text-grey-50",children:t.size?"".concat((t.size/1024).toFixed(2)," KB"):""})]})]}),(0,z.jsx)(em,{actions:i,forceDropdown:!0})]})};let dG=function(e){var t=e.form,r=t.control,n=t.path,i=(0,eR.jz)({control:r,name:n("images")}),a=i.fields,o=i.remove,l=i.replace,s=i.append;return(0,z.jsxs)("div",{children:[(0,z.jsx)("div",{children:(0,z.jsx)("div",{className:"mt-large",children:(0,z.jsx)(dI,{onFileChosen:function(e){var t=e.map(function(e){return{url:URL.createObjectURL(e),name:e.name,size:e.size,nativeFile:e,selected:!1}});e.length?l(t):s(t)},placeholder:"1200 x 1600 (3:4) recommended, up to 10MB each",filetypes:["image/gif","image/jpeg","image/png","image/webp"],className:"py-large"})})}),a.length>0&&(0,z.jsxs)("div",{className:"mt-large",children:[(0,z.jsx)("h2",{className:"inter-large-semibold mb-small",children:"Upload"}),(0,z.jsx)("div",{className:"gap-y-2xsmall flex flex-col",children:a.map(function(e,t){return(0,z.jsx)(dV,{image:e,index:t,remove:o},e.id)})})]})]})};function dW(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}var dY=function(e){return{thumbnail:{images:e.thumbnail?[{url:e.thumbnail}]:[]}}};let d$=function(e){var t,r,n=e.product,i=e.open,a=e.onClose,o=(0,ei.Bd)().t,l=uj(n.id),s=l.onUpdate,c=l.updating,u=(0,eR.mN)({defaultValues:dY(n)}),d=u.formState.isDirty,f=u.handleSubmit,p=u.reset,m=(0,eC.A)();(0,U.useEffect)(function(){p(dY(n))},[n,p]);var h=function(){p(dY(n)),a()},y=f((t=function(e){var t,r,n,i;return function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,function(a){switch(a.label){case 0:r=[],a.label=1;case 1:return a.trys.push([1,3,,4]),[4,dk(e.thumbnail.images)];case 2:return r=a.sent(),[3,4];case 3:return n=a.sent(),i=o("product-thumbnail-section-upload-thumbnail-error","Something went wrong while trying to upload the thumbnail."),500===n.response.status&&(i=i+" "+o("product-thumbnail-section-you-might-not-have-a-file-service-configured-please-contact-your-administrator","You might not have a file service configured. Please contact your administrator")),m(o("product-thumbnail-section-error","Error"),i,"error"),[2];case 4:return s({thumbnail:(null==r?void 0:null===(t=r[0])||void 0===t?void 0:t.url)||null},h),[2]}})},r=function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function o(e){dW(a,n,i,o,l,"next",e)}function l(e){dW(a,n,i,o,l,"throw",e)}o(void 0)})},function(e){return r.apply(this,arguments)}));return(0,z.jsx)(eN.A,{open:i,handleClose:h,isLargeModal:!0,children:(0,z.jsxs)(eN.A.Body,{children:[(0,z.jsx)(eN.A.Header,{handleClose:h,children:(0,z.jsx)("h1",{className:"inter-xlarge-semibold m-0",children:o("product-thumbnail-section-upload-thumbnail","Upload Thumbnail")})}),(0,z.jsxs)("form",{onSubmit:y,children:[(0,z.jsxs)(eN.A.Content,{children:[(0,z.jsx)("h2",{className:"inter-large-semibold mb-2xsmall",children:o("product-thumbnail-section-thumbnail","Thumbnail")}),(0,z.jsx)("p",{className:"inter-base-regular text-grey-50 mb-large",children:o("product-thumbnail-section-used-to-represent-your-product-during-checkout-social-sharing-and-more","Used to represent your product during checkout, social sharing and more.")}),(0,z.jsx)(dG,{form:(0,eL.m)(u,"thumbnail")})]}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"flex w-full justify-end gap-x-2",children:[(0,z.jsx)(W.A,{size:"small",variant:"secondary",type:"button",onClick:h,children:o("product-thumbnail-section-cancel","Cancel")}),(0,z.jsx)(W.A,{size:"small",variant:"primary",type:"submit",disabled:!d,loading:c,children:o("product-thumbnail-section-save-and-close","Save and close")})]})})]})]})})},dQ=function(e){var t=e.product,r=(0,ei.Bd)().t,n=uj(t.id),i=n.onUpdate,a=n.updating,o=(0,n5.A)(),l=o.state,s=o.toggle,c=o.close,u=(0,eC.A)();return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(eM,{title:"Thumbnail",customActions:(0,z.jsxs)("div",{className:"gap-x-xsmall flex items-center",children:[(0,z.jsx)(W.A,{variant:"secondary",size:"small",type:"button",onClick:s,children:t.thumbnail?r("product-thumbnail-section-edit","Edit"):r("product-thumbnail-section-upload","Upload")}),t.thumbnail&&(0,z.jsx)(dU,{onDelete:function(){i({thumbnail:null},{onSuccess:function(){u(r("product-thumbnail-section-success","Success"),r("product-thumbnail-section-successfully-deleted-thumbnail","Successfully deleted thumbnail"),"success")},onError:function(e){u(r("product-thumbnail-section-error","Error"),(0,eA.u)(e),"error")}})},deleting:a})]}),children:(0,z.jsx)("div",{className:(0,en.default)("gap-xsmall mt-base grid grid-cols-3",{hidden:!t.thumbnail}),children:t.thumbnail&&(0,z.jsx)("div",{className:"flex aspect-square items-center justify-center",children:(0,z.jsx)("img",{src:t.thumbnail,alt:"Thumbnail for ".concat(t.title),className:"rounded-rounded max-h-full max-w-full object-contain"})})})}),(0,z.jsx)(d$,{product:t,open:l,onClose:c})]})},dK=function(){var e=(0,H.useNavigate)(),t=(0,ei.Bd)().t,r=(0,J.useAdminProducts)({is_giftcard:!0},{keepPreviousData:!0}),n=r.products,i=r.error,a=null==n?void 0:n[0],o=(0,tY.X)().getWidgets;if(!a)return(0,z.jsx)("div",{className:"flex h-screen w-full items-center justify-center",children:(0,z.jsx)(X.A,{variant:"secondary",size:"large"})});if(i){var l=t$(i);if(l&&404===l.status)return e("/404"),null;throw i}return(0,z.jsxs)("div",{className:"pb-5xlarge",children:[(0,z.jsx)(eo,{path:"/a/gift-cards",label:t("manage-back-to-gift-cards","Back to Gift Cards"),className:"mb-xsmall"}),(0,z.jsxs)("div",{className:"gap-x-base grid grid-cols-12",children:[(0,z.jsxs)("div",{className:"gap-y-xsmall col-span-8 flex flex-col",children:[o("gift_card.details.before").map(function(e,t){return(0,z.jsx)(es.A,{widget:e,injectionZone:"gift_card.details.before",entity:a},t)}),(0,z.jsx)(dS,{product:a}),(0,z.jsx)(ug,{giftCard:a}),(0,z.jsx)(uD,{product:a}),o("gift_card.details.after").map(function(e,t){return(0,z.jsx)(es.A,{widget:e,injectionZone:"gift_card.details.after",entity:a},t)}),(0,z.jsx)(dq,{product:a})]}),(0,z.jsxs)("div",{className:"gap-y-xsmall col-span-4 flex flex-col",children:[(0,z.jsx)(dQ,{product:a}),(0,z.jsx)(dB,{product:a})]})]})]})},dZ=function(e){var t=e.title,r=e.subtitle;return(0,z.jsxs)("div",{className:"mb-xlarge",children:[(0,z.jsx)("h1",{className:"inter-2xlarge-semibold mb-xsmall",children:t}),(0,z.jsx)("h2",{className:"inter-base-regular text-grey-50",children:r})]})};var dJ=function(e){var t=e.title,r=e.thumbnail,n=e.actions,i=e.children;return(0,z.jsx)("div",{className:"rounded-rounded bg-grey-0 border-grey-20 p-base medium:p-xlarge w-full border",children:(0,z.jsxs)("div",{className:"gap-large flex items-start",children:[r&&(0,z.jsx)("div",{className:"rounded-base h-[72px] min-h-[72px] w-[72px] min-w-[72px] overflow-hidden",children:(0,z.jsx)("img",{src:r,alt:"Thumbnail",className:"h-full w-full object-cover"})}),(0,z.jsxs)("div",{className:"w-full",children:[(0,z.jsxs)("div",{className:"flex items-center justify-between pb-2",children:[(0,z.jsx)("p",{className:"inter-large-semibold",children:t}),(0,z.jsx)(em,{actions:n})]}),i]})]})})};dJ.Description=function(e){var t=e.cta,r=e.children;return(0,z.jsxs)("div",{children:[(0,z.jsx)("p",{className:"inter-small-regular text-grey-50 line-clamp-2 max-w-[460px]",children:r}),t&&(0,z.jsx)("button",{className:"text-violet-60 inter-small-semibold mt-base",onClick:t.onClick,children:t.label})]})},dJ.Footer=function(e){var t=e.children;return(0,z.jsx)("div",{className:"mt-base",children:t})};let dX=function(e){var t=e.tags,r=e.badgeVariant,n=(0,U.useRef)(null),i=Math.max(Math.floor(nf(n)/70)-1,1),a=t.slice(0,i),o=t.length-i;return(0,z.jsxs)("div",{className:"gap-x-2xsmall flex w-1/2 items-center",ref:n,children:[null==a?void 0:a.map(function(e,t){return(0,z.jsx)(rk.A,{className:"mr-2xsmall",variant:r,children:e},t)}),o>0&&(0,z.jsxs)(rk.A,{variant:"default",children:["+",o]})]})},d0=function(e){var t=e.title,r=e.status,n=e.thumbnail,i=e.description,a=e.variants,o=e.defaultCurrency,l=e.onEdit,s=e.onUnpublish,c=e.onDelete,u=(0,ei.Bd)().t,d=[{label:u("gift-card-banner-edit","Edit"),onClick:l,icon:(0,z.jsx)(ec,{size:16})},{label:"published"===r?u("gift-card-banner-unpublish","Unpublish"):u("gift-card-banner-publish","Publish"),onClick:s,icon:(0,z.jsx)(aM,{size:16})},{label:u("gift-card-banner-delete","Delete"),onClick:c,icon:(0,z.jsx)(eu,{size:16}),variant:"danger"}],f=(0,U.useMemo)(function(){return a.map(function(e){var t=e.prices.find(function(e){return e.currency_code===o});return t?"".concat((0,rg.kP)(o,t.amount)," ").concat(o.toUpperCase()):""}).filter(Boolean)},[a,o]);return(0,z.jsxs)(dJ,{title:t,thumbnail:n,actions:d,children:[(0,z.jsx)(dJ.Description,{children:i}),(0,z.jsx)(dJ.Footer,{children:(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,z.jsx)(dX,{tags:f,badgeVariant:"default"}),(0,z.jsx)(tv.A,{variant:"published"===r?"success":"danger",title:"published"===r?u("gift-card-banner-published","Published"):u("gift-card-banner-unpublished","Unpublished")})]})})]})},d1=function(){var e=(0,ei.Bd)().t;return[(0,U.useMemo)(function(){return[{Header:(0,z.jsx)("div",{className:"pl-2",children:e("gift-card-table-code","Code")}),accessor:"code",Cell:function(e){var t=e.cell.value,r=e.index;return(0,z.jsx)(td.Cell,{className:"text-grey-90 group-hover:text-violet-60 w-[20%] pl-2",children:t},r)}},{Header:e("gift-card-table-order","Order"),accessor:"order",Cell:function(e){var t=e.cell.value,r=e.index;return(0,z.jsx)(td.Cell,{className:"text-grey-90 group-hover:text-violet-60 w-[10%] pl-2",children:t&&(null==t?void 0:t.display_id)?"#".concat(t.display_id):(0,z.jsx)("span",{className:"text-grey-90",children:"-"})},r)}},{Header:e("gift-card-table-original-amount","Original Amount"),accessor:"value",Cell:function(e){var t=e.row,r=e.cell.value,n=e.index;return(0,z.jsx)(td.Cell,{children:t.original.region?(0,rg.Q2)({amount:r,currency:t.original.region.currency_code}):(0,z.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,z.jsx)("span",{children:"N / A"}),(0,z.jsx)(e0.A,{content:"Region has been deleted"})]})},n)}},{Header:e("gift-card-table-balance","Balance"),accessor:"balance",Cell:function(t){var r=t.row,n=t.cell.value,i=t.index;return(0,z.jsx)(td.Cell,{children:n?r.original.region?(0,rg.Q2)({amount:n,currency:r.original.region.currency_code}):(0,z.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,z.jsx)("span",{children:"N / A"}),(0,z.jsx)(e0.A,{content:e("gift-card-table-region-has-been-deleted","Region has been deleted")})]}):(0,z.jsx)(tv.A,{title:e("gift-card-table-none","None"),variant:"danger"})},i)}},{Header:function(){return(0,z.jsx)("div",{className:"rounded-rounded flex w-full justify-end pr-2",children:e("gift-card-table-created","Created")})},accessor:"created_at",Cell:function(e){var t=e.cell.value,r=e.index;return(0,z.jsx)(td.Cell,{className:"pr-2",children:(0,z.jsx)("div",{className:"rounded-rounded flex w-full justify-end",children:re()(t).format("MMM Do YYYY")})},r)}}]},[])]};function d2(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function d3(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function d5(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function d6(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||d8(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d4(e){return function(e){if(Array.isArray(e))return d2(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||d8(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d8(e,t){if(e){if("string"==typeof e)return d2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d2(e,t)}}var d7=["status","fulfillment_status","payment_status","created_at","q","offset","limit"],d9={incomplete:{fulfillment_status:["not_fulfilled","fulfilled"],payment_status:["awaiting"]},complete:{fulfillment_status:["shipped"],payment_status:["captured"]}},fe=function(e,t){switch(t.type){case"setFilters":var r;return d5(d3({},e),{fulfillment:t.payload.fulfillment,payment:t.payload.payment,status:t.payload.status,date:t.payload.date,query:null==t?void 0:null===(r=t.payload)||void 0===r?void 0:r.query});case"setQuery":return d5(d3({},e),{query:t.payload});case"setDate":var n=e.date;return d5(d3({},e),{date:n});case"setOffset":return d5(d3({},e),{offset:t.payload});case"reset":return t.payload;default:return e}},ft=function(e,t){if(e.size!==t.size)return!1;var r=!0,n=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var l=a.value;if(!t.has(l))return!1}}catch(e){n=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(n)throw i}}return!0},fr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e&&"?"===e[0]&&(e=e.substring(1));var r=(0,U.useMemo)(function(){return fa(e,t)},[e,t]),n=(0,U.useMemo)(function(){var e=localStorage.getItem("GiftCards::filters");if(e){var t=JSON.parse(e);if(t)return Object.entries(t).map(function(e){var t=d6(e,2),r=t[0];return{label:r,value:r,removable:!0,representationString:t[1]}})}return[]},[]),i=d6((0,U.useReducer)(fe,r),2),a=i[0],o=i[1],l=d6((0,U.useState)(n),2),s=l[0],c=l[1],u=function(){var e=d3({},a.additionalFilters),t=!0,r=!1,n=void 0;try{for(var i,o=Object.entries(a)[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var l,s=d6(i.value,2),c=s[0],u=s[1];"query"===c?u&&"string"==typeof u&&(e.q=u):"offset"===c||"limit"===c?e[c]=u:u.open&&("date"===c?e[fi[c]]=(l=u.filter,null===l?l:Object.entries(l).reduce(function(e,t){var r=d6(t,2),n=r[0],i=r[1];return i.includes("|")?e[n]=iB(i):e[n]=i,e},{})):e[fi[c]]=u.filter)}}catch(e){r=!0,n=e}finally{try{t||null==o.return||o.return()}finally{if(r)throw n}}return e},d=function(e){var t=null!=e?e:a,r={},n=!0,i=!1,o=void 0;try{for(var l,s=Object.entries(t)[Symbol.iterator]();!(n=(l=s.next()).done);n=!0){var c=d6(l.value,2),u=c[0],d=c[1];"query"===u?d&&"string"==typeof d&&(r.q=d):"offset"===u||"limit"===u?r[u]=d:d.open&&(r[fi[u]]=d.filter)}}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r},f=function(){var e=d();return t8().stringify(e,{skipNulls:!0})},p=(0,U.useMemo)(function(){return u()},[a]),m=(0,U.useMemo)(function(){return d()},[a]),h=(0,U.useMemo)(function(){return f()},[a]),y=(0,U.useMemo)(function(){var e=(0,t6.omit)(m,["limit","offset"]),t=t8().stringify(e),r=s.find(function(e){return e.representationString===t});if(r)return r.value;var n=!0,i=!1,a=void 0;try{for(var o,l=Object.entries(d9)[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var c=d6(o.value,2),u=c[0],d=c[1],f=!0;if(Object.keys(e).length===Object.keys(d).length){var p=!0,h=!1,y=void 0;try{for(var b,v=Object.entries(d)[Symbol.iterator]();!(p=(b=v.next()).done);p=!0){var g=d6(b.value,2),x=g[0],j=g[1];if(!(f=x in e&&(Array.isArray(j)?Array.isArray(e[x])&&ft(new Set(e[x]),new Set(j)):e[x]===j)))break}}catch(e){h=!0,y=e}finally{try{p||null==v.return||v.return()}finally{if(h)throw y}}if(f)return u}}}catch(e){i=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(i)throw a}}return null},[m,s]),b=(0,U.useMemo)(function(){return[{label:"Complete",value:"complete"},{label:"Incomplete",value:"incomplete"}].concat(d4(s))},[s]);return d5(d3({},a),{filters:d3({},a),removeTab:function(e){var t=localStorage.getItem("GiftCards::filters"),r=null;t&&(r=JSON.parse(t)),r&&(delete r[e],localStorage.setItem("GiftCards::filters",JSON.stringify(r))),c(function(t){return t.filter(function(t){return t.value!==e})})},saveTab:function(e,t){var r=d(d3({},t)),n=(0,t6.omit)(r,["limit","offset"]),i=t8().stringify(n,{skipNulls:!0}),a=localStorage.getItem("GiftCards::filters"),l=null;if(a&&(l=JSON.parse(a)),l)l[e]=i,localStorage.setItem("GiftCards::filters",JSON.stringify(l));else{var s={};s[e]=i,localStorage.setItem("GiftCards::filters",JSON.stringify(s))}c(function(t){return d4(t).concat([{label:e,value:e,representationString:i,removable:!0}])}),o({type:"setFilters",payload:t})},setTab:function(e){var t=null;if(e in d9)t=d9[e];else{var r=s.find(function(t){return t.value===e});r&&(t=t8().parse(r.representationString))}if(t){var n=d5(d3({},a),{date:{open:!1,filter:null},payment:{open:!1,filter:null},fulfillment:{open:!1,filter:null},status:{open:!1,filter:null}}),i=!0,l=!1,c=void 0;try{for(var u,d=Object.entries(t)[Symbol.iterator]();!(i=(u=d.next()).done);i=!0){var f=d6(u.value,2),p=f[0],m=f[1];n[fn[p]]={open:!0,filter:m}}}catch(e){l=!0,c=e}finally{try{i||null==d.return||d.return()}finally{if(l)throw c}}o({type:"setFilters",payload:n})}},availableTabs:b,activeFilterTab:y,representationObject:m,representationString:h,queryObject:p,paginate:function(e){e>0?o({type:"setOffset",payload:a.offset+a.limit}):o({type:"setOffset",payload:Math.max(a.offset-a.limit,0)})},getQueryObject:u,getQueryString:function(){var e=u();return t8().stringify(e,{skipNulls:!0})},setQuery:function(e){o({type:"setQuery",payload:e})},setFilters:function(e){o({type:"setFilters",payload:e})},setDefaultFilters:function(e){o({type:"setDefaults",payload:e})},setDateFilter:function(e){o({type:"setDate",payload:e})},setFulfillmentFilter:function(e){o({type:"setFulfillment",payload:e})},setPaymentFilter:function(e){o({type:"setPayment",payload:e})},setStatusFilter:function(e){o({type:"setStatus",payload:e})},reset:function(){o({type:"setFilters",payload:d5(d3({},a),{offset:0,payment:{open:!1,filter:null},fulfillment:{open:!1,filter:null},status:{open:!1,filter:null},date:{open:!1,filter:null},query:null})})}})},fn={status:"status",fulfillment_status:"fulfillment",payment_status:"payment",created_at:"date"},fi={status:"status",fulfillment:"fulfillment_status",payment:"payment_status",date:"created_at"},fa=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r={status:{open:!1,filter:null},fulfillment:{open:!1,filter:null},payment:{open:!1,filter:null},date:{open:!1,filter:null},offset:0,limit:15,additionalFilters:t};if(e){var n=t8().parse(e),i=!0,a=!1,o=void 0;try{for(var l,s=Object.entries(n)[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=d6(l.value,2),u=c[0],d=c[1];if(d7.includes(u))switch(u){case"offset":"string"==typeof d&&(r.offset=parseInt(d));break;case"limit":"string"==typeof d&&(r.limit=parseInt(d));break;case"q":"string"==typeof d&&(r.query=d);break;case"status":("string"==typeof d||Array.isArray(d))&&(r.status={open:!0,filter:d});break;case"fulfillment_status":("string"==typeof d||Array.isArray(d))&&(r.fulfillment={open:!0,filter:d});break;case"payment_status":("string"==typeof d||Array.isArray(d))&&(r.payment={open:!0,filter:d});break;case"created_at":r.date={open:!0,filter:d}}}}catch(e){a=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}}return r};function fo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function fl(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fs(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){fl(e,t,r[t])})}return e}function fc(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function fu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return fo(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fo(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var fd={};let ff=function(){var e=(0,H.useLocation)(),t=(0,ei.Bd)().t,r=fr(e.search,fd),n=r.reset,i=r.paginate,a=r.setQuery,o=r.queryObject,l=r.representationObject,s=parseInt(null==o?void 0:o.offset)||0,c=parseInt(o.limit)||15,u=fu((0,U.useState)(null==o?void 0:o.query),2),d=u[0],f=u[1],p=fu((0,U.useState)(0),2),m=p[0],h=p[1],y=(0,J.useAdminGiftCards)(o,{keepPreviousData:!0}),b=y.gift_cards,v=y.isLoading,g=y.count;(0,U.useEffect)(function(){h(Math.ceil(g/o.limit))},[b]);var x=fu(d1(),1)[0],j=(0,e4.useTable)({columns:x,data:b||[],manualPagination:!0,initialState:{pageSize:c,pageIndex:s/c},pageCount:m,autoResetPage:!1},e4.usePagination),w=j.getTableProps,O=j.getTableBodyProps,S=j.headerGroups,P=j.rows,C=j.prepareRow,A=j.canPreviousPage,N=j.canNextPage,k=j.pageCount,_=j.gotoPage,E=j.nextPage,I=j.previousPage,D=j.state.pageIndex;(0,U.useEffect)(function(){var e=setTimeout(function(){d?(a(d),_(0)):n()},400);return function(){return clearTimeout(e)}},[d]);var T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=t8().stringify(e);window.history.replaceState("/a/gift-cards","","".concat("?".concat(t)))},M=function(){(0,t6.isEmpty)(l)?T({offset:0,limit:15}):T(l)};return(0,U.useEffect)(function(){M()},[l]),(0,z.jsx)(tb,{isLoading:v,hasPagination:!0,numberOfRows:o.limit,pagingState:{count:g,offset:o.offset,pageSize:o.offset+P.length,title:t("gift-card-table-gift-cards","Gift cards"),currentPage:D+1,pageCount:k,nextPage:function(){N&&(i(1),E())},prevPage:function(){A&&(i(-1),I())},hasNext:N,hasPrev:A},children:(0,z.jsxs)(td,fc(fs({filteringOptions:null,enableSearch:!0,handleSearch:f,searchValue:d},w()),{className:(0,en.default)(fl({},"relative",v)),children:[(0,z.jsx)(td.Head,{children:null==S?void 0:S.map(function(e){return(0,z.jsx)(td.HeadRow,fc(fs({},e.getHeaderGroupProps()),{children:e.headers.map(function(e){return(0,z.jsx)(td.HeadCell,fc(fs({},e.getHeaderProps()),{children:e.render("Header")}))})}))})}),v||!b?(0,z.jsx)(td.Body,fc(fs({},O()),{children:(0,z.jsx)(td.Row,{children:(0,z.jsx)(td.Cell,{colSpan:x.length,children:(0,z.jsx)("div",{className:"absolute mt-10 flex h-full w-full items-center justify-center",children:(0,z.jsx)("div",{className:"",children:(0,z.jsx)(X.A,{size:"large",variant:"secondary"})})})})})})):(0,z.jsx)(td.Body,fc(fs({},O()),{children:P.map(function(e){return C(e),(0,z.jsx)(td.Row,fc(fs({color:"inherit",linkTo:e.original.id},e.getRowProps()),{className:"group",children:e.cells.map(function(e,t){return e.render("Cell",{index:t,key:t})})}))})}))]}))})};function fp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}!function(e){e.DRAFT="draft",e.PROPOSED="proposed",e.PUBLISHED="published",e.REJECTED="rejected"}(p||(p={})),function(e){e.REGION="region",e.RATE="rate"}(m||(m={}));let fm=function(e){var t,r,n=e.form,i=n.register,a=n.path,o=n.formState.errors;return(0,z.jsxs)("div",{className:"gap-y-large flex flex-col",children:[(0,z.jsx)(e1.A,(t=fp({label:"Email"},i(a("email"),{required:n8.A.required("Email"),pattern:n8.A.email("Email")})),r=r={required:!0,errors:o},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t)),(0,z.jsx)(sw.A,fp({label:"Personal Message",placeholder:"Write a personal message here",rows:7},i(a("message"))))]})},fh=function(e){var t=e.onClose,r=e.open,n=(0,ei.Bd)().t,i=(0,eR.mN)(),a=i.handleSubmit,o=i.reset,l=i.control,s=i.formState.isDirty,c=(0,eR.FH)({control:l,name:"region.region_id.currency_code",defaultValue:"usd"}),u=(0,eC.A)(),d=(0,J.useAdminCreateGiftCard)(),f=d.mutate,p=d.isLoading;(0,U.useEffect)(function(){r&&o()},[r,o]);var m=a(function(e){f({region_id:e.region.region_id.value,value:e.balance.amount,ends_at:e.ends_at.ends_at||void 0,metadata:{email:e.receiver.email,personal_message:e.receiver.message}},{onSuccess:function(){u(n("gift-cards-created-gift-card","Created gift card"),n("gift-cards-custom-gift-card-was-created-successfully","Custom gift card was created successfully"),"success"),t()},onError:function(e){u(n("gift-cards-error","Error"),(0,eA.u)(e),"error")}})});return(0,z.jsx)(eN.A,{open:r,handleClose:t,children:(0,z.jsxs)(eN.A.Body,{children:[(0,z.jsx)(eN.A.Header,{handleClose:t,children:(0,z.jsx)("h2",{className:"inter-xlarge-semibold",children:n("gift-cards-custom-gift-card","Custom Gift Card")})}),(0,z.jsxs)("form",{onSubmit:m,children:[(0,z.jsx)(eN.A.Content,{children:(0,z.jsxs)("div",{className:"gap-y-xlarge flex flex-col",children:[(0,z.jsxs)("div",{children:[(0,z.jsx)("h2",{className:"inter-base-semibold mb-base",children:n("gift-cards-details","Details")}),(0,z.jsxs)("div",{className:"gap-x-xsmall grid grid-cols-2",children:[(0,z.jsx)(c4,{form:(0,eL.m)(i,"region")}),(0,z.jsx)(c9,{form:(0,eL.m)(i,"balance"),currencyCode:c})]})]}),(0,z.jsx)(c6,{form:(0,eL.m)(i,"ends_at")}),(0,z.jsxs)("div",{children:[(0,z.jsx)("h2",{className:"inter-base-semibold mb-base",children:n("gift-cards-receiver","Receiver")}),(0,z.jsx)(fm,{form:(0,eL.m)(i,"receiver")})]})]})}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"gap-x-xsmall flex w-full justify-end",children:[(0,z.jsx)(W.A,{variant:"secondary",onClick:t,size:"small",type:"button",children:n("gift-cards-cancel","Cancel")}),(0,z.jsx)(W.A,{variant:"primary",type:"submit",size:"small",disabled:p||!s,loading:p,children:n("gift-cards-create-and-send","Create and send")})]})})]})]})})};function fy(e){var t,r,n;null===(n=document)||void 0===n||null===(r=n.getElementsByName(e))||void 0===r||null===(t=r[0])||void 0===t||t.focus()}function fb(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function fv(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}let fg=function(e){var t,r,n=e.onClose,i=(0,J.useAdminStore)().store,a=(0,J.useAdminProducts)().refetch,o=(0,J.useAdminCreateProduct)(),l=o.mutate,s=o.isLoading,c=(0,H.useNavigate)(),u=(0,eC.A)(),d=(0,ei.Bd)().t,f=(0,eR.mN)({shouldUnregister:!0}),m=f.register,h=f.setValue,y=f.handleSubmit,b=f.control,v=(0,eR.jz)({control:b,name:"denominations"}),g=v.fields,x=v.append,j=v.remove,w=(0,eR.FH)({control:b,name:"thumbnail"}),O=(t=function(e){var t,r;return function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,function(n){switch(n.label){case 0:if(!e.title.trim())return u(d("gift-cards-error","Error"),d("gift-cards-please-enter-a-name-for-the-gift-card","Please enter a name for the Gift Card"),"error"),fy("name"),[2];if(!(null===(t=e.denominations)||void 0===t?void 0:t.length))return u(d("gift-cards-error","Error"),d("gift-cards-please-add-at-least-one-denomination","Please add at least one denomination"),"error"),fy("add-denomination"),[2];if(r=[],!w)return[3,2];return[4,tF.uploads.create([w.nativeFile]).then(function(e){return e.data.uploads.map(function(e){return e.url})})];case 1:r=n.sent(),n.label=2;case 2:return l({is_giftcard:!0,title:e.title,description:e.description,discountable:!1,options:[{title:d("gift-cards-denominations","Denominations")}],variants:e.denominations.map(function(e,t){return{title:"".concat(t+1),inventory_quantity:0,manage_inventory:!1,prices:[{amount:e.amount,currency_code:null==i?void 0:i.default_currency_code}],options:[{value:"".concat(e.amount)}]}}),images:r.length?r:void 0,thumbnail:r.length?r[0]:void 0,status:p.PUBLISHED},{onSuccess:function(){u(d("gift-cards-success","Success"),d("gift-cards-successfully-created-gift-card","Successfully created Gift Card"),"success"),a(),c("/a/gift-cards/manage")},onError:function(e){u(d("gift-cards-error","Error"),(0,eA.u)(e),"error")}}),[2]}})},r=function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function o(e){fb(a,n,i,o,l,"next",e)}function l(e){fb(a,n,i,o,l,"throw",e)}o(void 0)})},function(e){return r.apply(this,arguments)});return(0,z.jsx)(eN.A,{handleClose:n,children:(0,z.jsx)("form",{onSubmit:y(O,function(e){return console.log(e)}),children:(0,z.jsxs)(eN.A.Body,{children:[(0,z.jsx)(eN.A.Header,{handleClose:n,children:(0,z.jsx)("div",{children:(0,z.jsx)("h1",{className:"inter-xlarge-semibold",children:d("gift-cards-create-gift-card","Create Gift Card")})})}),(0,z.jsxs)(eN.A.Content,{children:[(0,z.jsx)("div",{className:"mb-base",children:(0,z.jsx)("h3",{className:"inter-base-semibold",children:d("gift-cards-gift-card-details","Gift Card Details")})}),(0,z.jsxs)("div",{className:"gap-y-base flex flex-col",children:[(0,z.jsx)(e1.A,fv({label:d("gift-cards-name","Name"),required:!0,placeholder:d("gift-cards-the-best-gift-card","The best Gift Card")},m("title",{required:!0}))),(0,z.jsx)(sw.A,fv({label:d("gift-cards-description","Description"),placeholder:d("gift-cards-the-best-gift-card-of-all-time","The best Gift Card of all time")},m("description")))]}),(0,z.jsxs)("div",{className:"mt-xlarge",children:[(0,z.jsx)("h3",{className:"inter-base-semibold",children:d("gift-cards-thumbnail","Thumbnail")}),(0,z.jsx)("div",{className:"mt-base h-[80px]",children:w?(0,z.jsxs)("div",{className:"flex items-center gap-x-6",children:[(0,z.jsx)("img",{src:w.url,alt:"",className:"rounded-base h-20 w-20 object-cover object-center"}),(0,z.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,z.jsx)("span",{className:"inter-small-regular",children:w.name}),(0,z.jsx)("div",{children:(0,z.jsx)("button",{className:"inter-small-semibold text-rose-50",type:"button",onClick:function(){return h("thumbnail",null)},children:d("gift-cards-delete","Delete")})})]})]}):(0,z.jsx)(dI,{filetypes:["image/gif","image/jpeg","image/png","image/webp"],onFileChosen:function(e){var t=e[0];h("thumbnail",{url:URL.createObjectURL(t),name:t.name,size:t.size,nativeFile:t})},placeholder:d("gift-cards-size-recommended","1200 x 1600 (3:4) recommended, up to 10MB each")})})]}),(0,z.jsxs)("div",{className:"mt-xlarge",children:[(0,z.jsxs)("h3",{className:"inter-base-semibold mb-base",children:[d("gift-cards-denominations","Denominations"),(0,z.jsx)("span",{className:"text-rose-50",children:"*"})]}),(0,z.jsx)("div",{className:"gap-y-xsmall flex flex-col",children:g.map(function(e,t){return(0,z.jsxs)("div",{className:"gap-x-base last:mb-large flex items-end",children:[(0,z.jsx)(cW.Root,{currentCurrency:null==i?void 0:i.default_currency_code,readOnly:!0,size:"medium",children:(0,z.jsx)(eR.xI,{control:b,name:"denominations.".concat(t,".amount"),rules:{required:!0,shouldUnregister:!0},render:function(e){var t=e.field,r=t.value,n=t.onChange,i=t.ref;return(0,z.jsx)(cW.Amount,{label:d("gift-cards-amount","Amount"),amount:r||void 0,onChange:n,ref:i})}})}),(0,z.jsx)(W.A,{variant:"ghost",size:"large",className:"text-grey-40 h-10 w-10",type:"button",onClick:function(){return j(t)},children:(0,z.jsx)(eu,{size:20})})]},e.id)})}),(0,z.jsxs)(W.A,{name:"add-denomination",variant:"ghost",size:"small",onClick:function(){return x({amount:void 0})},type:"button",children:[(0,z.jsx)(n_.A,{size:20}),d("gift-cards-add-denomination","Add Denomination")]})]})]}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"flex w-full items-center justify-end",children:[(0,z.jsx)(W.A,{type:"submit",variant:"ghost",size:"small",className:"w-eventButton",onClick:n,children:d("gift-cards-cancel","Cancel")}),(0,z.jsx)(W.A,{type:"submit",variant:"primary",size:"small",className:"w-eventButton",loading:s,disabled:s,children:d("gift-cards-create-publish","Create & Publish")})]})})]})})})};function fx(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function fj(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function fw(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function fO(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}let fS=function(){var e,t,r=(0,ei.Bd)().t,n=(0,J.useAdminProducts)({is_giftcard:!0}),i=n.products,a=n.isLoading,o=(0,J.useAdminStore)().store,l=function(e){if(Array.isArray(e))return e}(e=(0,U.useState)(!1))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,2)||function(e,t){if(e){if("string"==typeof e)return fx(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fx(e,2)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),s=l[0],c=l[1],u=null==i?void 0:i[0],d=(0,H.useNavigate)(),f=(0,eC.A)(),m=(0,J.useAdminUpdateProduct)(null==u?void 0:u.id),h=(0,J.useAdminDeleteProduct)(null==u?void 0:u.id),y=(0,n5.A)(),b=y.state,v=y.close,g=y.open,x=(0,n5.A)();x.state,x.close,x.open;var j=(0,n5.A)(),w=j.state,O=j.close,S=j.open,P=function(){h.mutate(void 0,{onSuccess:function(){d("/a/gift-cards")}})},C=[{label:r("gift-cards-custom-gift-card","Custom Gift Card"),onClick:g,icon:(0,z.jsx)(n_.A,{size:20})}],A=(0,U.useMemo)(function(){return u&&o?fO(fw({},u),{defaultCurrency:o.default_currency_code}):null},[u,o]),N=(0,tY.X)().getWidgets;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("div",{className:"flex flex-col",children:[(0,z.jsx)(dZ,{title:r("gift-cards-gift-cards","Gift Cards"),subtitle:r("gift-cards-manage","Manage the Gift Cards of your Medusa store")}),a?(0,z.jsx)("div",{className:"rounded-rounded border-grey-20 flex h-44 w-full items-center justify-center border",children:(0,z.jsx)(X.A,{variant:"secondary",size:"large"})}):(0,z.jsxs)("div",{className:"gap-y-xsmall flex flex-col",children:[N("gift_card.list.before").map(function(e,t){return(0,z.jsx)(es.A,{widget:e,injectionZone:"gift_card.list.before",entity:null},t)}),A?(0,z.jsx)(d0,fO(fw({},A),{onDelete:S,onEdit:function(){return d("/a/gift-cards/manage")},onUnpublish:function(){var e=p.PUBLISHED;(null==u?void 0:u.status)==="published"&&(e=p.DRAFT),m.mutate({status:e},{onSuccess:function(){return f(r("gift-cards-success","Success"),r("gift-cards-successfully-updated-gift-card","Successfully updated Gift Card"),"success")},onError:function(e){return f(r("gift-cards-error","Error"),(0,eA.u)(e),"error")}})}})):(0,z.jsx)(dJ,{title:r("gift-cards-are-you-ready-to-sell-your-first-gift-card","Are you ready to sell your first Gift Card?"),children:(0,z.jsx)(dJ.Description,{cta:{label:r("gift-cards-create-gift-card","Create Gift Card"),onClick:function(){return c(!0)}},children:r("gift-cards-no-gift-card-has-been-added-yet","No Gift Card has been added yet.")})}),(0,z.jsx)(eD,{title:r("gift-cards-history","History"),subtitle:r("gift-cards-see-the-history-of-purchased-gift-cards","See the history of purchased Gift Cards"),actionables:C,children:(0,z.jsx)(ff,{})}),N("gift_card.list.after").map(function(e,t){return(0,z.jsx)(es.A,{widget:e,injectionZone:"gift_card.list.after",entity:null},t)})]})]}),(0,z.jsx)(fh,{onClose:v,open:b}),s&&(0,z.jsx)(fg,{onClose:function(){return c(!s)}}),w&&(0,z.jsx)(e_,{handleClose:O,onDelete:(t=function(){return function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,function(e){return[2,P()]})},function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function o(e){fj(a,n,i,o,l,"next",e)}function l(e){fj(a,n,i,o,l,"throw",e)}o(void 0)})}),successText:r("gift-cards-successfully-deleted-gift-card","Successfully deleted Gift Card"),confirmText:r("gift-cards-yes-delete","Yes, delete"),heading:r("gift-cards-delete-gift-card","Delete Gift Card")}),(0,z.jsx)(el,{})]})},fP=function(){var e=(0,(0,V.Y)().getNestedRoutes)("/gift-cards");return(0,z.jsxs)(H.Routes,{children:[(0,z.jsx)(H.Route,{path:"/",element:(0,z.jsx)(fS,{})}),(0,z.jsx)(H.Route,{path:"/:id",element:(0,z.jsx)(ur,{})}),(0,z.jsx)(H.Route,{path:"/manage",element:(0,z.jsx)(dK,{})}),e.map(function(e,t){return(0,z.jsx)(H.Route,{path:e.path,element:(0,z.jsx)(Z,{route:e,previousPath:"/gift-cards"})},t)})]})};function fC(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function fA(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function fN(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function fk(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||fE(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f_(e){return function(e){if(Array.isArray(e))return fC(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||fE(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fE(e,t){if(e){if("string"==typeof e)return fC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fC(e,t)}}var fI=["q","offset","limit","location_id"],fD={},fT=function(e,t){switch(t.type){case"setFilters":var r;return fN(fA({},e),{query:null==t?void 0:null===(r=t.payload)||void 0===r?void 0:r.query});case"setQuery":return fN(fA({},e),{query:t.payload});case"setLimit":return fN(fA({},e),{limit:t.payload});case"setOffset":return fN(fA({},e),{offset:t.payload});case"setLocation":return fN(fA({},e),{location:t.payload});case"reset":return t.payload;default:return e}},fM=function(e,t){if(e.size!==t.size)return!1;var r=!0,n=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var l=a.value;if(!t.has(l))return!1}}catch(e){n=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(n)throw i}}return!0},fR=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e&&"?"===e[0]&&(e=e.substring(1));var r=(0,U.useMemo)(function(){return fF(e,t)},[e,t]),n=(0,U.useMemo)(function(){var e=localStorage.getItem("inventory::filters");if(e){var t=JSON.parse(e);if(t)return Object.entries(t).map(function(e){var t=fk(e,2),r=t[0];return{label:r,value:r,removable:!0,representationString:t[1]}})}return[]},[]),i=fk((0,U.useReducer)(fT,r),2),a=i[0],o=i[1],l=fk((0,U.useState)(n),2),s=l[0],c=l[1],u=function(){var e=fA({},a.additionalFilters),t=!0,r=!1,n=void 0;try{for(var i,o=Object.entries(a)[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var l,s=fk(i.value,2),c=s[0],u=s[1];"query"===c?u&&"string"==typeof u&&(e.q=u):"offset"===c||"limit"===c?e[c]=u:u.open?"date"===c?e[fz[c]]=(l=u.filter,null===l?l:Object.entries(l).reduce(function(e,t){var r=fk(t,2),n=r[0],i=r[1];return i.includes("|")?e[n]=iB(i):e[n]=i,e},{})):e[fz[c]]=u.filter:"location"===c&&(e[fz[c]]=u)}}catch(e){r=!0,n=e}finally{try{t||null==o.return||o.return()}finally{if(r)throw n}}return e},d=function(e){var t=null!=e?e:a,r={},n=!0,i=!1,o=void 0;try{for(var l,s=Object.entries(t)[Symbol.iterator]();!(n=(l=s.next()).done);n=!0){var c=fk(l.value,2),u=c[0],d=c[1];"query"===u?d&&"string"==typeof d&&(r.q=d):"offset"===u||"limit"===u||"location"===u?r[fz[u]||u]=d:d.open&&(r[fz[u]]=d.filter)}}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r},f=function(){var e=d();return t8().stringify(e,{skipNulls:!0})},p=(0,U.useMemo)(function(){return u()},[a]),m=(0,U.useMemo)(function(){return d()},[a]),h=(0,U.useMemo)(function(){return f()},[a]),y=(0,U.useMemo)(function(){var e=(0,t6.omit)(m,["limit","offset"]),t=t8().stringify(e),r=s.find(function(e){return e.representationString===t});if(r)return r.value;var n=!0,i=!1,a=void 0;try{for(var o,l=Object.entries(fD)[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var c=fk(o.value,2),u=c[0],d=c[1],f=!0;if(Object.keys(e).length===Object.keys(d).length){var p=!0,h=!1,y=void 0;try{for(var b,v=Object.entries(d)[Symbol.iterator]();!(p=(b=v.next()).done);p=!0){var g=fk(b.value,2),x=g[0],j=g[1];if(!(f=x in e&&(Array.isArray(j)?Array.isArray(e[x])&&fM(new Set(e[x]),new Set(j)):e[x]===j)))break}}catch(e){h=!0,y=e}finally{try{p||null==v.return||v.return()}finally{if(h)throw y}}if(f)return u}}}catch(e){i=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(i)throw a}}return null},[m,s]),b=(0,U.useMemo)(function(){return f_(s)},[s]);return fN(fA({},a),{filters:fA({},a),removeTab:function(e){var t=localStorage.getItem("products::filters"),r=null;t&&(r=JSON.parse(t)),r&&(delete r[e],localStorage.setItem("products::filters",JSON.stringify(r))),c(function(t){return t.filter(function(t){return t.value!==e})})},saveTab:function(e,t){var r=d(fA({},t)),n=(0,t6.omit)(r,["limit","offset"]),i=t8().stringify(n,{skipNulls:!0}),a=localStorage.getItem("inventory::filters"),l=null;if(a&&(l=JSON.parse(a)),l)l[e]=i,localStorage.setItem("inventory::filters",JSON.stringify(l));else{var s={};s[e]=i,localStorage.setItem("inventory::filters",JSON.stringify(s))}c(function(t){var r=t.findIndex(function(t){var r;return(null===(r=t.label)||void 0===r?void 0:r.toLowerCase())===e.toLowerCase()});return -1!==r&&t.splice(r,1),f_(t).concat([{label:e,value:e,representationString:i,removable:!0}])}),o({type:"setFilters",payload:t})},setTab:function(e){var t=null;if(e in fD)t=fD[e];else{var r=s.find(function(t){return t.value===e});r&&(t=t8().parse(r.representationString))}if(t){var n=fA({},a),i=!0,l=!1,c=void 0;try{for(var u,d=Object.entries(t)[Symbol.iterator]();!(i=(u=d.next()).done);i=!0){var f=fk(u.value,2),p=f[0],m=f[1];n[fL[p]]={open:!0,filter:m}}}catch(e){l=!0,c=e}finally{try{i||null==d.return||d.return()}finally{if(l)throw c}}o({type:"setFilters",payload:n})}},availableTabs:b,activeFilterTab:y,representationObject:m,representationString:h,queryObject:p,paginate:function(e){e>0?o({type:"setOffset",payload:a.offset+a.limit}):o({type:"setOffset",payload:Math.max(a.offset-a.limit,0)})},getQueryObject:u,getQueryString:function(){var e=u();return t8().stringify(e,{skipNulls:!0})},setQuery:function(e){o({type:"setQuery",payload:e})},setFilters:function(e){o({type:"setFilters",payload:e})},setDefaultFilters:function(e){o({type:"setDefaults",payload:e})},setLocationFilter:function(e){o({type:"setLocation",payload:e}),o({type:"setOffset",payload:0})},setLimit:function(e){o({type:"setLimit",payload:e})},reset:function(){o({type:"setFilters",payload:fN(fA({},a),{offset:0,query:null})})}})},fL={location_id:"location"},fz={location:"location_id"},fF=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r={location:null!==(l=null==t?void 0:t.location_id)&&void 0!==l?l:"",offset:0,limit:15,additionalFilters:t};if(e){var n=t8().parse(e),i=!0,a=!1,o=void 0;try{for(var l,s,c=Object.entries(n)[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var u=fk(s.value,2),d=u[0],f=u[1];if(fI.includes(d))switch(d){case"offset":"string"==typeof f&&(r.offset=parseInt(f));break;case"limit":"string"==typeof f&&(r.limit=parseInt(f));break;case"location_id":"string"==typeof f&&(r.location=f);break;case"q":"string"==typeof f&&(r.query=f)}}}catch(e){a=!0,o=e}finally{try{i||null==c.return||c.return()}finally{if(a)throw o}}}return r};let fB=function(e){var t=e.location_id,r=(0,ei.Bd)().t;return[(0,U.useMemo)(function(){return[{Header:r("inventory-table-item","Item"),accessor:"title",Cell:function(e){var t,r,n,i,a=e.row.original;return(0,z.jsxs)("div",{className:"flex items-center",children:[(0,z.jsx)("div",{className:"my-1.5 mr-4 flex h-[40px] w-[30px] items-center",children:(null===(r=a.variants[0])||void 0===r?void 0:null===(t=r.product)||void 0===t?void 0:t.thumbnail)?(0,z.jsx)("img",{src:a.variants[0].product.thumbnail,className:"rounded-soft h-full object-cover"}):(0,z.jsx)(nm,{})}),(null===(i=a.variants[0])||void 0===i?void 0:null===(n=i.product)||void 0===n?void 0:n.title)||""]})}},{Header:r("inventory-table-variant","Variant"),Cell:function(e){var t,r=e.row.original;return(0,z.jsx)("div",{children:(null==r?void 0:null===(t=r.variants[0])||void 0===t?void 0:t.title)||"-"})}},{Header:r("inventory-table-sku","SKU"),accessor:"sku",Cell:function(e){return e.cell.value}},{Header:r("inventory-table-reserved","Reserved"),accessor:"reserved_quantity",Cell:function(e){var r=e.row.original,n=(0,H.useNavigate)();return(0,z.jsx)("div",{className:"flex grow",children:(0,z.jsx)(r9.A,{content:(0,z.jsx)(W.A,{size:"small",className:"inter-small-regular w-full",variant:"ghost",onClick:function(){n("/a/inventory/reservations?inventory_item_id%5B0%5D=".concat(r.id).concat(t?"&location_id=".concat(t):""))},children:"Go to reservations"}),children:(0,z.jsx)("div",{children:r.location_levels.reduce(function(e,t){return e+t.reserved_quantity},0)})})})}},{Header:r("inventory-table-in-stock","In stock"),accessor:"stocked_quantity",Cell:function(e){var t=e.row.original;return(0,z.jsx)("div",{className:"bg-green-20",children:t.location_levels.reduce(function(e,t){return e+t.stocked_quantity},0)})}}]},[t])]};function fq(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function fH(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function fU(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function fV(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function fG(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||fW(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fW(e,t){if(e){if("string"==typeof e)return fq(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fq(e,t)}}var fY={},f$=function(e){var t=e.selectedLocation,r=e.onChange,n=(0,J.useAdminStockLocations)(),i=n.stock_locations,a=n.isLoading;(0,U.useEffect)(function(){!t&&!a&&(null==i?void 0:i.length)&&r(i[0].id)},[a,i,r,t]);var o=(0,U.useMemo)(function(){return!a&&i?i.find(function(e){return e.id===t}):null},[t,i,a]);return!a&&i&&o?(0,z.jsx)("div",{className:"h-[40px] w-[200px]",children:(0,z.jsx)(no,{isMulti:!1,onChange:function(e){r(e.value)},options:i.map(function(e){return{label:e.name,value:e.id}}),value:{value:o.id,label:o.name}})}):null},fQ=function(e){var t,r,n,i,a=e.row,o=fV(e,["row"]),l=a.original,s=(0,H.useNavigate)(),c=(0,ei.Bd)().t,u=(0,n5.A)(),d=u.state,f=u.open,p=u.close;return(0,z.jsxs)(td.Row,fU(fH({color:"inherit",onClick:f,clickable:!0,forceDropdown:!0,actions:(n=null===(r=l.variants)||void 0===r?void 0:null===(t=r[0])||void 0===t?void 0:t.product_id,i=[{label:c("inventory-table-actions-adjust-availability","Adjust Availability"),onClick:f}],n?[{label:c("inventory-table-view-product","View Product"),onClick:function(){return s("/a/products/".concat(n))}}].concat(function(e){if(Array.isArray(e))return fq(e)}(i)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(i)||fW(i)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()):i)},o),{children:[a.cells.map(function(e,t){var r=e.getCellProps(),n=r.key,i=fV(r,["key"]);return(0,U.createElement)(td.Cell,fU(fH({},i),{key:n}),e.render("Cell",{index:t}))}),d&&(0,z.jsx)(fK,{inventory:l,handleClose:p})]}))},fK=function(e){var t,r,n,i,a,o,l,s=e.inventory,c=e.handleClose,u=null===(r=s.variants)||void 0===r?void 0:null===(t=r[0])||void 0===t?void 0:t.id,d=null===(n=s.location_levels)||void 0===n?void 0:n[0],f=(0,ei.Bd)().t,p=(0,J.useAdminVariant)(u||""),m=p.variant,h=p.isLoading,y=(0,J.useAdminUpdateLocationLevel)(s.id),b=y.mutate,v=y.isLoading,g=(0,eC.A)(),x=fG((0,U.useState)((null==d?void 0:d.stocked_quantity)||0),2),j=x[0],w=x[1],O=j===((null==d?void 0:d.stocked_quantity)||0)||!m||!d;return(0,z.jsxs)(eN.A,{handleClose:c,children:[(0,z.jsxs)(eN.A.Body,{children:[(0,z.jsx)(eN.A.Header,{handleClose:c,children:(0,z.jsx)("h1",{className:"inter-large-semibold",children:f("inventory-table-adjust-availability","Adjust availability")})}),(0,z.jsx)(eN.A.Content,{children:h?(0,z.jsx)(X.A,{}):(0,z.jsxs)("div",{className:"grid grid-cols-2",children:[(0,z.jsx)(iX.A,{label:"Item"}),(0,z.jsx)(iX.A,{label:"Quantity"}),(0,z.jsx)("div",{className:"flex flex-col",children:(0,z.jsxs)("span",{className:"pr-base",children:[(0,z.jsx)("div",{className:"float-left my-1.5 mr-4 flex h-[40px] w-[30px] items-center",children:(null==m?void 0:null===(i=m.product)||void 0===i?void 0:i.thumbnail)?(0,z.jsx)("img",{src:null==m?void 0:null===(a=m.product)||void 0===a?void 0:a.thumbnail,className:"rounded-rounded h-full object-cover"}):(0,z.jsx)(nm,{})}),(0,z.jsxs)("div",{className:"flex flex-col",children:[(0,z.jsxs)("span",{className:"truncate",children:[null==m?void 0:null===(o=m.product)||void 0===o?void 0:o.title,(0,z.jsxs)("span",{className:"text-grey-50 truncate",children:["(",s.sku,")"]})]}),(0,z.jsx)("span",{className:"text-grey-50",children:null==m?void 0:null===(l=m.options)||void 0===l?void 0:l.map(function(e){return(0,z.jsx)("span",{children:e.value},e.id)})})]})]})}),(0,z.jsx)(e1.A,{onChange:function(e){return w(e.target.valueAsNumber)},autoFocus:!0,type:"number",placeholder:"0",min:0,value:j})]})})]}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"gap-x-xsmall flex w-full justify-end",children:[(0,z.jsx)(W.A,{size:"small",variant:"ghost",className:"border",onClick:c,children:f("inventory-table-cancel","Cancel")}),(0,z.jsx)(W.A,{size:"small",variant:"primary",disabled:O,loading:v,onClick:function(){b({stockLocationId:d.location_id,stocked_quantity:j},{onSuccess:function(){g(f("inventory-table-success","Success"),f("inventory-table-inventory-item-updated-successfully","Inventory item updated successfully"),"success"),c()},onError:function(e){g("Error",(0,eA.u)(e),"error")}})},children:f("inventory-table-save-and-close","Save and close")})]})})]})};let fZ=function(){var e=(0,J.useAdminStore)().store,t=(0,H.useLocation)(),r=(0,ei.Bd)().t,n=(0,J.useAdminStockLocations)(),i=n.stock_locations,a=n.isLoading,o=(0,U.useMemo)(function(){return e?fU(fH({},fY),{location_id:e.default_location_id}):fY},[e]),l=fR(t.search,o),s=l.reset,c=l.paginate,u=l.setLocationFilter,d=l.setQuery,f=l.queryObject,p=l.representationObject,m=parseInt(f.offset)||0,h=parseInt(f.limit),y=fG((0,U.useState)(f.query),2),b=y[0],v=y[1],g=fG((0,U.useState)(0),2),x=g[0],j=g[1],w=(0,J.useAdminInventoryItems)(fH({},f),{enabled:!!e}),O=w.inventory_items,S=w.isLoading,P=w.count;(0,U.useEffect)(function(){j(Math.ceil(P/f.limit))},[O]);var C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=t8().stringify(e);window.history.replaceState("/a/inventory","","".concat("?".concat(t)))},A=function(){(0,t6.isEmpty)(p)?C({offset:0,limit:15}):C(p)};(0,U.useEffect)(function(){A()},[p]);var N=fG(fB({location_id:f.location_id}),1)[0],k=(0,e4.useTable)({columns:N,data:O||[],manualPagination:!0,initialState:{pageIndex:Math.floor(m/h),pageSize:h},pageCount:x,autoResetPage:!1},e4.usePagination),_=k.getTableProps,E=k.getTableBodyProps,I=k.headerGroups,D=k.rows,T=k.prepareRow,M=k.gotoPage,R=k.canPreviousPage,L=k.canNextPage,F=k.pageCount,B=k.nextPage,q=k.previousPage,V=k.state.pageIndex;return(0,U.useEffect)(function(){var e=setTimeout(function(){b?(d(b),M(0)):void 0!==b&&s()},400);return function(){return clearTimeout(e)}},[b]),(0,z.jsxs)(tb,{hasPagination:!0,pagingState:{count:P||0,offset:m,pageSize:m+D.length,title:r("inventory-table-inventory-items","Inventory Items"),currentPage:V+1,pageCount:F,nextPage:function(){L&&(c(1),B())},prevPage:function(){R&&(c(-1),q())},hasNext:L,hasPrev:R},numberOfRows:h,isLoading:S,children:[(0,z.jsxs)(td,fU(fH({enableSearch:!0,searchClassName:"h-[40px]",handleSearch:v,searchValue:b,tableActions:(0,z.jsx)(f$,{selectedLocation:f.location_id||(null==e?void 0:e.default_location_id),onChange:function(e){u(e),M(0)}})},_()),{children:[(0,z.jsx)(td.Head,{children:null==I?void 0:I.map(function(e){var t=e.getHeaderGroupProps(),r=t.key,n=fV(t,["key"]);return(0,z.jsx)(td.HeadRow,fU(fH({},n),{children:e.headers.map(function(e){var t=e.getHeaderProps(),r=t.key,n=fV(t,["key"]);return(0,z.jsx)(td.HeadCell,fU(fH({className:"min-w-[100px]"},n),{children:e.render("Header")}),r)})}),r)})}),(0,z.jsx)(td.Body,fU(fH({},E()),{children:D.map(function(e){T(e);var t=e.getRowProps(),r=t.key,n=fV(t,["key"]);return(0,z.jsx)(fQ,fH({row:e},n),r)})}))]})),!D.length&&!a&&!(null==i?void 0:i.length)&&(0,z.jsx)("div",{className:"text-grey-50 w-full py-8 text-center",children:"You don't have any stock locations. Add one to see inventory."})]})},fJ=function(e){var t=(0,H.useNavigate)();return(0,z.jsx)(n6,{setActiveView:function(e){"inventory"===e?t("/a/inventory"):t("/a/inventory/".concat(e))},views:["inventory","locations","reservations"],activeView:e.activeView})},fX=function(){return(0,z.jsx)("div",{className:"flex h-full grow flex-col",children:(0,z.jsxs)("div",{className:"flex w-full grow flex-col",children:[(0,z.jsx)(eD,{customHeader:(0,z.jsx)(fJ,{activeView:"inventory"}),className:"h-fit",children:(0,z.jsx)(fZ,{})}),(0,z.jsx)(el,{})]})})},f0=function(e){var t,r,n=e.form,i=(0,ei.Bd)().t,a=n.register,o=n.path,l=n.formState.errors;return(0,z.jsx)("div",{children:(0,z.jsx)("div",{className:"gap-x-large mb-small grid grid-cols-2",children:(0,z.jsx)(e1.A,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({label:i("general-form-location-name","Location name"),placeholder:i("general-form-flagship-store-warehouse","Flagship store, warehouse"),required:!0},a(o("name"),{required:i("general-form-name-is-required","Name is required"),pattern:n8.A.whiteSpaceRule("Location name")})),r=r={errors:l},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))})})};function f1(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function f2(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function f3(e){return function(e){if(Array.isArray(e))return f1(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||f5(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f5(e,t){if(e){if("string"==typeof e)return f1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f1(e,t)}}let f6=function(e){var t,r=e.form,n=r.register,i=r.path,a=r.formState.errors,o=r.control,l=(0,ei.Bd)().t,s=(0,J.useAdminRegions)().regions,c=(0,eR.FH)({control:o,name:[i("company"),i("address_1"),i("address_2"),i("postal_code"),i("city"),i("country_code")]}).some(function(e){return!!e}),u=function(e){if(Array.isArray(e))return e}(t=(0,U.useState)(!1))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(t,2)||f5(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),d=u[0],f=u[1];(0,U.useEffect)(function(){f(!!c)},[c]);var p=(0,U.useMemo)(function(){return s?s.reduce(function(e,t){return f3(e).concat(f3(t.countries))},[]).map(function(e){return{label:e.display_name,value:e.iso_2}}):[]},[s]);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("span",{className:"inter-base-semibold",children:l("address-form-address","Address")}),(0,z.jsxs)("div",{className:"gap-y-large gap-x-large grid grid-cols-1",children:[(0,z.jsx)("div",{className:"gap-x-large grid grid-cols-2",children:(0,z.jsx)(e1.A,f2({label:l("address-form-company","Company"),placeholder:l("address-form-company","Company"),errors:a},n(i("company"),{pattern:n8.A.whiteSpaceRule("Company")})))}),(0,z.jsxs)("div",{className:"gap-x-large grid grid-cols-2",children:[(0,z.jsx)(e1.A,f2({label:l("address-form-address-1","Address 1"),placeholder:l("address-form-address-1","Address 1"),errors:a,required:d},n(i("address_1"),{pattern:n8.A.whiteSpaceRule("Address 1"),required:d?l("address-form-this-field-is-required","This field is required"):void 0}))),(0,z.jsx)(e1.A,f2({label:l("address-form-address-2","Address 2"),placeholder:l("address-form-address-2","Address 2"),errors:a},n(i("address_2"),{pattern:n8.A.whiteSpaceRule("Address 2")})))]}),(0,z.jsxs)("div",{className:"gap-x-large grid grid-cols-2",children:[(0,z.jsx)(e1.A,f2({label:l("address-form-postal-code","Postal code"),placeholder:l("address-form-postal-code","Postal code"),errors:a},n(i("postal_code"),{pattern:n8.A.whiteSpaceRule("Postal code")}))),(0,z.jsx)(e1.A,f2({label:l("address-form-city","City"),placeholder:l("address-form-city","City"),errors:a},n(i("city"),{pattern:n8.A.whiteSpaceRule("City")})))]}),(0,z.jsx)("div",{className:"gap-x-large grid grid-cols-2 pb-0.5",children:(0,z.jsx)(eR.xI,{control:o,name:i("country_code"),rules:{required:d?l("address-form-this-field-is-required","This field is required"):void 0},render:function(e){var t=e.field,r=t.value,n=t.onChange,o=r;return"string"==typeof o&&(o=p.find(function(e){return e.value===o})),(0,z.jsx)(no,{label:l("address-form-country","Country"),required:d,value:o,options:p,onChange:n,name:i("country_code"),errors:a,isClearable:!d})}})})]})]})};function f4(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}var f8=function(e){var t,r,n=e.general,i=e.address,a=e.metadata;return i.address_1&&(t={company:i.company,address_1:i.address_1,address_2:i.address_2,postal_code:i.postal_code,city:i.city,country_code:(null===(r=i.country_code)||void 0===r?void 0:r.value)||i.country_code}),{name:n.name,address:t,metadata:eZ(a)}};let f7=function(e){var t,r,n=e.onClose,i=e.location,a=(0,ei.Bd)().t,o=(0,eR.mN)({defaultValues:{general:{name:i.name},address:i.address,metadata:eJ(i.metadata)},reValidateMode:"onBlur",mode:"onBlur"}),l=(0,eC.A)(),s=(0,J.useAdminUpdateStockLocation)(i.id),c=s.mutate,u=s.isLoading,d=o.handleSubmit,f=o.formState.isDirty,p=d((t=function(e){return function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,function(t){return c(f8(e),{onSuccess:function(){n(),l(a("edit-success","Success"),a("edit-location-edited-successfully","Location edited successfully"),"success")},onError:function(e){l(a("edit-error","Error"),(0,eA.u)(e),"error")}}),[2]})},r=function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function o(e){f4(a,n,i,o,l,"next",e)}function l(e){f4(a,n,i,o,l,"throw",e)}o(void 0)})},function(e){return r.apply(this,arguments)}));return(0,z.jsxs)(eN.A,{handleClose:n,children:[(0,z.jsxs)(eN.A.Body,{className:"top-20",children:[(0,z.jsx)(eN.A.Header,{handleClose:n,children:(0,z.jsx)("h1",{className:"text-xl font-semibold",children:a("edit-edit-location-details","Edit Location Details")})}),(0,z.jsx)(eN.A.Content,{children:(0,z.jsx)("form",{className:"w-full",children:(0,z.jsxs)("div",{className:"mt-xlarge gap-y-xlarge flex flex-col",children:[(0,z.jsx)(f0,{form:(0,eL.m)(o,"general")}),(0,z.jsx)(f6,{form:(0,eL.m)(o,"address")}),(0,z.jsxs)("div",{children:[(0,z.jsx)("h2",{className:"inter-base-semibold mb-base",children:a("edit-metadata","Metadata")}),(0,z.jsx)(e$,{form:(0,eL.m)(o,"metadata")})]})]})})})]}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"flex w-full justify-end space-x-2",children:[(0,z.jsx)(W.A,{size:"small",variant:"secondary",type:"button",onClick:n,children:a("edit-cancel","Cancel")}),(0,z.jsx)(W.A,{size:"small",variant:"primary",type:"button",disabled:!f||u,onClick:p,children:a("edit-save-and-close","Save and close")})]})})]})},f9=function(e){var t=e.salesChannels,r=e.showMax,n=void 0===r?3:r,i=t.length>n;return(0,z.jsxs)("div",{className:"flex items-center py-1",children:[(0,z.jsx)(r_,{className:"mr-4",children:(0,z.jsx)(uM,{})}),t.slice(0,n).map(function(e,t,r){return(0,z.jsxs)("span",{className:"inter-base-regular text-grey-90 ml-1 first-of-type:ml-0",children:[e.name,t<r.length-1&&", "]})}),i&&(0,z.jsx)(r9.A,{content:(0,z.jsx)(z.Fragment,{children:t.slice(n).map(function(e){return(0,z.jsx)("div",{className:"inter-small-regular",children:e.name})})}),side:"top",children:(0,z.jsxs)("span",{className:"text-grey-50 ml-1",children:["+ ",t.length-n," more"]})})]})};function pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function pt(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function pr(e){return function(e){if(Array.isArray(e))return pe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return pe(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pe(e,void 0)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}let pn=function(e){var t,r,n,i=e.location,a=(0,n5.A)(),o=a.state,l=a.close,s=a.open,c=(0,ei.Bd)().t,u=(0,J.useAdminAddLocationToSalesChannel)().mutateAsync,d=(0,J.useAdminRemoveLocationFromSalesChannel)().mutateAsync,f=(t=function(e){var t,r,n,a;return function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,function(o){return n=null!==(r=null==(t=i.sales_channels)?void 0:t.filter(function(t){return!e.some(function(e){return t.id===e.id})}))&&void 0!==r?r:[],a=e.filter(function(e){return t&&!t.some(function(t){return t.id===e.id})}),Promise.all(pr(n.map(function(e){return d({sales_channel_id:e.id,location_id:i.id})})).concat(pr(a.map(function(e){return u({sales_channel_id:e.id,location_id:i.id})})))),[2]})},r=function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function o(e){pt(a,n,i,o,l,"next",e)}function l(e){pt(a,n,i,o,l,"throw",e)}o(void 0)})},function(e){return r.apply(this,arguments)});return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(W.A,{variant:"secondary",size:"small",type:"button",onClick:s,children:(null===(n=i.sales_channels)||void 0===n?void 0:n.length)?c("edit-sales-channels-edit-channels","Edit channels"):c("edit-sales-channels-add-channels","Add channels")}),(0,z.jsx)(u0,{open:o,source:i.sales_channels,onClose:l,onSave:f})]})},pi=function(e){var t,r=e.location,n=(0,ei.Bd)().t;return(0,z.jsx)("div",{className:"py-base",children:(0,z.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(null===(t=r.sales_channels)||void 0===t?void 0:t.length)?(0,z.jsx)(f9,{salesChannels:r.sales_channels}):(0,z.jsx)("span",{className:"inter-base-regular text-grey-40",children:n("sales-channels-section-not-connected-to-any-sales-channels-yet","Not connected to any sales channels yet")}),(0,z.jsx)(pn,{location:r})]})})};function pa(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}let po=function(e){var t,r,n=e.location,i=(0,ei.Bd)().t,a=(0,J.useAdminDeleteStockLocation)(n.id).mutate,o=rL(),l=(0,eC.A)(),s=(0,rz.u)().isFeatureEnabled,c=(0,n5.A)(),u=c.state,d=c.close,f=c.open,p=(t=function(){return function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,function(e){switch(e.label){case 0:return[4,o({heading:i("location-card-delete-location","Delete Location"),text:i("location-card-confirm-delete","Are you sure you want to delete this location. This will also delete all inventory levels and reservations associated with this location."),extraConfirmation:!0,entityName:n.name})];case 1:return e.sent()&&a(void 0,{onSuccess:function(){l(i("location-card-success","Success"),i("location-card-location-deleted-successfully","Location deleted successfully"),"success")},onError:function(e){l(i("location-card-error","Error"),(0,eA.u)(e),"error")}}),[2]}})},r=function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function o(e){pa(a,n,i,o,l,"next",e)}function l(e){pa(a,n,i,o,l,"throw",e)}o(void 0)})},function(){return r.apply(this,arguments)}),m=[{label:i("location-card-edit-details","Edit details"),onClick:f,variant:"normal",icon:(0,z.jsx)(ec,{size:"20px"})},{label:i("location-card-delete","Delete"),onClick:p,variant:"danger",icon:(0,z.jsx)(eu,{size:"20px"})}];return(0,z.jsxs)("div",{className:"my-base rounded-rounded bg-grey-0 border-grey-20 border",children:[(0,z.jsxs)("div",{className:"py-base flex items-center px-6",children:[(0,z.jsx)(r_,{children:(0,z.jsx)(rE.A,{})}),(0,z.jsxs)("div",{className:"ml-base flex flex-col",children:[(0,z.jsx)("span",{className:"text-grey-90 font-semibold",children:n.name}),n.address&&(0,z.jsxs)("div",{children:[n.address.city&&(0,z.jsxs)("span",{children:[n.address.city,", "]}),(0,z.jsx)("span",{children:function(e){if(e){var t=e.toUpperCase();if(uw[t])return uw[t];var r=uO.find(function(e){return e.alpha3===t});if(r)return r.name;throw Error("Invalid country code")}}(n.address.country_code)})]})]}),(0,z.jsx)("div",{className:"ml-auto",children:(0,z.jsx)(em,{actions:m,forceDropdown:!0})})]}),s("sales_channels")&&(0,z.jsxs)("div",{className:"py-base border-grey-20 border-t border-solid px-6",children:[(0,z.jsx)("h2",{className:"inter-small-semibold text-gray-500",children:i("location-card-connected-sales-channels","Connected sales channels")}),(0,z.jsx)(pi,{location:n})]}),u&&(0,z.jsx)(f7,{onClose:d,location:n})]})},pl=function(e){var t=e.location,r=e.form,n=(0,ei.Bd)().t,i=(0,n5.A)(),a=i.state,o=i.close,l=i.open,s=r.control,c=r.path,u=(0,eR.jz)({control:s,name:c("channels"),keyName:"fieldId"}),d=u.fields,f=u.replace;return(0,z.jsxs)(z.Fragment,{children:[(null==t?void 0:t.sales_channels)||d.length?(0,z.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,z.jsx)(f9,{salesChannels:(null==t?void 0:t.sales_channels)||d,showMax:1}),(0,z.jsx)(W.A,{variant:"secondary",size:"small",type:"button",onClick:l,children:n("sales-channels-form-edit-channels","Edit channels")})]}):(0,z.jsx)(W.A,{variant:"secondary",className:"w-full",size:"small",onClick:l,type:"button",children:n("sales-channels-form-add-sales-channels","Add sales channels")}),(0,z.jsx)(u0,{open:a,source:d,onClose:function(){o()},onSave:function(e){return f(e)}})]})};function ps(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function pc(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function pu(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function o(e){pc(a,n,i,o,l,"next",e)}function l(e){pc(a,n,i,o,l,"throw",e)}o(void 0)})}}function pd(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}var pf=function(e){var t,r=e.general,n=e.address,i=e.metadata;return n.address_1&&((t=n).country_code=n.country_code.value),{locationPayload:{name:r.name,address:t,metadata:eZ(i)},salesChannelsPayload:e.salesChannels.channels}};let pp=function(e){var t,r,n=e.onClose,i=(0,ei.Bd)().t,a=function(e){if(Array.isArray(e))return e}(t=U.useState("general"))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(t,2)||function(e,t){if(e){if("string"==typeof e)return ps(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ps(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),o=a[0],l=a[1],s=(0,eR.mN)({defaultValues:{general:{name:""},address:void 0,salesChannels:{channels:[]}},reValidateMode:"onBlur",mode:"onBlur"}),c=s.handleSubmit,u=s.formState.isDirty,d=(0,n5.A)(),f=d.state,p=d.open,m=d.close,h=(0,eC.A)(),y=(0,rz.u)().isFeatureEnabled,b=(0,J.useAdminCreateStockLocation)().mutateAsync,v=(0,J.useAdminAddLocationToSalesChannel)().mutateAsync,g=(r=pu(function(e){var t,r,a,o,s,c;return pd(this,function(u){switch(u.label){case 0:if(!e.general.name||(t=[e.address.address_1,e.address.country_code]).some(Boolean)&&!t.every(Boolean))return l("general"),[2];a=(r=pf(e)).locationPayload,o=r.salesChannelsPayload,u.label=1;case 1:return u.trys.push([1,3,,4]),[4,b(a)];case 2:return s=u.sent().stock_location,Promise.all(o.map(function(e){return v({sales_channel_id:e.id,location_id:s.id})})).then(function(){h(i("new-success","Success"),i("new-location-added-successfully","Location added successfully"),"success")}).catch(function(){h(i("new-error","Error"),i("new-location-created","Location was created successfully, but there was an error associating sales channels"),"error")}).finally(function(){n()}),[3,4];case 3:return c=u.sent(),h(i("new-error","Error"),(0,eA.u)(c),"error"),[3,4];case 4:return[2]}})}),function(e){return r.apply(this,arguments)});return(0,z.jsx)("form",{onSubmit:c(g),className:"w-full",children:(0,z.jsxs)(sF.A,{children:[(0,z.jsx)(sF.A.Header,{children:(0,z.jsxs)("div",{className:"medium:w-8/12 flex w-full justify-between px-8",children:[(0,z.jsx)(W.A,{size:"small",variant:"ghost",type:"button",onClick:function(){u?p():n()},children:(0,z.jsx)(ao.A,{size:20})}),f&&(0,z.jsx)(e_,{heading:i("new-cancel-location-changes","Are you sure you want to cancel with unsaved changes"),confirmText:i("new-yes-cancel","Yes, cancel"),cancelText:i("new-no-continue-creating","No, continue creating"),successText:!1,handleClose:m,onDelete:pu(function(){return pd(this,function(e){return[2,n()]})})}),(0,z.jsx)("div",{className:"gap-x-small flex",children:(0,z.jsx)(W.A,{size:"small",variant:"primary",type:"submit",disabled:!u,children:i("new-add-location","Add location")})})]})}),(0,z.jsx)(sF.A.Main,{className:"no-scrollbar flex w-full justify-center",children:(0,z.jsxs)("div",{className:"medium:w-7/12 large:w-6/12 small:w-4/5 my-16 max-w-[700px]",children:[(0,z.jsx)("h1",{className:"mb-base text-grey-90 text-xlarge px-1 font-semibold",children:i("new-add-new-location","Add new location")}),(0,z.jsxs)(sV,{value:o,onValueChange:l,type:"single",children:[(0,z.jsxs)(sV.Item,{value:"general",title:i("new-general-information","General Information"),required:!0,children:[(0,z.jsx)("p",{className:"inter-base-regular text-grey-50",children:i("new-location-details","Specify the details about this location")}),(0,z.jsxs)("div",{className:"mt-xlarge gap-y-xlarge flex flex-col pb-0.5",children:[(0,z.jsx)(f0,{form:(0,eL.m)(s,"general")}),(0,z.jsx)(f6,{form:(0,eL.m)(s,"address")}),(0,z.jsxs)("div",{children:[(0,z.jsx)("h2",{className:"inter-base-semibold mb-base",children:i("new-metadata","Metadata")}),(0,z.jsx)(e$,{form:(0,eL.m)(s,"metadata")})]})]})]}),y("sales_channels")&&(0,z.jsxs)(sV.Item,{value:"sales_channels",title:"Sales Channels",children:[(0,z.jsx)("p",{className:"inter-base-regular text-grey-50",children:i("new-select-location-channel","Specify which Sales Channels this location's items can be purchased through.")}),(0,z.jsx)("div",{className:"mt-xlarge flex",children:(0,z.jsx)(pl,{location:null,form:(0,eL.m)(s,"salesChannels")})})]})]})]})})]})})},pm=function(){var e=(0,n5.A)(),t=e.state,r=e.close,n=e.open,i=(0,z.jsxs)(W.A,{variant:"secondary",size:"small",onClick:n,children:[(0,z.jsx)(n_.A,{size:20}),"Add location"]}),a=(0,J.useAdminStockLocations)({expand:"address,sales_channels"}),o=a.stock_locations,l=a.isLoading;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{className:"flex h-full grow flex-col",children:(0,z.jsxs)("div",{className:"flex w-full grow flex-col",children:[(0,z.jsx)(eD,{customHeader:(0,z.jsx)(fJ,{activeView:"locations"}),className:"h-[85px] min-h-[85px]",customActionable:i}),l?(0,z.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,z.jsx)(X.A,{variant:"secondary"})}):(0,z.jsx)("div",{children:null==o?void 0:o.map(function(e){return(0,z.jsx)(po,{location:e},e.id)})})]})}),(0,z.jsx)(ik.A,{isVisible:t,isFullScreen:!0,children:(0,z.jsx)(pp,{onClose:r})})]})};var ph=r(18691),py=r(85183),pb=r(13656);let pv=function(e){var t=e.isVisible,r=e.children,n=e.close;return(0,z.jsx)(pb.b,{children:(0,z.jsx)(ph.N,{children:t&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(py.P.div,{onClick:n,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeInOut"},style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:99,background:"rgba(0,0,0,.3)"}}),(0,z.jsx)(py.P.div,{transition:{ease:"easeInOut"},initial:{right:-560},style:{position:"fixed",height:"100%",width:560,background:"white",right:0,top:0,zIndex:200},className:"overflow-hidden rounded border",animate:{right:0},exit:{right:-560},children:r})]})})})};var pg=function(e){var t=e.src,r=e.className,n=e.size,i=void 0===n?"small":n;return(0,z.jsx)("div",{className:(0,en.default)("bg-grey-5 rounded-rounded flex items-center justify-center overflow-hidden",{"h-6 w-[18px]":"xsmall"===i,"h-10 w-[30px]":"small"===i,"h-12 w-9":"medium"===i,"h-[226px] w-[170px]":"large"===i},r),children:t?(0,z.jsx)("img",{src:t,className:"flex-1 object-cover object-center"}):(0,z.jsx)(np,{})})};function px(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pj(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){px(e,t,r[t])})}return e}var pw=function(e){return e.quantity-(e.fulfilled_quantity||0)},pO=function(e){var t,r=e.item,n=e.locationId,i=e.quantities,a=e.handleQuantityUpdate,o=e.setErrors,l=(0,ei.Bd)().t,s=(0,rz.u)().isFeatureEnabled,c=s("inventoryService")&&s("stockLocationService"),u=(0,J.useAdminVariantsInventory)(r.variant_id,{enabled:c}),d=u.variant,f=u.isLoading,p=u.refetch,m=!!(null==d?void 0:d.inventory.length);U.useEffect(function(){c&&p()},[c,p]);var h=(0,U.useMemo)(function(){if(!c)return{availableQuantity:r.variant.inventory_quantity,inStockQuantity:r.variant.inventory_quantity};if(f||!n||!d)return{};var e,t,i=null===(t=d.inventory[0])||void 0===t?void 0:null===(e=t.location_levels)||void 0===e?void 0:e.find(function(e){return e.location_id===n});return i?{availableQuantity:i.available_quantity,inStockQuantity:i.stocked_quantity}:{}},[f,n,d,r.variant,c]),y=h.availableQuantity,b=h.inStockQuantity,v=!n||n&&(!y||i[r.id]<=y);return(U.useEffect(function(){o(function(e){return v?delete e[r.id]:e[r.id]=l("create-fulfillment-quantity-is-not-valid","Quantity is not valid"),e})},[v,o,r.id]),U.useEffect(function(){if(!y&&m)a(0,r.id);else{var e;a((e=Math).min.apply(e,[pw(r),m?y:Number.MAX_VALUE]),r.id)}},[y,r,r.id]),0>=pw(r))?null:(0,z.jsxs)("div",{className:(0,en.default)("rounded-rounded hover:bg-grey-5 mx-[-5px] mb-1 flex h-[64px] justify-between py-2 px-[5px]",{"pointer-events-none opacity-50":!y&&m||!n&&c}),children:[(0,z.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,z.jsx)("div",{className:"rounded-rounded flex h-[48px] w-[36px] overflow-hidden",children:r.thumbnail?(0,z.jsx)("img",{src:r.thumbnail,className:"object-cover"}):(0,z.jsx)(nm,{})}),(0,z.jsxs)("div",{className:"flex max-w-[185px] flex-col justify-center",children:[(0,z.jsx)("span",{className:"inter-small-regular text-grey-90 truncate",children:r.title}),(null==r?void 0:r.variant)&&(0,z.jsx)("span",{className:"inter-small-regular text-grey-50 truncate",children:"".concat(r.variant.title).concat(r.variant.sku?" (".concat(r.variant.sku,")"):"")})]})]}),(0,z.jsxs)("div",{className:"flex items-center",children:[(0,z.jsx)(uT,{featureFlag:"inventoryService",children:m&&(0,z.jsxs)("div",{className:"inter-base-regular text-grey-50 mr-6 flex flex-col items-end whitespace-nowrap",children:[(0,z.jsxs)("p",{children:[y||0," available"]}),(0,z.jsxs)("p",{children:["(",b||0," in stock)"]})]})}),(0,z.jsx)(e1.A,{type:"number",name:"quantity",defaultValue:pw(r),min:0,suffix:(0,z.jsxs)("span",{className:"flex",children:["/",(0,z.jsx)("span",{className:"pl-1",children:pw(r)})]}),value:i[r.id],max:(t=Math).min.apply(t,[pw(r),m?y||0:Number.MAX_VALUE]),onChange:function(e){return a(e.target.valueAsNumber,r.id)},errors:v?void 0:{quantity:l("create-fulfillment-quantity-is-not-valid","Quantity is not valid")}})]})]})};let pS=function(e){var t=e.items,r=e.quantities,n=e.setQuantities,i=e.locationId,a=e.setErrors,o=U.useCallback(function(e,t){var i,a,o=pj({},r);i=pj({},o),a=null!=(a=px({},t,e))?a:{},Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(a)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(a)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(a,e))}),n(o=i)},[r,n]);return(0,z.jsx)("div",{children:t.map(function(e,t){return(0,z.jsx)(pO,{item:e,locationId:i,quantities:r,handleQuantityUpdate:o,setErrors:a},"fulfillmentLine-".concat(t))})})};function pP(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function pC(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}let pA=function(e){var t,r,n,i,a=e.close,o=e.reservation,l=e.item,s=e.totalReservedQuantity,c=void 0===s?0:s,u=(0,ei.Bd)().t,d=(0,eR.mN)({defaultValues:{item:{description:o.description},metadata:eJ(null==o?void 0:o.metadata)}}),f=(0,n5.A)(!!o.metadata),p=f.state,m=f.toggle,h=d.control,y=d.setValue,b=d.handleSubmit,v=d.register,g=(0,J.useAdminStockLocations)(),x=g.stock_locations,j=g.isLoading,w=(0,J.useAdminInventoryItem)(o.inventory_item_id),O=w.inventory_item,S=w.isLoading,P=(0,J.useAdminUpdateReservation)((null==o?void 0:o.id)||"").mutate,C=(0,J.useAdminDeleteReservation)((null==o?void 0:o.id)||"").mutate,A=(0,U.useMemo)(function(){return!x||j?[]:x.map(function(e){return{value:e.id,label:e.name}})},[j,x]),N=(0,eC.A)(),k=function(){C(void 0,{onSuccess:function(){N(u("reservation-reservation-was-deleted","Reservation was deleted"),u("reservation-the-allocated-items-have-been-released","The allocated items have been released."),"success"),a()},onError:function(){N(u("reservation-error","Error"),u("reservation-failed-to-delete-the-reservation","Failed to delete the reservation "),"error")}})},_=(0,eR.FH)({control:h,name:"location"});(0,U.useEffect)(function(){if((null==x?void 0:x.length)&&o){var e=x.find(function(e){return e.id===o.location_id});e&&y("location",{value:null==e?void 0:e.id,label:null==e?void 0:e.name})}},[x,o,y]),(0,U.useEffect)(function(){o&&y("item.quantity",null==o?void 0:o.quantity)},[o,y]);var E=(0,U.useMemo)(function(){if(S||!(null==_?void 0:_.value)||!O)return{};var e,t=null===(e=O.location_levels)||void 0===e?void 0:e.find(function(e){return e.location_id===(null==_?void 0:_.value)});return t?{availableQuantity:t.available_quantity,inStockQuantity:t.stocked_quantity}:{}},[S,null==_?void 0:_.value,O]),I=E.availableQuantity,D=E.inStockQuantity,T=(0,U.useMemo)(function(){return l?Math.min(pw(l)-(c-((null==o?void 0:o.quantity)||0)),"number"==typeof I?I:0):"number"==typeof I?I+o.quantity:o.quantity},[I,l,null==o?void 0:o.quantity,c]);return(0,z.jsx)(pv,{isVisible:!0,close:a,children:(0,z.jsx)("form",{className:"text-grey-90 h-full w-full",onSubmit:b(function(e){if(!e.item.quantity)return k();P({quantity:e.item.quantity,location_id:e.location.value,description:e.item.description,metadata:p?eZ(e.metadata):void 0},{onSuccess:function(){N(u("reservation-reservation-was-updated","Reservation was updated"),u("reservation-the-reservation-change-was-saved","The reservation change was saved."),"success"),a()},onError:function(){N(u("reservation-errors","Errors"),u("reservation-failed-to-update-reservation","Failed to update reservation"),"error")}})}),children:(0,z.jsxs)("div",{className:"flex h-full flex-col justify-between",children:[(0,z.jsxs)("div",{className:"border-grey-20 flex items-center justify-between border-b px-8 py-6",children:[(0,z.jsx)("h1",{className:"inter-large-semibold ",children:u("reservation-edit-reservation","Edit Reservation")}),(0,z.jsx)(W.A,{variant:"ghost",className:"p-1.5",type:"button",onClick:function(e){e.preventDefault(),a()},children:(0,z.jsx)(ao.A,{})})]}),(0,z.jsx)("div",{className:"flex grow flex-col overflow-y-auto",children:(0,z.jsxs)("div",{className:"flex h-full flex-col justify-between gap-y-8 px-8 pb-8 pt-6",children:[(0,z.jsxs)("div",{className:"flex flex-col gap-y-6",children:[(0,z.jsxs)("div",{children:[(0,z.jsx)("h2",{className:"inter-base-semibold",children:u("reservation-location","Location")}),(0,z.jsx)("span",{className:"inter-base-regular text-grey-50",children:u("reservation-choose-which-location-you-want-to-ship-the-items-from","Choose which location you want to ship the items from.")}),(0,z.jsx)(eR.xI,{name:"location",control:h,rules:{required:!0},render:function(e){var t=e.field,r=t.value,n=t.onChange;return(0,z.jsx)(no,{className:"mt-4",value:r,onChange:n,options:A})}})]}),(0,z.jsxs)("div",{children:[(0,z.jsx)("h2",{className:"inter-base-semibold",children:u("reservation-items-to-allocate-title","Items to Allocate")}),(0,z.jsx)("span",{className:"inter-base-regular text-grey-50",children:u("reservation-select-the-number-of-items-that-you-wish-to-allocate","Select the number of items that you wish to allocate.")}),(0,z.jsxs)("div",{className:"\n                  bg-grey-5 text-grey-50 border-grey-20 \n                  inter-base-regular\n                  mt-6\n                  grid border-collapse grid-cols-2 grid-rows-3 \n                  [&>*]:border-r [&>*]:border-b [&>*]:py-2 \n                  [&>*:nth-child(odd)]:border-l [&>*:nth-child(odd)]:pl-4 \n                  [&>*:nth-child(even)]:pr-4 [&>*:nth-child(even)]:text-right \n                  [&>*:nth-child(-n+2)]:border-t",children:[(0,z.jsx)("div",{className:"rounded-tl-rounded",children:"Item"}),(0,z.jsxs)("div",{className:"rounded-tr-rounded flex justify-end space-x-3",children:[(0,z.jsx)("p",{className:"inter-base-regular text-grey-50 truncate ",children:null!==(r=null!==(t=null==O?void 0:O.title)&&void 0!==t?t:null==l?void 0:l.title)&&void 0!==r?r:"-"}),(0,z.jsx)(pg,{size:"xsmall",src:null!==(n=null==O?void 0:O.thumbnail)&&void 0!==n?n:null==l?void 0:l.thumbnail})]}),(0,z.jsx)("div",{children:"SKU"}),(0,z.jsx)("div",{children:null!==(i=null==O?void 0:O.sku)&&void 0!==i?i:"N/A"}),(0,z.jsx)("div",{children:"In stock"}),(0,z.jsx)("div",{children:null!=D?D:"N/A"}),(0,z.jsx)("div",{children:"Available"}),(0,z.jsx)("div",{children:null!=I?I:"N/A"}),(0,z.jsx)("div",{className:"rounded-bl-rounded",children:"Allocate"}),(0,z.jsxs)("div",{className:"bg-grey-0 rounded-br-rounded text-grey-80 flex items-center",children:[(0,z.jsx)("input",pC(pP({className:"remove-number-spinner inter-base-regular w-full shrink border-none bg-transparent text-right font-normal outline-none outline-0"},v("item.quantity",{valueAsNumber:!0})),{type:"number",min:0,max:T})),(0,z.jsx)("span",{className:"text-grey-50 nowrap whitespace-nowrap pl-2",children:T?u("reservation-max-reservation-requested"," / {{maxReservation}} requested",{maxReservation:T}):u("reservation-reserved"," reserved")})]})]})]}),(0,z.jsxs)("div",{className:"border-grey-20 inter-base-regular border-t pt-6",children:[(0,z.jsx)("p",{className:"inter-base-semibold",children:u("reservation-description","Description")}),(0,z.jsx)("p",{className:"text-grey-50 mb-6",children:u("reservation-what-type-of-reservation-is-this","What type of reservation is this?")}),(0,z.jsx)(e1.A,pC(pP({},v("item.description")),{placeholder:u("reservation-description","Description")}))]}),(0,z.jsxs)("div",{className:"border-grey border-grey-20 w-full items-center border-t pt-6",children:[(0,z.jsxs)("div",{className:"mb-2 flex justify-between",children:[(0,z.jsx)("p",{className:"inter-base-semibold ",children:u("reservation-metadata","Metadata")}),(0,z.jsx)(W.A,{size:"small",variant:"ghost",type:"button",className:"border",onClick:m,children:p?u("reservation-remove-metadata","Remove metadata"):u("reservation-add-metadata","Add metadata")})]}),p&&(0,z.jsx)(e$,{form:(0,eL.m)(d,"metadata")})]})]}),(0,z.jsx)(W.A,{variant:"ghost",className:"my-1 w-full border text-rose-50",size:"small",onClick:k,type:"button",children:u("reservation-delete-reservation","Delete reservation")})]})}),(0,z.jsxs)("div",{className:"gap-x-xsmall flex w-full justify-end border-t px-8 pt-4 pb-6",children:[(0,z.jsx)(W.A,{variant:"ghost",size:"small",className:"border",onClick:a,children:u("reservation-cancel","Cancel")}),(0,z.jsx)(W.A,{variant:"primary",size:"small",type:"submit",children:u("reservation-save-and-close","Save and close")})]})]})})})};function pN(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function pk(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function p_(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var pE=function(e){var t=e.innerProps,r=e.data;return(0,z.jsxs)("div",p_(pk({},t),{className:"text-small grid w-full cursor-pointer grid-cols-2 place-content-between px-4 py-2 transition-all hover:bg-gray-50",children:[(0,z.jsxs)("div",{children:[(0,z.jsx)("p",{children:r.label}),(0,z.jsx)("p",{className:"text-grey-50",children:r.inventoryItem.sku})]}),(0,z.jsxs)("div",{className:"text-right",children:[(0,z.jsx)("p",{className:"text-grey-50",children:"".concat(r.inventoryItem.stocked_quantity," stock")}),(0,z.jsx)("p",{className:"text-grey-50",children:"".concat(r.inventoryItem.stocked_quantity-r.inventoryItem.reserved_quantity," available")})]})]}))},pI=function(e){var t=e.children,r=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["children"]);return(0,z.jsxs)(r$,p_(pk({},r),{children:[(0,z.jsx)("span",{className:"mr-4",children:(0,z.jsx)(to.A,{size:16,className:"text-grey-50"})}),t]}))};let pD=function(e){var t,r=e.onItemSelect,n=(e.clearOnSelect,e.filters),i=function(e){if(Array.isArray(e))return e}(t=(0,U.useState)())||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(t,2)||function(e,t){if(e){if("string"==typeof e)return pN(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pN(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),a=i[0],o=i[1],l=(0,e8.d)(a,500),s=!!(null==l?void 0:l.length),c=(0,J.useAdminInventoryItems)(pk({q:l},void 0===n?{}:n),{enabled:s}),u=c.isLoading,d=c.inventory_items,f=null==d?void 0:d.map(function(e){var t,r,n;return{label:e.title||(null===(n=e.variants)||void 0===n?void 0:null===(r=n[0])||void 0===r?void 0:null===(t=r.product)||void 0===t?void 0:t.title)||e.sku,value:e.id,inventoryItem:e}});return(0,z.jsx)("div",{children:(0,z.jsx)(no,{isMulti:!1,components:{Option:pE,Control:pI},onInputChange:o,options:f,placeholder:"Search by sku...",isSearchable:!0,noOptionsMessage:function(){return"No items found"},openMenuOnClick:!!(null==d?void 0:d.length),onChange:function(e){e&&r(e.inventoryItem)},value:null,isLoading:s&&u,filterOption:function(){return!0}})})},pT=function(e){var t=e.selectedLocation,r=e.onChange,n=(0,J.useAdminStockLocations)(),i=n.stock_locations,a=n.isLoading;(0,U.useEffect)(function(){!t&&!a&&(null==i?void 0:i.length)&&r(i[0].id)},[a,i,r,t]);var o=(0,U.useMemo)(function(){if(!a&&i){var e;return null!==(e=i.find(function(e){return e.id===t}))&&void 0!==e?e:i[0]}},[t,i,a]);return!a&&i&&o?(0,z.jsx)(no,{isMulti:!1,onChange:function(e){r(e.value)},options:i.map(function(e){return{label:e.name,value:e.id}}),value:{value:o.id,label:o.name}}):null};function pM(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function pR(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function pL(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}let pz=function(e){var t,r,n,i,a=e.form,o=(0,ei.Bd)().t,l=a.register,s=a.path,c=a.watch,u=a.control,d=a.setValue,f=c(s("location")),p=c(s("item")),m=function(e){if(Array.isArray(e))return e}(t=U.useState(f))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(t,2)||function(e,t){if(e){if("string"==typeof e)return pM(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pM(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),h=m[0],y=m[1],b=null==p?void 0:null===(r=p.location_levels)||void 0===r?void 0:r.find(function(e){return e.location_id===h});return(0,z.jsxs)("div",{className:"flex w-full flex-col gap-6",children:[(0,z.jsxs)("div",{className:"grid w-full grid-cols-2 items-center",children:[(0,z.jsxs)("div",{children:[(0,z.jsx)("p",{className:"inter-base-semibold mb-1",children:o("reservation-form-location","Location")}),(0,z.jsx)("p",{className:"text-grey-50",children:o("reservation-form-choose-where-you-wish-to-reserve-from","Choose where you wish to reserve from.")})]}),(0,z.jsx)(eR.xI,{control:u,name:s("location"),render:function(e){var t=e.field.onChange;return(0,z.jsx)(pT,{onChange:function(e){t(e),y(e)},selectedLocation:h})}})]}),(0,z.jsxs)("div",{className:"grid w-full grid-cols-2 items-center",children:[(0,z.jsxs)("div",{children:[(0,z.jsx)("p",{className:"inter-base-semibold mb-1",children:o("reservation-form-item-to-reserve","Item to reserve")}),(0,z.jsx)("p",{className:"text-grey-50",children:o("reservation-form-select-the-item-that-you-wish-to-reserve","Select the item that you wish to reserve.")})]}),(0,z.jsx)(eR.xI,{control:u,name:s("item"),render:function(e){var t=e.field.onChange;return(0,z.jsx)(pD,{onItemSelect:t,clearOnSelect:!0,filters:{location_id:h}})}}),p&&b&&(0,z.jsxs)("div",{className:"col-span-2 flex w-full flex-col",children:[(0,z.jsxs)("div",{className:"\n            bg-grey-5 text-grey-50 border-grey-20 \n            mt-8\n            grid border-collapse grid-cols-2 grid-rows-5 \n            [&>*]:border-r [&>*]:border-b [&>*]:py-2 \n            [&>*:nth-child(odd)]:border-l [&>*:nth-child(odd)]:pl-4 \n            [&>*:nth-child(even)]:pr-4 [&>*:nth-child(even)]:text-right \n            [&>*:nth-child(-n+2)]:border-t",children:[(0,z.jsx)("div",{className:"rounded-tl-rounded",children:o("reservation-form-item","Item")}),(0,z.jsx)("div",{className:"rounded-tr-rounded",children:null!==(n=p.title)&&void 0!==n?n:"N/A"}),(0,z.jsx)("div",{children:"SKU"}),(0,z.jsx)("div",{children:null!==(i=p.sku)&&void 0!==i?i:"N/A"}),(0,z.jsx)("div",{children:o("reservation-form-in-stock","In stock")}),(0,z.jsx)("div",{children:null==b?void 0:b.stocked_quantity}),(0,z.jsx)("div",{children:o("reservation-form-available","Available")}),(0,z.jsx)("div",{children:(null==b?void 0:b.stocked_quantity)-(null==b?void 0:b.reserved_quantity)}),(0,z.jsx)("div",{className:"rounded-bl-rounded",children:o("reservation-form-reserve","Reserve")}),(0,z.jsx)("div",{className:"bg-grey-0 rounded-br-rounded text-grey-80 flex items-center",children:(0,z.jsx)("input",pL(pR({className:"remove-number-spinner inter-base-regular w-full shrink border-none bg-transparent text-right font-normal outline-none outline-0"},l(s("quantity"),{valueAsNumber:!0})),{type:"number",min:0,max:(null==b?void 0:b.stocked_quantity)-(null==b?void 0:b.reserved_quantity)}))})]}),(0,z.jsx)("div",{className:"mt-4 flex w-full justify-end",children:(0,z.jsx)(W.A,{variant:"ghost",className:"border",size:"small",type:"button",onClick:function(){return d(s("item"),void 0)},children:o("reservation-form-remove-item","Remove item")})})]})]}),(0,z.jsxs)("div",{className:"border-grey border-grey-20 grid w-full grid-cols-2 items-center border-t py-6",children:[(0,z.jsxs)("div",{children:[(0,z.jsx)("p",{className:"inter-base-semibold mb-1",children:o("reservation-form-description","Description")}),(0,z.jsx)("p",{className:"text-grey-50",children:o("reservation-form-what-type-of-reservation-is-this","What type of reservation is this?")})]}),(0,z.jsx)(e1.A,pL(pR({},l(s("description"))),{placeholder:o("reservation-form-description","Description")}))]})]})};function pF(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}let pB=function(e){var t,r,n=e.onClose,i=e.locationId,a=(0,ei.Bd)().t,o=(0,J.useAdminCreateReservation)().mutateAsync,l=(0,eR.mN)({defaultValues:{general:{location:i,item:void 0,description:void 0,quantity:0}},reValidateMode:"onBlur",mode:"onBlur"}),s=l.handleSubmit,c=(0,eC.A)(),u=(t=function(e){return function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,function(t){switch(t.label){case 0:return[4,{location_id:e.general.location,inventory_item_id:e.general.item.id,quantity:e.general.quantity,description:e.general.description,metadata:eZ(e.metadata)}];case 1:return o(t.sent(),{onSuccess:function(){c(a("new-success","Success"),a("new-successfully-created-reservation","Successfully created reservation"),"success"),n()},onError:function(e){c(a("new-error","Error"),(0,eA.u)(e),"error")}}),[2]}})},r=function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function o(e){pF(a,n,i,o,l,"next",e)}function l(e){pF(a,n,i,o,l,"throw",e)}o(void 0)})},function(e){return r.apply(this,arguments)});return(0,z.jsx)("form",{onSubmit:s(u),className:"w-full",children:(0,z.jsxs)(sF.A,{children:[(0,z.jsx)(sF.A.Header,{children:(0,z.jsxs)("div",{className:"medium:w-8/12 flex w-full justify-between px-8",children:[(0,z.jsx)(W.A,{size:"small",variant:"ghost",type:"button",onClick:n,children:(0,z.jsx)(ao.A,{size:20})}),(0,z.jsxs)("div",{className:"gap-x-small flex",children:[(0,z.jsx)(W.A,{size:"small",variant:"secondary",type:"button",onClick:n,children:a("new-cancel","Cancel")}),(0,z.jsx)(W.A,{size:"small",variant:"primary",type:"submit",children:a("new-save-reservation","Save reservation")})]})]})}),(0,z.jsx)(sF.A.Main,{className:"no-scrollbar flex w-full justify-center",children:(0,z.jsxs)("div",{className:"medium:w-7/12 large:w-6/12 small:w-4/5 my-16 max-w-[700px]",children:[(0,z.jsx)("h1",{className:"mb-base text-grey-90 text-xlarge font-semibold",children:a("new-reserve-item","Reserve Item")}),(0,z.jsx)("div",{className:"mt-xlarge gap-y-xlarge flex w-full pb-0.5",children:(0,z.jsx)(pz,{form:(0,eL.m)(l,"general")})}),(0,z.jsxs)("div",{className:"border-grey border-grey-20 w-full items-center border-t pt-6",children:[(0,z.jsx)("p",{className:"inter-base-semibold mb-2",children:a("new-metadata","Metadata")}),(0,z.jsx)(e$,{form:(0,eL.m)(l,"metadata")})]})]})})]})})},pq=function(e){var t,r,n=e.size,i=void 0===n?"24px":n,a=e.color,o=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["size","color"]);return(0,z.jsx)("svg",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({width:i,height:i,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),r=r={children:(0,z.jsx)("path",{d:"M8.75 5H16.875M8.75 5C8.75 5.33152 8.6183 5.64946 8.38388 5.88388C8.14946 6.1183 7.83152 6.25 7.5 6.25C7.16848 6.25 6.85054 6.1183 6.61612 5.88388C6.3817 5.64946 6.25 5.33152 6.25 5M8.75 5C8.75 4.66848 8.6183 4.35054 8.38388 4.11612C8.14946 3.8817 7.83152 3.75 7.5 3.75C7.16848 3.75 6.85054 3.8817 6.61612 4.11612C6.3817 4.35054 6.25 4.66848 6.25 5M3.125 5H6.25M8.75 15H16.875M8.75 15C8.75 15.3315 8.6183 15.6495 8.38388 15.8839C8.14946 16.1183 7.83152 16.25 7.5 16.25C7.16848 16.25 6.85054 16.1183 6.61612 15.8839C6.3817 15.6495 6.25 15.3315 6.25 15M8.75 15C8.75 14.6685 8.6183 14.3505 8.38388 14.1161C8.14946 13.8817 7.83152 13.75 7.5 13.75C7.16848 13.75 6.85054 13.8817 6.61612 14.1161C6.3817 14.3505 6.25 14.6685 6.25 15M3.125 15H6.25M13.75 10H16.875M13.75 10C13.75 10.3315 13.6183 10.6495 13.3839 10.8839C13.1495 11.1183 12.8315 11.25 12.5 11.25C12.1685 11.25 11.8505 11.1183 11.6161 10.8839C11.3817 10.6495 11.25 10.3315 11.25 10M13.75 10C13.75 9.66848 13.6183 9.35054 13.3839 9.11612C13.1495 8.8817 12.8315 8.75 12.5 8.75C12.1685 8.75 11.8505 8.8817 11.6161 9.11612C11.3817 9.35054 11.25 9.66848 11.25 10M3.125 10H11.25",stroke:void 0===a?"currentColor":a,strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},pH=function(e){var t,r,n=e.size,i=void 0===n?"24px":n,a=e.color,o=void 0===a?"currentColor":a,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["size","color"]);return(0,z.jsxs)("svg",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({width:i,height:i,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l),r=r={children:[(0,z.jsx)("path",{d:"M6.5 4V5.5M13.5 4V5.5M4 14.5V7C4 6.60218 4.15804 6.22064 4.43934 5.93934C4.72064 5.65804 5.10218 5.5 5.5 5.5H14.5C14.8978 5.5 15.2794 5.65804 15.5607 5.93934C15.842 6.22064 16 6.60218 16 7V14.5M4 14.5C4 14.8978 4.15804 15.2794 4.43934 15.5607C4.72064 15.842 5.10218 16 5.5 16H14.5C14.8978 16 15.2794 15.842 15.5607 15.5607C15.842 15.2794 16 14.8978 16 14.5M4 14.5V9.5C4 9.10218 4.15804 8.72064 4.43934 8.43934C4.72064 8.15804 5.10218 8 5.5 8H14.5C14.8978 8 15.2794 8.15804 15.5607 8.43934C15.842 8.72064 16 9.10218 16 9.5V14.5",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M7.875 10.8672C7.875 11.0743 7.70711 11.2422 7.5 11.2422C7.29289 11.2422 7.125 11.0743 7.125 10.8672C7.125 10.6601 7.29289 10.4922 7.5 10.4922C7.70711 10.4922 7.875 10.6601 7.875 10.8672Z",stroke:o,strokeWidth:"0.75"}),(0,z.jsx)("path",{d:"M7.875 13.1943C7.875 13.4014 7.70711 13.5693 7.5 13.5693C7.29289 13.5693 7.125 13.4014 7.125 13.1943C7.125 12.9872 7.29289 12.8193 7.5 12.8193C7.70711 12.8193 7.875 12.9872 7.875 13.1943Z",stroke:o,strokeWidth:"0.75"}),(0,z.jsx)("path",{d:"M12.875 10.8672C12.875 11.0743 12.7071 11.2422 12.5 11.2422C12.2929 11.2422 12.125 11.0743 12.125 10.8672C12.125 10.6601 12.2929 10.4922 12.5 10.4922C12.7071 10.4922 12.875 10.6601 12.875 10.8672Z",stroke:o,strokeWidth:"0.75"}),(0,z.jsx)("path",{d:"M10.375 10.8672C10.375 11.0743 10.2071 11.2422 10 11.2422C9.79289 11.2422 9.625 11.0743 9.625 10.8672C9.625 10.6601 9.79289 10.4922 10 10.4922C10.2071 10.4922 10.375 10.6601 10.375 10.8672Z",stroke:o,strokeWidth:"0.75"}),(0,z.jsx)("path",{d:"M10.375 13.1943C10.375 13.4014 10.2071 13.5693 10 13.5693C9.79289 13.5693 9.625 13.4014 9.625 13.1943C9.625 12.9872 9.79289 12.8193 10 12.8193C10.2071 12.8193 10.375 12.9872 10.375 13.1943Z",stroke:o,strokeWidth:"0.75"})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},pU=function(e){var t,r,n=e.size,i=void 0===n?"24px":n,a=e.color,o=e.outerColor,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["size","color","outerColor"]);return(0,z.jsxs)("svg",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({width:i,height:i,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l),r=r={children:[(0,z.jsx)("circle",{cx:"16",cy:"16",r:"6",fill:void 0===o?"transparent":o}),(0,z.jsx)("circle",{cx:"16",cy:"16",r:"3",fill:void 0===a?"#E5484D":a})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))};function pV(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function pG(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function pW(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function o(e){pG(a,n,i,o,l,"next",e)}function l(e){pG(a,n,i,o,l,"throw",e)}o(void 0)})}}function pY(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p$(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){pY(e,t,r[t])})}return e}function pQ(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function pK(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function pZ(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||pX(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pJ(e){return function(e){if(Array.isArray(e))return pV(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||pX(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pX(e,t){if(e){if("string"==typeof e)return pV(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pV(e,t)}}function p0(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}var p1=function(e){var t=e.title,r=e.setFilter,n=e.value,i=pZ((0,U.useState)(new Set),2),a=i[0],o=i[1],l=pZ((0,U.useState)(""),2),s=l[0],c=l[1],u=pZ((0,U.useState)(),2),d=u[0],f=u[1],p=(0,J.useMedusa)().client;(0,U.useEffect)(function(){var e;(e=pW(function(e){return p0(this,function(t){switch(t.label){case 0:if(!(null==e?void 0:e.length))return[3,2];return[4,p.admin.inventoryItems.list({id:pJ(new Set(e))})];case 1:o(new Set(t.sent().inventory_items)),t.label=2;case 2:return[2]}})}),function(t){return e.apply(this,arguments)})(n)},[p.admin.inventoryItems,n]),(0,U.useEffect)(function(){var e=setTimeout(function(){c(null!=d?d:"")},400);return function(){return clearTimeout(e)}},[d]);var m=(0,J.useAdminInventoryItems)({q:s,limit:7},{enabled:!!s}),h=m.inventory_items,y=m.isLoading,b=function(e){var t=mt(a,e);o(t),r(pJ(t).map(function(e){return e.id}))},v=U.useMemo(function(){return new Set(pJ(a).map(function(e){return e.id}))},[a]),g=function(){o(new Set),r(void 0)};return(0,z.jsx)("div",{className:(0,en.default)("w-full border-b"),children:(0,z.jsxs)(me,{title:t,defaultOpen:!!n,onOpenChange:function(e){e||g()},children:[(0,z.jsx)("div",{className:"gap-y-xsmall mb-2 flex w-full flex-col pt-2",children:(0,z.jsx)(e1.A,{value:d,className:"pr-1",prefix:0===a.size?null:(0,z.jsxs)("div",{onClick:g,className:"bg-grey-10 border-grey-20 text-grey-40 rounded-rounded gap-x-2xsmall mr-xsmall flex cursor-pointer items-center border py-0.5 pr-1 pl-2",children:[(0,z.jsx)("span",{className:"text-grey-50",children:a.size}),(0,z.jsx)(ao.A,{size:16})]}),placeholder:a.size?"Items selected":"Find items",onChange:function(e){return f(e.target.value)}})}),(0,z.jsxs)("div",{className:"flex flex-col gap-y-1 pb-2",children:[pJ(a).map(function(e,t){return(0,z.jsx)(p2,{onClick:function(){return b(e)},selected:!0,item:e},"selected-item-".concat(t))}),s&&(y?(0,z.jsx)(X.A,{}):(0,z.jsx)(z.Fragment,{children:null==h?void 0:h.filter(function(e){return!v.has(e.id)}).map(function(e,t){return(0,z.jsx)(p2,{onClick:function(){return b(e)},selected:!1,item:e},"item-".concat(t))})}))]})]})})},p2=function(e){var t=e.key,r=e.onClick,n=e.selected,i=e.item;return(0,z.jsxs)("div",{onClick:r,className:"hover:bg-grey-10 rounded-rounded flex items-center py-1.5 px-2",children:[(0,z.jsx)("div",{className:"mr-2 flex h-[20px] w-[20px] items-center",children:n&&(0,z.jsx)(e7,{size:16,color:"#111827"})}),(0,z.jsxs)("div",{className:"inter-small-regular flex w-full items-center justify-between",children:[(0,z.jsx)("p",{className:"text-grey-90",children:i.title})," ",(0,z.jsx)("p",{className:"text-grey-50",children:i.sku})]})]},t)},p3=function(e){var t=e.title,r=e.setFilter,n=e.value,i=pZ((0,U.useState)(new Set),2),a=i[0],o=i[1],l=pZ((0,U.useState)(),2),s=l[0],c=l[1],u=pZ((0,U.useState)(),2),d=u[0],f=u[1];(0,U.useEffect)(function(){var e=setTimeout(function(){c(null!=d?d:"")},400);return function(){return clearTimeout(e)}},[d]);var p=(0,J.useAdminUsers)({}),m=p.users,h=p.isLoading,y=pZ((0,U.useState)([]),2),b=y[0],v=y[1];(0,U.useEffect)(function(){var e;(e=pW(function(e){return p0(this,function(t){return e&&m&&o(new Set(m.filter(function(t){return e.includes(t.id)}))),[2]})}),function(t){return e.apply(this,arguments)})(n)},[n]),(0,U.useEffect)(function(){s&&(null==m?void 0:m.length)&&v(m.filter(function(e){var t,r;return(null===(t=e.first_name)||void 0===t?void 0:t.toLowerCase().includes(s))||(null===(r=e.last_name)||void 0===r?void 0:r.toLowerCase().includes(s))}).slice(0,7))},[s,m]);var g=function(e){var t=mt(a,e);o(t),r(pJ(t).map(function(e){return e.id}))},x=function(){o(new Set),r(void 0)};return(0,z.jsx)("div",{className:(0,en.default)("w-full cursor-pointer"),children:(0,z.jsxs)(me,{title:t,defaultOpen:!!n,onOpenChange:function(e){e||x()},children:[(0,z.jsx)("div",{className:"gap-y-xsmall mb-2 flex w-full flex-col pt-2",children:(0,z.jsx)(e1.A,{value:d,placeholder:"Find user",onChange:function(e){return f(e.target.value)},prefix:0===a.size?null:(0,z.jsxs)("div",{onClick:x,className:"bg-grey-10 border-grey-20 text-grey-40 rounded-rounded gap-x-2xsmall mr-xsmall flex cursor-pointer items-center border py-0.5 pr-1 pl-2",children:[(0,z.jsx)("span",{className:"text-grey-50",children:a.size}),(0,z.jsx)(ao.A,{size:16})]})})}),(0,z.jsxs)("div",{className:"flex flex-col gap-y-1 pb-2",children:[pJ(a).map(function(e,t){return(0,z.jsx)(p5,{onClick:function(){return g(e)},selected:!0,user:e},"selected-user-".concat(t))}),!h&&s&&(0,z.jsx)(z.Fragment,{children:null==b?void 0:b.filter(function(e){return!a.has(e)}).map(function(e,t){return(0,z.jsx)(p5,{onClick:function(){return g(e)},selected:!1,user:e},"user-".concat(t))})})]})]})})},p5=function(e){var t=e.key,r=e.onClick,n=e.selected,i=e.user;return(0,z.jsxs)("div",{onClick:r,className:"hover:bg-grey-10 inter-small-regular rounded-rounded flex items-center py-1.5 px-2",children:[(0,z.jsx)("div",{className:"inter-small-regular mr-2 flex h-[20px] w-[20px] items-center",children:n&&(0,z.jsx)(e7,{size:16,color:"#111827"})}),(0,z.jsx)("div",{children:"".concat(i.first_name," ").concat(i.last_name)})]},t)},p6=function(e){var t=e.title,r=e.setFilter,n=e.value,i=e.options,a=pZ((0,U.useState)(n),2),o=a[0],l=a[1],s=pZ((0,U.useState)(i.find(function(e){return!!(null==n?void 0:n[e.value])})||i[0]),2),c=s[0],u=s[1],d=function(e){l(pY({},c.value,e)),r(pY({},c.value,e))};return(0,z.jsx)("div",{className:(0,en.default)("w-full border-b"),children:(0,z.jsx)(me,{title:t,defaultOpen:!!n,onOpenChange:function(e){e||r(void 0)},children:(0,z.jsxs)("div",{className:"gap-y-xsmall flex w-full flex-col py-2",children:[(0,z.jsx)(p9,{options:i,value:c,onChange:function(e){var t=null==o?void 0:o[c.value];u(e),l(pY({},e.value,t)),r(pY({},e.value,t))}}),(0,z.jsx)(e1.A,{value:null==o?void 0:o[c.value],placeholder:"Write something",onChange:function(e){return d(e.target.value)}})]})})})},p4=function(e){var t,r=e.title,n=e.setFilter,i=e.value,a=e.options,o=function(e){var t=e?Object.keys(e).length:0;return 1===t?a.find(function(t){return t.value===Object.keys(e)[0]})||a[0]:2===t?{label:"Between",value:"between"}:a[0]},l=pZ((0,U.useState)(1===(t=i?Object.keys(i).length:0)?i:2===t?{gt:i.gt}:null),2),s=l[0],c=l[1],u=pZ((0,U.useState)("between"===o(i).value?i.lt:void 0),2),d=u[0],f=u[1],p=pZ((0,U.useState)(o(i)),2),m=p[0],h=p[1],y=function(e){switch(m.value){case"lt":case"gt":c(pY({},m.value,e)),n(pY({},m.value,e));break;case"between":c(pY({},"gt",e)),n(pY({},"gt",e))}},b=function(e){f(e),n({gt:null==s?void 0:s.gt,lt:e})},v=function(){n(void 0),c(null),f(null)};return(0,z.jsx)("div",{className:(0,en.default)("w-full border-b"),children:(0,z.jsx)(me,{title:r,defaultOpen:!!i,onOpenChange:function(e){e||v()},children:(0,z.jsxs)("div",{className:"gap-y-xsmall flex w-full flex-col py-2",children:[(0,z.jsx)(p9,{options:a,value:m,onChange:function(e){var t=null==s?void 0:s[m.value];switch(e.value){case"lt":case"gt":c(pY({},e.value,t)),n(pY({},e.value,t));break;case"between":c(pY({},"gt",t)),n(pY({},"gt",t))}h(e)}}),(0,z.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,z.jsx)(e1.A,{value:"between"===m.value?null==s?void 0:s.gt:null==s?void 0:s[m.value],placeholder:"0",type:"number",onChange:function(e){return y(e.target.value)}}),"between"===m.value&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("span",{children:"-"}),(0,z.jsx)(e1.A,{value:null!=d?d:void 0,placeholder:"0",type:"number",onChange:function(e){return b(e.target.value)}})]})]})]})})})},p8=function(e){var t,r=e.title,n=e.setFilter,i=e.value,a=[{label:"Before",value:"lt"},{label:"After",value:"gt"},{label:"Between",value:"between"}],o=function(e){var t=e?Object.keys(e).length:0;return 1===t?a.find(function(t){return t.value===Object.keys(e)[0]})||a[0]:2===t?{label:"Between",value:"between"}:a[0]},l=pZ((0,U.useState)(o(i)),2),s=l[0],c=l[1],u=pZ((0,U.useState)(function(e){var t,r,n=o(e);switch(n.value){case"lt":case"gt":return null!==(t=null==e?void 0:e[n.value])&&void 0!==t?t:null;case"between":return null!==(r=null==e?void 0:e.gt)&&void 0!==r?r:null}return null}(i)),2),d=u[0],f=u[1],p=pZ((0,U.useState)("between"===o(i).value&&null!==(t=i.lt)&&void 0!==t?t:null),2),m=p[0],h=p[1],y=function(e){var t=e.date1,r=e.date2;switch(f(t),h(r),s.value){case"lt":case"gt":t&&(n(pY({},s.value,t)),h(null));break;case"between":t&&r&&n({lt:r,gt:t})}};return(0,z.jsx)("div",{className:(0,en.default)("w-full border-b"),children:(0,z.jsx)(me,{title:r,defaultOpen:!!i,onOpenChange:function(e){e||n(void 0)},children:(0,z.jsxs)("div",{className:"gap-y-xsmall flex w-full flex-col py-2",children:[(0,z.jsx)(p9,{options:a,value:s,onChange:function(e){switch(e.value){case"lt":case"gt":d&&(n(pY({},e.value,d)),h(null));break;case"between":d&&m&&n({lt:m,gt:d})}c(e)}}),(0,z.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,z.jsx)(p7,{date:d,setDate:function(e){return y({date1:e,date2:m})}}),"between"===s.value&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("span",{children:"-"}),(0,z.jsx)(p7,{date:m,setDate:function(e){return y({date1:d,date2:e})}})]})]})]})})})},p7=function(e){var t=e.date,r=e.setDate,n=e.side;return(0,z.jsxs)(iE.bL,{children:[(0,z.jsx)(iE.l9,{className:"w-full",children:(0,z.jsxs)("div",{className:"rounded-rounded inter-small-regular bg-grey-5 flex w-full items-center border py-1.5 pl-3 pr-2 text-left",children:[(0,z.jsx)("span",{className:"text-grey-40 mr-1.5",children:(0,z.jsx)(pH,{size:20})}),t?(0,z.jsx)("p",{className:"mt-0.5",children:re()(t).format("MMM DD, YYYY")}):(0,z.jsx)("p",{className:"text-grey-40 mt-0.5",children:"Pick a date"})]})}),(0,z.jsx)(iE.UC,{side:void 0===n?"right":n,sideOffset:8,className:"bg-grey-0 rounded-rounded border p-1",children:(0,z.jsx)(i4,{date:t,onChange:r,greyPastDates:!1})})]})},p9=function(e){var t=e.value,r=e.options,n=e.onChange;return(0,z.jsxs)(iE.bL,{children:[(0,z.jsx)(iE.l9,{className:"w-full",children:(0,z.jsx)("div",{className:"rounded-rounded bg-grey-5 w-full border py-1.5 pl-3 pr-2 text-left",children:t.label})}),(0,z.jsx)(iE.UC,{side:"right",align:"start",sideOffset:2,className:"bg-grey-0 rounded-rounded w-52 border p-1",children:r.map(function(e,r){return(0,z.jsxs)("div",{className:"hover:bg-grey-5 rounded-rounded mb-1 flex py-1.5 px-2",onClick:function(){return n(e)},children:[(0,z.jsx)("div",{className:"mr-2 h-[20px] w-[20px]",children:t.value===e.value&&(0,z.jsx)(pU,{size:20,outerColor:"#FFF",color:"#111827"})}),(0,z.jsx)("p",{children:e.label})]},r)})})]})},me=function(e){var t=e.onOpenChange,r=e.defaultOpen,n=e.title,i=e.children,a=pZ((0,U.useState)(r),2),o=a[0],l=a[1];return(0,z.jsx)("div",{className:(0,en.default)("border-grey-5 w-full border-b"),children:(0,z.jsxs)(eh.bL,{defaultOpen:r,onOpenChange:function(e){l(e),t(e)},className:"w-full",children:[(0,z.jsxs)(eh.l9,{className:(0,en.default)("text-grey-50 flex w-full cursor-pointer items-center justify-between rounded py-1.5 px-3"),children:[(0,z.jsx)("p",{children:n}),(0,z.jsx)(so.A,{checked:o,type:"button",className:"cursor-pointer"})]}),(0,z.jsx)(eh.UC,{className:"flex w-full flex-col gap-y-2 px-2",children:i})]})})};function mt(e,t){return e.has(t)?(e.delete(t),new Set(e)):new Set(e.add(t))}let mr=function(e){var t=e.filters,r=e.submitFilters,n=e.clearFilters,i=pZ((0,U.useState)(t),2),a=i[0],o=i[1];return(0,U.useEffect)(function(){o(t)},[t]),(0,z.jsx)("div",{className:"flex space-x-1",children:(0,z.jsx)(iM,{submitFilters:function(){var e=a.additionalFilters;r(pQ(p$({},aF(pK(a,["additionalFilters"]))),{additionalFilters:aF(e)}))},clearFilters:function(){n(),a(pQ(p$({},a),{additionalFilters:{}}))},triggerElement:(0,z.jsxs)(W.A,{variant:"secondary",size:"small",children:[(0,z.jsx)(pq,{size:20}),"View"]}),children:(0,z.jsxs)("div",{className:"w-[320px]",children:[(0,z.jsx)(p1,{title:"Inventory item",value:a.additionalFilters.inventory_item_id,setFilter:function(e){o(function(t){var r=t.additionalFilters;return pQ(p$({},pK(t,["additionalFilters"])),{additionalFilters:pQ(p$({},r),{inventory_item_id:e})})})}}),(0,z.jsx)(p6,{title:"Description",value:a.additionalFilters.description,options:[{label:"Equals",value:"equals"},{label:"Contains",value:"contains"}],setFilter:function(e){o(function(t){return pQ(p$({},t),{additionalFilters:{description:e}})})}}),(0,z.jsx)(p8,{title:"Creation date",value:a.additionalFilters.created_at,setFilter:function(e){o(function(t){var r=t.additionalFilters;return pQ(p$({},pK(t,["additionalFilters"])),{additionalFilters:pQ(p$({},r),{created_at:e})})})}}),(0,z.jsx)(p4,{title:"Quantity",value:a.additionalFilters.quantity,options:[{label:"Over",value:"gt"},{label:"Under",value:"lt"},{label:"Between",value:"between"}],setFilter:function(e){o(function(t){var r=t.additionalFilters;return pQ(p$({},pK(t,["additionalFilters"])),{additionalFilters:pQ(p$({},r),{quantity:e})})})}}),(0,z.jsx)(p3,{title:"Created by",value:a.additionalFilters.created_by,setFilter:function(e){o(function(t){var r=t.additionalFilters;return pQ(p$({},pK(t,["additionalFilters"])),{additionalFilters:pQ(p$({},r),{created_by:e})})})}})]})})})};function mn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function mi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function ma(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function mo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return mn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mn(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ml=["description","offset","limit","location_id","inventory_item_id","quantity","created_at","created_by"],ms={location:"location_id",inventory_item:"inventory_item_id",created_at:"created_at",date:"created_at",created_by:"created_by",description:"description",query:"q",offset:"offset",limit:"limit"},mc=function(e,t){switch(t.type){case"setFilters":return mi({},e,t.payload);case"setQuery":return ma(mi({},e),{query:t.payload});case"setDefaults":return ma(mi({},e),{additionalFilters:{}});case"setLimit":return ma(mi({},e),{limit:t.payload});case"setOffset":return ma(mi({},e),{offset:t.payload});case"setLocation":return ma(mi({},e),{location:t.payload});case"reset":return t.payload;default:return e}},mu=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e&&"?"===e[0]&&(e=e.substring(1));var r=(0,U.useMemo)(function(){return md(e,t)},[e,t]),n=mo((0,U.useReducer)(mc,r),2),i=n[0],a=n[1],o=function(){var e=mi({},i.additionalFilters);"string"==typeof(null===(a=e.description)||void 0===a?void 0:a.equals)&&(e.description=e.description.equals);var t=!0,r=!1,n=void 0;try{for(var a,o,l=Object.entries(i)[Symbol.iterator]();!(t=(o=l.next()).done);t=!0){var s,c=mo(o.value,2),u=c[0],d=c[1];"query"===u?d&&"string"==typeof d&&(e.q=d):"offset"===u||"limit"===u?e[u]=d:(null==d?void 0:d.open)?"date"===u?e[ms[u]]=(s=d.filter,null===s?s:Object.entries(s).reduce(function(e,t){var r=mo(t,2),n=r[0],i=r[1];return i.includes("|")?e[n]=iB(i):e[n]=i,e},{})):e[ms[u]]=d.filter:"location"===u&&(d?e[ms[u]]=d:delete e[ms[u]])}}catch(e){r=!0,n=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw n}}return e.expand="line_item,inventory_item",e},l=function(e){var t=null!=e?e:i,r=mi({},t.additionalFilters,function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(t,["additionalFilters"])),n={},a=!0,o=!1,l=void 0;try{for(var s,c=Object.entries(r)[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var u=mo(s.value,2),d=u[0],f=u[1];"query"===d?f&&"string"==typeof f&&(n.q=f):f&&(n[ms[d]||d]=f)}}catch(e){o=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw l}}return n},s=(0,U.useMemo)(function(){return o()},[i]),c=(0,U.useMemo)(function(){return l()},[i]);return ma(mi({},i),{filters:mi({},i),representationObject:c,queryObject:s,paginate:function(e){e>0?a({type:"setOffset",payload:i.offset+i.limit}):a({type:"setOffset",payload:Math.max(i.offset-i.limit,0)})},setQuery:function(e){a({type:"setQuery",payload:e})},setFilters:function(e){a({type:"setFilters",payload:e})},setDefaultFilters:function(e){a({type:"setDefaults",payload:e})},setLocationFilter:function(e){a({type:"setLocation",payload:e}),a({type:"setOffset",payload:0})},reset:function(){a({type:"setFilters",payload:ma(mi({},i),{offset:0,query:null})})}})},md=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={location:null!==(l=null==t?void 0:t.location_id)&&void 0!==l?l:"",offset:0,limit:15,additionalFilters:t};if(e){var n=t8().parse(e),i=!0,a=!1,o=void 0;try{for(var l,s,c=Object.entries(n)[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var u=mo(s.value,2),d=u[0],f=u[1];if(ml.includes(d)&&f)switch(d){case"offset":"string"==typeof f&&(r.offset=parseInt(f));break;case"limit":"string"==typeof f&&(r.limit=parseInt(f));break;case"location_id":"string"==typeof f&&(r.location=f);break;case"description":r.additionalFilters.description=f;break;case"quantity":r.additionalFilters.quantity=f;break;case"inventory_item_id":case"created_by":r.additionalFilters[d]=Array.isArray(f)?f:[f];break;case"created_at":r.additionalFilters.created_at=f}}}catch(e){a=!0,o=e}finally{try{i||null==c.return||c.return()}finally{if(a)throw o}}}return r};let mf=function(){var e=(0,ei.Bd)().t;return[(0,U.useMemo)(function(){return[{Header:"SKU",accessor:"inventory_item.sku",Cell:function(e){return e.cell.value}},{Header:e("reservations-table-order-id","Order ID"),accessor:"line_item.order.display_id",Cell:function(e){var t=e.cell.value;return null!=t?t:"-"}},{Header:e("reservations-table-description","Description"),accessor:"description",Cell:function(e){return e.cell.value}},{Header:e("reservations-table-created","Created"),accessor:"created_at",Cell:function(e){var t=e.cell.value;return re()(t).format("MMM Do YYYY")}},{Header:function(){return(0,z.jsx)("div",{className:"pr-2 text-right",children:e("reservations-table-quantity","Quantity")})},accessor:"quantity",Cell:function(e){var t=e.cell.value;return(0,z.jsx)("div",{className:"w-full pr-2 text-right",children:t})}}]},[])]};function mp(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function mm(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function mh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function my(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function mb(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function mv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return mp(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mp(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var mg=function(e){var t,r=e.selectedLocation,n=e.onChange,i=mv((0,U.useState)(!1),2),a=i[0],o=i[1],l=(0,U.useRef)(null),s=(0,J.useAdminStockLocations)(),c=s.stock_locations,u=s.isLoading,d=(0,U.useMemo)(function(){var e=[];return!u&&c&&(e=c.map(function(e){return{label:e.name,value:e.id}})),e.unshift({label:"All locations",value:void 0}),e},[u,c]),f=(0,U.useMemo)(function(){if(null==d?void 0:d.length){var e;return null!==(e=d.find(function(e){return e.value===r}))&&void 0!==e?e:d[0]}},[r,d]);return!u&&(null==d?void 0:d.length)?(0,z.jsx)("div",{className:"max-w-[220px]",children:(0,z.jsxs)(iE.bL,{open:a,onOpenChange:o,children:[(0,z.jsx)(iE.l9,{className:"w-full",children:(0,z.jsx)(r9.A,{className:(0,en.default)({hidden:!((t=l.current)&&t.offsetWidth<t.scrollWidth)}),delayDuration:1e3,content:(0,z.jsx)("div",{children:null==f?void 0:f.label}),children:(0,z.jsxs)(W.A,{size:"small",variant:"secondary",spanClassName:"flex grow",className:"max-w-[220px] items-center justify-start",children:[(0,z.jsx)(rE.A,{size:20}),(0,z.jsx)("span",{ref:l,className:"max-w-[166px] truncate",children:null==f?void 0:f.label})]})})}),(0,z.jsx)(iE.UC,{side:"bottom",align:"center",sideOffset:2,className:"rounded-rounded z-50 w-[220px] border bg-white p-1",children:d.map(function(e,t){return(0,z.jsxs)("div",{className:"hover:bg-grey-5 rounded-rounded mb-1 flex py-1.5 px-2",onClick:function(){o(!1),n(e.value)},children:[(0,z.jsx)("div",{className:"mr-2 h-[20px] w-[20px]",children:(null==f?void 0:f.value)===e.value&&(0,z.jsx)(pU,{size:20,outerColor:"#FFF",color:"#111827"})}),(0,z.jsx)("p",{className:"w-[166px]",children:e.label})]},t)})})]})}):null},mx=function(e){var t,r=e.row,n=mb(e,["row"]),i=r.original,a=(0,ei.Bd)().t,o=(0,J.useAdminDeleteReservation)(i.id).mutate,l=mv((0,U.useState)(null),2),s=l[0],c=l[1],u=mv((0,U.useState)(!1),2),d=u[0],f=u[1];return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(td.Row,my(mh({color:"inherit",forceDropdown:!0,actions:[{label:a("reservations-table-edit","Edit"),onClick:function(){return c(r.original)},icon:(0,z.jsx)(ec,{size:20})},{label:a("reservations-table-delete","Delete"),variant:"danger",icon:(0,z.jsx)(eu,{size:20}),onClick:function(){return f(!0)}}]},n),{children:r.cells.map(function(e,t){var r=e.getCellProps(),n=r.key,i=mb(r,["key"]);return(0,U.createElement)(td.Cell,my(mh({},i),{key:n}),e.render("Cell",{index:t}))})})),s&&(0,z.jsx)(pA,{close:function(){return c(null)},reservation:r.original}),d&&(0,z.jsx)(e_,{text:a("reservations-table-confirm-delete","Are you sure you want to remove this reservation?"),heading:a("reservations-table-remove-reservation","Remove reservation"),successText:a("reservations-table-reservation-has-been-removed","Reservation has been removed"),onDelete:(t=function(){return function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,function(e){switch(e.label){case 0:return[4,o(void 0)];case 1:return[2,e.sent()]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function o(e){mm(a,n,i,o,l,"next",e)}function l(e){mm(a,n,i,o,l,"throw",e)}o(void 0)})}),handleClose:function(){return f(!1)}})]})};let mj=function(){var e=(0,ei.Bd)().t,t=(0,J.useAdminStore)().store,r=(0,n5.A)(),n=r.state,i=r.close,a=r.open,o=(0,H.useLocation)(),l=(0,U.useMemo)(function(){return t?{location_id:t.default_location_id}:{}},[t]),s=mu(o.search,l),c=s.reset,u=s.paginate,d=s.setLocationFilter,f=s.setQuery,p=s.queryObject,m=s.representationObject,h=s.filters,y=s.setFilters,b=s.setDefaultFilters,v=parseInt(p.offset)||0,g=parseInt(p.limit),x=mv((0,U.useState)(p.query),2),j=x[0],w=x[1],O=mv((0,U.useState)(0),2),S=O[0],P=O[1],C=(0,J.useAdminReservations)(my(mh({},p),{expand:"line_item,inventory_item"}),{enabled:!!t}),A=C.reservations,N=C.isLoading,k=C.count;(0,U.useEffect)(function(){P(Math.ceil(k/p.limit))},[A]);var _=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=t8().stringify(e);window.history.replaceState("/a/reservations","","".concat("?".concat(t)))},E=function(){(0,t6.isEmpty)(m)?_({offset:0,limit:15}):_(m)};(0,U.useEffect)(function(){E()},[m]);var I=mv(mf(),1)[0],D=(0,e4.useTable)({columns:I,data:A||[],manualPagination:!0,initialState:{pageIndex:Math.floor(v/g),pageSize:g},pageCount:S,autoResetPage:!1},e4.usePagination),T=D.getTableProps,M=D.getTableBodyProps,R=D.headerGroups,L=D.rows,F=D.prepareRow,B=D.gotoPage,q=D.canPreviousPage,V=D.canNextPage,G=D.pageCount,Y=D.nextPage,$=D.previousPage,Q=D.state.pageIndex;return(0,U.useEffect)(function(){var e=setTimeout(function(){j?(f(j),B(0)):void 0!==j&&c()},400);return function(){return clearTimeout(e)}},[j]),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(tb,{hasPagination:!0,pagingState:{count:k||0,offset:v,pageSize:v+L.length,title:e("reservations-table-reservations","Reservations"),currentPage:Q+1,pageCount:G,nextPage:function(){V&&(u(1),Y())},prevPage:function(){q&&(u(-1),$())},hasNext:V,hasPrev:q},numberOfRows:g,isLoading:N,children:(0,z.jsxs)(td,my(mh({searchClassName:"h-[40px]",handleSearch:w,searchValue:j,tableActions:(0,z.jsxs)("div",{className:"flex gap-2",children:[(0,z.jsx)(mr,{submitFilters:y,clearFilters:b,filters:h}),(0,z.jsx)(mg,{selectedLocation:p.location_id,onChange:function(e){d(e),B(0)}}),(0,z.jsx)(W.A,{variant:"secondary",size:"small",onClick:a,children:"Create reservation"})]})},T()),{children:[(0,z.jsx)(td.Head,{children:null==R?void 0:R.map(function(e){var t=e.getHeaderGroupProps(),r=t.key,n=mb(t,["key"]);return(0,z.jsx)(td.HeadRow,my(mh({},n),{children:e.headers.map(function(e){var t=e.getHeaderProps(),r=t.key,n=mb(t,["key"]);return(0,z.jsx)(td.HeadCell,my(mh({className:"min-w-[100px]"},n),{children:e.render("Header")}),r)})}),r)})}),(0,z.jsx)(td.Body,my(mh({},M()),{children:L.map(function(e){F(e);var t=e.getRowProps(),r=t.key,n=mb(t,["key"]);return(0,z.jsx)(mx,mh({row:e},n),r)})}))]}))}),(0,z.jsx)(ik.A,{isVisible:n,isFullScreen:!0,children:(0,z.jsx)(pB,{locationId:p.location_id,onClose:i})})]})},mw=function(){return(0,z.jsx)("div",{className:"flex h-full grow flex-col",children:(0,z.jsxs)("div",{className:"flex w-full grow flex-col",children:[(0,z.jsx)(eD,{customHeader:(0,z.jsx)(fJ,{activeView:"reservations"}),className:"h-fit",children:(0,z.jsx)(mj,{})}),(0,z.jsx)(el,{})]})})},mO=function(){return(0,z.jsxs)(H.Routes,{children:[(0,z.jsx)(H.Route,{index:!0,element:(0,z.jsx)(fX,{})}),(0,z.jsx)(H.Route,{path:"/locations/*",element:(0,z.jsx)(pm,{})}),(0,z.jsx)(H.Route,{path:"/reservations/*",element:(0,z.jsx)(mw,{})})]})},mS=function(){var e=(0,ei.Bd)().t,t=(0,H.useParams)(),r=t.app_name,n=t.code,i=t.state;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{children:r}),(0,z.jsx)(W.A,{variant:"primary",size:"large",onClick:function(){return tF.apps.authorize({application_name:r,code:n,state:i})},children:e("oauth-complete-installation","Complete Installation")})]})},mP=function(e){var t,r,n=e.size,i=void 0===n?"20":n,a=e.color,o=void 0===a?"currentColor":a,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["size","color"]);return(0,z.jsxs)("svg",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({width:i,height:i,viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l),r=r={children:[(0,z.jsx)("path",{d:"M17.5 13V15.6667C17.5 16.0203 17.3361 16.3594 17.0444 16.6095C16.7527 16.8595 16.357 17 15.9444 17H5.05556C4.643 17 4.24733 16.8595 3.95561 16.6095C3.66389 16.3594 3.5 16.0203 3.5 15.6667V13",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M14.6673 6.92057L10.5007 2.75391L6.33398 6.92057",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M10.5 2.75391V12.7539",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},mC=function(e){var t=e.handleClose,r=e.title,n=e.loading,i=e.onSubmit,a=(0,ei.Bd)().t;return(0,z.jsx)(eN.A,{handleClose:t,children:(0,z.jsxs)(eN.A.Body,{children:[(0,z.jsx)(eN.A.Header,{handleClose:t,children:(0,z.jsx)("span",{className:"inter-xlarge-semibold",children:r})}),(0,z.jsx)(eN.A.Content,{children:(0,z.jsx)("div",{className:"inter-small-regular text-grey-50 mb-4 flex",children:a("export-modal-title","Initialize an export of your data")})}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"flex w-full justify-end",children:[(0,z.jsx)(W.A,{variant:"ghost",size:"small",onClick:t,className:"mr-2",children:a("export-modal-cancel","Cancel")}),(0,z.jsx)(W.A,{loading:n,disabled:n,variant:"primary",size:"small",onClick:i,children:a("export-modal-export","Export")})]})})]})})};function mA(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function mN(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mk(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){mN(e,t,r[t])})}return e}function m_(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function mE(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return mA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mA(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var mI=["completed","pending","canceled","archived","requires_action"],mD=["awaiting","captured","refunded","canceled","partially_refunded","requires_action","not_paid"],mT=["fulfilled","not_fulfilled","partially_fulfilled","returned","partially_returned","shipped","partially_shipped","requires_action","canceled"],mM=["is in the last","is older than","is after","is before","is equal to"];let mR=function(e){var t=e.tabs,r=e.activeTab,n=e.onTabClick,i=e.onSaveTab,a=e.onRemoveTab,o=e.filters,l=e.submitFilters,s=e.clearFilters,c=(0,ei.Bd)().t,u=mE((0,U.useState)(o),2),d=u[0],f=u[1],p=mE((0,U.useState)(""),2),m=p[0],h=p[1],y=(0,(0,rz.u)().isFeatureEnabled)("sales_channels"),b=function(e){a&&a(e)},v=function(e){n&&n(e)};(0,U.useEffect)(function(){f(o)},[o]);var g=function(e,t){f(function(r){return m_(mk({},r),mN({},e,t))})},x=Object.entries(o).reduce(function(e,t){var r=mE(t,2),n=(r[0],r[1]);return(null==n?void 0:n.open)&&(e+=1),e},0),j=mE((0,U.useState)({offset:0,limit:10}),2),w=j[0],O=j[1],S=(0,J.useAdminRegions)(w),P=S.regions,C=S.count,A=S.isLoading,N=(0,J.useAdminSalesChannels)({limit:10},{enabled:y}),k=N.sales_channels,_=N.isLoading,E=function(e){e>0?O(function(e){return m_(mk({},e),{offset:e.offset+e.limit})}):e<0&&O(function(e){return m_(mk({},e),{offset:Math.max(e.offset-e.limit,0)})})};return(0,z.jsxs)("div",{className:"flex space-x-1",children:[(0,z.jsxs)(iM,{submitFilters:function(){l(d)},clearFilters:function(){s()},triggerElement:(0,z.jsxs)("button",{className:(0,en.default)("rounded-rounded focus-visible:shadow-input focus-visible:border-violet-60 flex items-center space-x-1 focus-visible:outline-none"),children:[(0,z.jsxs)("div",{className:"rounded-rounded bg-grey-5 border-grey-20 inter-small-semibold flex h-6 items-center border px-2",children:[c("order-filter-dropdown-filters","Filters"),(0,z.jsx)("div",{className:"text-grey-40 ml-1 flex items-center rounded",children:(0,z.jsx)("span",{className:"text-violet-60 inter-small-semibold",children:x||"0"})})]}),(0,z.jsx)("div",{className:"rounded-rounded bg-grey-5 border-grey-20 inter-small-semibold flex items-center border p-1",children:(0,z.jsx)(n_.A,{size:14})})]}),children:[(0,z.jsx)(ae,{filterTitle:c("order-filter-dropdown-status","Status"),options:mI,filters:d.status.filter,open:d.status.open,setFilter:function(e){return g("status",e)}}),(0,z.jsx)(ae,{filterTitle:c("order-filter-dropdown-payment-status","Payment Status"),options:mD,filters:d.payment.filter,open:d.payment.open,setFilter:function(e){return g("payment",e)}}),(0,z.jsx)(ae,{filterTitle:c("order-filter-dropdown-fulfillment-status","Fulfillment Status"),options:mT,filters:d.fulfillment.filter,open:d.fulfillment.open,setFilter:function(e){return g("fulfillment",e)}}),(0,z.jsx)(ae,{filterTitle:c("order-filter-dropdown-regions","Regions"),options:(null==P?void 0:P.map(function(e){return{value:e.id,label:e.name}}))||[],isLoading:A,hasPrev:w.offset>0,hasMore:w.offset+w.limit<(null!=C?C:0),onShowPrev:function(){return E(-1)},onShowNext:function(){return E(1)},filters:d.region.filter,open:d.region.open,setFilter:function(e){return g("region",e)}}),y&&(0,z.jsx)(ae,{filterTitle:c("order-filter-dropdown-sales-channel","Sales Channel"),options:(null==k?void 0:k.map(function(e){return{value:e.id,label:e.name}}))||[],isLoading:_,filters:d.salesChannel.filter,open:d.salesChannel.open,setFilter:function(e){return g("salesChannel",e)}}),(0,z.jsx)(ae,{filterTitle:c("order-filter-dropdown-date","Date"),options:mM,filters:d.date.filter,open:d.date.open,setFilter:function(e){return g("date",e)}}),(0,z.jsx)(aa,{saveFilter:function(){i&&i(m,d)},name:m,setName:h})]}),t&&t.map(function(e){return(0,z.jsx)(al,{onClick:function(){return v(e.value)},label:e.label,isActive:r===e.value,removable:!!e.removable,onRemove:function(){return b(e.value)}},e.value)})]})};var mL=r(40801);let mz=function(){var e=(0,ei.Bd)().t,t=function(t){switch(t){case"captured":return(0,z.jsx)(tv.A,{variant:"success",title:e("order-table-paid","Paid")});case"awaiting":return(0,z.jsx)(tv.A,{variant:"default",title:e("order-table-awaiting","Awaiting")});case"requires_action":return(0,z.jsx)(tv.A,{variant:"danger",title:e("order-table-requires-action","Requires action")});case"canceled":return(0,z.jsx)(tv.A,{variant:"warning",title:e("order-table-canceled","Canceled")});default:return(0,z.jsx)(tv.A,{variant:"primary",title:e("order-table-n-a","N/A")})}};return[(0,U.useMemo)(function(){return[{Header:(0,z.jsx)("div",{className:"pl-2",children:e("order-table-order","Order")}),accessor:"display_id",Cell:function(e){var t=e.cell.value;return(0,z.jsx)("p",{className:"text-grey-90 group-hover:text-violet-60 min-w-[100px] pl-2",children:"#".concat(t)})}},{Header:e("order-table-date-added","Date added"),accessor:"created_at",Cell:function(e){var t=e.cell.value;return(0,z.jsx)("div",{children:(0,z.jsx)(r9.A,{content:re()(t).format("DD MMM YYYY hh:mm a"),children:re()(t).format("DD MMM YYYY")})})}},{Header:e("order-table-customer","Customer"),accessor:"customer",Cell:function(e){var t,r,n=e.row,i=e.cell.value;return(0,z.jsx)("div",{children:(0,z.jsx)(rn,{customer:{first_name:(null==i?void 0:i.first_name)||(null===(t=n.original.shipping_address)||void 0===t?void 0:t.first_name),last_name:(null==i?void 0:i.last_name)||(null===(r=n.original.shipping_address)||void 0===r?void 0:r.last_name),email:n.original.email},color:rt(n.index)})})}},{Header:e("order-table-fulfillment","Fulfillment"),accessor:"fulfillment_status",Cell:function(e){return e.cell.value}},{Header:e("order-table-payment-status","Payment status"),accessor:"payment_status",Cell:function(e){return t(e.cell.value)}},{Header:e("order-table-sales-channel","Sales Channel"),accessor:"sales_channel",Cell:function(e){var t,r=e.cell.value;return null!==(t=null==r?void 0:r.name)&&void 0!==t?t:"N/A"}},{Header:function(){return(0,z.jsx)("div",{className:"text-right",children:e("order-table-total","Total")})},accessor:"total",Cell:function(e){var t=e.row,r=e.cell.value;return(0,z.jsx)("div",{className:"text-right",children:(0,rg.Q2)({amount:r,currency:t.original.currency_code,digits:2})})}},{Header:"",accessor:"currency_code",Cell:function(e){var t=e.cell.value;return(0,z.jsx)("div",{className:"text-grey-40 text-right",children:t.toUpperCase()})}},{Header:"",accessor:"country_code",Cell:function(e){var t,r,n,i,a,o=e.row;return(0,z.jsx)("div",{className:"pr-2",children:(0,z.jsx)("div",{className:"rounded-rounded flex w-full justify-end",children:(0,z.jsx)(r9.A,{content:uw[null===(r=o.original.shipping_address)||void 0===r?void 0:null===(t=r.country_code)||void 0===t?void 0:t.toUpperCase()]||(null===(i=o.original.shipping_address)||void 0===i?void 0:null===(n=i.country_code)||void 0===n?void 0:n.toUpperCase()),children:(0,z.jsx)(mL.A,{className:"rounded",svg:!0,countryCode:null===(a=o.original.shipping_address)||void 0===a?void 0:a.country_code})})})})}}]},[])]};function mF(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function mB(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function mq(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function mH(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||mV(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mU(e){return function(e){if(Array.isArray(e))return mF(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||mV(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mV(e,t){if(e){if("string"==typeof e)return mF(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mF(e,t)}}var mG=["status","region","fulfillment_status","payment_status","created_at","q","offset","limit"],mW={incomplete:{fulfillment_status:["not_fulfilled","fulfilled"],payment_status:["awaiting"]},complete:{fulfillment_status:["shipped"],payment_status:["captured"]}},mY=function(e,t){switch(t.type){case"setFilters":var r;return mq(mB({},e),{region:t.payload.region,salesChannel:t.payload.salesChannel,fulfillment:t.payload.fulfillment,payment:t.payload.payment,status:t.payload.status,date:t.payload.date,query:null==t?void 0:null===(r=t.payload)||void 0===r?void 0:r.query});case"setQuery":return mq(mB({},e),{offset:0,query:t.payload});case"setDate":var n=e.date;return mq(mB({},e),{date:n});case"setOffset":return mq(mB({},e),{offset:t.payload});case"reset":return t.payload;default:return e}},m$=function(e,t){if(e.size!==t.size)return!1;var r=!0,n=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var l=a.value;if(!t.has(l))return!1}}catch(e){n=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(n)throw i}}return!0},mQ=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=(0,ei.Bd)().t;e&&"?"===e[0]&&(e=e.substring(1));var n=(0,U.useMemo)(function(){return mJ(e,t)},[e,t]),i=(0,U.useMemo)(function(){var e=localStorage.getItem("orders::filters");if(e){var t=JSON.parse(e);if(t)return Object.entries(t).map(function(e){var t=mH(e,2),r=t[0];return{label:r,value:r,removable:!0,representationString:t[1]}})}return[]},[]),a=mH((0,U.useReducer)(mY,n),2),o=a[0],l=a[1],s=mH((0,U.useState)(i),2),c=s[0],u=s[1],d=function(){var e=mB({},o.additionalFilters),t=!0,r=!1,n=void 0;try{for(var i,a=Object.entries(o)[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var l,s=mH(i.value,2),c=s[0],u=s[1];"query"===c?u&&"string"==typeof u&&(e.q=u):"offset"===c||"limit"===c?e[c]=u:u.open&&("date"===c?e[mZ[c]]=(l=u.filter,null===l?l:Object.entries(l).reduce(function(e,t){var r=mH(t,2),n=r[0],i=r[1];return i.includes("|")?e[n]=iB(i):e[n]=i,e},{})):e[mZ[c]]=u.filter)}}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}return e},f=function(e){var t=null!=e?e:o,r={},n=!0,i=!1,a=void 0;try{for(var l,s=Object.entries(t)[Symbol.iterator]();!(n=(l=s.next()).done);n=!0){var c=mH(l.value,2),u=c[0],d=c[1];"query"===u?d&&"string"==typeof d&&(r.q=d):"offset"===u||"limit"===u?r[u]=d:d.open&&(r[mZ[u]]=d.filter)}}catch(e){i=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}return r},p=function(){var e=f();return t8().stringify(e,{skipNulls:!0})},m=(0,U.useMemo)(function(){return d()},[o]),h=(0,U.useMemo)(function(){return f()},[o]),y=(0,U.useMemo)(function(){return p()},[o]),b=(0,U.useMemo)(function(){var e=(0,t6.omit)(h,["limit","offset"]),t=t8().stringify(e),r=c.find(function(e){return e.representationString===t});if(r)return r.value;var n=!0,i=!1,a=void 0;try{for(var o,l=Object.entries(mW)[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var s=mH(o.value,2),u=s[0],d=s[1],f=!0;if(Object.keys(e).length===Object.keys(d).length){var p=!0,m=!1,y=void 0;try{for(var b,v=Object.entries(d)[Symbol.iterator]();!(p=(b=v.next()).done);p=!0){var g=mH(b.value,2),x=g[0],j=g[1];if(!(f=x in e&&(Array.isArray(j)?Array.isArray(e[x])&&m$(new Set(e[x]),new Set(j)):e[x]===j)))break}}catch(e){m=!0,y=e}finally{try{p||null==v.return||v.return()}finally{if(m)throw y}}if(f)return u}}}catch(e){i=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(i)throw a}}return null},[h,c]),v=(0,U.useMemo)(function(){return[{label:r("order-table-filters-complete","Complete"),value:"complete"},{label:r("order-table-filters-incomplete","Incomplete"),value:"incomplete"}].concat(mU(c))},[c]);return mq(mB({},o),{filters:mB({},o),removeTab:function(e){var t=localStorage.getItem("orders::filters"),r=null;t&&(r=JSON.parse(t)),r&&(delete r[e],localStorage.setItem("orders::filters",JSON.stringify(r))),u(function(t){return t.filter(function(t){return t.value!==e})})},saveTab:function(e,t){var r=f(mB({},t)),n=(0,t6.omit)(r,["limit","offset"]),i=t8().stringify(n,{skipNulls:!0}),a=localStorage.getItem("orders::filters"),o=null;if(a&&(o=JSON.parse(a)),o)o[e]=i,localStorage.setItem("orders::filters",JSON.stringify(o));else{var s={};s[e]=i,localStorage.setItem("orders::filters",JSON.stringify(s))}u(function(t){return mU(t).concat([{label:e,value:e,representationString:i,removable:!0}])}),l({type:"setFilters",payload:t})},setTab:function(e){var t=null;if(e in mW)t=mW[e];else{var r=c.find(function(t){return t.value===e});r&&(t=t8().parse(r.representationString))}if(t){var n=mq(mB({},o),{date:{open:!1,filter:null},payment:{open:!1,filter:null},fulfillment:{open:!1,filter:null},status:{open:!1,filter:null}}),i=!0,a=!1,s=void 0;try{for(var u,d=Object.entries(t)[Symbol.iterator]();!(i=(u=d.next()).done);i=!0){var f=mH(u.value,2),p=f[0],m=f[1];n[mK[p]]={open:!0,filter:m}}}catch(e){a=!0,s=e}finally{try{i||null==d.return||d.return()}finally{if(a)throw s}}l({type:"setFilters",payload:n})}},availableTabs:v,activeFilterTab:b,representationObject:h,representationString:y,queryObject:m,paginate:function(e){e>0?l({type:"setOffset",payload:o.offset+o.limit}):l({type:"setOffset",payload:Math.max(o.offset-o.limit,0)})},getQueryObject:d,getQueryString:function(){var e=d();return t8().stringify(e,{skipNulls:!0})},setQuery:function(e){l({type:"setQuery",payload:e})},setFilters:function(e){l({type:"setFilters",payload:e})},setDefaultFilters:function(e){l({type:"setDefaults",payload:e})},setDateFilter:function(e){l({type:"setDate",payload:e})},setFulfillmentFilter:function(e){l({type:"setFulfillment",payload:e})},setPaymentFilter:function(e){l({type:"setPayment",payload:e})},setStatusFilter:function(e){l({type:"setStatus",payload:e})},reset:function(){l({type:"setFilters",payload:mq(mB({},o),{offset:0,region:{open:!1,filter:null},payment:{open:!1,filter:null},fulfillment:{open:!1,filter:null},status:{open:!1,filter:null},salesChannel:{open:!1,filter:null},date:{open:!1,filter:null},query:null})})}})},mK={status:"status",fulfillment_status:"fulfillment",payment_status:"payment",created_at:"date",region_id:"region",sales_channel_id:"salesChannel"},mZ={region:"region_id",salesChannel:"sales_channel_id",status:"status",fulfillment:"fulfillment_status",payment:"payment_status",date:"created_at"},mJ=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r={status:{open:!1,filter:null},fulfillment:{open:!1,filter:null},region:{open:!1,filter:null},salesChannel:{open:!1,filter:null},payment:{open:!1,filter:null},date:{open:!1,filter:null},offset:0,limit:15,additionalFilters:t};if(e){var n=t8().parse(e),i=!0,a=!1,o=void 0;try{for(var l,s=Object.entries(n)[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=mH(l.value,2),u=c[0],d=c[1];if(mG.includes(u))switch(u){case"offset":"string"==typeof d&&(r.offset=parseInt(d));break;case"limit":"string"==typeof d&&(r.limit=parseInt(d));break;case"q":"string"==typeof d&&(r.query=d);break;case"status":("string"==typeof d||Array.isArray(d))&&(r.status={open:!0,filter:d});break;case"fulfillment_status":("string"==typeof d||Array.isArray(d))&&(r.fulfillment={open:!0,filter:d});break;case"region_id":("string"==typeof d||Array.isArray(d))&&(r.region={open:!0,filter:d});break;case"sales_channel_id":("string"==typeof d||Array.isArray(d))&&(r.salesChannel={open:!0,filter:d});break;case"payment_status":("string"==typeof d||Array.isArray(d))&&(r.payment={open:!0,filter:d});break;case"created_at":r.date={open:!0,filter:d}}}}catch(e){a=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}}return r};function mX(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function m0(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m1(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){m0(e,t,r[t])})}return e}function m2(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function m3(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return mX(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mX(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var m5={expand:"customer,shipping_address",fields:"id,status,display_id,created_at,email,fulfillment_status,payment_status,total,currency_code"};let m6=U.memo(function(e){var t=e.setContextFilters,r=(0,H.useLocation)(),n=(0,rz.u)().isFeatureEnabled,i=(0,i_.s)().trackNumberOfOrders,a=["sales_channel"];n("sales_channels")&&(m5.expand.includes("sales_channel")||(m5.expand=m5.expand+",sales_channel"),a=[]);var o=mQ(r.search,m5),l=o.removeTab,s=o.setTab,c=o.saveTab,u=o.availableTabs,d=o.activeFilterTab,f=o.reset,p=o.paginate,m=o.setFilters,h=o.filters,y=o.setQuery,b=o.queryObject,v=o.representationObject,g=parseInt(null==b?void 0:b.offset)||0,x=parseInt(b.limit)||15,j=m3((0,U.useState)(null==b?void 0:b.query),2),w=j[0],O=j[1],S=m3((0,U.useState)(0),2),P=S[0],C=S[1],A=(0,J.useAdminOrders)(b,{keepPreviousData:!0,onSuccess:function(e){i({count:e.count})}}),N=A.orders,k=A.isLoading,_=A.count;(0,U.useEffect)(function(){C(Math.ceil(_/b.limit))},[N]),(0,U.useEffect)(function(){t(h)},[h]);var E=m3(mz(),1)[0],I=(0,e4.useTable)({columns:E,data:N||[],manualPagination:!0,initialState:{pageSize:x,pageIndex:g/x,hiddenColumns:a},pageCount:P,autoResetPage:!1},e4.usePagination),D=I.getTableProps,T=I.getTableBodyProps,M=I.headerGroups,R=I.rows,L=I.prepareRow,F=I.canPreviousPage,B=I.canNextPage,q=I.pageCount,V=I.gotoPage,G=I.nextPage,W=I.previousPage,Y=I.state.pageIndex;(0,U.useEffect)(function(){var e=setTimeout(function(){w?(y(w),V(0)):f()},400);return function(){return clearTimeout(e)}},[w]);var $=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=t8().stringify(e);window.history.replaceState("/a/orders","","".concat("?".concat(t)))},Q=function(){(0,t6.isEmpty)(v)?$({offset:0,limit:15}):$(v)};return(0,U.useEffect)(function(){Q()},[v]),(0,z.jsx)("div",{children:(0,z.jsx)(tb,{isLoading:k,hasPagination:!0,numberOfRows:x,pagingState:{count:_,offset:b.offset,pageSize:b.offset+R.length,title:"Orders",currentPage:Y+1,pageCount:q,nextPage:function(){B&&(p(1),G())},prevPage:function(){F&&(p(-1),W())},hasNext:B,hasPrev:F},children:(0,z.jsxs)(td,m2(m1({filteringOptions:(0,z.jsx)(mR,{filters:h,submitFilters:m,clearFilters:function(){f(),O("")},tabs:u,onTabClick:s,activeTab:d,onRemoveTab:l,onSaveTab:c}),enableSearch:!0,handleSearch:O,searchValue:w},D()),{className:(0,en.default)(m0({},"relative",k)),children:[(0,z.jsx)(td.Head,{children:null==M?void 0:M.map(function(e){return(0,z.jsx)(td.HeadRow,m2(m1({},e.getHeaderGroupProps()),{children:e.headers.map(function(e){return(0,z.jsx)(td.HeadCell,m2(m1({},e.getHeaderProps()),{children:e.render("Header")}))})}))})}),(0,z.jsx)(td.Body,m2(m1({},T()),{children:R.map(function(e){return L(e),(0,z.jsx)(td.Row,m2(m1({color:"inherit",linkTo:e.original.id},e.getRowProps()),{className:"group",children:e.cells.map(function(e){return(0,z.jsx)(td.Cell,m2(m1({},e.getCellProps()),{children:e.render("Cell")}))})}))})}))]}))})})});var m4=r(24781);function m8(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var m7=void 0,m9=(0,U.createContext)({});let he=function(e){var t,r=e.orderId,n=function(e){if(Array.isArray(e))return e}(t=(0,n5.A)(!1))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),3!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(t,3)||function(e,t){if(e){if("string"==typeof e)return m8(e,3);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m8(e,3)}}(t,3)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),i=n[0],a=n[1],o=n[2],l=(0,J.useAdminOrderEdits)({order_id:r}),s=l.order_edits;l.count,(0,U.useEffect)(function(){i||(m7=void 0)},[i]);var c={isModalVisible:i,showModal:a,hideModal:o,orderEdits:s,activeOrderEditId:m7,setActiveOrderEdit:function(e){return m7=e}};return(0,z.jsx)(m9.Provider,{value:c,children:e.children})},ht=function(e){var t,r,n=e.size,i=void 0===n?"16":n,a=e.color,o=void 0===a?"currentColor":a,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["size","color"]);return(0,z.jsxs)("svg",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({width:i,height:i,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l),r=r={children:[(0,z.jsx)("path",{d:"M10 6.66602L13.3333 9.99935L10 13.3327",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M2.66797 2.66602V7.33268C2.66797 8.03993 2.94892 8.7182 3.44902 9.2183C3.94911 9.7184 4.62739 9.99935 5.33464 9.99935H13.3346",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},hr=function(e){var t,r,n=e.size,i=void 0===n?"24":n,a=e.color,o=void 0===a?"currentColor":a,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["size","color"]);return(0,z.jsxs)("svg",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({width:i,height:i,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l),r=r={children:[(0,z.jsx)("path",{d:"M4.8 5H19.2C20.19 5 21 5.7875 21 6.75V17.25C21 18.2125 20.19 19 19.2 19H4.8C3.81 19 3 18.2125 3 17.25V6.75C3 5.7875 3.81 5 4.8 5Z",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M20 6L12 12L4 6",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},hn=function(e){var t,r,n=e.size,i=void 0===n?"24":n,a=e.color,o=void 0===a?"currentColor":a,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["size","color"]);return(0,z.jsxs)("svg",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({width:i,height:i,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l),r=r={children:[(0,z.jsx)("path",{d:"M10.2 16H13.8M13.8 16V5H3V16H5M13.8 16V8.66667H18.3L19.947 10.3442C20.2812 10.6849 20.5462 11.0894 20.7269 11.5346C20.9076 11.9797 21.0004 12.4567 21 12.9383V16H19.2",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M7.5 19C8.88071 19 10 17.8807 10 16.5C10 15.1193 8.88071 14 7.5 14C6.11929 14 5 15.1193 5 16.5C5 17.8807 6.11929 19 7.5 19Z",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M16.5 19C17.8807 19 19 17.8807 19 16.5C19 15.1193 17.8807 14 16.5 14C15.1193 14 14 15.1193 14 16.5C14 17.8807 15.1193 19 16.5 19Z",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},hi=function(e){var t=e.form,r=(0,ei.Bd)().t,n=t.control,i=t.path;return(0,z.jsx)("div",{children:(0,z.jsx)(eR.xI,{name:i("type"),control:n,render:function(e){var t=e.field,n=t.value,i=t.onChange;return(0,z.jsxs)(oy.Root,{value:n,onValueChange:i,className:"flex items-center",children:[(0,z.jsx)(oy.SimpleItem,{label:r("claim-type-form-refund","Refund"),value:"refund",onChange:i}),(0,z.jsx)(oy.SimpleItem,{label:r("claim-type-form-replace","Replace"),value:"replace",onChange:i})]})}})})};function ha(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var ho=[{label:"Missing Item",value:"missing_item"},{label:"Wrong Item",value:"wrong_item"},{label:"Production Failure",value:"production_failure"},{label:"Other",value:"other"}],hl=function(e){var t=e.reasonDetails,r=e.index,n=e.isClaim,i=void 0!==n&&n,a=e.addReasonDetails,o=(0,ei.Bd)().t,l=(0,J.useAdminReturnReasons)().return_reasons,s=(0,U.useMemo)(function(){return i?ho:(null==l?void 0:l.map(function(e){return{label:e.label,value:e.id}}))||[]},[l,i]),c=(0,eR.mN)({defaultValues:t}),u=c.control,d=c.register,f=c.handleSubmit,p=c.formState.isDirty,m=(0,a7.lK)().pop,h=f(function(e){a(r,e),m()});return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(eN.A.Content,{children:(0,z.jsxs)("div",{className:"gap-y-base flex flex-col",children:[(0,z.jsx)("h2",{className:"inter-base-semibold",children:o("add-return-reason-reason-for-return","Reason for Return")}),(0,z.jsx)(eR.xI,{control:u,name:"reason",render:function(e){var t,r,n=e.field;return(0,z.jsx)(no,(t=ha({label:o("add-return-reason-reason","Reason"),placeholder:o("add-return-reason-choose-a-return-reason","Choose a return reason")},n),r=r={options:s,isClearable:!0},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}}),(0,z.jsx)(sw.A,ha({label:o("add-return-reason-note","Note"),placeholder:o("add-return-reason-product-was-damaged-during-shipping","Product was damaged during shipping")},d("note")))]})}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"gap-x-xsmall flex w-full items-center justify-end",children:[(0,z.jsx)(W.A,{size:"small",variant:"secondary",onClick:m,type:"button",children:o("add-return-reason-cancel","Cancel")}),(0,z.jsx)(W.A,{size:"small",variant:"primary",onClick:h,disabled:!p,type:"button",children:o("add-return-reason-save-and-go-back","Save and go back")})]})})]})},hs=function(){var e=(0,a7.lK)(),t=e.pop,r=e.push,n=(0,ei.Bd)().t;return{pushScreen:function(e){r({title:n("add-return-reason-select-reason-title","Select Reason"),onBack:function(){return t()},view:(0,z.jsx)(hl,ha({},e))})}}};let hc=function(e){var t,r=e.row,n=e.form,i=e.isClaim,a=void 0!==i&&i,o=n.control,l=n.path,s=n.setValue,c=n.clearErrors,u=n.formState.errors,d=(0,ei.Bd)().t,f=hs().pushScreen,p=(0,eR.FH)({control:o,name:l("items.".concat(r.index,".return_reason_details"))}),m=function(e,t){s(l("items.".concat(e,".return_reason_details")),t),t.reason&&c(l("items.".concat(e,".return_reason_details")))};return(0,z.jsxs)("div",{className:"pb-small grid w-full grid-cols-[74px,1fr,1fr]",children:[(0,z.jsx)("span",{}),(0,z.jsx)("div",{className:"flex items-center",children:(0,z.jsx)("p",{className:"inter-small-semibold",children:null==p?void 0:null===(t=p.reason)||void 0===t?void 0:t.label})}),(0,z.jsx)("div",{className:"flex justify-end",children:(0,z.jsxs)("div",{className:"flex flex-col items-end",children:[(0,z.jsx)(eR.xI,{control:o,name:l("items.".concat(r.index,".return_reason_details")),render:function(e){var t=e.field.ref,n=e.fieldState.error;return(0,z.jsx)(W.A,{ref:t,variant:n?"danger":"secondary",size:"small",type:"button",className:"max-w-[120px]",onClick:function(){return f({reasonDetails:p,index:r.index,isClaim:a,addReasonDetails:m})},children:(0,z.jsx)("span",{children:(null==p?void 0:p.reason)?d("add-return-reason-edit-reason","Edit reason"):d("add-return-reason-select-reason","Select reason")})})}}),!(null==p?void 0:p.reason)&&(0,z.jsx)(rH.A,{errors:u,name:l("items.".concat(r.index,".return_reason_details"))})]})})]})};var hu=function(e){var t=e.instance,r=e.form,n=e.isClaim,i=t.getRowModel,a=t.getHeaderGroups;return(0,z.jsxs)(td,{children:[(0,z.jsx)(td.Head,{children:a().map(function(e){return(0,z.jsx)(td.HeadRow,{children:e.headers.map(function(e){return(0,z.jsx)(td.HeadCell,{className:"inter-small-semibold text-grey-50",style:{width:e.getSize(),maxWidth:e.getSize()},children:(0,us.flexRender)(e.column.columnDef.header,e.getContext())},e.id)})},e.id)})}),(0,z.jsx)(td.Body,{children:i().rows.map(function(e){return(0,z.jsxs)(U.Fragment,{children:[(0,z.jsx)(td.Row,{className:(0,en.default)("last-of-type:border-b-0",{"border-b-0":e.getIsExpanded()}),children:e.getVisibleCells().map(function(e){return(0,z.jsx)(td.Cell,{style:{width:e.column.getSize(),maxWidth:e.column.getSize()},children:(0,us.flexRender)(e.column.columnDef.cell,e.getContext())},e.id)})}),e.getIsExpanded()&&(0,z.jsx)(td.Row,{className:(0,en.default)("border-t-0",{"border-b-0":e.index===i().rows.length-1}),children:(0,z.jsx)(td.Cell,{colSpan:e.getVisibleCells().length,children:(0,z.jsx)(hc,{row:e,form:r,isClaim:n})})})]},e.id)})})]})};function hd(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}let hf=function(e){var t,r,n,i=e.value,a=e.displayValue,o=e.successDuration,l=e.showValue,s=e.iconSize,c=e.onCopy,u=function(e){if(Array.isArray(e))return e}(t=ex(i,{onCopied:void 0===c?function(){}:c,successDuration:void 0===o?3e3:o}))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(t,2)||function(e,t){if(e){if("string"==typeof e)return hd(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hd(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),d=u[0],f=u[1],p=(0,eC.A)();return(0,U.useEffect)(function(){d&&p("Success","Copied!","success")},[d,p]),(0,z.jsxs)("div",{className:"inter-small-regular text-grey-50 gap-x-xsmall flex items-center",children:[(0,z.jsx)(W.A,{variant:"ghost",size:"small",type:"button",className:(0,en.default)("text-grey-50 p-0",((n="text-violet-60")in(r={})?Object.defineProperty(r,n,{value:d,enumerable:!0,configurable:!0,writable:!0}):r[n]=d,r)),onClick:f,children:(0,z.jsx)(ew,{size:void 0===s?20:s})}),(void 0===l||l)&&(0,z.jsx)("span",{className:"w-full truncate",children:a||i})]})},hp=function(e){var t=e.control,r=e.name,n=e.isSelectedPath,i=e.isSelectable,a=void 0!==i&&i,o=e.updateQuantity,l=e.index,s=e.maxQuantity,c=(0,ei.Bd)().t,u=(0,eR.FH)({control:t,name:r}),d=(0,eR.FH)({control:t,name:n,disabled:!n||!a}),f=(0,U.useMemo)(function(){return!a||d&&(null!=s?s:0)>1},[a,d,s]);return(0,z.jsx)("div",{className:"flex items-center justify-end",children:f?(0,z.jsxs)("div",{className:"inter-small-regular gap-x-2xsmall text-grey-50 grid grid-cols-3",children:[(0,z.jsx)(W.A,{variant:"ghost",size:"small",type:"button",onClick:function(){return o(l,-1)},disabled:1===u,className:"h-large w-large rounded-base disabled:text-grey-30","aria-label":c("components-decrease-quantity","Decrease quantity"),children:(0,z.jsx)(e9.A,{size:16})}),(0,z.jsx)("div",{className:"flex items-center justify-center",children:(0,z.jsx)("p",{"aria-label":"Quantity",children:u})}),(0,z.jsx)(W.A,{variant:"ghost",size:"small",type:"button",onClick:function(){return o(l,1)},disabled:s?u===s:void 0,className:"h-large w-large rounded-base disabled:text-grey-30","aria-label":c("components-increase-quantity","Increase quantity"),children:(0,z.jsx)(n_.A,{size:16})})]}):(0,z.jsx)("p",{className:"inter-small-regular text-grey-50",children:u})})};var hm=(0,us.createColumnHelper)(),hh=function(e){var t=e.form,r=e.orderCurrency,n=(0,ei.Bd)().t,i=t.control,a=t.setValue,o=t.getValues,l=t.path,s=(0,U.useCallback)(function(e,t){var r=l("items.".concat(e,".quantity")),n=o(r);a(r,n+t),n+t===0&&a(l("items.".concat(e,".return")),!1,{shouldDirty:!0})},[o,l,a]),c=(0,eR.FH)({control:i,name:l("items")}),u=(0,U.useCallback)(function(e){c.forEach(function(t,r){a(l("items.".concat(r,".return")),e.target.checked,{shouldDirty:!0})})},[c,l,a]);return(0,U.useMemo)(function(){return[hm.display({id:"selection",maxSize:36,header:function(e){var t=e.table;return(0,z.jsx)("div",{className:"pl-base pr-large",children:(0,z.jsx)(tt,{checked:t.getIsAllRowsSelected(),onChange:function(e){t.toggleAllRowsSelected(e.target.checked),t.toggleAllRowsExpanded(e.target.checked),u(e)},indeterminate:t.getIsSomeRowsSelected()})})},cell:function(e){var t=e.row,r=t.index,n=t.getToggleSelectedHandler,a=t.toggleExpanded;return(0,z.jsx)(eR.xI,{control:i,name:l("items.".concat(r,".return")),render:function(e){var t=e.field,r=t.value,i=t.onChange;return(0,z.jsx)("div",{className:"pl-base pr-large",children:(0,z.jsx)(tt,{checked:r,onChange:function(e){n()(e),a(e.target.checked),i(e)}})})}})}}),hm.accessor("variant_title",{header:n("items-to-return-form-product","Product"),cell:function(e){var t=e.getValue,r=e.row.original,n=t();return(0,z.jsxs)("div",{className:"gap-x-base py-xsmall flex items-center",children:[(0,z.jsx)("div",{children:(0,z.jsx)(pg,{src:r.thumbnail})}),(0,z.jsxs)("div",{className:"inter-small-regular",children:[(0,z.jsxs)("div",{className:"gap-x-2xsmall flex items-center",children:[(0,z.jsx)("p",{children:r.product_title}),n&&(0,z.jsxs)("p",{className:"text-grey-50",children:["(",n,")"]})]}),r.sku&&(0,z.jsx)("span",{children:(0,z.jsx)(hf,{value:r.sku,displayValue:r.sku,iconSize:14})})]})]})}}),hm.display({id:"quantity",header:function(){return(0,z.jsx)("p",{className:"text-right",children:n("items-to-return-form-quantity","Quantity")})},maxSize:50,cell:function(e){var t=e.row,r=t.index,n=t.original.original_quantity;return(0,U.createElement)(hp,{index:r,maxQuantity:n,isSelectable:!0,control:i,path:l,updateQuantity:s,name:l("items.".concat(r,".quantity")),isSelectedPath:l("items.".concat(r,".return")),key:r})}}),hm.accessor("refundable",{maxSize:80,header:function(){return(0,z.jsx)("p",{className:"text-right",children:n("items-to-return-form-refundable","Refundable")})},cell:function(e){var t=e.getValue;return(0,z.jsx)("p",{className:"text-right",children:(0,rg.Q2)({amount:t()||0,currency:r})})}}),hm.display({id:"order_currency",maxSize:20,cell:function(){return(0,z.jsx)("p",{className:"pl-base text-grey-50",children:r.toUpperCase()})}})]},[i,r,l,u,s])};let hy=function(e){var t=e.form,r=e.order,n=e.isClaim,i=void 0!==n&&n,a=(0,ei.Bd)().t,o=t.control,l=t.path,s=t.formState.errors,c=(0,eR.jz)({control:o,name:l("items"),keyName:"fieldId",shouldUnregister:!0}).fields,u=hh({form:t,orderCurrency:r.currency_code}),d=(0,us.useReactTable)({data:c,columns:u,getCoreRowModel:(0,us.getCoreRowModel)(),getExpandedRowModel:(0,us.getExpandedRowModel)()});return(0,z.jsxs)("div",{className:"gap-y-base flex flex-col",children:[(0,z.jsx)("h2",{className:"inter-base-semibold",children:i?a("items-to-return-form-items-to-claim","Items to claim"):a("items-to-return-form-items-to-return","Items to return")}),(0,z.jsx)(hu,{form:t,instance:d,isClaim:i}),(0,z.jsx)(rH.A,{errors:s,name:l("items")})]})};var hb=function(e){var t=e.count,r=void 0===t?0:t,n=e.table,i=e.className,a=n.getState,o=n.getPageCount,l=n.getCanNextPage,s=n.getCanPreviousPage,c=n.previousPage,u=n.nextPage,d=a().pagination,f=d.pageIndex,p=d.pageSize,m=(0,U.useMemo)(function(){return{from:f*p+1,to:Math.min(r,(f+1)*p)}},[r,f,p]),h=m.from,y=m.to;return(0,z.jsxs)("div",{className:(0,en.default)("inter-small-regular text-grey-50 flex items-center justify-between",i),children:[(0,z.jsx)("div",{children:(0,z.jsx)("p",{children:"".concat(h," – ").concat(y," of ").concat(r," results")})}),(0,z.jsxs)("div",{className:"gap-x-small flex items-center",children:[(0,z.jsx)("p",{children:"".concat(a().pagination.pageIndex+1," of ").concat(o())}),(0,z.jsxs)("div",{className:"gap-x-2xsmall flex items-center",children:[(0,z.jsx)(W.A,{variant:"ghost",size:"small",className:"h-xlarge w-xlarge disabled:text-grey-40",type:"button",disabled:!s(),onClick:c,children:(0,z.jsx)(ea,{size:16})}),(0,z.jsx)(W.A,{variant:"ghost",size:"small",className:"h-xlarge w-xlarge disabled:text-grey-40",type:"button",disabled:!l(),onClick:u,children:(0,z.jsx)(th,{size:16})})]})]})]})};let hv=function(e){var t,r,n=e.isLoading,i=e.children,a=e.placeholder,o=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["isLoading","children","placeholder"]);return(a=a||(0,z.jsx)(X.A,{size:"large",variant:"secondary"}),n)?(0,z.jsx)("div",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({className:"pt-2xlarge flex min-h-[756px] w-full items-center justify-center"},o),r=r={children:a},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t)):i};function hg(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var hx=function(e){var t,r=e.instance,n=e.isLoadingData,i=e.setSearchTerm,a=function(e){if(Array.isArray(e))return e}(t=(0,U.useState)(void 0))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(t,2)||function(e,t){if(e){if("string"==typeof e)return hg(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hg(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),o=a[0],l=a[1],s=r.getHeaderGroups,c=r.getRowModel,u=(0,ei.Bd)().t;return(0,U.useEffect)(function(){i(o)},[o,i]),(0,z.jsx)(hv,{isLoading:n,children:(0,z.jsxs)(td,{enableSearch:!0,searchPlaceholder:u("add-additional-items-screen-search-products","Search products"),searchValue:o,handleSearch:l,children:[(0,z.jsx)(td.Head,{children:s().map(function(e){return(0,z.jsx)(td.HeadRow,{children:e.headers.map(function(e){return(0,z.jsx)(td.HeadCell,{className:"inter-small-semibold text-grey-50",style:{width:e.getSize(),maxWidth:e.getSize()},children:(0,us.flexRender)(e.column.columnDef.header,e.getContext())},e.id)})},e.id)})}),(0,z.jsx)(td.Body,{children:c().rows.map(function(e){return(0,z.jsx)(td.Row,{className:"last-of-type:border-b-0",children:e.getVisibleCells().map(function(e){return(0,z.jsx)(td.Cell,{style:{width:e.column.getSize(),maxWidth:e.column.getSize()},children:(0,us.flexRender)(e.column.columnDef.cell,e.getContext())},e.id)})},e.id)})})]})})},hj=(0,us.createColumnHelper)(),hw=function(e){var t=(0,ei.Bd)().t;return(0,U.useMemo)(function(){return[hj.display({id:"selection",maxSize:36,header:function(e){var t=e.table;return(0,z.jsx)("div",{className:"pl-base pr-large",children:(0,z.jsx)(tt,{checked:t.getIsAllRowsSelected(),onChange:t.getToggleAllRowsSelectedHandler(),indeterminate:t.getIsSomePageRowsSelected()})})},cell:function(e){var r=e.row,n=r.getIsSelected,i=r.getIsSomeSelected,a=r.getToggleSelectedHandler,o=(0,r.getCanSelect)();return(0,z.jsx)("div",{className:"pl-base pr-large",children:o?(0,z.jsx)(tt,{checked:n(),indeterminate:i(),onChange:a(),disabled:!o}):(0,z.jsx)(r9.A,{content:t("add-additional-items-screen-variant-price-missing","This variant does not have a price for the region/currency of this order, and cannot be selected."),children:(0,z.jsx)(tt,{checked:n(),indeterminate:i(),onChange:a(),disabled:!o})})})}}),hj.accessor("title",{header:function(e){var t=e.header.column,r=t.getToggleSortingHandler,n=t.getIsSorted;return(0,z.jsxs)("div",{className:"flex cursor-pointer items-center",onClick:r(),children:[(0,z.jsx)("p",{className:"select-none",children:"Title"}),(0,z.jsx)("div",{className:"h-large w-large flex items-center justify-center",onClick:r(),children:(0,z.jsx)(ta,{size:16,isSorted:n()})})]})},cell:function(e){var t=e.cell.getValue,r=e.row,n=r.original,i=n.product,a=n.sku,o=(0,r.getCanSelect)();return(0,z.jsxs)("div",{className:(0,en.default)("inter-small-regular gap-base py-xsmall flex items-center",{"opacity-50":!o}),children:[(0,z.jsx)(pg,{src:null==i?void 0:i.thumbnail}),(0,z.jsxs)("div",{children:[(0,z.jsxs)("p",{children:[null==i?void 0:i.title," ",(0,z.jsxs)("span",{className:"text-grey-50",children:["(",t(),")"]})]}),a&&(0,z.jsx)("p",{className:"text-grey-50",children:a})]})]})}}),hj.display({maxSize:80,id:"options",header:function(){return(0,z.jsx)("p",{className:"select-none",children:"Options"})},cell:function(e){var t,r=e.row.original;return(0,z.jsx)("p",{children:null===(t=r.options)||void 0===t?void 0:t.map(function(e){return e.value}).join(", ")})}}),hj.accessor("inventory_quantity",{maxSize:20,header:function(){return(0,z.jsx)("p",{className:"select-none text-right",children:t("add-additional-items-screen-stock","Stock")})},cell:function(e){var t=e.cell.getValue,r=(0,e.row.getCanSelect)();return(0,z.jsx)("p",{className:(0,en.default)("text-right",{"opacity-50":!r}),children:t()})}}),hj.accessor("calculated_price_incl_tax",{maxSize:80,header:function(){return(0,z.jsx)("p",{className:"text-right",children:t("add-additional-items-screen-price","Price")})},cell:function(r){var n=r.getValue,i=r.row.original.original_price_incl_tax,a=n();return(0,z.jsxs)("div",{className:"text-right",children:[i!==a&&(0,z.jsx)(r9.A,{content:t("add-additional-items-screen-price-overridden-in-price-list-applicable-to-this-order","The price has been overridden in a price list, that is applicable to this order."),side:"top",children:(0,z.jsx)("p",{className:"text-grey-40 cursor-default line-through",children:(0,rg.Q2)({amount:i||0,currency:e.currency_code})})}),(0,z.jsx)("p",{children:(0,rg.Q2)({amount:a||0,currency:e.currency_code})})]})}}),hj.display({id:"order_currency",maxSize:24,cell:function(){return(0,z.jsx)("p",{className:"pl-base text-grey-50",children:e.currency_code.toUpperCase()})}})]},[e])};function hO(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function hS(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return hO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hO(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var hP=function(e){var t=e.append,r=e.remove,n=e.selectedIds,i=e.order,a=(0,a7.lK)().pop,o=(0,ei.Bd)().t,l=hS((0,U.useState)({pageIndex:0,pageSize:12}),2),s=l[0],c=s.pageIndex,u=s.pageSize,d=l[1],f=hS((0,U.useState)([]),2),p=f[0],m=f[1],h=(0,U.useMemo)(function(){return c*u},[c,u]),y=hS((0,U.useState)(void 0),2),b=y[0],v=y[1],g=(0,e8.d)(b,500),x=(0,J.useAdminVariants)({limit:12,offset:h,q:g,region_id:i.region_id,customer_id:i.customer_id},{keepPreviousData:!0}),j=x.variants,w=x.count,O=x.isLoading,S=(0,U.useMemo)(function(){return w?Math.ceil(w/12):0},[w]),P=(0,U.useMemo)(function(){return{pageIndex:c,pageSize:u}},[c,u]),C=hw(i),A=(0,us.useReactTable)({columns:C,data:j||[],initialState:{rowSelection:n.reduce(function(e,t){return e[t]=!0,e},{})},state:{pagination:P,sorting:p},enableRowSelection:function(e){var t=i.currency_code,r=i.region_id,n=e.original.prices.some(function(e){return e.region_id===r}),a=e.original.prices.some(function(e){return e.currency_code===t});return!!n||!!a},onPaginationChange:d,manualPagination:!0,getRowId:function(e){return e.id},pageCount:S,onSortingChange:m,getSortedRowModel:(0,us.getSortedRowModel)(),getCoreRowModel:(0,us.getCoreRowModel)(),getPaginationRowModel:(0,us.getPaginationRowModel)()}),N=A.getSelectedRowModel;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(eN.A.Content,{children:[(0,z.jsx)(hx,{instance:A,isLoadingData:O,setSearchTerm:v}),(0,z.jsx)(hb,{table:A,count:w,className:"mt-11"})]}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"gap-x-xsmall flex w-full items-center justify-end",children:[(0,z.jsx)(W.A,{variant:"secondary",size:"small",onClick:a,children:o("add-additional-items-screen-go-back","Go back")}),(0,z.jsx)(W.A,{variant:"primary",size:"small",type:"button",onClick:function(){var e=N().rows.map(function(e){return e.original}),i=[],o=!0,l=!1,s=void 0;try{for(var c,u=n[Symbol.iterator]();!(o=(c=u.next()).done);o=!0)!function(){var t=c.value,r=e.findIndex(function(e){return e.id===t});-1!==r&&i.push(r)}()}catch(e){l=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(l)throw s}}r(i),t(e.map(function(e){return{variant_id:e.id,quantity:1,sku:e.sku,product_title:e.product.title,variant_title:e.title,thumbnail:e.product.thumbnail,in_stock:e.inventory_quantity,price:e.calculated_price_incl_tax,original_price:e.original_price_incl_tax}})),a()},children:o("add-additional-items-screen-add-products","Add products")})]})})]})},hC=function(){var e=(0,a7.lK)(),t=e.push,r=e.pop,n=(0,ei.Bd)().t;return{pushScreen:function(e){t({title:n("add-additional-items-screen-add-product-variants","Add Product Variants"),onBack:function(){return r()},view:(0,z.jsx)(hP,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))})}}},hA=function(e){var t=e.instance,r=t.getHeaderGroups,n=t.getRowModel;return(0,z.jsx)("div",{children:(0,z.jsxs)(td,{children:[(0,z.jsx)(td.Head,{children:r().map(function(e){return(0,z.jsx)(td.HeadRow,{children:e.headers.map(function(e){return(0,z.jsx)(td.HeadCell,{className:"inter-small-semibold text-grey-50",style:{width:e.getSize(),maxWidth:e.getSize()},children:(0,us.flexRender)(e.column.columnDef.header,e.getContext())},e.id)})},e.id)})}),(0,z.jsx)(td.Body,{children:n().rows.map(function(e){return(0,z.jsx)(td.Row,{className:"py-small last-of-type:border-b-0",children:e.getVisibleCells().map(function(e){return(0,z.jsx)(td.Cell,{className:"py-small",style:{width:e.column.getSize(),maxWidth:e.column.getSize()},children:(0,us.flexRender)(e.column.columnDef.cell,e.getContext())},e.id)})},e.id)})})]})})},hN=(0,us.createColumnHelper)(),hk=function(e){var t=e.form,r=e.orderCurrency,n=e.removeItem,i=(0,ei.Bd)().t,a=t.control,o=t.setValue,l=t.getValues,s=t.path,c=(0,U.useCallback)(function(e,t){var r=s("items.".concat(e,".quantity")),n=l(r);o(r,n+t)},[l,s,o]);return(0,U.useMemo)(function(){return[hN.display({id:"product_display",header:i("items-to-send-form-product","Product"),cell:function(e){var t=e.row.original,r=t.thumbnail,n=t.product_title,i=t.variant_title,a=t.sku;return(0,z.jsxs)("div",{className:"gap-base flex items-center",children:[(0,z.jsx)(pg,{src:r}),(0,z.jsxs)("div",{className:"inter-small-regular",children:[(0,z.jsxs)("div",{className:"gap-x-2xsmall flex items-center",children:[(0,z.jsx)("p",{children:n}),i&&(0,z.jsxs)("p",{className:"text-grey-50",children:["(",i,")"]})]}),a&&(0,z.jsx)("span",{children:(0,z.jsx)(hf,{value:a,displayValue:a,iconSize:14})})]})]})}}),hN.display({id:"quantity",header:function(){return(0,z.jsx)("p",{className:"text-right",children:i("items-to-send-form-quantity","Quantity")})},maxSize:50,cell:function(e){var t=e.row,r=t.index,n=t.original.in_stock;return(0,U.createElement)(hp,{index:r,maxQuantity:n,control:a,updateQuantity:c,name:s("items.".concat(r,".quantity")),isSelectable:!1,key:r})}}),hN.accessor("price",{maxSize:50,header:function(){return(0,z.jsx)("p",{className:"text-right",children:i("items-to-send-form-price","Price")})},cell:function(e){var t=e.getValue,n=e.row.original.original_price,a=t();return(0,z.jsxs)("div",{className:"text-right",children:[n!==a&&(0,z.jsx)(r9.A,{content:i("items-to-send-form-price-overridden-in-price-list-applicable-to-this-order","The price has been overridden in a price list, that is applicable to this order."),side:"top",children:(0,z.jsx)("p",{className:"text-grey-40 cursor-default line-through",children:(0,rg.Q2)({amount:n,currency:r})})}),(0,z.jsx)("p",{children:(0,rg.Q2)({amount:a,currency:r})})]})}}),hN.display({id:"order_currency",maxSize:20,cell:function(){return(0,z.jsx)("p",{className:"pl-base text-grey-50",children:r.toUpperCase()})}}),hN.display({id:"remove",maxSize:28,cell:function(e){var t=e.row.index;return(0,z.jsx)("div",{className:"flex items-center justify-end",children:(0,z.jsx)(W.A,{variant:"ghost",size:"small",className:"h-xlarge w-xlarge text-grey-40",type:"button",onClick:function(){return n(t)},children:(0,z.jsx)(eu,{size:20})})})}})]},[a,r,s,n,c])};let h_=function(e){var t=e.form,r=e.order,n=(0,ei.Bd)().t,i=t.control,a=t.path,o=(0,eR.jz)({control:i,name:a("items"),keyName:"fieldId"}),l=o.fields,s=o.append,c=o.remove,u=hk({orderCurrency:r.currency_code,form:t,removeItem:c}),d=(0,us.useReactTable)({data:l,columns:u,getCoreRowModel:(0,us.getCoreRowModel)()}),f=hC().pushScreen;return(0,z.jsxs)("div",{className:(0,en.default)({"gap-y-base flex flex-col":l.length>0,"flex items-center justify-between":!l.length}),children:[(0,z.jsx)("div",{className:"flex w-full items-center",children:(0,z.jsx)("h2",{className:"inter-base-semibold",children:n("items-to-send-form-items-to-send","Items to send")})}),l.length>0&&(0,z.jsx)(hA,{instance:d}),(0,z.jsx)("div",{className:"flex w-full items-center justify-end",children:(0,z.jsx)(W.A,{variant:"secondary",size:"small",type:"button",onClick:function(){return f({append:s,remove:c,selectedIds:l.map(function(e){return e.variant_id}),order:r})},children:n("items-to-send-form-add-products","Add products")})})]})};function hE(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}let hI=function(e){var t,r=e.name,n=e.label,i=e.currencyCode,a=e.errors,o=e.value,l=e.onChange,s=sS.q[i.toUpperCase()],c=s.symbol_native,u=s.decimal_digits,d=function(e){return"".concat(e/Math.pow(10,u))},f=function(e){if(Array.isArray(e))return e}(t=(0,U.useState)(null!=o?d(o):void 0))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(t,2)||function(e,t){if(e){if("string"==typeof e)return hE(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hE(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),p=f[0],m=f[1];(0,U.useEffect)(function(){o&&m(d(o))},[o,u]);var h=function(e,t){t?l(Math.round(t*Math.pow(10,u))):l(0),m(e)},y=Math.pow(10,-u);return(0,z.jsxs)("div",{children:[n&&(0,z.jsx)(iX.A,{label:n,className:"mb-xsmall"}),(0,z.jsxs)("div",{className:(0,en.default)("bg-grey-5 border-gray-20 px-base py-xsmall rounded-rounded focus-within:shadow-input focus-within:border-violet-60 inter-base-regular flex h-10 w-full items-center border",{"border-rose-50":a&&r&&a[r]}),children:[(0,z.jsx)("div",{className:"inter-base-regular text-grey-40",children:(0,z.jsx)("p",{children:i.toUpperCase()})}),(0,z.jsxs)("div",{className:"gap-2xsmall flex w-full items-center",children:[(0,z.jsx)(sO.default,{step:y,value:p,onValueChange:function(e,t,r){return h(e,null==r?void 0:r.float)},allowNegativeValue:!1,placeholder:"-",decimalScale:u,className:"remove-number-spinner leading-base text-grey-90 caret-violet-60 placeholder-grey-40 w-full bg-transparent text-right font-normal outline-none outline-0"}),(0,z.jsx)("div",{className:"ml-2xsmall flex min-w-[16px] items-center",children:(0,z.jsx)("p",{className:"text-grey-40 w-full text-right",children:c})})]})]}),(0,z.jsx)(rH.A,{name:r,errors:a})]})},hD=function(e){var t=e.form,r=e.initialValue,n=void 0===r?0:r,i=e.order,a=(0,ei.Bd)().t,o=t.control,l=t.path,s=t.setValue,c=t.clearErrors,u=t.formState.errors,d=(0,eR.FH)({control:o,name:l("amount")});return(0,z.jsxs)("div",{className:"gap-x-xsmall grid grid-cols-[40px_1fr] justify-end",children:[(0,z.jsx)("div",{className:"flex flex-shrink justify-end",children:void 0!==d?(0,z.jsx)(W.A,{variant:"secondary",size:"small",type:"button",className:"h-10 w-10","aria-label":a("refund-amount-form-cancel-editing-refund-amount","Cancel editing refund amount"),onClick:function(){s(l("amount"),void 0),c(l("amount"))},children:(0,z.jsx)(ao.A,{size:16,className:"text-grey-40"})}):(0,z.jsx)(W.A,{variant:"ghost",size:"small",type:"button",onClick:function(){s(l("amount"),n)},"aria-label":a("refund-amount-form-edit-refund-amount","Edit refund amount"),className:"h-10 w-10",children:(0,z.jsx)(ec,{size:16,className:"text-grey-40"})})}),(0,z.jsx)("div",{children:void 0!==d?(0,z.jsx)(eR.xI,{control:o,name:l("amount"),rules:{min:{value:0,message:a("refund-amount-form-refund-amount-cannot-be-negative","Refund amount cannot be negative")},required:!0,validate:function(e){if(void 0===e||!(e>=0))return a("refund-amount-form-the-refund-amount-must-be-at-least-0","The refund amount must be at least 0")}},render:function(e){var t=e.field,r=t.value,n=t.onChange,a=t.name;return(0,z.jsx)(hI,{currencyCode:i.currency_code,onChange:n,name:a,value:r,errors:u})}}):(0,z.jsx)("div",{className:"flex h-10 items-center",children:(0,z.jsx)("p",{children:(0,rg.Q2)({amount:n,currency:i.currency_code})})})})]})};var hT=function(e){var t=e.thumbnail,r=e.productTitle,n=e.variantTitle,i=e.sku,a=e.quantity,o=e.price,l=e.total,s=e.currencyCode,c=e.isFree;return(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,z.jsxs)("div",{className:"gap-x-base flex items-center",children:[(0,z.jsx)("div",{children:(0,z.jsx)(pg,{src:t})}),(0,z.jsxs)("div",{className:"inter-small-regular",children:[(0,z.jsxs)("div",{className:"gap-x-2xsmall flex items-center",children:[(0,z.jsx)("p",{children:r}),n&&(0,z.jsxs)("p",{className:"text-grey-50",children:["(",n,")"]})]}),i&&(0,z.jsx)("span",{children:(0,z.jsx)(hf,{value:i,displayValue:i,iconSize:14})})]})]}),(0,z.jsxs)("div",{className:"inter-small-regular gap-x-base flex items-center",children:[(0,z.jsx)("p",{className:"text-grey-40",children:(0,rg.Q2)({amount:o,currency:s})}),(0,z.jsxs)("p",{className:"text-grey-40",children:["x ",a]}),(0,z.jsx)("p",{className:(0,en.default)({"line-through":void 0!==c&&c}),children:(0,rg.Q2)({amount:l,currency:s})})]})]})},hM=function(e){var t=e.type,r=e.title,n=e.price,i=e.currencyCode,a=(0,ei.Bd)().t;return(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,z.jsxs)("div",{className:"gap-x-base flex items-center",children:[(0,z.jsx)("div",{className:" rounded-rounded text-grey-50 flex h-10 w-[30px] items-center justify-center",children:(0,z.jsx)(ht,{size:16})}),(0,z.jsxs)("div",{className:"inter-small-regular",children:[(0,z.jsx)("p",{children:"return"===t?"Return shipping":"Replacement shipping"}),(0,z.jsx)("p",{className:"text-grey-50",children:r})]})]}),(0,z.jsx)("p",{className:"inter-small-regular",children:n?(0,rg.Q2)({amount:n,currency:i}):a("rma-summaries-free","Free")})]})},hR=function(e){var t=e.form,r=e.order,n=(0,ei.Bd)().t,i=t.control,a=(0,eR.FH)({control:i,name:"return_items.items",defaultValue:[]}),o=(0,U.useMemo)(function(){return a.filter(function(e){return e.return})},[a]),l=(0,eR.FH)({control:i,name:"return_shipping"}),s=(0,eR.FH)({control:i,name:"additional_items.items",defaultValue:[]}),c=(0,eR.FH)({control:i,name:"replacement_shipping"}),u=(0,eR.FH)({control:i,name:"claim_type.type"}),d=(0,U.useMemo)(function(){var e=o.reduce(function(e,t){return e+t.total/t.original_quantity*t.quantity},0);return{total:e<0?(0,rg.Q2)({amount:0,currency:r.currency_code}):(0,rg.Q2)({amount:e,currency:r.currency_code}),totalAsNumber:e<0?0:e}},[o,r.currency_code]);return(null==o?void 0:o.length)>0||(null==s?void 0:s.length)>0?(0,z.jsxs)("div",{className:"inter-base-regular",children:[(0,z.jsxs)("div",{className:"gap-y-base border-grey-20 py-large flex flex-col border-y",children:[o.length>0&&(0,z.jsxs)("div",{children:[(0,z.jsx)("p",{className:"inter-base-semibold mb-small",children:n("rma-summaries-claimed-items","Claimed items")}),(0,z.jsxs)("div",{className:"gap-y-xsmall flex flex-col",children:[o.map(function(e,t){return(0,z.jsx)(hT,{currencyCode:r.currency_code,productTitle:e.product_title,quantity:e.quantity,sku:e.sku,price:e.total/e.original_quantity,total:e.total/e.original_quantity*e.quantity,variantTitle:e.variant_title,thumbnail:e.thumbnail},t)}),l.option&&(0,z.jsx)(hM,{currencyCode:r.currency_code,price:l.price,title:l.option.label,type:"return"})]})]}),"refund"!==u&&s.length>0&&(0,z.jsxs)("div",{children:[(0,z.jsxs)("div",{className:"mb-small gap-x-2xsmall flex items-center",children:[(0,z.jsx)("p",{className:"inter-base-semibold",children:n("rma-summaries-replacement-items","Replacement items")}),(0,z.jsx)(e0.A,{type:"warning",content:n("rma-summaries-customer-refund-description","The customer will receive a full refund for the claimed items, as the cost of replacement items and shipping will not be deducted. Alternatively, you can choose to set a custom refund amount when you receive the returned items or create an exchange instead.")})]}),(0,z.jsxs)("div",{className:"gap-y-xsmall flex flex-col",children:[s.map(function(e,t){return(0,z.jsx)(hT,{currencyCode:r.currency_code,productTitle:e.product_title,quantity:e.quantity,sku:e.sku,price:e.price,total:e.price*e.quantity,variantTitle:e.variant_title,thumbnail:e.thumbnail,isFree:!0},t)}),(null==c?void 0:c.option)&&(0,z.jsx)(hM,{currencyCode:r.currency_code,price:c.price,title:c.option.label,type:"replacement"})]})]})]}),(0,z.jsx)("div",{className:"pt-large",children:(0,z.jsxs)("div",{className:"inter-large-semibold flex items-center justify-between","data-testid":"refund-amount-container",children:[(0,z.jsxs)("div",{className:"gap-x-2xsmall flex items-center",children:[(0,z.jsx)("p",{className:"inter-base-semibold",children:n("rma-summaries-refund-amount","Refund amount")}),(0,z.jsx)(e0.A,{type:"info",content:"replace"===u&&l.option?n("rma-summaries-the-customer-will-be-refunded-once-the-returned-items-are-received","The customer will be refunded once the returned items are received"):n("rma-summaries-the-customer-will-be-refunded-immediately","The customer will be refunded immediately")})]}),(0,z.jsx)("div",{className:"flex items-center",children:"refund"===u?(0,z.jsx)(hD,{form:(0,eL.m)(t,"refund_amount"),order:r,initialValue:d.totalAsNumber}):(0,z.jsx)("p",{children:d.total})})]})})]}):null};let hL=function(e){var t=e.form,r=e.type,n=(0,ei.Bd)().t,i=t.control,a=t.path,o={return:n("send-notification-form-return","return"),swap:n("send-notification-form-exchange","exchange"),claim:n("send-notification-form-claim","claim")}[r];return(0,z.jsx)(eR.xI,{control:i,name:a("send_notification"),render:function(e){var t=e.field,r=t.value,i=t.onChange;return(0,z.jsxs)("div",{className:"flex items-center",children:[(0,z.jsx)("div",{className:"mr-xsmall",children:(0,z.jsx)(tt,{checked:r,onChange:i})}),(0,z.jsx)("p",{className:"inter-small-semibold mr-1.5",children:n("send-notification-form-send-notifications","Send notifications")}),(0,z.jsx)(e0.A,{type:"info",content:n("send-notification-form-if-unchecked-the-customer-will-not-receive-communication","If unchecked the customer will not receive communication about this {{subject}}.",{subject:o})})]})}})};function hz(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function hF(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}!function(e){e.SHIPPING="shipping",e.BILLING="billing",e.LOCATION="location"}(h||(h={}));let hB=function(e){var t=e.form,r=e.countryOptions,n=e.type,i=e.required,a=void 0===i||i,o=e.noTitle,l=t.register,s=t.path,c=t.control,u=t.formState.errors,d=(0,ei.Bd)().t;return(0,z.jsxs)("div",{children:[("shipping"===n||"billing"===n)&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("span",{className:"inter-base-semibold",children:d("templates-general","General")}),(0,z.jsxs)("div",{className:"gap-large mt-4 mb-8 grid grid-cols-2",children:[(0,z.jsx)(e1.A,hF(hz({},l(s("first_name"),{required:!!a&&n8.A.required("First name"),pattern:n8.A.whiteSpaceRule("First name")})),{placeholder:d("templates-first-name","First Name"),label:d("templates-first-name","First Name"),required:a,errors:u})),(0,z.jsx)(e1.A,hF(hz({},t.register(s("last_name"),{required:!!a&&n8.A.required("Last name"),pattern:n8.A.whiteSpaceRule("Last name")})),{placeholder:d("templates-last-name","Last Name"),label:d("templates-last-name","Last Name"),required:a,errors:u})),(0,z.jsx)(e1.A,hF(hz({},t.register(s("company"),{pattern:n8.A.whiteSpaceRule("Company")})),{placeholder:d("templates-company","Company"),label:d("templates-company","Company"),errors:u})),(0,z.jsx)(e1.A,hF(hz({},t.register(s("phone"))),{placeholder:d("templates-phone","Phone"),label:d("templates-phone","Phone"),errors:u}))]})]}),!(void 0!==o&&o)&&(0,z.jsx)("span",{className:"inter-base-semibold",children:"".concat("billing"===n?d("templates-billing-address","Billing Address"):"shipping"===n?d("templates-shipping-address","Shipping Address"):d("templates-address","Address"))}),(0,z.jsxs)("div",{className:"gap-y-large gap-x-large mt-4 grid grid-cols-2",children:[(0,z.jsx)(e1.A,hF(hz({},t.register(s("address_1"),{required:!!a&&n8.A.required("Address 1"),pattern:n8.A.whiteSpaceRule("Address 1")})),{placeholder:d("templates-address-1","Address 1"),label:d("templates-address-1","Address 1"),required:a,errors:u})),(0,z.jsx)(e1.A,hF(hz({},t.register(s("address_2"),{pattern:n8.A.whiteSpaceRule("Address 2")})),{placeholder:d("templates-address-2","Address 2"),label:d("templates-address-2","Address 2"),errors:u})),(0,z.jsx)(e1.A,hF(hz({},t.register(s("postal_code"),{required:!!a&&n8.A.required("Postal code"),pattern:n8.A.whiteSpaceRule("Postal code")})),{placeholder:d("templates-postal-code","Postal code"),label:d("templates-postal-code","Postal code"),required:a,autoComplete:"off",errors:u})),(0,z.jsx)(e1.A,hF(hz({placeholder:d("templates-city","City"),label:d("templates-city","City")},t.register(s("city"),{required:!!a&&n8.A.required("City"),pattern:n8.A.whiteSpaceRule("City")})),{required:a,errors:u})),(0,z.jsx)(e1.A,hF(hz({},t.register(s("province"),{pattern:n8.A.whiteSpaceRule("Province")})),{placeholder:d("templates-province","Province"),label:d("templates-province","Province"),errors:u})),(0,z.jsx)(eR.xI,{control:c,name:s("country_code"),rules:{required:!!a&&n8.A.required("Country")},render:function(e){var t=e.field,n=t.value,i=t.onChange;return(0,z.jsx)(no,{label:d("templates-country","Country"),required:a,value:n,options:r,onChange:i,name:s("country_code"),errors:u,isClearable:!a})}})]}),(0,z.jsxs)("div",{className:"mt-xlarge gap-y-base flex flex-col",children:[(0,z.jsx)("span",{className:"inter-base-semibold",children:d("templates-metadata","Metadata")}),(0,z.jsx)(e$,{form:(0,eL.m)(t,"metadata")})]})]})};var hq=function(e){var t=e.form,r=e.order,n=(0,ei.Bd)().t,i=t.resetField,a=t.path,o=t.formState.errors,l=t.control,s=(0,J.useAdminRegion)(r.region_id).region,c=(0,eR.FH)({control:l,name:a()}),u=(0,U.useMemo)(function(){return["first_name","last_name","address_1","city","country_code","postal_code","country_code"].every(function(e){return!!c[e]&&!o[a(e)]})},[c,o,a]),d=(0,U.useMemo)(function(){return(null==s?void 0:s.countries.map(function(e){return{value:e.iso_2,label:e.display_name}}))||[]},[s]),f=(0,a7.lK)().pop;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(eN.A.Content,{children:(0,z.jsx)(hB,{form:t,type:h.SHIPPING,countryOptions:d,required:!0})}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"gap-x-xsmall flex w-full items-center justify-end",children:[(0,z.jsx)(W.A,{variant:"secondary",size:"small",type:"button",onClick:function(){i(a()),f()},children:n("shipping-address-form-cancel","Cancel")}),(0,z.jsx)(W.A,{variant:"primary",size:"small",disabled:!u,type:"button",onClick:f,children:n("shipping-address-form-save-and-go-back","Save and go back")})]})})]})},hH=function(){var e=(0,a7.lK)(),t=e.pop,r=e.push,n=(0,ei.Bd)().t;return{pushScreen:function(e){r({title:n("shipping-address-form-shipping-information","Shipping Information"),onBack:function(){return t()},view:(0,z.jsx)(hq,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))})}}};let hU=function(e){var t=e.form,r=e.order,n=t.control,i=t.path,a=hH().pushScreen,o=(0,ei.Bd)().t,l=(0,eR.FH)({control:n,name:i()}),s=l.address_1,c=l.address_2,u=l.city,d=l.country_code,f=l.company,p=l.postal_code,m=l.province;return(0,z.jsxs)("div",{children:[(0,z.jsx)("h2",{className:"inter-base-semibold",children:o("shipping-address-form-shipping-address","Shipping address")}),(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,z.jsxs)("div",{className:"inter-small-regular text-grey-50",children:[(0,z.jsx)("p",{children:"".concat(s).concat(c?", ".concat(c):"")}),(0,z.jsxs)("p",{children:["".concat(f?"".concat(f,", "):""),"".concat(p," ").concat(u)]}),(0,z.jsxs)("p",{children:["".concat(m?"".concat(m,", "):""),null==d?void 0:d.label]})]}),(0,z.jsx)(W.A,{variant:"secondary",size:"small",type:"button",onClick:function(){return a({form:t,order:r})},children:o("shipping-address-form-ship-to-a-different-address","Ship to a different address")})]})]})};var hV=function(e){var t=e.isClaim,r=void 0!==t&&t,n=e.isReturn,i=void 0!==n&&n,a=(0,ei.Bd)().t,o=(0,U.useMemo)(function(){return r&&i?a("shipping-form-return-shipping-for-items-claimed-by-the-customer-is-complimentary","Return shipping for items claimed by the customer is complimentary."):i?void 0:a("shipping-form-shipping-for-replacement-items-is-complimentary","Shipping for replacement items is complimentary.")},[r,i]);return o?(0,z.jsx)("p",{className:"inter-small-regular text-grey-50",children:o}):null};let hG=function(e){var t=e.form,r=e.order,n=e.isReturn,i=void 0!==n&&n,a=e.isClaim,o=void 0!==a&&a,l=e.required,s=(0,ei.Bd)().t,c=t.control,u=t.path,d=t.setValue,f=t.formState.errors,p=(0,J.useAdminShippingOptions)({region_id:r.region_id,is_return:i}).shipping_options,m=(0,U.useMemo)(function(){return(null==p?void 0:p.map(function(e){var t;return{label:e.name,value:{id:e.id,taxRate:(null===(t=e.tax_rates)||void 0===t?void 0:t.reduce(function(e,t){return e+(t.rate||0)/100},0))||0},suffix:(0,z.jsx)("span",{className:(0,en.default)({"line-through":o&&0!==e.amount}),children:(0,rg.Q2)({amount:e.price_incl_tax||e.amount||0,currency:r.currency_code})})}}))||[]},[o,r.currency_code,p]),h=(0,eR.FH)({control:c,name:u("option")}),y=(0,eR.FH)({control:c,name:u("price")});return(0,z.jsxs)("div",{className:"gap-y-base flex flex-col",children:[(0,z.jsxs)("div",{className:"flex flex-col",children:[(0,z.jsx)("h2",{className:"inter-base-semibold",children:i?s("shipping-form-shipping-for-return-items","Shipping for return items"):s("shipping-form-shipping-for-replacement-items","Shipping for replacement items")}),(0,z.jsx)(hV,{isClaim:o,isReturn:i})]}),(0,z.jsx)(eR.xI,{control:c,name:u("option"),rules:{required:!!(void 0!==l&&l)&&s("shipping-form-shipping-method-is-required","Shipping method is required")},render:function(e){var t=e.field,r=t.value,n=t.onChange,i=t.onBlur,a=t.ref,o=t.name;return(0,z.jsx)(no,{ref:a,placeholder:s("shipping-form-choose-shipping-method","Choose shipping method"),label:s("shipping-form-shipping-method","Shipping method"),name:o,options:m,value:r,onChange:n,onBlur:i,isClearable:!0,errors:f})}}),h&&!o&&(0,z.jsx)("div",{className:"flex w-full items-center justify-end",children:void 0!==y?(0,z.jsx)("div",{className:"flex w-full items-center justify-end",children:(0,z.jsxs)("div",{className:"gap-x-xsmall grid grid-cols-[1fr_40px]",children:[(0,z.jsx)(eR.xI,{control:c,name:u("price"),render:function(e){var t=e.field,n=t.value,i=t.onChange;return(0,z.jsx)(sC,{currencyCode:r.currency_code,onChange:i,amount:n,name:u("price"),errors:f})}}),(0,z.jsx)(W.A,{variant:"secondary",size:"small",className:"flex h-10 w-10 items-center justify-center",type:"button",onClick:function(){d(u("price"),void 0)},children:(0,z.jsx)(eu,{size:20,className:"text-grey-40"})})]})}):(0,z.jsx)(W.A,{size:"small",variant:"secondary",type:"button",className:"h-10",onClick:function(){if(h){var e=null==p?void 0:p.find(function(e){return e.id===h.value.id});d(u("price"),Math.round(((null==e?void 0:e.amount)||0)*(1+h.value.taxRate)))}},children:s("shipping-form-add-custom-price","Add custom price")})})]})};var hW=function(){return{option:void 0,price:void 0}},hY=function(e){var t,r={items:[]};return(null===(t=e.returnable_items)||void 0===t?void 0:t.length)&&e.returnable_items.forEach(function(e){var t=e.quantity-(e.returned_quantity||0);r.items.push({item_id:e.id,thumbnail:e.thumbnail,refundable:e.refundable||0,product_title:e.variant.product.title,sku:e.variant.sku,variant_title:e.variant.title,quantity:t,original_quantity:e.quantity,total:e.total||0,return_reason_details:{note:void 0,reason:void 0},return:!1})}),r},h$=function(e,t){var r,n=hY(e);return{items:null==n?void 0:null===(r=n.items)||void 0===r?void 0:r.reduce(function(e,r){if(!r)return e;var n=t.items.findIndex(function(e){return e.item_id===r.item_id});if(r.item_id&&n>-1){var i,a,o=t.items[n],l=o.requested_quantity-o.received_quantity,s=(r.total||0)/r.original_quantity;e.push((i=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},r),a=a={price:s,quantity:l,original_quantity:l},Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(a)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(a)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(a,e))}),i))}return e},[])}},hQ=function(e,t){return{receive_items:h$(e,t)}},hK=function(e){return{claim_type:{type:"refund"},additional_items:{items:[]},notification:{send_notification:!0},return_items:hY(e),shipping_address:e.shipping_address?Object.keys(e.shipping_address).map(function(e){return e}).reduce(function(t,r){if("country_code"===r){var n=e.shipping_address.country_code?uw[e.shipping_address.country_code.toUpperCase()]:"";t[r]={value:e.shipping_address[r],label:n}}else t[r]=e.shipping_address[r]||void 0;return t},{}):{address_1:void 0,address_2:void 0,city:void 0,company:void 0,country_code:void 0,first_name:void 0,last_name:void 0,phone:void 0,postal_code:void 0,province:void 0},return_shipping:hW(),replacement_shipping:hW()}};function hZ(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}let hJ=function(e){var t,r,n=e.order,i=e.onClose,a=(0,a7.lK)(),o=(0,J.useAdminCreateClaim)(n.id),l=o.mutate,s=o.isLoading,c=(0,ei.Bd)().t,u=(0,rz.u)().isFeatureEnabled,d=u("inventoryService")&&u("stockLocationService"),f=(0,J.useAdminStockLocations)({},{enabled:d}),p=f.stock_locations,m=f.refetch,h=f.isLoading;(0,U.useEffect)(function(){d&&m()},[d,m]);var y=(0,eR.mN)({defaultValues:hK(n)}),b=y.handleSubmit,v=y.reset,g=y.formState.isDirty,x=y.setError,j=y.control,w=(0,eC.A)(),O=rL();(0,U.useEffect)(function(){v(hK(n))},[n,v]);var S=function(){a.reset(),i()},P=(t=function(){var e;return function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,function(t){switch(t.label){case 0:if(e=!0,!g)return[3,2];return[4,O({heading:c("claim-are-you-sure-you-want-to-close","Are you sure you want to close?"),text:c("claim-you-have-unsaved-changes-are-you-sure-you-want-to-close","You have unsaved changes, are you sure you want to close?")})];case 1:e=t.sent(),t.label=2;case 2:return e&&S(),[2]}})},r=function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function o(e){hZ(a,n,i,o,l,"next",e)}function l(e){hZ(a,n,i,o,l,"throw",e)}o(void 0)})},function(){return r.apply(this,arguments)}),C=b(function(e){var t,r,i=e.claim_type.type,a=e.return_shipping,o=null===(t=e.refund_amount)||void 0===t?void 0:t.amount,s=null===(r=e.selected_location)||void 0===r?void 0:r.value,u="replace"===i&&e.replacement_shipping.option?{option_id:e.replacement_shipping.option.value.id,price:0}:void 0,d=e.return_items.items.filter(function(e){return e.return}).map(function(e){var t;return{item_id:e.item_id,quantity:e.quantity,note:e.return_reason_details.note||void 0,reason:null===(t=e.return_reason_details.reason)||void 0===t?void 0:t.value}}),f=d.filter(function(e){return!e.reason});if(f.length>0){f.forEach(function(e){var t=d.findIndex(function(t){return t.item_id===e.item_id});x("return_items.items.".concat(t,".return_reason_details"),{type:"manual",message:c("claim-please-select-a-reason","Please select a reason")},{shouldFocus:!0})});return}if("replace"===i&&!e.replacement_shipping.option){x("replacement_shipping.option",{type:"manual",message:c("claim-a-shipping-method-for-replacement-items-is-required","A shipping method for replacement items is required")},{shouldFocus:!0});return}l({claim_items:d,type:i,return_shipping:a.option?{option_id:a.option.value.id,price:0}:void 0,additional_items:"replace"===i?e.additional_items.items.map(function(e){return{quantity:e.quantity,variant_id:e.variant_id}}):void 0,no_notification:!e.notification.send_notification,refund_amount:"refund"===i&&void 0!==o?o:void 0,shipping_address:"replace"===i?{address_1:e.shipping_address.address_1,address_2:e.shipping_address.address_2||void 0,city:e.shipping_address.city,country_code:e.shipping_address.country_code.value,company:e.shipping_address.company||void 0,first_name:e.shipping_address.first_name,last_name:e.shipping_address.last_name,phone:e.shipping_address.phone||void 0,postal_code:e.shipping_address.postal_code,province:e.shipping_address.province||void 0}:void 0,return_location_id:s,shipping_methods:u?[u]:void 0},{onSuccess:function(){w(c("claim-successfully-created-claim","Successfully created claim"),c("claim-created","A claim for order #{{display_id}} was successfully created",{display_id:n.display_id}),"success"),S()},onError:function(e){w(c("claim-error-creating-claim","Error creating claim"),(0,eA.u)(e),"error")}})}),A=(0,eR.FH)({control:y.control,name:"claim_type.type"}),N=(0,eR.FH)({control:y.control,name:"return_items.items"});return(0,z.jsx)(a7.Ay,{open:!0,handleClose:P,context:a,isLargeModal:!0,children:(0,z.jsxs)(eN.A.Body,{children:[(0,z.jsx)(eN.A.Header,{handleClose:P,children:(0,z.jsx)("h1",{className:"inter-xlarge-semibold",children:c("claim-create-claim","Create Claim")})}),(0,z.jsxs)("form",{onSubmit:C,"data-testid":"register-claim-form",children:[(0,z.jsx)(eN.A.Content,{children:(0,z.jsxs)("div",{className:"gap-y-xlarge flex flex-col",children:[(0,z.jsx)(hy,{form:(0,eL.m)(y,"return_items"),order:n,isClaim:!0}),(0,z.jsx)(hG,{form:(0,eL.m)(y,"return_shipping"),order:n,isReturn:!0,isClaim:!0}),d&&(0,z.jsxs)("div",{className:"mb-8",children:[(0,z.jsx)("h3",{className:"inter-base-semibold ",children:c("claim-location","Location")}),(0,z.jsx)("p",{className:"inter-base-regular text-grey-50",children:c("claim-choose-which-location-you-want-to-return-the-items-to","Choose which location you want to return the items to.")}),h?(0,z.jsx)(X.A,{}):(0,z.jsx)(eR.xI,{control:j,name:"selected_location",render:function(e){var t=e.field,r=t.value,n=t.onChange;return(0,z.jsx)(no,{className:"mt-2",placeholder:c("claim-select-location-to-return-to","Select Location to Return to"),value:r,isMulti:!1,onChange:n,options:(null==p?void 0:p.map(function(e){return{label:e.name,value:e.id}}))||[]})}})]}),(0,z.jsx)(hi,{form:(0,eL.m)(y,"claim_type")}),"replace"===A&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(h_,{form:(0,eL.m)(y,"additional_items"),order:n}),(0,z.jsx)(hU,{form:(0,eL.m)(y,"shipping_address"),order:n}),(0,z.jsx)(hG,{form:(0,eL.m)(y,"replacement_shipping"),isClaim:!0,order:n})]}),(0,z.jsx)(hR,{form:y,order:n})]})}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,z.jsx)(hL,{form:(0,eL.m)(y,"notification"),type:"claim"}),(0,z.jsxs)("div",{className:"gap-x-xsmall flex items-center justify-end",children:[(0,z.jsx)(W.A,{variant:"secondary",size:"small",type:"button",onClick:P,children:c("claim-cancel","Cancel")}),(0,z.jsx)(W.A,{variant:"primary",size:"small",disabled:!g||s||(null==N?void 0:N.length)<1,children:c("claim-submit-and-close","Submit and close")})]})]})})]})]})})};function hX(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function h0(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||h2(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h1(e){return function(e){if(Array.isArray(e))return hX(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||h2(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h2(e,t){if(e){if("string"==typeof e)return hX(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hX(e,t)}}var h3=function(e){var t=e.url,r=e.onDelete,n=e.name,i=e.size;return(0,z.jsxs)("div",{className:"my-8 flex w-full items-center justify-between",children:[(0,z.jsxs)("div",{className:"flex items-center",children:[(0,z.jsx)("div",{className:"bg-voilet-60 h-20 w-20",children:(0,z.jsx)("img",{className:"rounded-rounded h-full w-full object-cover",src:t})}),(0,z.jsxs)("div",{className:"inter-small-regular ml-8 flex flex-col",children:[n,i&&(0,z.jsxs)("span",{className:"text-grey-50",children:[i," KB"]})]})]}),(0,z.jsx)(W.A,{variant:"ghost",size:"small",className:"text-grey-40 h-8 w-8",onClick:r,children:(0,z.jsx)(eu,{size:20})})]})};let h5=function(e){var t=e.onSubmit,r=e.reason,n=e.existingNote,i=e.customReturnOptions,a=e.addImage,o=e.images,l=(0,U.useContext)(a7.H8).pop,s=(0,ei.Bd)().t,c=(0,J.useAdminReturnReasons)().return_reasons,u=h0((0,U.useState)(n||""),2),d=u[0],f=u[1],p=h0((0,U.useState)([]),2),m=p[0],h=p[1],y=h0((0,U.useState)(r?{value:r,label:r.label}:null),2),b=y[0],v=y[1],g=function(e){var t=h1(m);t.splice(t.indexOf(e),1),h(t)},x=function(e){tF.uploads.delete(e)},j=function(e){f(e.target.value)};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(eN.A.Content,{children:(0,z.jsxs)("div",{className:"h-full",children:[(0,z.jsx)("h2",{className:"inter-base-semibold mb-4",children:s("rma-sub-modals-reason-for-return","Reason for Return")}),(0,z.jsx)(cB,{label:s("rma-sub-modals-reason","Reason"),value:b,onChange:v,options:(void 0===i?void 0:i)||(null==c?void 0:c.map(function(e){return{value:e,label:e.label}}))||[]}),(0,z.jsx)(e1.A,{label:s("rma-sub-modals-note","Note"),value:d,className:"my-4",onChange:function(e){return j(e)}}),a&&(0,z.jsxs)("div",{children:[o&&o.map(function(e){return(0,z.jsx)(h3,{url:e,name:e.split("//").pop(),size:void 0,onDelete:function(){return x(e)}})}),m.map(function(e){return(0,z.jsx)(h3,{url:window.URL.createObjectURL(e),name:e.name,size:(e.size/1e3).toFixed(2),onDelete:function(){return g(e)}})}),(0,z.jsx)("div",{className:"h-20",children:(0,z.jsx)(dI,{onFileChosen:function(e){h(function(t){return h1(t).concat(h1(e))})},filetypes:["image/png","image/jpeg"]})})]})]})}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"gap-x-xsmall flex w-full justify-end",children:[(0,z.jsx)(W.A,{variant:"ghost",size:"small",className:"w-[112px]",onClick:function(){return l()},children:s("rma-sub-modals-back","Back")}),(0,z.jsx)(W.A,{variant:"primary",className:"w-[112px]",size:"small",disabled:void 0===b,onClick:function(){t(b,d,m),l()},children:s("rma-sub-modals-add","Add")})]})})]})};var h6=function(e,t){var r=e.swap_id,n=e.claim_order_id,i=function(e,t){return e.filter(function(e){return e.id==t&&e.canceled_at}).length>0};return r?i(t.swaps,r):!!n&&i(t.claims,n)};function h4(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function h8(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function h7(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h9(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){h7(e,t,r[t])})}return e}function ye(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function yt(e){return function(e){if(Array.isArray(e))return h4(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return h4(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h4(e,void 0)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}let yr=function(e){var t,r,n=e.order,i=e.allItems,a=e.toReturn,o=e.customReturnOptions,l=void 0===o?void 0:o,s=e.imagesOnReturns,c=void 0!==s&&s,u=e.setToReturn,d=e.isSwapOrClaim,f=void 0!==d&&d,p=(0,ei.Bd)().t,m=(0,U.useContext)(a7.H8),h=m.push,y=m.pop,b=function(e,t){var r;t.quantity-t.returned_quantity===a[t.id].quantity&&e>0||1===a[t.id].quantity&&e<0||u(ye(h9({},a),h7({},t.id,ye(h9({},a[t.id]),{quantity:((null===(r=a[t.id])||void 0===r?void 0:r.quantity)||0)+e}))))},v=function(e){var t=e.id,r=h9({},a);t in a?delete r[t]:r[t]={images:c?[]:null,reason:null,note:"",quantity:e.quantity-e.returned_quantity},u(r)},g=(t=function(e){return function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,function(t){return[2,tF.uploads.create(e).then(function(e){return e.data.uploads.map(function(e){return e.url})})]})},r=function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function o(e){h8(a,n,i,o,l,"next",e)}function l(e){h8(a,n,i,o,l,"throw",e)}o(void 0)})},function(e){return r.apply(this,arguments)}),x=function(e,t,r,n){c&&(null==r?void 0:r.length)?g(r).then(function(r){u(ye(h9({},a),h7({},n,ye(h9({},a[n]),{reason:e,note:t,images:yt(a[n].images||[]).concat(yt(r))}))))}):u(ye(h9({},a),h7({},n,ye(h9({},a[n]),{reason:e,note:t}))))};return(0,z.jsxs)(td,{children:[(0,z.jsx)(td.Head,{className:"border-none",children:(0,z.jsxs)(td.HeadRow,{className:"text-grey-50 inter-small-semibold",children:[(0,z.jsx)(td.HeadCell,{colSpan:2,children:p("rma-select-product-table-product-details","Product Details")}),(0,z.jsx)(td.HeadCell,{className:"pr-8 text-right",children:p("rma-select-product-table-quantity","Quantity")}),(0,z.jsx)(td.HeadCell,{className:"text-right",children:p("rma-select-product-table-refundable","Refundable")}),(0,z.jsx)(td.HeadCell,{})]})}),(0,z.jsx)(td.Body,{children:i.map(function(e){if(!(e.returned_quantity===e.quantity||h6(e,n))){var t,r,i,o,s,u,d,m,g,j=e.id in a;return(0,z.jsxs)(U.Fragment,{children:[(0,z.jsxs)(td.Row,{className:(0,en.default)("border-b-grey-0 hover:bg-grey-0"),children:[(0,z.jsx)(td.Cell,{children:(0,z.jsxs)("div",{className:"ml-1 flex h-full items-center",children:[(0,z.jsx)("div",{onClick:function(){return v(e)},className:"text-grey-0 border-grey-30 rounded-base mr-4 flex h-5 w-5 cursor-pointer justify-center border ".concat(j&&"bg-violet-60"),children:(0,z.jsx)("span",{className:"self-center",children:j&&(0,z.jsx)(e7,{size:16})})}),(0,z.jsx)("input",{className:"hidden",checked:j,tabIndex:-1,onChange:function(){return v(e)},type:"checkbox"})]})}),(0,z.jsx)(td.Cell,{children:(0,z.jsxs)("div",{className:"flex min-w-[240px] py-2",children:[(0,z.jsx)("div",{className:"h-[40px] w-[30px] ",children:(0,z.jsx)("img",{className:"h-full w-full rounded object-cover",src:e.thumbnail})}),(0,z.jsxs)("div",{className:"inter-small-regular text-grey-50 ml-4 flex flex-col",children:[(0,z.jsx)("span",{children:(0,z.jsx)("span",{className:"text-grey-90",children:e.title})}),(0,z.jsxs)("div",{className:"flex gap-4",children:[(null==e?void 0:null===(t=e.variant)||void 0===t?void 0:t.title)&&(0,z.jsx)("span",{children:e.variant.title}),(null==e?void 0:null===(r=e.variant)||void 0===r?void 0:r.sku)&&(0,z.jsx)(hf,{value:e.variant.sku,iconSize:14})]})]})]})}),(0,z.jsx)(td.Cell,{className:"w-32 pr-8 text-right",children:e.id in a?(0,z.jsxs)("div",{className:"text-grey-50 flex w-full justify-end text-right ",children:[(0,z.jsx)("span",{onClick:function(){return b(-1,e)},className:"hover:bg-grey-20 mr-2 flex h-5 w-5 cursor-pointer items-center justify-center rounded",children:(0,z.jsx)(e9.A,{size:16})}),(0,z.jsx)("span",{children:a[e.id].quantity||""}),(0,z.jsx)("span",{onClick:function(){return b(1,e)},className:(0,en.default)("hover:bg-grey-20 ml-2 flex h-5 w-5 cursor-pointer items-center justify-center rounded"),children:(0,z.jsx)(n_.A,{size:16})})]}):(0,z.jsx)("span",{className:"text-grey-40",children:e.quantity-e.returned_quantity})}),(0,z.jsx)(td.Cell,{className:"text-right",children:(0,rg.Q2)({currency:n.currency_code,amount:e.refundable||0})}),(0,z.jsx)(td.Cell,{className:"text-grey-40 pr-1 text-right",children:n.currency_code.toUpperCase()})]}),j&&!f&&(0,z.jsxs)(td.Row,{className:"hover:bg-grey-0 last:border-b-0",children:[(0,z.jsx)(td.Cell,{}),(0,z.jsx)(td.Cell,{colSpan:2,children:(0,z.jsx)("div",{className:"max-w-[470px] truncate",children:(null===(i=a[e.id])||void 0===i?void 0:i.reason)&&(0,z.jsxs)("span",{className:"inter-small-regular text-grey-40",children:[(0,z.jsx)("span",{className:"text-grey-80 mr-1",children:(0,z.jsx)("span",{className:"inter-small-semibold mr-1",children:null===(o=a[e.id])||void 0===o?void 0:o.reason.label})}),(null===(s=a[e.id])||void 0===s?void 0:s.note)||"",(0,z.jsx)("span",{className:"ml-2",children:(null===(d=a[e.id])||void 0===d?void 0:null===(u=d.images)||void 0===u?void 0:u.length)>0&&(0,z.jsx)(z.Fragment,{children:p("rma-select-product-table-images-witch-count","{{count}}",{count:null===(g=a[e.id])||void 0===g?void 0:null===(m=g.images)||void 0===m?void 0:m.length})})})]})})}),(0,z.jsx)(td.Cell,{colSpan:2,children:(0,z.jsx)("div",{className:"mb-small flex w-full justify-end",children:(0,z.jsx)(W.A,{onClick:function(){var t,r,n,i,o;return h((n=null===(t=a[e.id])||void 0===t?void 0:t.reason,i=null===(r=a[e.id])||void 0===r?void 0:r.note,o=function(t,r,n){return x(t,r,n,e.id)},{title:"Return Reasons",onBack:function(){return y()},view:(0,z.jsx)(h5,{reason:n,existingNote:i,customReturnOptions:l,addImage:c,onSubmit:o})}))},variant:"ghost",size:"small",className:"border-grey-20 border",children:p("rma-select-product-table-select-reason","Select Reason")})})})]})]},e.id)}})})]})},yn=function(e){var t=e.useCustomShippingPrice,r=e.inclTax,n=e.shippingPrice,i=e.currencyCode,a=e.updateShippingPrice,o=e.setUseCustomShippingPrice;return t?(0,z.jsxs)("div",{className:"gap-x-base mt-4 flex w-full items-end",children:[(0,z.jsx)(hI,{label:"Shipping price (".concat(r?"incl. tax":"excl. tax",")"),currencyCode:i,onChange:function(e){return a(null!=e?e:0)},value:n}),(0,z.jsx)(W.A,{onClick:function(){return o(!1)},className:"text-grey-40 h-10 w-10",variant:"ghost",size:"small",children:(0,z.jsx)(eu,{size:20})})]}):(0,z.jsx)("div",{className:"mt-4 flex w-full justify-end",children:(0,z.jsx)(W.A,{onClick:function(){return o(!0)},variant:"ghost",className:"border-grey-20 border",size:"small",children:"Add custom price"})})};function yi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ya(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function yo(e){return function(e){if(Array.isArray(e))return yi(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return yi(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yi(e,void 0)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var yl=function(e,t){var r=e.items.reduce(function(e,t){return e.set(t.id,ya({},t))},new Map),n=[];if(e.claims&&e.claims.length){var i=!0,a=!1,o=void 0;try{for(var l,s=e.claims[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c,u,d=l.value;(null===(c=d.return_order)||void 0===c?void 0:c.status)!=="canceled"&&(d.claim_items=null!==(u=d.claim_items)&&void 0!==u?u:[],n=yo(n).concat(yo(d.claim_items))),("not_fulfilled"!==d.fulfillment_status||"na"!==d.payment_status)&&d.additional_items&&d.additional_items.length&&(r=d.additional_items.filter(function(e){return e.shipped_quantity||e.shipped_quantity===e.fulfilled_quantity}).reduce(function(e,t){return e.set(t.id,ya({},t))},r))}}catch(e){a=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}}if(!t&&e.swaps&&e.swaps.length){var f=!0,p=!1,m=void 0;try{for(var h,y=e.swaps[Symbol.iterator]();!(f=(h=y.next()).done);f=!0){var b=h.value;"not_fulfilled"!==b.fulfillment_status&&(r=b.additional_items.reduce(function(e,t){return e.set(t.id,ya({},t))},r))}}catch(e){p=!0,m=e}finally{try{f||null==y.return||y.return()}finally{if(p)throw m}}}var v=!0,g=!1,x=void 0;try{for(var j,w=n[Symbol.iterator]();!(v=(j=w.next()).done);v=!0){var O=j.value,S=r.get(O.item_id);S&&(S.quantity=S.quantity-O.quantity,0!==S.quantity?r.set(S.id,S):r.delete(S.id))}}catch(e){g=!0,x=e}finally{try{v||null==w.return||w.return()}finally{if(g)throw x}}return yo(r.values())};function ys(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function yc(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function yu(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function o(e){yc(a,n,i,o,l,"next",e)}function l(e){yc(a,n,i,o,l,"throw",e)}o(void 0)})}}function yd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function yf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ys(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ys(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yp(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}let ym=function(e){var t,r=e.order,n=e.onDismiss,i=(0,J.useMedusa)().client,a=(0,ei.Bd)().t,o=(0,U.useContext)(a7.H8),l=(0,rz.u)().isFeatureEnabled,s=l("inventoryService")&&l("stockLocationService"),c=yf((0,U.useState)(!1),2),u=c[0],d=c[1],f=yf((0,U.useState)(!1),2),p=f[0],m=f[1],h=yf((0,U.useState)(0),2),y=h[0],b=h[1],v=yf((0,U.useState)(0),2),g=v[0],x=v[1],j=yf((0,U.useState)(null),2),w=j[0],O=j[1],S=yf((0,U.useState)({}),2),P=S[0],C=S[1],A=yf((0,U.useState)(!1),2),N=A[0],k=A[1],_=yf((0,U.useState)(r.no_notification),2),E=_[0],I=_[1],D=yf((0,U.useState)(),2),T=D[0],M=D[1],R=yf((0,U.useState)(null),2),L=R[0],F=R[1],B=yf((0,U.useState)([]),2),q=B[0],H=B[1],V=(0,eC.A)(),G=(0,J.useAdminStockLocations)({},{enabled:s}),Y=G.stock_locations,Q=G.refetch;U.useEffect(function(){s&&Q()},[s,Q]);var K=(0,J.useAdminRequestReturn)(r.id);(0,U.useEffect)(function(){r&&H(yl(r,!1))},[r]);var Z=U.useMemo(function(){return new Map(r.items.map(function(e){return[e.id,e]}))},[r.items]),ee=yf((0,U.useState)(new Map),2),et=ee[0],er=ee[1];U.useEffect(function(){var e;(e=yu(function(){return yp(this,function(e){switch(e.label){case 0:var t;if(!q.length||!s)return[2,new Map];return[4,Promise.all(q.map((t=yu(function(e){return yp(this,function(t){switch(t.label){case 0:if(!e.variant_id)return[2,void 0];return[4,i.admin.variants.getInventory(e.variant_id)];case 1:return[2,t.sent()]}})}),function(e){return t.apply(this,arguments)})))];case 1:return[2,new Map(e.sent().filter(function(e){return!!e}).map(function(e){var t=e.variant;return[t.id,t.inventory[0].location_levels]}))]}})}),function(){return e.apply(this,arguments)})().then(function(e){er(e)})},[q,i.admin.variants,s]);var en=U.useMemo(function(){return Object.entries(P).map(function(e){var t,r=yf(e,1)[0],n=Z.get(r);return null==n||!n.variant_id||!!(null===(t=et.get(n.variant_id))||void 0===t?void 0:t.find(function(e){return e.location_id===(null==w?void 0:w.value)}))||null==w||!w.value}).every(Boolean)},[P,Z,null==w?void 0:w.value,et]),ea=(0,J.useAdminShippingOptions)({region_id:r.region_id,is_return:!0}),eo=ea.isLoading,el=ea.shipping_options;(0,U.useEffect)(function(){var e=Object.keys(P).map(function(e){return q.find(function(t){return t.id===e})}).filter(function(e){return void 0!==e}).reduce(function(e,t){return e+(t.refundable||0)/(t.quantity-t.returned_quantity)*P[t.id].quantity},0)-(T||0);b(e),x(e)},[P,T]);var es=(t=yu(function(){var e,t;return yp(this,function(i){return e={items:Object.entries(P).map(function(e){var t,r=yf(e,2),n=r[0],i=r[1],a=yd({reason_id:null===(t=i.reason)||void 0===t?void 0:t.value.id},i);return delete a.reason,yd({item_id:n},az(a))}),refund:Math.round(g),no_notification:E!==r.no_notification?E:void 0},w&&s&&(e.location_id=w.value),L&&(t=L.tax_rates.reduce(function(e,t){return e+t.rate/100},0),e.return_shipping={option_id:L.value,price:T?Math.round(T/(1+t)):0}),d(!0),[2,K.mutateAsync(e).then(function(){return n()}).then(function(){return V(a("returns-success","Success"),a("returns-successfully-returned-order","Successfully returned order"),"success")}).catch(function(e){return V(a("returns-error","Error"),(0,eA.u)(e),"error")}).finally(function(){return d(!1)})]})}),function(){return t.apply(this,arguments)});return(0,U.useEffect)(function(){if(!N&&L){var e=null==el?void 0:el.find(function(e){return L.value===e.id});e&&M(e.price_incl_tax)}},[N,L]),(0,z.jsx)(a7.Ay,{context:o,handleClose:n,children:(0,z.jsxs)(eN.A.Body,{children:[(0,z.jsx)(eN.A.Header,{handleClose:n,children:(0,z.jsx)("h2",{className:"inter-xlarge-semibold",children:a("returns-request-return","Request Return")})}),(0,z.jsxs)(eN.A.Content,{children:[(0,z.jsxs)("div",{className:"mb-7",children:[(0,z.jsx)("h3",{className:"inter-base-semibold",children:a("returns-items-to-return","Items to return")}),(0,z.jsx)(yr,{order:r,allItems:q,toReturn:P,setToReturn:function(e){return C(e)}})]}),s&&(0,z.jsxs)("div",{className:"mb-8",children:[(0,z.jsx)("h3",{className:"inter-base-semibold ",children:"Location"}),(0,z.jsx)("p",{className:"inter-base-regular text-grey-50",children:a("returns-choose-which-location-you-want-to-return-the-items-to","Choose which location you want to return the items to.")}),(0,z.jsx)(no,{className:"mt-2",placeholder:a("returns-select-location-to-return-to","Select Location to Return to"),value:w,isMulti:!1,onChange:O,options:(null==Y?void 0:Y.map(function(e){return{label:e.name,value:e.id}}))||[]}),!en&&(0,z.jsxs)("div",{className:"bg-orange-10 border-orange-20 rounded-rounded text-yellow-60 gap-x-base mt-4 flex border p-4",children:[(0,z.jsx)("div",{className:"text-orange-40",children:(0,z.jsx)($.A,{size:20,fillType:"solid"})}),(0,z.jsx)("div",{children:a("returns-selected-location-has-no-inventory-levels","The selected location does not have inventory levels for the selected items. The return can be requested but can't be received until an inventory level is created for the selected location.")})]})]}),(0,z.jsxs)("div",{children:[(0,z.jsx)("h3",{className:"inter-base-semibold ",children:a("returns-shipping","Shipping")}),(0,z.jsx)("p",{className:"inter-base-regular text-grey-50",children:a("returns-choose-retur,-shipping-method","Choose which shipping method you want to use for this return.")}),eo?(0,z.jsx)("div",{className:"flex justify-center",children:(0,z.jsx)(X.A,{size:"medium",variant:"secondary"})}):(0,z.jsx)(no,{className:"mt-2",placeholder:"Add a shipping method",value:L,onChange:function(e){F(e);var t=null==el?void 0:el.find(function(t){return e.value===t.id});t&&M(t.price_incl_tax)},options:(null==el?void 0:el.map(function(e){return{label:e.name,value:e.id,tax_rates:e.tax_rates}}))||[]}),L&&(0,z.jsx)(yn,{inclTax:!0,useCustomShippingPrice:N,shippingPrice:T,currencyCode:r.currency_code,updateShippingPrice:function(e){e>=0&&M(e)},setUseCustomShippingPrice:k})]}),y>=0&&(0,z.jsxs)("div",{className:"mt-10",children:[!N&&L&&(0,z.jsxs)("div",{className:"inter-small-regular mb-4 flex justify-between",children:[(0,z.jsx)("span",{children:a("returns-shipping","Shipping")}),(0,z.jsxs)("div",{children:[(0,rg.Pt)(r.currency_code,T||0)," ",(0,z.jsx)("span",{className:"text-grey-40 ml-3",children:r.currency_code.toUpperCase()})]})]}),(0,z.jsxs)("div",{className:"inter-base-semibold flex w-full justify-between",children:[(0,z.jsx)("span",{children:a("returns-total-refund","Total Refund")}),(0,z.jsx)("div",{className:"flex items-center",children:!p&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("span",{className:"text-grey-40 mr-2 cursor-pointer",onClick:function(){return m(!0)},children:[(0,z.jsx)(ec,{size:20})," "]}),"".concat((0,rg.Pt)(r.currency_code,g)," ").concat(r.currency_code.toUpperCase())]})})]}),p&&(0,z.jsx)(cW.Root,{className:"mt-2",size:"small",currentCurrency:r.currency_code,readOnly:!0,children:(0,z.jsx)(cW.Amount,{label:a("returns-amount","Amount"),amount:g,onChange:function(e){e<r.refundable_amount&&e>=0&&x(e)}})})]})]}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"flex w-full justify-between",children:[(0,z.jsxs)("div",{className:"flex h-full cursor-pointer items-center",onClick:function(){return I(!E)},children:[(0,z.jsx)("div",{className:"rounded-base border-grey-30 text-grey-0 flex h-5 w-5 justify-center border ".concat(!E&&"bg-violet-60"),children:(0,z.jsx)("span",{className:"self-center",children:!E&&(0,z.jsx)(e7,{size:16})})}),(0,z.jsx)("input",{id:"noNotification",className:"hidden",name:"noNotification",checked:!E,onChange:function(){return I(!E)},type:"checkbox"}),(0,z.jsxs)("span",{className:"gap-x-xsmall text-grey-90 ml-3 flex items-center",children:[a("returns-send-notifications","Send notifications"),(0,z.jsx)(e0.A,{content:a("returns-notify-customer-of-created-return","Notify customer of created return")})]})]}),(0,z.jsxs)("div",{className:"gap-x-xsmall flex",children:[(0,z.jsx)(W.A,{onClick:function(){return n()},className:"w-[112px]",type:"submit",size:"small",variant:"ghost",children:a("returns-back","Back")}),(0,z.jsx)(W.A,{onClick:es,loading:u,className:"w-[112px]",type:"submit",size:"small",variant:"primary",disabled:0===Object.keys(P).length,children:a("returns-submit","Submit")})]})]})})]})})};var yh=function(e,t){var r=e.find(function(e){return e.region_id===t.region_id});return(r||(r=e.find(function(e){return e.currency_code===t.currency_code})),r)?(0,rg.Q2)({currency:t.currency_code,amount:r.amount*(1+t.tax_rate/100)}):0};let yy=function(e){var t=e.isAdditionalItems,r=e.order,n=e.itemsToAdd,i=e.handleRemoveItem,a=e.handleToAddQuantity,o=(0,ei.Bd)().t;return(0,z.jsxs)(td,{children:[(0,z.jsxs)(td.HeadRow,{className:"text-grey-50 inter-small-semibold",children:[(0,z.jsx)(td.HeadCell,{children:o("rma-return-product-table-product-details","Product Details")}),(0,z.jsx)(td.HeadCell,{className:"pr-8 text-right",children:o("rma-return-product-table-quantity","Quantity")}),(0,z.jsx)(td.HeadCell,{className:"text-right",children:t?"Unit Price":"Refundable"}),(0,z.jsx)(td.HeadCell,{}),(0,z.jsx)(td.HeadCell,{})]}),(0,z.jsx)(td.Body,{children:n.map(function(e,t){return(0,z.jsxs)(td.Row,{className:(0,en.default)("border-b-grey-0 hover:bg-grey-0"),children:[(0,z.jsx)(td.Cell,{children:(0,z.jsxs)("div",{className:"flex min-w-[240px] py-2",children:[(0,z.jsx)("div",{className:"h-[40px] w-[30px] ",children:(0,z.jsx)("img",{className:"h-full w-full rounded object-cover",src:e.product.thumbnail})}),(0,z.jsxs)("div",{className:"inter-small-regular text-grey-50 ml-4 flex flex-col",children:[(0,z.jsxs)("span",{children:[(0,z.jsx)("span",{className:"text-grey-90",children:e.product.title})," "]}),(0,z.jsx)("span",{children:e.title})]})]})}),(0,z.jsx)(td.Cell,{className:"w-32 pr-8 text-right",children:(0,z.jsxs)("div",{className:"text-grey-50 flex w-full justify-end text-right ",children:[(0,z.jsx)("span",{onClick:function(){return a(-1,t)},className:"hover:bg-grey-20 mr-2 flex h-5 w-5 cursor-pointer items-center justify-center rounded",children:(0,z.jsx)(e9.A,{size:16})}),(0,z.jsx)("span",{children:e.quantity||""}),(0,z.jsx)("span",{onClick:function(){return a(1,t)},className:(0,en.default)("hover:bg-grey-20 ml-2 flex h-5 w-5 cursor-pointer items-center justify-center rounded"),children:(0,z.jsx)(n_.A,{size:16})})]})}),(0,z.jsx)(td.Cell,{className:"text-right",children:yh(e.prices,r)}),(0,z.jsx)(td.Cell,{className:"text-grey-40 pr-1 text-right",children:r.currency_code.toUpperCase()}),(0,z.jsx)(td.Cell,{children:(0,z.jsx)(W.A,{onClick:function(){return i(t)},variant:"ghost",size:"small",className:"text-grey-40 h-8 w-8",children:(0,z.jsx)(eu,{size:20})})})]})})})]})};function yb(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function yv(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function yg(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function yx(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||yw(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yj(e){return function(e){if(Array.isArray(e))return yb(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||yw(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yw(e,t){if(e){if("string"==typeof e)return yb(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yb(e,t)}}var yO=function(e){switch(e){case"proposed":return"warning";case"published":return"success";case"rejected":return"danger";default:return"default"}};let yS=function(e){var t=e.onSubmit,r=e.selectedItems,n=(0,ei.Bd)().t,i=(0,U.useContext)(a7.H8).pop,a=yx((0,U.useState)(""),2),o=a[0],l=a[1],s=yx((0,U.useState)(0),2),c=s[0],u=s[1],d=yx((0,U.useState)(0),2),f=d[0],p=d[1],m=yx((0,U.useState)(0),2),h=m[0],y=m[1],b=yx((0,U.useState)([]),2),v=b[0],g=b[1],x=(0,e8.d)(o,500),j=(0,J.useAdminVariants)({q:x,limit:12,offset:c}),w=j.isLoading,O=j.count,S=j.variants;(0,U.useEffect)(function(){void 0!==O&&p(Math.ceil(O/12))},[O]);var P=(0,U.useMemo)(function(){return[{Header:n("rma-sub-modals-name","Name"),accessor:"title",Cell:function(e){var t=e.row.original;return(0,z.jsxs)("div",{className:"flex items-center",children:[(0,z.jsx)("div",{className:"my-1.5 mr-4 flex h-[40px] w-[30px] items-center",children:t.product.thumbnail?(0,z.jsx)("img",{src:t.product.thumbnail,className:"rounded-soft h-full object-cover"}):(0,z.jsx)(nm,{})}),(0,z.jsxs)("div",{className:"flex flex-col",children:[(0,z.jsx)("span",{children:t.product.title}),t.title]})]})}},{Header:n("rma-sub-modals-status","Status"),accessor:"status",Cell:function(e){var t=e.row.original;return(0,z.jsx)(tv.A,{title:"".concat(t.product.status.charAt(0).toUpperCase()).concat(t.product.status.slice(1)),variant:yO(t.product.status)})}},{Header:(0,z.jsx)("div",{className:"text-right",children:n("rma-sub-modals-in-stock","In Stock")}),accessor:"inventory_quantity",Cell:function(e){var t=e.row.original;return(0,z.jsx)("div",{className:"text-right",children:t.inventory_quantity})}}]},[]),C=(0,e4.useTable)({columns:P,data:S||[],manualPagination:!0,initialState:{pageIndex:h,pageSize:12,selectedRowIds:r.reduce(function(e,t){return e[t.id]=!0,e},{})},pageCount:f,autoResetSelectedRows:!1,autoResetPage:!1,getRowId:function(e){return e.id}},e4.usePagination,e4.useRowSelect,function(e){e.visibleColumns.push(function(e){return[{id:"selection",Header:function(e){var t=e.getToggleAllRowsSelectedProps;return(0,z.jsx)("div",{children:(0,z.jsx)(tt,yv({},t()))})},Cell:function(e){var t=e.row;return(0,z.jsx)("div",{children:(0,z.jsx)(tt,yv({},t.getToggleRowSelectedProps()))})}}].concat(yj(e))})}),A=C.getTableProps,N=C.getTableBodyProps,k=C.rows,_=C.prepareRow,E=C.canPreviousPage,I=C.canNextPage,D=C.pageCount,T=C.nextPage,M=C.previousPage,R=C.state,L=R.pageIndex,F=R.pageSize,B=R.selectedRowIds;return(0,U.useEffect)(function(){g(function(e){return yj(e.filter(function(e){return Object.keys(B).findIndex(function(t){return t===e.id})>-1})).concat(yj((null==S?void 0:S.filter(function(t){return 0>e.findIndex(function(e){return e.id===t.id})&&Object.keys(B).findIndex(function(e){return e===t.id})>-1}))||[]))})},[B]),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(eN.A.Content,{children:(0,z.jsx)(tb,{isLoading:w,numberOfRows:12,hasPagination:!0,pagingState:{count:O,offset:c,pageSize:c+k.length,title:n("rma-sub-modals-products","Products"),currentPage:L+1,pageCount:D,nextPage:function(){I&&(u(function(e){return e+F}),y(function(e){return e+1}),T())},prevPage:function(){E&&(u(function(e){return Math.max(e-F,0)}),y(function(e){return e-1}),M())},hasNext:I,hasPrev:E},children:(0,z.jsx)(td,yg(yv({immediateSearchFocus:!0,enableSearch:!0,searchPlaceholder:n("rma-sub-modals-search-products","Search Products.."),searchValue:o,handleSearch:function(e){u(0),y(0),l(e)}},A()),{children:(0,z.jsx)(td.Body,yg(yv({},N()),{children:w?(0,z.jsx)(td.Row,{children:(0,z.jsx)(td.Cell,{colSpan:P.length,className:"flex items-center justify-center",children:(0,z.jsx)(X.A,{size:"large",variant:"secondary"})})}):k.map(function(e,t){return _(e),(0,z.jsx)(td.Row,yg(yv({},e.getRowProps()),{children:e.cells.map(function(e){return(0,z.jsx)(td.Cell,yg(yv({},e.getCellProps()),{children:e.render("Cell")}))})}))})}))}))})}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"gap-x-xsmall flex w-full justify-end",children:[(0,z.jsx)(W.A,{variant:"ghost",size:"small",className:"w-[112px]",onClick:function(){return i()},children:n("rma-sub-modals-back","Back")}),(0,z.jsx)(W.A,{variant:"primary",className:"w-[112px]",size:"small",onClick:function(){t(v),i()},children:n("rma-sub-modals-add","Add")})]})})]})};function yP(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function yC(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function yA(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function yN(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||y_(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yk(e){return function(e){if(Array.isArray(e))return yP(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||y_(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y_(e,t){if(e){if("string"==typeof e)return yP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yP(e,t)}}var yE=function(e,t,r){return{title:"Add Products",onBack:function(){return e()},view:(0,z.jsx)(yS,{selectedItems:t||[],onSubmit:r})}};let yI=function(e){var t,r,n=e.order,i=e.onDismiss,a=(0,ei.Bd)().t,o=(0,J.useAdminOrder)(n.id).refetch,l=(0,J.useAdminCreateSwap)(n.id),s=l.mutate,c=l.isLoading,u=(0,U.useContext)(a7.H8),d=yN((0,U.useState)({}),2),f=d[0],p=d[1],m=yN((0,U.useState)(!1),2),h=m[0],y=m[1],b=yN((0,U.useState)([]),2),v=b[0],g=b[1],x=yN((0,U.useState)(null),2),j=x[0],w=x[1],O=yN((0,U.useState)(void 0),2),S=O[0],P=O[1],C=yN((0,U.useState)(n.no_notification),2),A=C[0],N=C[1],k=yN(U.useState(null),2),_=k[0],E=k[1],I=(0,rz.u)().isFeatureEnabled,D=I("inventoryService")&&I("stockLocationService"),T=(0,J.useAdminStockLocations)({},{enabled:D}),M=T.stock_locations,R=T.refetch,L=T.isLoading;U.useEffect(function(){D&&R()},[D,R]);var F=(0,eC.A)(),B=(0,U.useMemo)(function(){return n?yl(n,!1):[]},[n]),q=(0,J.useAdminShippingOptions)({is_return:!0,region_id:n.region_id}),H=q.shipping_options,V=q.isLoading,G=(0,U.useMemo)(function(){return Object.keys(f).map(function(e){return B.find(function(t){return t.id===e})}).reduce(function(e,t){return t?e+(t.refundable||0)/(t.quantity-t.returned_quantity)*f[t.id].quantity:e},0)-(S||0)},[f,S]),Y=(0,U.useMemo)(function(){return v.reduce(function(e,t){var r,i,a=null===(r=t.prices.find(function(e){return e.region_id===n.region_id}))||void 0===r?void 0:r.amount;return a||(a=null===(i=t.prices.find(function(e){return e.currency_code===n.currency_code}))||void 0===i?void 0:i.amount),a||(a=0),e+a*t.quantity},0)},[v]);(0,U.useEffect)(function(){if(!h&&j&&H){var e=H.find(function(e){return j.value===e.id});P(null==e?void 0:e.amount)}},[h,j]);var $=function(e){var t=v.map(function(e){return e.id});g(function(r){return yk(r).concat(yk(e.filter(function(e){return!t.includes(e.id)}).map(function(e){return yA(yC({},e),{quantity:1})})))})};return(0,z.jsx)(a7.Ay,{context:u,handleClose:i,children:(0,z.jsxs)(eN.A.Body,{children:[(0,z.jsx)(eN.A.Header,{handleClose:i,children:(0,z.jsx)("h2",{className:"inter-xlarge-semibold",children:a("swap-register-exchange","Register Exchange")})}),(0,z.jsxs)(eN.A.Content,{children:[(0,z.jsxs)("div",{className:"mb-7",children:[(0,z.jsx)("h3",{className:"inter-base-semibold",children:a("swap-items-to-return","Items to return")}),(0,z.jsx)(yr,{order:n,allItems:B,toReturn:f,setToReturn:function(e){return p(e)}})]}),(0,z.jsxs)("div",{children:[(0,z.jsx)("h3",{className:"inter-base-semibold ",children:a("swap-shipping","Shipping")}),V?(0,z.jsx)("div",{className:"flex justify-center",children:(0,z.jsx)(X.A,{size:"medium",variant:"secondary"})}):(0,z.jsx)(cB,{label:a("swap-shipping-method","Shipping Method"),className:"mt-2",placeholder:a("swap-add-a-shipping-method","Add a shipping method"),value:j,onChange:function(e){if(H){w(e);var t=null==H?void 0:H.find(function(t){return e.value===t.id});P(null==t?void 0:t.amount)}},options:(null==H?void 0:H.map(function(e){return{label:e.name,value:e.id}}))||[]}),j&&(0,z.jsx)(yn,{inclTax:!1,useCustomShippingPrice:h,shippingPrice:S,currencyCode:n.currency_code,updateShippingPrice:function(e){void 0!==e&&e>=0?P(e):P(0)},setUseCustomShippingPrice:y})]}),D&&(0,z.jsxs)("div",{className:"my-8",children:[(0,z.jsx)("h3",{className:"inter-base-semibold ",children:a("swap-location","Location")}),(0,z.jsx)("p",{className:"inter-base-regular text-grey-50",children:a("swap-choose-which-location-you-want-to-return-the-items-to","Choose which location you want to return the items to.")}),L?(0,z.jsx)(X.A,{}):(0,z.jsx)(cB,{className:"mt-2",placeholder:a("swap-select-location-to-return-to","Select Location to Return to"),value:_,isMulti:!1,onChange:E,options:(null==M?void 0:M.map(function(e){return{label:e.name,value:e.id}}))||[]})]}),(0,z.jsxs)("div",{className:"mt-8 flex items-center justify-between",children:[(0,z.jsx)("h3",{className:"inter-base-semibold ",children:a("swap-items-to-send","Items to send")}),0===v.length?(0,z.jsx)(W.A,{variant:"ghost",className:"border-grey-20 border",size:"small",onClick:function(){u.push(yE(u.pop,v,$))},children:a("swap-add-product","Add Product")}):(0,z.jsx)(z.Fragment,{})]}),v.length>0&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(yy,{isAdditionalItems:!0,order:n,itemsToAdd:v,handleRemoveItem:function(e){var t=yk(v);t.splice(e,1),g(t)},handleToAddQuantity:function(e,t){var r=yk(v),n=r[t];r[t]=yA(yC({},n),{quantity:n.quantity+e}),g(r)}}),(0,z.jsx)("div",{className:"flex w-full justify-end",children:(0,z.jsx)(W.A,{variant:"ghost",className:"border-grey-20 border",size:"small",onClick:function(){u.push(yE(u.pop,v,$))},children:a("swap-add-product","Add Product")})})]}),(0,z.jsxs)("div",{className:"text-grey-90 inter-small-regular mt-8 flex items-center justify-between",children:[(0,z.jsx)("span",{children:a("swap-return-total","Return Total")}),(0,z.jsx)("span",{children:(0,rg.Q2)({currency:n.currency_code,amount:G})})]}),(0,z.jsxs)("div",{className:"text-grey-90 inter-small-regular mt-2 flex items-center justify-between",children:[(0,z.jsx)("span",{children:a("swap-additional-total","Additional Total")}),(0,z.jsx)("span",{children:(0,rg.Q2)({currency:n.currency_code,amount:Y,digits:2,tax:null!==(t=n.tax_rate)&&void 0!==t?t:void 0})})]}),(0,z.jsxs)("div",{className:"text-grey-90 inter-small-regular mt-2 flex items-center justify-between",children:[(0,z.jsx)("span",{children:a("swap-outbond-shipping","Outbond Shipping")}),(0,z.jsx)("span",{children:a("swap-calculated-at-checkout","Calculated at checkout")})]}),(0,z.jsxs)("div",{className:"inter-base-semibold mt-4 flex items-center justify-between",children:[(0,z.jsx)("span",{children:a("swap-estimated-difference","Estimated difference")}),(0,z.jsx)("span",{className:"inter-large-semibold",children:(0,rg.Q2)({currency:n.currency_code,amount:Y-G,digits:2,tax:null!==(r=n.tax_rate)&&void 0!==r?r:void 0})})]})]}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"flex w-full justify-between",children:[(0,z.jsxs)("div",{className:"flex h-full cursor-pointer items-center",onClick:function(){return N(!A)},children:[(0,z.jsx)("div",{className:"text-grey-0 border-grey-30 rounded-base flex h-5 w-5 justify-center border ".concat(!A&&"bg-violet-60"),children:(0,z.jsx)("span",{className:"self-center",children:!A&&(0,z.jsx)(e7,{size:16})})}),(0,z.jsx)("input",{id:"noNotification",className:"hidden",name:"noNotification",checked:!A,type:"checkbox"}),(0,z.jsxs)("span",{className:"text-grey-90 gap-x-xsmall ml-3 flex items-center",children:[a("swap-send-notifications","Send notifications"),(0,z.jsx)(e0.A,{content:a("swap-if-unchecked-the-customer-will-not-receive-communication-about-this-exchange","If unchecked the customer will not receive communication about this exchange")})]})]}),(0,z.jsx)(W.A,{onClick:function(){var e={return_items:Object.entries(f).map(function(e){var t,r,n,i=yN(e,2),a=i[0],o=i[1];return{item_id:a,note:null!==(r=o.note)&&void 0!==r?r:void 0,quantity:o.quantity,reason_id:null!==(n=null===(t=o.reason)||void 0===t?void 0:t.value.id)&&void 0!==n?n:void 0}}),additional_items:v.map(function(e){return{variant_id:e.id,quantity:e.quantity}}),no_notification:A!==n.no_notification?A:void 0};return D&&_&&(e.return_location_id=_.value),j&&(e.return_shipping={option_id:j.value,price:Math.round(S||0)}),s(e,{onSuccess:function(){o(),F(a("swap-success","Success"),a("swap-successfully-created-exchange","Successfully created exchange"),"success"),i()},onError:function(e){F(a("swap-error","Error"),(0,eA.u)(e),"error")}})},disabled:0===Object.keys(f).length||0===v.length,loading:c,type:"submit",variant:"primary",children:a("swap-complete","Complete")})]})})]})})};var yD=["customer","billing_address","shipping_address","discounts","discounts.rule","shipping_methods","shipping_methods.shipping_option","payments","items","fulfillments","fulfillments.tracking_links","returns","returns.shipping_method","returns.shipping_method.shipping_option","returns.shipping_method.tax_lines","refunds","claims.claim_items.item","claims.fulfillments","claims.return_order","claims.additional_items.variant.product.profiles","swaps.return_order","swaps.additional_items.variant.product.profiles","swaps.fulfillments","returnable_items"];let yT=function(){return(0,(0,rz.u)().isFeatureEnabled)("order_editing")&&-1===yD.indexOf("edits")&&yD.push("edits"),{orderRelations:yD.join(",")}};function yM(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function yR(e){return function(e){if(Array.isArray(e))return yM(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return yM(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yM(e,void 0)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}!function(e){e.REQUESTED="requested",e.RECEIVED="received",e.REQUIRES_ACTION="requires_action",e.CANCELED="canceled"}(y||(y={}));var yL=function(e){var t=yT().orderRelations,r=(0,J.useAdminOrder)(e,{expand:t}),n=r.order,i=r.refetch,a=r.isLoading,o=(0,J.useAdminOrderEdits)({order_id:e}),l=o.order_edits,s=o.isLoading,c=(0,rz.u)().isFeatureEnabled,u=(0,J.useAdminNotes)({resource_id:e,limit:100,offset:0}),d=u.notes,f=u.isLoading,p=(0,J.useAdminNotifications)({resource_id:e}).notifications,m=rF().getLocationNameById;return{events:(0,U.useMemo)(function(){if(n&&!a&&!f&&!s){var e=yR(n.items);if(n.swaps&&n.swaps.length){var t=!0,r=!1,i=void 0;try{for(var o,u=n.swaps[Symbol.iterator]();!(t=(o=u.next()).done);t=!0){var h=o.value;e=yR(e).concat(yR(h.additional_items))}}catch(e){r=!0,i=e}finally{try{t||null==u.return||u.return()}finally{if(r)throw i}}}if(n.claims&&n.claims.length){var y=!0,b=!1,v=void 0;try{for(var g,x=n.claims[Symbol.iterator]();!(y=(g=x.next()).done);y=!0){var j=g.value;e=yR(e).concat(yR(j.additional_items))}}catch(e){b=!0,v=e}finally{try{y||null==x.return||x.return()}finally{if(b)throw v}}}var w=[];if(w.push({id:"refund-event",time:new Date,orderId:n.id,type:"refund-required",currency_code:n.currency_code}),w.push({id:"payment-required",time:new Date,orderId:n.id,type:"payment-required",currency_code:n.currency_code}),c("order_editing")){var O=!0,S=!1,P=void 0;try{for(var C,A=(l||[])[Symbol.iterator]();!(O=(C=A.next()).done);O=!0){var N=C.value;w.push({id:N.id,time:N.created_at,orderId:n.id,type:"edit-created",edit:N}),N.requested_at&&w.push({id:N.id,time:N.requested_at,orderId:n.id,type:"edit-requested",email:n.email,edit:N}),N.declined_at&&w.push({id:N.id,time:N.declined_at,orderId:n.id,type:"edit-declined",edit:N}),N.canceled_at&&w.push({id:N.id,time:N.canceled_at,orderId:n.id,type:"edit-canceled",edit:N}),N.confirmed_at&&w.push({id:N.id,time:N.confirmed_at,orderId:n.id,type:"edit-confirmed",edit:N})}}catch(e){S=!0,P=e}finally{try{O||null==A.return||A.return()}finally{if(S)throw P}}}if(w.push({id:"".concat(n.id,"-placed"),time:n.created_at,amount:n.total,currency_code:n.currency_code,tax:n.tax_rate,type:"placed",orderId:n.id}),"canceled"===n.status&&w.push({id:"".concat(n.id,"-canceled"),time:n.updated_at,type:"canceled",orderId:n.id}),d){var k=!0,_=!1,E=void 0;try{for(var I,D=d[Symbol.iterator]();!(k=(I=D.next()).done);k=!0){var T=I.value;w.push({id:T.id,time:T.created_at,type:"note",authorId:T.author_id,value:T.value,orderId:n.id})}}catch(e){_=!0,E=e}finally{try{k||null==D.return||D.return()}finally{if(_)throw E}}}var M=!0,R=!1,L=void 0;try{for(var z,F=n.refunds[Symbol.iterator]();!(M=(z=F.next()).done);M=!0){var B=z.value;w.push({amount:B.amount,currencyCode:n.currency_code,id:B.id,note:B.note,reason:B.reason,time:B.created_at,type:"refund",refund:B})}}catch(e){R=!0,L=e}finally{try{M||null==F.return||F.return()}finally{if(R)throw L}}var q=!0,H=!1,U=void 0;try{for(var V,G=n.fulfillments[Symbol.iterator]();!(q=(V=G.next()).done);q=!0){var W=V.value;w.push({id:W.id,time:W.created_at,type:"fulfilled",items:W.items.map(function(t){return yH(e,l,t)}),noNotification:W.no_notification,orderId:n.id,locationName:m(W.location_id)}),W.shipped_at&&w.push({id:W.id,time:W.shipped_at,type:"shipped",items:W.items.map(function(t){return yH(e,l,t)}),noNotification:W.no_notification,orderId:n.id,locationName:m(W.location_id)})}}catch(e){H=!0,U=e}finally{try{q||null==G.return||G.return()}finally{if(H)throw U}}var Y=!0,$=!1,Q=void 0;try{for(var K,Z=n.returns[Symbol.iterator]();!(Y=(K=Z.next()).done);Y=!0){var J=K.value;w.push({id:J.id,items:J.items.map(function(t){return yF(e,l,t)}).filter(function(e){return!!e}),status:J.status,currentStatus:J.status,time:J.updated_at,type:"return",noNotification:J.no_notification,orderId:n.id,order:n,raw:J,refunded:function(e,t){var r=t.claims.find(function(t){return t.id===e});return!!r&&"refund"===r.type}(J.claim_order_id,n)}),"requested"!==J.status&&w.push({id:J.id,items:J.items.map(function(t){return yF(e,l,t)}).filter(function(e){return!!e}),status:"requested",time:J.created_at,type:"return",raw:J,currentStatus:J.status,noNotification:J.no_notification,order:n,orderId:n.id})}}catch(e){$=!0,Q=e}finally{try{Y||null==Z.return||Z.return()}finally{if($)throw Q}}var X=!0,ee=!1,et=void 0;try{for(var er,en=n.swaps[Symbol.iterator]();!(X=(er=en.next()).done);X=!0){var ei=er.value;w.push({id:ei.id,time:ei.canceled_at?ei.canceled_at:ei.created_at,noNotification:!0===ei.no_notification,fulfillmentStatus:ei.fulfillment_status,returnId:ei.return_order.id,paymentStatus:ei.payment_status,returnStatus:ei.return_order.status,type:"exchange",newItems:ei.additional_items.map(function(e){return yq(e)}),returnItems:ei.return_order.items.map(function(t){return yF(e,l,t)}),exchangeCartId:"captured"!==ei.payment_status?ei.cart_id:void 0,canceledAt:ei.canceled_at,orderId:ei.order_id,raw:ei}),("fulfilled"===ei.fulfillment_status||"shipped"===ei.fulfillment_status)&&(w.push({id:ei.id,time:ei.fulfillments[0].created_at,type:"fulfilled",items:ei.additional_items.map(function(e){return yq(e)}),noNotification:ei.no_notification,orderId:n.id,sourceType:"exchange"}),ei.fulfillments[0].shipped_at&&w.push({id:ei.id,time:ei.fulfillments[0].shipped_at,type:"shipped",items:ei.additional_items.map(function(e){return yq(e)}),noNotification:ei.no_notification,orderId:n.id,sourceType:"exchange"}))}}catch(e){ee=!0,et=e}finally{try{X||null==en.return||en.return()}finally{if(ee)throw et}}if(n.claims){var ea=!0,eo=!1,el=void 0;try{for(var es,ec=n.claims[Symbol.iterator]();!(ea=(es=ec.next()).done);ea=!0){var eu,ed=es.value;w.push({id:ed.id,type:"claim",newItems:ed.additional_items.map(function(e){var t;return{quantity:e.quantity,title:e.title,thumbnail:e.thumbnail,variant:{title:null===(t=e.variant)||void 0===t?void 0:t.title}}}),fulfillmentStatus:ed.fulfillment_status,returnStatus:null===(eu=ed.return_order)||void 0===eu?void 0:eu.status,refundStatus:ed.payment_status,refundAmount:ed.refund_amount,currencyCode:n.currency_code,claimItems:ed.claim_items.map(function(e){return yB(e)}),time:ed.canceled_at?ed.canceled_at:ed.created_at,noNotification:ed.no_notification,claimType:ed.type,canceledAt:ed.canceled_at,orderId:n.id,claim:ed,order:n}),("fulfilled"===ed.fulfillment_status||"shipped"===ed.fulfillment_status)&&(w.push({id:ed.id,time:ed.fulfillments[0].created_at,type:"fulfilled",items:ed.additional_items.map(function(e){return yq(e)}),noNotification:ed.no_notification,orderId:n.id,sourceType:"claim"}),ed.fulfillments[0].shipped_at&&w.push({id:ed.id,time:ed.fulfillments[0].shipped_at,type:"shipped",items:ed.additional_items.map(function(e){return yq(e)}),noNotification:ed.no_notification,orderId:n.id,sourceType:"claim"})),ed.canceled_at&&w.push({id:"".concat(ed.id,"-created"),type:"claim",newItems:ed.additional_items.map(function(e){var t;return{quantity:e.quantity,title:e.title,thumbnail:e.thumbnail,variant:{title:null===(t=e.variant)||void 0===t?void 0:t.title}}}),fulfillmentStatus:ed.fulfillment_status,refundStatus:ed.payment_status,refundAmount:ed.refund_amount,currencyCode:n.currency_code,claimItems:ed.claim_items.map(function(e){return yB(e)}),time:ed.created_at,noNotification:ed.no_notification,claimType:ed.type,isCanceled:!0,orderId:n.id})}}catch(e){eo=!0,el=e}finally{try{ea||null==ec.return||ec.return()}finally{if(eo)throw el}}}if(p){var ef=!0,ep=!1,em=void 0;try{for(var eh,ey=p[Symbol.iterator]();!(ef=(eh=ey.next()).done);ef=!0){var eb=eh.value;w.push({id:eb.id,time:eb.created_at,to:eb.to,type:"notification",title:eb.event_name,orderId:n.id})}}catch(e){ep=!0,em=e}finally{try{ef||null==ey.return||ey.return()}finally{if(ep)throw em}}}return w.sort(function(e,t){return e.time>t.time?-1:e.time<t.time?1:0}),w[w.length-1].first=!0,w}},[n,l,d,p,c,a,f,s]),refetch:i}};function yz(e,t){var r=t;e=e.filter(function(e){return!!e.confirmed_at}).sort(function(e,t){return new Date(e.confirmed_at)-new Date(t.confirmed_at)});var n=!0,i=!1,a=void 0;try{for(var o,l=e[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var s=o.value.items.find(function(e){return e.original_item_id===r});if(s)r=s.id;else break}}catch(e){i=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(i)throw a}}return r}function yF(e,t,r){var n,i=r.item_id;t&&(i=yz(t,i));var a=e.find(function(e){return e.id===i});if(a)return{title:a.title,quantity:r.quantity,requestedQuantity:r.requested_quantity,receivedQuantity:r.received_quantity,variant:{title:(null==a?void 0:null===(n=a.variant)||void 0===n?void 0:n.title)||"-"},thumbnail:a.thumbnail}}function yB(e){var t;return{title:e.item.title,quantity:e.quantity,thumbnail:e.item.thumbnail,variant:{title:null===(t=e.item.variant)||void 0===t?void 0:t.title}}}function yq(e){var t;return{title:e.title,quantity:e.quantity,thumbnail:e.thumbnail,variant:{title:null===(t=e.variant)||void 0===t?void 0:t.title}}}function yH(e,t,r){var n,i=r.item_id;t&&(i=yz(t,i));var a=e.find(function(e){return e.id===i});if(a)return{title:a.title,quantity:r.quantity,thumbnail:a.thumbnail,variant:{title:(null==a?void 0:null===(n=a.variant)||void 0===n?void 0:n.title)||"-"}}}var yU=r(60407);let yV=function(e){var t,r,n=e.size,i=void 0===n?"24":n,a=e.color,o=void 0===a?"currentColor":a,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["size","color"]);return(0,z.jsxs)("svg",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({width:i,height:i,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l),r=r={children:[(0,z.jsx)("path",{d:"M3.33301 2.91669V7.91669H8.33301",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M3.41396 11.6784C3.57168 13.1642 4.14444 13.9943 5.18922 15.0653C6.23401 16.1363 7.6093 16.8262 9.0944 17.0244C10.5795 17.2226 12.0883 16.9175 13.3787 16.1581C14.6691 15.3988 15.6663 14.2291 16.2103 12.8369C16.7542 11.4446 16.8134 9.91052 16.3783 8.48073C15.9432 7.05094 15.039 5.80836 13.8109 4.95238C12.5828 4.0964 11.1019 3.67666 9.60596 3.76051C8.10998 3.84436 6.68561 4.42693 5.56142 5.41475L3.33301 7.41474",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},yG=function(e){var t,r,n=e.size,i=void 0===n?"24":n,a=e.color,o=void 0===a?"currentColor":a,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["size","color"]);return(0,z.jsxs)("svg",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({width:i,height:i,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l),r=r={children:[(0,z.jsx)("path",{d:"M18.0893 3.08926C18.4147 2.76382 18.4147 2.23618 18.0893 1.91074C17.7638 1.58531 17.2362 1.58531 16.9107 1.91074L18.0893 3.08926ZM9.41074 9.41074L8.82149 10L10 11.1785L10.5893 10.5893L9.41074 9.41074ZM16.9107 1.91074L9.41074 9.41074L10.5893 10.5893L18.0893 3.08926L16.9107 1.91074Z",fill:o}),(0,z.jsx)("path",{d:"M17.5 2.5L12.25 17.5L9.25 10.75L2.5 7.75L17.5 2.5Z",stroke:o,strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))};var yW=r(17984);function yY(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}let y$=function(e){var t,r=e.onSubmit,n=function(e){if(Array.isArray(e))return e}(t=(0,U.useState)(void 0))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(t,2)||function(e,t){if(e){if("string"==typeof e)return yY(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yY(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),i=n[0],a=n[1],o=(0,U.useRef)(null),l=function(){r&&i&&(r(i),a(""))},s=(0,U.useCallback)(function(e){var t,r;switch(e.key){case"Enter":e.preventDefault(),e.stopPropagation(),l(),null===(t=o.current)||void 0===t||t.blur();break;case"Esc":case"Escape":null===(r=o.current)||void 0===r||r.blur()}},[i,a,r]);return(0,z.jsx)("form",{children:(0,z.jsxs)("div",{className:"py-xsmall px-small bg-grey-5 border-grey-20 rounded-rounded flex items-center border",onClick:function(){var e;return null===(e=o.current)||void 0===e?void 0:e.focus()},children:[(0,z.jsxs)("div",{className:"gap-x-small flex flex-grow items-center",children:[(0,z.jsx)(yW.A,{onEmojiClick:function(e){a("".concat(i||"").concat(e))}}),(0,z.jsx)("input",{type:"text",placeholder:"Write a note...",value:i,onChange:function(e){return a(e.target.value)},className:"inter-base-regular placeholder:text-grey-40 flex-grow bg-transparent focus:outline-none",ref:o,id:"note-input",autoComplete:"off",onKeyDown:s})]}),(0,z.jsx)("button",{className:"text-grey-30 hover:text-violet-60",type:"button",onClick:l,children:(0,z.jsx)(yG,{size:20})})]})})};function yQ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function yK(e,t){if(e){if("string"==typeof e)return yQ(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yQ(e,t)}}var yZ=function(e){var t=e.field,r=e.updateKey,n=e.updateValue;return(0,z.jsxs)("div",{className:"gap-x-xsmall flex w-full items-center",children:[(0,z.jsx)("div",{className:"maw-w-[200px]",children:(0,z.jsx)(e1.A,{label:"Key",placeholder:"Some key",defaultValue:t.key,onChange:function(e){r(e.currentTarget.value)}})}),(0,z.jsx)("div",{className:"flex-grow",children:(0,z.jsx)(e1.A,{label:"Value",placeholder:"Some value",defaultValue:t.value,onChange:function(e){n(e.currentTarget.value)}})})]})},yJ=function(e){var t=e.onDelete,r=e.children;return(0,z.jsxs)("div",{className:"gap-x-xlarge flex items-end",children:[(0,z.jsx)("div",{className:"flex-grow",children:r}),(0,z.jsx)(W.A,{variant:"ghost",size:"small",className:"text-grey-40 h-10 w-10",type:"button",onClick:t,children:(0,z.jsx)(eu,{size:20})})]})};let yX=function(e){var t,r=e.metadata,n=e.setMetadata,i=e.heading,a=(0,ei.Bd)().t,o=function(e){if(Array.isArray(e))return e}(t=(0,U.useState)([]))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(t,2)||yK(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),l=o[0],s=o[1];return(0,U.useEffect)(function(){s(r)},[r]),(0,z.jsxs)("div",{children:[(0,z.jsx)("span",{className:"inter-base-semibold",children:void 0===i?"Metadata":i}),(0,z.jsxs)("div",{className:"mt-base gap-y-base flex flex-col",children:[l.map(function(e,t){return(0,z.jsx)(yJ,{onDelete:function(){n(r.filter(function(e,r){return r!==t}))},children:(0,z.jsx)(yZ,{field:e,updateKey:function(e){r[t]={key:e,value:r[t].value},n(r)},updateValue:function(e){r[t]={key:r[t].key,value:e},n(r)}})},t)}),(0,z.jsx)("div",{children:(0,z.jsxs)(W.A,{variant:"secondary",size:"small",type:"button",className:"w-full",onClick:function(){n(((function(e){if(Array.isArray(e))return yQ(e)})(r)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||yK(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([{key:"",value:""}]))},children:[(0,z.jsx)(n_.A,{size:20}),a("metadata-add-metadata","Add Metadata")]})})]})]})};function y0(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function y1(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y2(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){y1(e,t,r[t])})}return e}function y3(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function y5(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return y0(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y0(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}let y6=function(e){var t=e.handleCancel,r=e.orderToFulfill,n=e.orderId,i=e.onComplete,a=(0,ei.Bd)().t,o=(0,rz.u)().isFeatureEnabled,l=o("inventoryService")&&o("stockLocationService"),s=y5((0,U.useState)("items"in r?r.items.reduce(function(e,t){return y3(y2({},e),y1({},t.id,pw(t)))},{}):{}),2),c=s[0],u=s[1],d=y5((0,U.useState)(!1),2),f=d[0],p=d[1],m=y5((0,U.useState)({}),2),h=m[0],y=m[1],b=y5((0,U.useState)({}),2),v=b[0],g=b[1],x=y5((0,U.useState)([{key:"",value:""}]),2),j=x[0],w=x[1],O=(0,J.useAdminStockLocations)({},{enabled:l}),S=O.stock_locations,P=O.refetch;U.useEffect(function(){l&&P()},[l,P]);var C=U.useMemo(function(){return S?S.map(function(e){return{value:e.id,label:e.name}}):[]},[S]),A="items"in r?r.items:r.additional_items,N=(0,J.useAdminCreateFulfillment)(n),k=(0,J.useAdminFulfillSwap)(n),_=(0,J.useAdminFulfillClaim)(n),E=N.isLoading||k.isLoading||_.isLoading,I=(0,eC.A)();return(0,z.jsxs)(sF.A,{children:[(0,z.jsx)(sF.A.Header,{children:(0,z.jsxs)("div",{className:"medium:w-8/12 flex w-full justify-between px-8",children:[(0,z.jsx)(W.A,{size:"small",variant:"ghost",type:"button",onClick:t,children:(0,z.jsx)(ao.A,{size:20})}),(0,z.jsxs)("div",{className:"gap-x-small flex",children:[(0,z.jsx)(W.A,{size:"small",variant:"secondary",type:"button",onClick:t,children:a("create-fulfillment-cancel","Cancel")}),(0,z.jsx)(W.A,{size:"small",variant:"primary",type:"submit",loading:E,onClick:function(){if(l&&!v.value){I(a("create-fulfillment-error","Error"),a("create-fulfillment-please-select-a-location-to-fulfill-from","Please select a location to fulfill from"),"error");return}if(Object.keys(h).length>0){I(a("create-fulfillment-cant-allow-this-action","Can't allow this action"),a("create-fulfillment-trying-to-fulfill-more-than-in-stock","Trying to fulfill more than in stock"),"error");return}var e,n=y5(r.id.split("_"),1)[0],o=N,s=a("create-fulfillment-successfully-fulfilled-order","Successfully fulfilled order"),u=j.reduce(function(e,t){return t.key?y3(y2({},e),y1({},t.key,t.value)):e},{});switch(n){case"swap":o=k,s=a("create-fulfillment-successfully-fulfilled-swap","Successfully fulfilled swap"),e={swap_id:r.id,metadata:u,no_notification:f};break;case"claim":o=_,s=a("create-fulfillment-successfully-fulfilled-claim","Successfully fulfilled claim"),e={claim_id:r.id,metadata:u,no_notification:f};break;default:(e={metadata:u,no_notification:f}).items=Object.entries(c).filter(function(e){return!!y5(e,2)[1]}).map(function(e){var t=y5(e,2);return{item_id:t[0],quantity:t[1]}})}l&&(e.location_id=v.value),o.mutate(e,{onSuccess:function(){I(a("create-fulfillment-success","Success"),s,"success"),t(),i&&i()},onError:function(e){return I(a("create-fulfillment-error","Error"),(0,eA.u)(e),"error")}})},disabled:!Object.values(c).some(function(e){return e>0}),children:a("create-fulfillment-create-fulfillment","Create fulfillment")})]})]})}),(0,z.jsx)(sF.A.Main,{className:"medium:w-6/12",children:(0,z.jsxs)("div",{className:"pt-16",children:[(0,z.jsx)("h1",{className:"inter-xlarge-semibold",children:a("create-fulfillment-create-fulfillment-title","Create Fulfillment")}),(0,z.jsxs)("div",{className:"grid-col-1 grid gap-y-8 divide-y [&>*]:pt-8",children:[(0,z.jsx)(uT,{featureFlag:"inventoryService",children:(0,z.jsxs)("div",{className:"grid grid-cols-2",children:[(0,z.jsxs)("div",{children:[(0,z.jsx)("h2",{className:"inter-base-semibold",children:a("create-fulfillment-locations","Locations")}),(0,z.jsx)("span",{className:"text-grey-50",children:a("create-fulfillment-choose-where-you-wish-to-fulfill-from","Choose where you wish to fulfill from.")})]}),(0,z.jsx)(no,{isMulti:!1,options:C,value:v,onChange:function(e){g({value:null==e?void 0:e.value,label:null==e?void 0:e.label})}})]})}),(0,z.jsxs)("div",{className:"flex flex-col",children:[(0,z.jsx)("span",{className:"inter-base-semibold ",children:a("create-fulfillment-items-to-fulfill","Items to fulfill")}),(0,z.jsx)("span",{className:"text-grey-50 mb-6",children:a("create-fulfillment-select-the-number-of-items-that-you-wish-to-fulfill","Select the number of items that you wish to fulfill.")}),(0,z.jsx)(pS,{items:A,quantities:c,setQuantities:u,locationId:v.value,setErrors:y})]}),(0,z.jsx)("div",{className:"mt-4",children:(0,z.jsx)(yX,{metadata:j,setMetadata:w})}),(0,z.jsxs)("div",{children:[(0,z.jsxs)("div",{className:"mb-2xsmall flex items-center justify-between",children:[(0,z.jsx)("h2",{className:"inter-base-semibold",children:a("create-fulfillment-send-notifications","Send notifications")}),(0,z.jsx)(so.A,{checked:!f,onCheckedChange:function(e){return p(!e)}})]}),(0,z.jsx)("p",{className:"inter-base-regular text-grey-50",children:a("create-fulfillment-when-toggled-notification-emails-will-be-sent","When toggled, notification emails will be sent.")})]})]})]})})]})};var y4=function(e){var t=e.instance,r=t.getRowModel,n=t.getHeaderGroups;return(0,z.jsxs)(td,{children:[(0,z.jsx)(td.Head,{children:n().map(function(e){return(0,z.jsx)(td.HeadRow,{children:e.headers.map(function(e){return(0,z.jsx)(td.HeadCell,{className:"inter-small-semibold text-grey-50",style:{width:e.getSize(),maxWidth:e.getSize()},children:(0,us.flexRender)(e.column.columnDef.header,e.getContext())},e.id)})},e.id)})}),(0,z.jsx)(td.Body,{children:r().rows.map(function(e){return(0,z.jsx)(td.Row,{className:"last-of-type:border-b-0",children:e.getVisibleCells().map(function(e){return(0,z.jsx)(td.Cell,{style:{width:e.column.getSize(),maxWidth:e.column.getSize()},children:(0,us.flexRender)(e.column.columnDef.cell,e.getContext())},e.id)})},e.id)})})]})},y8=(0,us.createColumnHelper)(),y7=function(e){var t=e.form,r=e.orderCurrency,n=(0,ei.Bd)().t,i=t.control,a=t.setValue,o=t.getValues,l=t.path,s=(0,U.useCallback)(function(e,t){var r=l("items.".concat(e,".quantity")),n=o(r);a(r,n+t)},[o,l,a]),c=(0,eR.FH)({control:i,name:l("items")}),u=(0,U.useCallback)(function(e){c.forEach(function(t,r){a(l("items.".concat(r,".receive")),e.target.checked,{shouldDirty:!0})})},[c,l,a]);return(0,U.useMemo)(function(){return[y8.display({id:"selection",maxSize:36,header:function(e){var t=e.table;return(0,z.jsx)("div",{className:"pl-base pr-large",children:(0,z.jsx)(tt,{checked:t.getIsAllRowsSelected(),onChange:function(e){t.toggleAllRowsSelected(e.target.checked),u(e)},indeterminate:t.getIsSomeRowsSelected()})})},cell:function(e){var t=e.row,r=t.index,n=t.getToggleSelectedHandler;return(0,z.jsx)(eR.xI,{control:i,name:l("items.".concat(r,".receive")),render:function(e){var t=e.field,r=t.value,i=t.onChange;return(0,z.jsx)("div",{className:"pl-base pr-large",children:(0,z.jsx)(tt,{checked:r,onChange:function(e){n()(e),i(e)}})})}})}}),y8.accessor("variant_title",{header:n("items-to-receive-form-product","Product"),cell:function(e){var t=e.getValue,r=e.row.original,n=t();return(0,z.jsxs)("div",{className:"gap-x-base py-xsmall flex items-center",children:[(0,z.jsx)("div",{children:(0,z.jsx)(pg,{src:r.thumbnail})}),(0,z.jsxs)("div",{className:"inter-small-regular",children:[(0,z.jsxs)("div",{className:"gap-x-2xsmall flex items-center",children:[(0,z.jsx)("p",{children:r.product_title}),n&&(0,z.jsxs)("p",{className:"text-grey-50",children:["(",n,")"]})]}),r.sku&&(0,z.jsx)("span",{children:(0,z.jsx)(hf,{value:r.sku,displayValue:r.sku,iconSize:14})})]})]})}}),y8.display({id:"quantity",header:function(){return(0,z.jsx)("p",{className:"text-right",children:n("items-to-receive-form-quantity","Quantity")})},maxSize:50,cell:function(e){var t=e.row,r=t.index,n=t.original.original_quantity;return(0,U.createElement)(hp,{index:r,maxQuantity:n,control:i,path:l,updateQuantity:s,isSelectable:!0,isSelectedPath:l("items.".concat(r,".receive")),name:l("items.".concat(r,".quantity")),key:r})}}),y8.accessor("refundable",{maxSize:80,header:function(){return(0,z.jsx)("p",{className:"text-right",children:n("items-to-receive-form-refundable","Refundable")})},cell:function(e){var t=e.getValue;return(0,z.jsx)("p",{className:"text-right",children:(0,rg.Q2)({amount:t()||0,currency:r})})}}),y8.display({id:"order_currency",maxSize:20,cell:function(){return(0,z.jsx)("p",{className:"pl-base text-grey-50",children:r.toUpperCase()})}})]},[i,r,l,u,s])},y9=function(e){var t=e.form,r=e.order,n=t.control,i=t.path,a=t.formState.errors,o=(0,ei.Bd)().t,l=(0,eR.jz)({control:n,name:i("items"),keyName:"fieldId"}).fields,s=y7({form:t,orderCurrency:r.currency_code}),c=(0,us.useReactTable)({data:l,columns:s,getCoreRowModel:(0,us.getCoreRowModel)()});return(0,z.jsxs)("div",{className:"gap-y-xsmall flex flex-col",children:[(0,z.jsx)("h2",{className:"inter-base-semibold",children:o("items-to-receive-form-items-to-receive","Items to receive")}),(0,z.jsx)(y4,{instance:c}),(0,z.jsx)(rH.A,{errors:a,name:i("items")})]})},be=function(e){var t=e.form,r=e.order,n=e.returnRequest,i=t.control,a=(0,ei.Bd)().t,o=(0,eR.FH)({control:i,name:"receive_items.items"}),l=(0,U.useMemo)(function(){return o.filter(function(e){return e.receive})},[o]),s=(0,U.useMemo)(function(){return o.filter(function(e){return e.receive}).reduce(function(e,t){return e+t.price*t.quantity},0)},[o]),c=(0,U.useMemo)(function(){if(!n.shipping_method||n.claim_order_id)return null;var e=n.shipping_method.tax_lines.reduce(function(e,t){return e+t.rate/100},0);return{priceInclTax:Math.round(n.shipping_method.price*(1+e)),title:n.shipping_method.shipping_option.name}},[n]);return 0===l.length?null:(0,z.jsxs)("div",{className:"inter-base-regular",children:[(0,z.jsx)("div",{className:"gap-y-base border-grey-20 py-large flex flex-col border-y",children:l.length>0&&(0,z.jsxs)("div",{children:[(0,z.jsx)("p",{className:"inter-base-semibold mb-small",children:a("rma-summaries-receiving","Receiving")}),(0,z.jsxs)("div",{className:"gap-y-xsmall flex flex-col",children:[l.map(function(e,t){return(0,z.jsx)(hT,{currencyCode:r.currency_code,productTitle:e.product_title,quantity:e.quantity,price:e.price,total:e.price*e.quantity,variantTitle:e.variant_title,thumbnail:e.thumbnail},t)}),c&&(0,z.jsx)(hM,{currencyCode:r.currency_code,title:c.title,price:c.priceInclTax,type:"return"})]})]})}),(0,z.jsx)("div",{className:"gap-y-xsmall pt-large flex flex-col",children:(0,z.jsxs)("div",{className:"inter-large-semibold flex items-center justify-between","data-testid":"refund-amount-container",children:[(0,z.jsx)("p",{className:"inter-base-semibold",children:a("rma-summaries-refund-amount","Refund amount")}),(0,z.jsx)(hD,{form:(0,eL.m)(t,"refund_amount"),order:r,initialValue:s-((null==c?void 0:c.priceInclTax)||0)})]})})]})};function bt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function br(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function bn(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function o(e){br(a,n,i,o,l,"next",e)}function l(e){br(a,n,i,o,l,"throw",e)}o(void 0)})}}function bi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return bt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bt(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ba(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}var bo=function(e){var t=e.order,r=e.returnRequest,n=e.onClose,i=(0,J.useMedusa)().client,a=(0,ei.Bd)().t,o=(0,rz.u)().isFeatureEnabled,l=o("inventoryService")&&o("stockLocationService"),s=(0,J.useAdminReceiveReturn)(r.id),c=s.mutate,u=s.isLoading,d=yT().orderRelations,f=(0,J.useAdminOrder)(t.id,{expand:d}).refetch,p=(0,eR.mN)({defaultValues:hQ(t,r),reValidateMode:"onBlur"}),m=p.handleSubmit,h=p.reset,y=p.setError,b=p.formState.isDirty,v=(0,J.useAdminStockLocations)({},{enabled:l}),g=v.stock_locations,x=v.refetch,j=v.isLoading;U.useEffect(function(){l&&x()},[l,x]);var w=bi(U.useState(null),2),O=w[0],S=w[1],P=U.useMemo(function(){return new Map(t.items.map(function(e){return[e.id,e]}))},[t.items]),C=bi((0,U.useState)(new Map),2),A=C[0],N=C[1];U.useEffect(function(){var e;(e=bn(function(){var e;return ba(this,function(t){switch(t.label){case 0:var n;if(!(null===(e=r.items)||void 0===e?void 0:e.length)||!l)return[2,new Map];return[4,Promise.all(r.items.map((n=bn(function(e){var t;return ba(this,function(r){switch(r.label){case 0:if(!(null==(t=P.get(e.item_id))?void 0:t.variant_id))return[2,void 0];return[4,i.admin.variants.getInventory(t.variant_id)];case 1:return[2,r.sent()]}})}),function(e){return n.apply(this,arguments)})))];case 1:return[2,new Map(t.sent().filter(function(e){return!!e}).map(function(e){var t=e.variant;return[t.id,t.inventory[0].location_levels]}))]}})}),function(){return e.apply(this,arguments)})().then(function(e){N(e)})},[i.admin.variants,l,P,r.items]);var k=(0,eR.FH)({control:p.control,name:"receive_items"}).items,_=k.filter(function(e){return e.receive}).length,E=U.useMemo(function(){return!_||k.map(function(e){var t,r=P.get(e.item_id);return null==r||!r.variant_id||!e.receive||!!(null===(t=A.get(r.variant_id))||void 0===t?void 0:t.find(function(e){return e.location_id===(null==O?void 0:O.value)}))||null==O||!O.value}).every(Boolean)},[k,P,_,A,O]);(0,U.useEffect)(function(){if(l&&(null==g?void 0:g.length)){var e=g.find(function(e){return e.id===r.location_id});e&&S({value:e.id,label:e.name})}},[l,g,r.location_id]);var I=(0,U.useMemo)(function(){if(r.claim_order_id){var e=t.claims.find(function(e){return e.id===r.claim_order_id});return!!e&&"refunded"===e.payment_status}return!1},[t.claims,r.claim_order_id]),D=(0,U.useMemo)(function(){return I||!!r.swap_id},[I,r.swap_id]),T=(0,eC.A)();(0,U.useEffect)(function(){h(hQ(t,r))},[t,r,h]);var M=m(function(e){if(0===e.receive_items.items.filter(function(e){return e.receive}).length){y("receive_items.items",{type:"manual",message:a("receive-return-please-select-at-least-one-item-to-receive","Please select at least one item to receive")});return}var r,i=void 0;(null===(r=e.refund_amount)||void 0===r?void 0:r.amount)===void 0||D||(i=e.refund_amount.amount),I&&(i=0);var o={items:e.receive_items.items.map(function(e){return{item_id:e.item_id,quantity:e.quantity}}),refund:i};O&&l&&(o.location_id=O.value),c(o,{onSuccess:function(){T(a("receive-return-successfully-received-return","Successfully received return"),a("receive-return-received-return-for-order","Received return for order #{{display_id}}",{display_id:t.display_id}),"success"),f(),n()},onError:function(e){T(a("receive-return-failed-to-receive-return","Failed to receive return"),(0,eA.u)(e),"error")}})});return(0,z.jsx)(eN.A,{handleClose:n,open:!0,children:(0,z.jsxs)(eN.A.Body,{children:[(0,z.jsx)(eN.A.Header,{handleClose:n,children:(0,z.jsx)("h1",{className:"inter-xlarge-semibold",children:a("receive-return-receive-return","Receive Return")})}),(0,z.jsxs)("form",{onSubmit:M,children:[(0,z.jsx)(eN.A.Content,{children:(0,z.jsxs)("div",{className:"gap-y-large flex flex-col",children:[(0,z.jsx)(y9,{order:t,form:(0,eL.m)(p,"receive_items")}),l&&(0,z.jsxs)("div",{className:"mb-8",children:[(0,z.jsx)("h3",{className:"inter-base-semibold ",children:a("receive-return-location","Location")}),(0,z.jsx)("p",{className:"inter-base-regular text-grey-50",children:a("receive-return-choose-location","Choose which location you want to return the items to.")}),j?(0,z.jsx)(X.A,{}):(0,z.jsx)(no,{className:"mt-2",placeholder:a("receive-return-select-location-to-return-to","Select Location to Return to"),value:O,isMulti:!1,name:"location_id",errors:E?{}:{location_id:{message:a("receive-return-no-inventory-levels-exist-for-the-items-at-the-selected-location","No inventory levels exist for the items at the selected location")}},onChange:S,options:(null==g?void 0:g.map(function(e){return{label:e.name,value:e.id}}))||[]})]}),!D&&(0,z.jsx)(be,{form:p,order:t,returnRequest:r})]})}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"gap-x-xsmall flex w-full items-center justify-end",children:[(0,z.jsx)(W.A,{size:"small",variant:"secondary",children:a("receive-return-cancel","Cancel")}),(0,z.jsx)(W.A,{size:"small",variant:"primary",disabled:!b||u||!E,loading:u,children:a("receive-return-save-and-close","Save and close")})]})})]})]})})},bl=function(e){switch(e.paymentStatus){case"captured":return(0,z.jsx)(tv.A,{title:"Paid",variant:"success"});case"awaiting":return(0,z.jsx)(tv.A,{title:"Awaiting",variant:"default"});case"not_paid":return(0,z.jsx)(tv.A,{title:"Not paid",variant:"default"});case"canceled":return(0,z.jsx)(tv.A,{title:"Canceled",variant:"danger"});case"requires_action":return(0,z.jsx)(tv.A,{title:"Requires Action",variant:"danger"});default:return null}},bs=function(e){switch(e.fulfillmentStatus){case"shipped":return(0,z.jsx)(tv.A,{title:"Shipped",variant:"success"});case"fulfilled":return(0,z.jsx)(tv.A,{title:"Fulfilled",variant:"warning"});case"canceled":return(0,z.jsx)(tv.A,{title:"Canceled",variant:"danger"});case"partially_fulfilled":return(0,z.jsx)(tv.A,{title:"Partially fulfilled",variant:"warning"});case"not_fulfilled":return(0,z.jsx)(tv.A,{title:"Not fulfilled",variant:"default"});case"requires_action":return(0,z.jsx)(tv.A,{title:"Requires Action",variant:"danger"});default:return null}},bc=function(e){switch(e.returnStatus){case"received":return(0,z.jsx)(tv.A,{title:"Received",variant:"success"});case"requested":return(0,z.jsx)(tv.A,{title:"Requested",variant:"default"});case"canceled":return(0,z.jsx)(tv.A,{title:"Canceled",variant:"danger"});case"requires_action":return(0,z.jsx)(tv.A,{title:"Requires Action",variant:"danger"});default:return null}},bu=function(e){switch(e.refundStatus){case"na":return(0,z.jsx)(tv.A,{title:"N/A",variant:"default"});case"not_refunded":return(0,z.jsx)(tv.A,{title:"Refunded",variant:"default"});case"refunded":return(0,z.jsx)(tv.A,{title:"Refunded",variant:"success"});case"canceled":return(0,z.jsx)(tv.A,{title:"Canceled",variant:"danger"});default:return null}};let bd=function(e){var t=e.actions,r=(0,z.jsx)("button",{className:"btn-ghost px-2xsmall rounded-base focus:ring-violet-40 flex items-center justify-center py-0 focus:outline-none focus:ring-2",children:(0,z.jsx)(ef,{size:20})});return(0,z.jsx)(em,{customTrigger:r,forceDropdown:!0,actions:t})},bf=function(e){var t,r,n=e.size,i=void 0===n?"20":n,a=e.color,o=void 0===a?"currentColor":a,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["size","color"]);return(0,z.jsxs)("svg",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({width:i,height:i,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l),r=r={children:[(0,z.jsx)("path",{d:"M11.2971 16.7566C11.1653 16.9839 10.976 17.1726 10.7483 17.3037C10.5206 17.4349 10.2624 17.5039 9.99964 17.5039C9.73686 17.5039 9.47869 17.4349 9.25097 17.3037C9.02326 17.1726 8.83401 16.9839 8.70215 16.7566",stroke:o,strokeWidth:"1.49999",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M14.9723 10.7567C14.6386 9.53526 14.4795 8.27274 14.4998 7.00671",stroke:o,strokeWidth:"1.49999",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M5.69498 5.7016C5.56468 6.1243 5.49894 6.56426 5.49998 7.00659C5.49998 12.2566 3.25 13.7565 3.25 13.7565H13.7499",stroke:o,strokeWidth:"1.49999",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M14.4994 7.00665C14.5006 6.19145 14.2804 5.39124 13.8622 4.69148C13.444 3.99173 12.8435 3.41871 12.125 3.03365C11.4065 2.64859 10.5969 2.46595 9.78261 2.50523C8.96836 2.54451 8.18007 2.80424 7.50195 3.25667",stroke:o,strokeWidth:"1.49999",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M2.5 2.50665L17.4999 17.5065",stroke:o,strokeWidth:"1.49999",strokeLinecap:"round",strokeLinejoin:"round"})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))};function bp(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}!function(e){e.GREEN="text-emerald-40",e.RED="text-rose-50",e.ORANGE="text-orange-40",e.VIOLET="text-violet-60",e.DEFAULT="text-grey-50"}(b||(b={}));var bm=function(e){e.size;var t=e.bg;return(0,z.jsx)("div",{className:"aspect-square h-[2px] w-[2px] ".concat(void 0===t?"bg-grey-50":t," rounded-full")})};let bh=function(e){var t,r=e.icon,n=e.iconColor,i=e.title,a=e.topNode,o=e.midNode,l=e.time,s=e.noNotification,c=e.isFirst,u=e.expandable,d=void 0!==u&&u,f=e.children,p=e.detail,m=function(e){if(Array.isArray(e))return e}(t=(0,U.useState)(!d))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(t,2)||function(e,t){if(e){if("string"==typeof e)return bp(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bp(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),h=m[0],y=m[1];return(0,z.jsxs)("div",{className:"mb-base",children:[(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,z.jsxs)("div",{className:"gap-x-xsmall flex items-center",children:[(0,z.jsx)("div",{className:(0,en.default)("h-5 w-5",void 0===n?"text-grey-50":n),children:r}),(0,z.jsx)("div",{className:"inter-small-semibold",children:i}),(0,z.jsx)("div",{className:"inter-small-regular text-grey-50"})]}),(0,z.jsxs)("div",{className:"gap-x-xsmall flex items-center",children:[void 0!==s&&s&&(0,z.jsx)(r9.A,{content:"Notifications related to this event are disabled",children:(0,z.jsx)(bf,{size:20,className:"text-grey-40"})}),a,d&&(0,z.jsx)("button",{onClick:function(){y(function(e){return!e})},children:h?(0,z.jsx)(iU.A,{size:16}):(0,z.jsx)(ej.A,{size:16})})]})]}),(0,z.jsxs)("div",{className:"gap-x-xsmall flex",children:[(0,z.jsx)("div",{className:"pt-base flex w-5 justify-center",children:!(void 0!==c&&c)&&(0,z.jsx)("div",{className:"min-h-[24px] w-px"})}),(0,z.jsxs)("div",{className:"inter-small-regular mt-2xsmall w-full",children:[(0,z.jsxs)("div",{className:"flex items-center",children:[(0,z.jsx)(r9.A,{content:new Date(l).toUTCString(),children:(0,z.jsx)("div",{className:"inter-small-regular text-grey-50",children:re()(l).fromNow()})}),o&&(0,z.jsx)("span",{className:"mx-2xsmall ",children:(0,z.jsx)(bm,{})}),o]}),f&&h&&(0,z.jsx)("div",{className:"mt-small pb-base w-full",children:f}),(0,z.jsx)("div",{className:"text-grey-50",children:p})]})]})]})},by=function(e){var t=e.item,r=e.detail;return t?(0,z.jsxs)("div",{className:"mb-base flex flex-col last:mb-0 ",children:[(0,z.jsxs)("div",{className:"gap-x-small flex items-center",children:[t.thumbnail&&(0,z.jsx)("div",{className:"rounded-base h-10 w-[30px] overflow-hidden",children:(0,z.jsx)("img",{src:t.thumbnail,alt:"Thumbnail for ".concat(t.title),className:"h-full w-full object-cover"})}),(0,z.jsxs)("div",{className:"inter-small-regular flex w-full flex-col",children:[(0,z.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,z.jsx)("p",{children:t.title}),(0,z.jsx)("span",{className:"inter-small-semibold text-violet-60",children:"x".concat(t.quantity)})]}),(0,z.jsx)("p",{className:"text-grey-50",children:t.variant.title})]})]}),r&&(0,z.jsx)("div",{className:"text-grey-50",children:r})]}):null},bb=function(e){var t,r,n,i,a,o,l,s,c,u,d,f,p=e.event,m=(0,n5.A)(),h=m.state,y=m.open,v=m.close,g=(0,n5.A)(),x=g.state,j=g.open,w=g.close,O=yT().orderRelations,S=(0,J.useAdminOrder)(p.orderId,{expand:O}).refetch,P=(0,eC.A)(),C=!p.canceledAt&&((null===(t=p.claim)||void 0===t?void 0:t.return_order)||(null===(n=p.claim)||void 0===n?void 0:null===(r=n.additional_items)||void 0===r?void 0:r.length)>0),A=(0,J.useAdminCancelReturn)(null===(a=p.claim)||void 0===a?void 0:null===(i=a.return_order)||void 0===i?void 0:i.id).mutate,N=(0,J.useAdminCancelClaim)(null===(o=p.order)||void 0===o?void 0:o.id).mutate,k=bj(p,function(){N(p.claim.id,{onSuccess:function(){P("Claim canceled","The claim has been canceled","success")},onError:function(e){P("Failed to cancel claim",(0,eA.u)(e),"error")}})},function(){A(void 0,{onSuccess:function(){P("Return canceled","The return has been canceled","success"),S()},onError:function(e){P("Failed to cancel return",(0,eA.u)(e),"error")}})}),_={icon:p.canceledAt?(0,z.jsx)(rI,{size:20}):(0,z.jsx)(yU.A,{size:20}),iconColor:p.canceledAt?b.DEFAULT:b.ORANGE,title:p.canceledAt?"Claim Canceled":"Claim Created",time:p.canceledAt?p.canceledAt:p.time,topNode:k,children:[(0,z.jsxs)(U.Fragment,{children:[(0,z.jsxs)("div",{className:"gap-y-base flex flex-col",children:[(0,z.jsx)(bv,{event:p}),bg(p),(null===(s=p.claim)||void 0===s?void 0:null===(l=s.additional_items)||void 0===l?void 0:l.length)>0&&bx(p),C&&(0,z.jsxs)("div",{className:"gap-x-xsmall flex items-center",children:[(null===(c=p.claim.return_order)||void 0===c?void 0:c.status)==="requested"&&(0,z.jsx)(W.A,{variant:"secondary",size:"small",onClick:y,children:"Receive Return"}),(null===(d=p.claim)||void 0===d?void 0:null===(u=d.additional_items)||void 0===u?void 0:u.length)>0&&(null===(f=p.claim)||void 0===f?void 0:f.fulfillment_status)==="not_fulfilled"&&(0,z.jsx)(W.A,{variant:"secondary",size:"small",onClick:j,children:"Fulfill Replacement"})]})]}),h&&(0,z.jsx)(bo,{onClose:v,order:p.order,returnRequest:p.claim.return_order}),x&&(0,z.jsx)(y6,{handleCancel:w,orderToFulfill:p.claim,orderId:p.claim.order_id})]},p.id)]};return(0,z.jsx)(bh,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},_))};var bv=function(e){var t,r,n,i,a,o,l,s,c,u,d=e.event,f=(0,z.jsx)("div",{className:"bg-grey-20 h-11 w-px"}),p=!!(null===(t=d.claim)||void 0===t?void 0:t.fulfillment_status)&&(null===(n=d.claim)||void 0===n?void 0:null===(r=n.additional_items)||void 0===r?void 0:r.length)>0,m=!!(null===(i=d.claim)||void 0===i?void 0:i.return_order),h=null===(a=d.claim)||void 0===a?void 0:a.payment_status;return(null===(o=d.claim)||void 0===o?void 0:o.type)==="replace"&&(h=(null===(c=d.claim)||void 0===c?void 0:null===(s=c.return_order)||void 0===s?void 0:s.status)==="received"?"refunded":null===(u=d.claim)||void 0===u?void 0:u.payment_status),null!==d.canceledAt&&(h="canceled"),(0,z.jsxs)("div",{className:"inter-small-regular gap-x-base flex items-center",children:[(0,z.jsxs)("div",{className:"gap-y-2xsmall flex flex-col",children:[(0,z.jsx)("span",{className:"text-grey-50",children:"Refund:"}),(0,z.jsx)(bu,{refundStatus:h})]}),m&&(0,z.jsxs)(z.Fragment,{children:[f,(0,z.jsxs)("div",{className:"gap-y-2xsmall flex flex-col",children:[(0,z.jsx)("span",{className:"text-grey-50",children:"Return:"}),(0,z.jsx)(bc,{returnStatus:d.returnStatus})]})]}),p&&(0,z.jsxs)(z.Fragment,{children:[f,(0,z.jsxs)("div",{className:"gap-y-2xsmall flex flex-col",children:[(0,z.jsx)("span",{className:"text-grey-50",children:"Fulfillment:"}),(0,z.jsx)(bs,{fulfillmentStatus:null===(l=d.claim)||void 0===l?void 0:l.fulfillment_status})]})]})]})},bg=function(e){return(0,z.jsxs)("div",{className:"gap-y-small flex flex-col",children:[(0,z.jsx)("span",{className:"inter-small-regular text-grey-50",children:"Claim Items"}),(0,z.jsx)("div",{children:e.claimItems.map(function(e,t){return(0,z.jsx)(by,{item:e},t)})})]})},bx=function(e){return(0,z.jsxs)("div",{className:"gap-y-small flex flex-col",children:[(0,z.jsx)("span",{className:"inter-small-regular text-grey-50",children:"Replacement Items"}),(0,z.jsx)("div",{children:e.newItems.map(function(e,t){return(0,z.jsx)(by,{item:e},t)})})]})},bj=function(e,t,r){var n,i=[];return e.canceledAt||e.isCanceled||(e.claim.return_order&&(null===(n=e.claim.return_order)||void 0===n?void 0:n.status)==="requested"&&i.push({icon:(0,z.jsx)(eu,{size:20}),label:"Cancel return",variant:"danger",onClick:r}),"refunded"===e.refundStatus||e.isCanceled||i.push({icon:(0,z.jsx)(eu,{size:20}),label:"Cancel claim",variant:"danger",onClick:t})),i.length?(0,z.jsx)(bd,{actions:i}):null};function bw(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function bO(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function bS(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function o(e){bO(a,n,i,o,l,"next",e)}function l(e){bO(a,n,i,o,l,"throw",e)}o(void 0)})}}function bP(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function bC(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return bw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bw(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bA(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}var bN=function(e){var t=e.event,r=(0,z.jsx)("div",{className:"bg-grey-20 h-11 w-px"});return(0,z.jsxs)("div",{className:"inter-small-regular gap-x-base flex items-center",children:[(0,z.jsxs)("div",{className:"gap-y-2xsmall flex flex-col",children:[(0,z.jsx)("span",{className:"text-grey-50",children:"Payment:"}),(0,z.jsx)(bl,{paymentStatus:t.paymentStatus})]}),r,(0,z.jsxs)("div",{className:"gap-y-2xsmall flex flex-col",children:[(0,z.jsx)("span",{className:"text-grey-50",children:"Return:"}),(0,z.jsx)(bc,{returnStatus:t.returnStatus})]}),r,(0,z.jsxs)("div",{className:"gap-y-2xsmall flex flex-col",children:[(0,z.jsx)("span",{className:"text-grey-50",children:"Fulfillment:"}),(0,z.jsx)(bs,{fulfillmentStatus:t.fulfillmentStatus})]})]})};let bk=function(e){var t,r,n,i=e.event,a=e.refetch,o=bC((0,U.useState)(!1),2),l=o[0],s=o[1],c=bC((0,U.useState)(!1),2),u=c[0],d=c[1],f=bC((0,U.useState)(!1),2),p=f[0],m=f[1],h=bC((0,U.useState)(!1),2),y=h[0],v=h[1],g=(0,J.useAdminCancelSwap)(i.orderId),x=(0,J.useAdminCancelReturn)(i.returnId),j=bC((0,U.useState)(void 0),2),w=j[0],O=j[1],S=bC((0,U.useState)(void 0),2),P=S[0],C=S[1],A=bC((0,U.useState)(!0),2),N=A[0],k=A[1],_=(0,J.useAdminStore)().store,E=yT().orderRelations,I=(0,J.useAdminOrder)(i.orderId,{expand:E}).order,D=(0,eC.A)();(0,U.useEffect)(function(){var e,t;if(_){if("not_paid"!==i.paymentStatus){k(!1);return}(null===(e=_.swap_link_template)||void 0===e?void 0:e.indexOf("{cart_id}"))===-1&&C("Store payment link does not have the default format, as it does not contain '{cart_id}'. Either update the payment link to include '{cart_id}' or update this method to reflect the format of your payment link."),_.swap_link_template||C("No payment link has been set for this store. Please update store settings."),i.exchangeCartId&&O(null===(t=_.swap_link_template)||void 0===t?void 0:t.replace(/\{cart_id\}/,i.exchangeCartId))}},[null==_?void 0:_.swap_link_template,i.exchangeCartId,i.paymentStatus,_]);var T=(t=i.exchangeCartId,N?(0,z.jsxs)("div",{className:"inter-small-regular gap-y-xsmall text-grey-50 flex flex-col",children:[(0,z.jsxs)("div",{className:"gap-x-xsmall flex items-center",children:[P&&(0,z.jsx)(e0.A,{content:P}),(0,z.jsx)("span",{children:"Payment link:"})]}),w&&(0,z.jsx)(hf,{value:w,displayValue:t})]}):null),M=(r=bS(function(){return bA(this,function(e){switch(e.label){case 0:return[4,g.mutateAsync(i.id)];case 1:return e.sent(),a(),[2]}})}),function(){return r.apply(this,arguments)}),R=(n=bS(function(){return bA(this,function(e){switch(e.label){case 0:return[4,x.mutateAsync()];case 1:return e.sent(),a(),[2]}})}),function(){return n.apply(this,arguments)}),L=(0,z.jsxs)("div",{className:"gap-y-small flex flex-col",children:[(0,z.jsx)("span",{className:"inter-small-regular text-grey-50",children:"Return Items"}),(0,z.jsx)("div",{children:i.returnItems.filter(function(e){return!!e}).map(function(e){var t,r;return(0,z.jsx)(by,{item:(t=bP({},e),r=r={quantity:e.requestedQuantity},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t)},e.id)})})]}),F=(0,z.jsxs)("div",{className:"gap-y-small flex flex-col",children:[(0,z.jsx)("span",{className:"inter-small-regular text-grey-50",children:"New Items"}),(0,z.jsx)("div",{children:i.newItems.map(function(e,t){return(0,z.jsx)(by,{item:e},t)})})]}),B=[];"awaiting"===i.paymentStatus&&B.push({label:"Capture payment",icon:(0,z.jsx)(c5,{size:20}),onClick:function(){tF.orders.processSwapPayment(i.orderId,i.id).then(function(e){D("Success","Payment processed successfully","success"),a()}).catch(function(e){D("Error",(0,eA.u)(e),"error")})}}),"requested"===i.returnStatus&&B.push({label:"Cancel return",icon:(0,z.jsx)(hn,{size:20}),onClick:function(){return d(!u)}}),i.isCanceled||i.canceledAt||"fulfilled"===i.fulfillmentStatus||"shipped"===i.fulfillmentStatus||B.push({label:"Cancel exchange",icon:(0,z.jsx)(rI,{size:20}),onClick:function(){return s(!l)},variant:"danger"});var q={title:i.canceledAt?"Exchange Cancelled":"Exchange Requested",icon:i.canceledAt?(0,z.jsx)(rI,{size:20}):(0,z.jsx)(Y.A,{size:20}),expandable:!!i.canceledAt,iconColor:i.canceledAt?b.DEFAULT:b.ORANGE,time:i.time,noNotification:i.noNotification,topNode:0===B.length?null:(0,z.jsx)(bd,{actions:B}),children:[(0,z.jsxs)("div",{className:"gap-y-base flex flex-col",children:[i.canceledAt&&(0,z.jsxs)("div",{children:[(0,z.jsx)("span",{className:"inter-small-semibold mr-2",children:"Requested on:"}),(0,z.jsx)("span",{className:"text-grey-50",children:new Date(i.time).toUTCString()})]}),!i.canceledAt&&(0,z.jsx)(bN,{event:i}),!i.canceledAt&&T,L,F,(0,z.jsxs)("div",{className:"gap-x-xsmall flex items-center",children:["requested"===i.returnStatus&&(0,z.jsx)(W.A,{variant:"secondary",size:"small",onClick:function(){return m(!0)},children:"Receive Return"}),"not_fulfilled"===i.fulfillmentStatus&&(0,z.jsx)(W.A,{variant:"secondary",size:"small",onClick:function(){return v(!0)},children:"Fulfill Exchange"})]})]},i.id)]};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(bh,bP({},q)),l&&(0,z.jsx)(e_,{handleClose:function(){return s(!l)},onDelete:M,confirmText:"Yes, cancel",heading:"Cancel exchange",text:"Are you sure you want to cancel this exchange?",successText:"Exchange cancelled"}),u&&(0,z.jsx)(e_,{handleClose:function(){return d(!u)},onDelete:R,confirmText:"Yes, cancel",heading:"Cancel return",text:"Are you sure you want to cancel this return?",successText:"Return cancelled"}),p&&I&&(0,z.jsx)(bo,{order:I,returnRequest:i.raw.return_order,onClose:function(){return m(!1)}}),y&&(0,z.jsx)(y6,{orderId:i.orderId,orderToFulfill:i.raw,handleCancel:function(){return v(!1)}})]})},b_=function(e){var t=e.event,r="claim"===t.sourceType?"Replacement Items Fulfilled":"exchange"===t.sourceType?"Exchange Items Fulfilled":"Items Fulfilled",n=t.locationName?"Shipping from ".concat(t.locationName):void 0,i={icon:(0,z.jsx)(rD,{size:20}),time:t.time,title:r,children:t.items.map(function(e,t){return(0,z.jsx)(by,{item:e},t)}),noNotification:t.noNotification,isFirst:t.first,detail:n};return(0,z.jsx)(bh,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},i))},bE=function(e){var t=e.event,r="claim"===t.sourceType?"Replacement Items Shipped":"exchange"===t.sourceType?"Exchange Items Shipped":"Items Shipped",n=t.locationName?"Shipped from ".concat(t.locationName):void 0,i={icon:(0,z.jsx)(hn,{size:20}),time:t.time,title:r,children:t.items.map(function(e,t){return(0,z.jsx)(by,{item:e},t)}),noNotification:t.noNotification,isFirst:t.first,detail:n};return(0,z.jsx)(bh,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},i))};var bI=function(e){var t=(0,J.useAdminGetSession)().user;return(0,U.useMemo)(function(){return(null==t?void 0:t.id)===e},[t,e])};function bD(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function bT(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}let bM=function(e){var t,r,n=e.event,i=function(e){if(Array.isArray(e))return e}(t=(0,U.useState)(!1))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(t,2)||function(e,t){if(e){if("string"==typeof e)return bD(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bD(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),a=i[0],o=i[1],l=(0,J.useAdminUser)(n.authorId),s=l.user,c=l.isLoading,u=(0,J.useAdminDeleteNote)(n.id),d=bI(null==s?void 0:s.id);if(c||!s)return null;var f=s.first_name&&s.last_name?"".concat(s.first_name," ").concat(s.last_name):s.email;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(bh,{title:f,icon:(0,z.jsx)(rr.A,{user:s}),time:n.time,topNode:(0,z.jsx)(bd,{actions:[{label:"Delete",icon:(0,z.jsx)(eu,{size:20}),onClick:function(){return o(!a)},variant:"danger"}]}),isFirst:n.first,children:(0,z.jsx)("div",{className:(0,en.default)("px-base py-base rounded-2xl",{"bg-grey-5":!d,"bg-violet-5 text-violet-90":d}),children:n.value})}),a&&(0,z.jsx)(e_,{handleClose:function(){return o(!a)},onDelete:(r=function(){return function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,function(e){return[2,u.mutate(void 0)]})},function(){var e=this,t=arguments;return new Promise(function(n,i){var a=r.apply(e,t);function o(e){bT(a,n,i,o,l,"next",e)}function l(e){bT(a,n,i,o,l,"throw",e)}o(void 0)})}),confirmText:"Yes, delete",heading:"Delete note",successText:"Deleted note"})]})},bR=function(e){var t=e.notificationId,r=e.email,n=e.handleCancel,i=(0,J.useAdminResendNotification)(t),a=i.mutate,o=i.isLoading,l=(0,eR.mN)({defaultValues:{to:r}}),s=l.register,c=l.handleSubmit,u=(0,eC.A)();return(0,z.jsx)(eN.A,{handleClose:n,children:(0,z.jsx)("form",{onSubmit:c(function(e){a({to:e.to.trim()},{onSuccess:function(){u("Success","Notification re-send to ".concat(e.to),"success"),n()},onError:function(e){return u("Error",(0,eA.u)(e),"error")}})}),children:(0,z.jsxs)(eN.A.Body,{children:[(0,z.jsx)(eN.A.Header,{handleClose:n,children:(0,z.jsx)("span",{className:"inter-xlarge-semibold",children:"Resend notification"})}),(0,z.jsx)(eN.A.Content,{children:(0,z.jsx)("div",{className:"flex flex-col",children:(0,z.jsx)("div",{className:"flex flex-col space-y-2",children:(0,z.jsx)(e1.A,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({label:"Email",type:"text",placeholder:"Email"},s("to",{required:"Must be filled"})))})})}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsx)("div",{className:"flex h-8 w-full justify-end",children:(0,z.jsxs)("div",{className:"flex",children:[(0,z.jsx)(W.A,{variant:"ghost",className:"text-small mr-2 w-32 justify-center",size:"large",onClick:n,children:"Cancel"}),(0,z.jsx)(W.A,{size:"large",className:"text-small w-32 justify-center",variant:"primary",type:"submit",disabled:o,loading:o,children:"Send"})]})})})]})})})};function bL(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var bz={"order.items_returned":"Return Received Notice Sent","order.return_requested":"Return Request Confirmation Sent","order.placed":"Order Confirmation Sent","order.shipment_created":"Shipment Confirmation Sent"},bF=function(e){var t=e.email;return(0,z.jsxs)("div",{className:"flex items-center",children:[(0,z.jsx)("div",{className:"text-grey-40 mr-2xsmall",children:(0,z.jsx)(th,{size:16})}),(0,z.jsx)("span",{children:t})]})};let bB=function(e){var t,r=e.event,n=function(e){if(Array.isArray(e))return e}(t=(0,U.useState)(!1))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(t,2)||function(e,t){if(e){if("string"==typeof e)return bL(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bL(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),i=n[0],a=n[1],o=(0,z.jsx)(bd,{actions:[{label:"Re-Send Mail",icon:(0,z.jsx)(yG,{size:20}),onClick:function(){return a(!0)}}]});return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(bh,{icon:(0,z.jsx)(hr,{size:20}),title:bz[r.title]||r.title,time:r.time,topNode:o,midNode:(0,z.jsx)(bF,{email:r.to})}),i&&(0,z.jsx)(bR,{handleCancel:function(){return a(!1)},notificationId:r.id,email:r.to})]})},bq=function(e){var t=e.event,r={icon:(0,z.jsx)(rI,{size:20}),iconColor:b.RED,time:t.time,title:"Order Canceled"};return(0,z.jsx)(bh,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},r))};var bH=function(e){var t=e.user;if(!t)return null;var r=t.first_name,n=t.last_name,i=t.email,a=r||n?"".concat(r||""," ").concat(n||""):i;return(0,z.jsxs)("div",{className:"inter-small-regular text-grey-50 flex items-center",children:["By",(0,z.jsx)("span",{className:"w-base h-base mx-xsmall",children:(0,z.jsx)(rr.A,{user:t,font:"inter-xsmall-semibold"})}),a]})};let bU=function(e){var t=e.event,r=(0,J.useAdminUser)(t.edit.canceled_by).user;return(0,z.jsx)(bh,{title:"Order Edit canceled",icon:(0,z.jsx)(eH.A,{size:20}),time:t.time,isFirst:t.first,midNode:(0,z.jsx)(bH,{user:r})})},bV=function(e){var t,r,n=e.size,i=void 0===n?"20":n,a=e.color,o=void 0===a?"currentColor":a,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["size","color"]);return(0,z.jsxs)("svg",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({width:i,height:i,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l),r=r={children:[(0,z.jsx)("path",{d:"M3.02901 6.12695H2.25439",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M3.80363 3.8031H2.25439",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M13.8734 16.1969H3.02881",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M14.0861 3.8031L13.3224 6.34927C13.224 6.67693 12.9219 6.90157 12.5803 6.90157H10.1697C9.65067 6.90157 9.27886 6.40117 9.42758 5.90464L10.0581 3.8031",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M6.90088 10.7745H8.55081",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M14.2125 13.0985H6.01087C4.76529 13.0985 3.87216 11.8978 4.23003 10.7049L5.9032 5.1277C6.13946 4.34146 6.86295 3.8031 7.68405 3.8031H15.8865C17.1321 3.8031 18.0252 5.00376 17.6673 6.19667L15.9941 11.7739C15.7579 12.5601 15.0336 13.0985 14.2125 13.0985Z",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},bG=function(e){var t,r=e.event,n=!!(null===(t=r.edit.confirmed_by)||void 0===t?void 0:t.startsWith("usr")),i="Order Edit ".concat(n?"force confirmed":"confirmation accepted"),a=(0,J.useAdminUser)(r.edit.confirmed_by,{enabled:n&&!!r.edit.confirmed_by}).user,o=(0,J.useAdminCustomer)(r.edit.confirmed_by,{enabled:!n&&!!r.edit.confirmed_by}).customer;return(0,z.jsx)(bh,{title:i,time:r.time,isFirst:r.first,icon:(0,z.jsx)(bV,{size:20}),midNode:(0,z.jsx)(bH,{user:a||o})})};function bW(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}!function(e){e.ITEM_ADD="item_add",e.ITEM_REMOVE="item_remove",e.ITEM_UPDATE="item_update"}(v||(v={}));var bY=function(e){var t=e.orderEdit;if(!t)return(0,z.jsx)(z.Fragment,{});var r=t.changes.filter(function(e){return"item_add"===e.type||"item_update"===e.type&&e.line_item&&e.original_line_item&&e.original_line_item.quantity<e.line_item.quantity}),n=t.changes.filter(function(e){return"item_remove"===e.type||"item_update"===e.type&&e.line_item&&e.original_line_item&&e.original_line_item.quantity>e.line_item.quantity});return(0,z.jsxs)("div",{className:"gap-y-base flex flex-col",children:[r.length>0&&(0,z.jsxs)("div",{children:[(0,z.jsx)("span",{className:"inter-small-regular text-grey-50",children:"Added"}),r.map(function(e){return(0,z.jsx)(b$,{change:e},e.id)})]}),n.length>0&&(0,z.jsxs)("div",{children:[(0,z.jsx)("span",{className:"inter-small-regular text-grey-50",children:"Removed"}),n.map(function(e){return(0,z.jsx)(b$,{change:e},e.id)})]})]})},b$=function(e){var t,r,n,i,a,o,l,s=e.change,c="item_add"===s.type;a=Math.abs(a=c?s.line_item.quantity:(null===(o=s.original_line_item)||void 0===o?void 0:o.quantity)-(null===(l=s.line_item)||void 0===l?void 0:l.quantity));var u=c?s.line_item:s.original_line_item;return(0,z.jsxs)("div",{className:"gap-x-base mt-xsmall flex",children:[(0,z.jsx)("div",{children:(0,z.jsx)("div",{className:"rounded-rounded flex h-[40px] w-[30px] overflow-hidden",children:(null==u?void 0:u.thumbnail)?(0,z.jsx)("img",{src:u.thumbnail,className:"object-cover"}):(0,z.jsx)(nm,{})})}),(0,z.jsxs)("div",{className:"flex flex-col",children:[(0,z.jsxs)("span",{className:"inter-small-semibold text-grey-90",children:[a>1&&(0,z.jsxs)(z.Fragment,{children:[a,"x"]})," ",null==u?void 0:u.title," \xa0",(null==u?void 0:null===(t=u.variant)||void 0===t?void 0:t.sku)&&(0,z.jsx)(hf,{value:null==u?void 0:null===(r=u.variant)||void 0===r?void 0:r.sku,iconSize:14})]}),(0,z.jsx)("span",{className:"inter-small-regular text-grey-50 flex",children:null==u?void 0:null===(i=u.variant)||void 0===i?void 0:null===(n=i.options)||void 0===n?void 0:n.map(function(e){return e.value})})]})]})};let bQ=function(e){var t,r,n=e.event,i=(0,U.useContext)(m9),a=i.isModalVisible,o=i.showModal,l=i.setActiveOrderEdit,s=n.edit,c=s.requested_at&&s.requested_by?{type:"requested",user_id:s.requested_by}:{type:"created",user_id:s.created_by},u=c.type,d=c.user_id,f=(0,eC.A)(),p=(0,J.useAdminUser)(d).user,m=rL(),h=(0,J.useAdminDeleteOrderEdit)(s.id),y=(0,J.useAdminCancelOrderEdit)(s.id),b=(0,J.useAdminConfirmOrderEdit)(s.id),v=(t=function(){return function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,function(e){switch(e.label){case 0:return[4,m({heading:"Delete Confirm",text:"By force confirming you allow the order edit to be fulfilled. You will still have to reconcile payments manually after confirming.",confirmText:"Yes, Force Confirm",cancelText:"No, Cancel"})];case 1:return e.sent()&&b.mutate(void 0,{onSuccess:function(){f("Success","Successfully confirmed Order Edit","success")},onError:function(e){f("Error",(0,eA.u)(e),"error")}}),[2]}})},r=function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function o(e){bW(a,n,i,o,l,"next",e)}function l(e){bW(a,n,i,o,l,"throw",e)}o(void 0)})},function(){return r.apply(this,arguments)});return a&&(null==s?void 0:s.status)==="created"?null:(0,z.jsx)(z.Fragment,{children:(0,z.jsxs)(bh,{title:"Order Edit ".concat(u),icon:(0,z.jsx)(ec,{size:20}),time:n.time,isFirst:n.first,midNode:(0,z.jsx)(bH,{user:p}),children:[s.internal_note&&(0,z.jsx)("div",{className:"px-base py-small mt-base mb-large rounded-large bg-grey-10 inter-base-regular text-grey-90",children:s.internal_note}),(0,z.jsx)("div",{children:(0,z.jsx)(bY,{orderEdit:s})}),("created"===s.status||"requested"===s.status)&&(0,z.jsx)("div",{className:"space-y-xsmall mt-large",children:"created"===u?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(W.A,{className:"border-grey-20 w-full border",size:"small",variant:"ghost",onClick:function(){l(s.id),o()},children:"Continue order edit"}),(0,z.jsx)(dU,{onDelete:function(){h.mutate(void 0,{onSuccess:function(){f("Success","Successfully deleted Order Edit","success")},onError:function(e){f("Error",(0,eA.u)(e),"error")}})},className:"border-grey-20 w-full border",children:"Delete the order edit"})]}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(W.A,{className:"border-grey-20 w-full border",size:"small",variant:"ghost",onClick:function(){console.log("TODO")},children:"Copy Confirmation-Request Link"}),(0,z.jsx)(W.A,{className:"border-grey-20 w-full border",size:"small",variant:"ghost",onClick:v,children:"Force Confirm"}),(0,z.jsx)(dU,{onDelete:function(){y.mutate(void 0,{onSuccess:function(){f("Success","Successfully canceled Order Edit","success")},onError:function(e){f("Error",(0,eA.u)(e),"error")}})},className:"border-grey-20 w-full border",children:"Cancel Order Edit"})]})})]})})},bK=function(e){var t,r=e.event,n=(0,J.useAdminOrderEdit)(r.edit.id).order_edit,i=!!(null===(t=r.edit.declined_by)||void 0===t?void 0:t.startsWith("usr")),a=(0,J.useAdminUser)(r.edit.declined_by,{enabled:i&&!!r.edit.declined_by}).user,o=(0,J.useAdminCustomer)(r.edit.declined_by,{enabled:!i&&!!r.edit.declined_by}).customer,l=null==n?void 0:n.declined_reason;return(0,z.jsx)(bh,{title:"Order Edit declined",icon:(0,z.jsx)(eH.A,{size:20}),time:r.time,isFirst:r.first,midNode:(0,z.jsx)(bH,{user:o||a}),children:l&&(0,z.jsx)("div",{className:"px-base py-small mt-base rounded-large bg-grey-10 inter-base-regular text-grey-90",children:l})})},bZ=function(e){var t,r=e.event,n=(0,J.useAdminOrderEdits)({order_id:r.orderId}).order_edits,i=(0,J.useAdminOrder)(r.orderId).order,a=(null==n?void 0:null===(t=n.find(function(e){return"requested"===e.status}))||void 0===t?void 0:t.difference_due)||0;if(!i||!n)return null;var o=a?i.total-i.paid_total+a:i.refunded_total-i.paid_total;return o<=0?null:(0,z.jsxs)(bh,{title:"Customer payment required",icon:(0,z.jsx)(yU.A,{size:20}),iconColor:b.VIOLET,time:r.time,isFirst:r.first,midNode:(0,z.jsx)("span",{className:"inter-small-regular text-grey-50",children:(0,rg.Q2)({amount:o,currency:r.currency_code})}),children:[(0,z.jsx)(W.A,{size:"small",className:"border-grey-20 mb-xsmall w-full border",variant:"ghost",onClick:function(){console.log("TODO")},children:"Copy Payment Link"}),(0,z.jsx)(W.A,{size:"small",className:"border-grey-20 w-full border",variant:"ghost",onClick:function(){console.log("TODO")},children:"Mark as Paid"})]})};function bJ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var bX=[{label:"Discount",value:"discount"},{label:"Other",value:"other"}];let b0=function(e){var t,r,n,i=e.order,a=e.onDismiss,o=e.initialAmount,l=e.initialReason,s=(0,ei.Bd)().t,c=(0,eR.mN)({defaultValues:{amount:o,reason:bX["other"===l?1:0]}}),u=c.register,d=c.handleSubmit,f=c.control,p=function(e){if(Array.isArray(e))return e}(t=(0,U.useState)(i.no_notification))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(t,2)||function(e,t){if(e){if("string"==typeof e)return bJ(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bJ(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),m=p[0],h=p[1],y=(0,eC.A)(),b=(0,J.useAdminRefundPayment)(i.id),v=b.mutate,g=b.isLoading,x=(0,U.useMemo)(function(){return i.paid_total-i.refunded_total},[i]),j=function(e){return e<=x},w=i.payments.some(function(e){return"system"===e.provider_id});return(0,z.jsx)(eN.A,{handleClose:a,children:(0,z.jsx)("form",{onSubmit:d(function(e){v({amount:e.amount,reason:e.reason.value,no_notification:m,note:e.note},{onSuccess:function(){y(s("refund-success","Success"),s("refund-successfully-refunded-order","Successfully refunded order"),"success"),a()},onError:function(e){y(s("refund-error","Error"),(0,eA.u)(e),"error")}})}),children:(0,z.jsxs)(eN.A.Body,{children:[(0,z.jsx)(eN.A.Header,{handleClose:a,children:(0,z.jsx)("h2",{className:"inter-xlarge-semibold",children:s("refund-create-a-refund","Create a refund")})}),(0,z.jsxs)(eN.A.Content,{children:[w&&(0,z.jsxs)("div",{className:"inter-small-regular bg-orange-5 rounded-rounded mb-6 flex p-4 text-orange-50",children:[(0,z.jsx)("div",{className:"mr-3 h-full",children:(0,z.jsx)(yU.A,{size:20})}),(0,z.jsxs)("div",{className:"flex flex-col",children:[(0,z.jsx)("span",{className:"inter-small-semibold",children:s("refund-attention","Attention!")}),s("refund-system-payment-disclaimer","One or more of your payments is a system payment. Be aware, that captures and refunds are not handled by Medusa for such payments.")]})]}),(0,z.jsx)("span",{className:"inter-base-semibold",children:s("refund-details","Details")}),(0,z.jsxs)("div",{className:"gap-y-base mt-4 grid",children:[(0,z.jsx)(cW.Root,{size:"small",currentCurrency:i.currency_code,readOnly:!0,children:(0,z.jsx)(eR.xI,{name:"amount",control:f,rules:{required:n8.A.required("Amount"),min:n8.A.min("Amount",1),max:n8.A.maxInteger("Amount",i.currency_code)},render:function(e){var t=e.field,r=t.value,n=t.onChange,i=t.onBlur;return(0,z.jsx)(cW.Amount,{label:"Refund Amount",amount:r,onBlur:i,invalidMessage:s("refund-cannot-refund-more-than-the-orders-net-total","Cannot refund more than the order's net total."),onValidate:j,onChange:n})}})}),(0,z.jsx)(eR.xI,{name:"reason",control:f,defaultValue:{label:s("refund-discount","Discount"),value:"discount"},rules:{required:!0},render:function(e){var t=e.field,r=t.value,n=t.onChange;return(0,z.jsx)(cB,{label:s("refund-reason","Reason"),options:bX,value:r,onChange:n})}}),(0,z.jsx)(sw.A,(r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},u("note")),n=n={label:s("refund-note","Note"),placeholder:s("refund-discount-for-loyal-customer","Discount for loyal customer")},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))}),r))]})]}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"flex w-full  justify-between",children:[(0,z.jsxs)("div",{className:"flex h-full cursor-pointer items-center",onClick:function(){return h(!m)},children:[(0,z.jsx)("div",{className:"text-grey-0 border-grey-30 rounded-base flex h-5 w-5 justify-center border ".concat(!m&&"bg-violet-60"),children:(0,z.jsx)("span",{className:"self-center",children:!m&&(0,z.jsx)(e7,{size:16})})}),(0,z.jsx)("input",{id:"noNotification",className:"hidden",name:"noNotification",checked:!m,onChange:function(){return h(!m)},type:"checkbox"}),(0,z.jsxs)("span",{className:"text-grey-90 gap-x-xsmall ml-3 flex items-center",children:[s("refund-send-notifications","Send notifications"),(0,z.jsx)(e0.A,{content:"Notify customer of created return"})]})]}),(0,z.jsxs)("div",{className:"gap-x-xsmall flex",children:[(0,z.jsx)(W.A,{onClick:a,size:"small",className:"w-[112px]",variant:"ghost",children:s("refund-cancel","Cancel")}),(0,z.jsx)(W.A,{type:"submit",size:"small",className:"w-[112px]",variant:"primary",loading:g,disabled:g,children:s("refund-complete","Complete")})]})]})})]})})})};function b1(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}let b2=function(e){var t,r,n=e.event,i=(0,J.useAdminOrder)(n.orderId).order,a=(0,J.useAdminOrderEdits)({order_id:n.orderId}).order_edits,o=(null==a?void 0:null===(r=a.find(function(e){return"requested"===e.status}))||void 0===r?void 0:r.difference_due)||0,l=function(e){if(Array.isArray(e))return e}(t=(0,U.useState)(!1))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(t,2)||function(e,t){if(e){if("string"==typeof e)return b1(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b1(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),s=l[0],c=l[1];if(!i||!a)return null;var u=i.paid_total-i.refunded_total-i.total-o;return u<=0?null:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(bh,{title:"Refund required",icon:(0,z.jsx)(yU.A,{size:20}),iconColor:b.RED,time:n.time,isFirst:n.first,children:(0,z.jsxs)(W.A,{onClick:function(){return c(!0)},variant:"ghost",size:"small",className:"border-grey-20 mb-xsmall w-full border text-rose-50",children:["Refund",(0,rg.Q2)({amount:u,currency:n.currency_code})]})}),s&&(0,z.jsx)(b0,{order:i,initialAmount:u,initialReason:"other",onDismiss:function(){return c(!1)}})]})};function b3(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}let b5=function(e){var t,r,n=e.event,i=function(e){if(Array.isArray(e))return e}(t=(0,U.useState)(!1))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(t,2)||function(e,t){if(e){if("string"==typeof e)return b3(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b3(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),a=i[0],o=i[1],l=(0,J.useAdminNotifications)({resource_id:null===(r=n.edit)||void 0===r?void 0:r.id}).notifications,s=null==l?void 0:l.find(function(e){return"order-edit.requested"===e.event_name});return s?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(bh,{title:"Order Edit confirmation-request sent",icon:(0,z.jsx)(hr,{size:20}),time:n.time,isFirst:n.first,midNode:(0,z.jsx)("span",{className:"inter-small-regular text-grey-50",children:n.email}),children:(0,z.jsx)(W.A,{className:"border-grey-20 mb-5 w-full border",size:"small",variant:"ghost",onClick:function(){return o(!0)},children:"Resend Confirmation-Request"})}),a&&(0,z.jsx)(bR,{handleCancel:function(){return o(!1)},notificationId:s.id,email:s.to})]}):null};var b6=r(38648);let b4=function(e){var t=e.event,r={icon:(0,z.jsx)(b6.A,{size:20}),time:t.time,title:"Order Placed",midNode:(0,z.jsx)("div",{className:"inter-small-regular text-grey-50",children:(0,rg.Q2)({amount:t.amount,currency:t.currency_code})}),isFirst:t.first};return(0,z.jsx)(bh,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},r))},b8=function(e){var t,r,n=e.size,i=void 0===n?"24px":n,a=e.color,o=void 0===a?"currentColor":a,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["size","color"]);return(0,z.jsxs)("svg",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({width:i,height:i,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l),r=r={children:[(0,z.jsx)("path",{d:"M2.5 5.83398H17.5",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M7.97565 9.16602H5.83398",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M7.5 14.1667H5C3.61917 14.1667 2.5 13.0475 2.5 11.6667V5C2.5 3.61917 3.61917 2.5 5 2.5H15C16.3808 2.5 17.5 3.61917 17.5 5V8.33333",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M13.3249 14.166L11.6582 15.8327L13.3249 17.4993",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M14.9993 12.5H15.8327C16.7535 12.5 17.4993 13.2458 17.4993 14.1667C17.4993 15.0875 16.7535 15.8333 15.8327 15.8333H11.666",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},b7=function(e){var t=e.event,r={icon:(0,z.jsx)(b8,{size:20}),title:"Refund",time:t.time,midNode:(0,z.jsx)("span",{className:"inter-small-regular text-grey-50",children:(0,rg.Q2)({amount:t.amount,currency:t.currencyCode})}),children:(0,z.jsxs)("div",{className:"gap-y-xsmall flex w-full flex-col",children:[t.reason&&(0,z.jsx)("span",{className:"text-grey-50",children:"".concat(t.reason.slice(0,1).toUpperCase()).concat(t.reason.slice(1))}),t.note&&(0,z.jsxs)("div",{className:"bg-grey-5 px-base py-base rounded-2xl",children:["Note: ",t.note]})]})};return(0,z.jsx)(bh,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},r))};function b9(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ve(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function vt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}let vr=function(e){var t,r,n,i=e.event,a=e.refetch,o=function(e){if(Array.isArray(e))return e}(t=(0,U.useState)(!1))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(t,2)||function(e,t){if(e){if("string"==typeof e)return b9(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b9(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),l=o[0],s=o[1],c=(0,J.useAdminCancelReturn)(i.id),u=(0,n5.A)(),d=u.state,f=u.close,p=u.open,m=function(){c.mutate(void 0,{onSuccess:function(){a()}})},h=function(e,t,r){var n,i,a="Return",o=[];switch(e.status){case"requested":a="Return Requested",n=(0,z.jsx)(yU.A,{size:20,className:"text-orange-40"}),"requested"===e.currentStatus&&(i=e.currentStatus&&"requested"===e.currentStatus&&(0,z.jsx)(W.A,{variant:"secondary",size:"small",className:(0,en.default)("mt-large"),onClick:r,children:"Receive Return"}),o.push({icon:(0,z.jsx)(eu,{size:20}),label:"Cancel return",variant:"danger",onClick:t}));break;case"received":a="Return Received",n=(0,z.jsx)(b6.A,{size:20,className:"text-emerald-40"});break;case"canceled":a="Return Canceled",n=(0,z.jsx)(rI,{size:20,className:"text-grey-50"});break;case"requires_action":a="Return Requires Action",n=(0,z.jsx)(yU.A,{size:20,className:"text-rose-50"})}return{title:a,icon:n,time:e.time,topNode:o.length>0&&(0,z.jsx)(bd,{actions:o}),noNotification:e.noNotification,children:"requested"===e.status?[e.items.map(function(e,t){return(0,z.jsx)(by,{item:e},t)}),U.createElement(U.Fragment,{key:"button"},i)]:"received"===e.status?[e.items.map(function(e,t){var r,n,i;return(0,z.jsx)(by,{item:(n=vt({},e),i=i={quantity:null!==(r=e.receivedQuantity)&&void 0!==r?r:e.quantity},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))}),n)},t)})]:null}}(i,m,p);return(null===(n=i.raw)||void 0===n?void 0:n.claim_order_id)?null:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(bh,vt({},h)),l&&(0,z.jsx)(e_,{handleClose:function(){return s(!1)},onDelete:(r=function(){return function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,function(e){return[2,m()]})},function(){var e=this,t=arguments;return new Promise(function(n,i){var a=r.apply(e,t);function o(e){ve(a,n,i,o,l,"next",e)}function l(e){ve(a,n,i,o,l,"throw",e)}o(void 0)})}),heading:"Cancel return",confirmText:"Yes, cancel",successText:"Canceled return",text:"Are you sure you want to cancel this return?"}),d&&(0,z.jsx)(bo,{onClose:f,order:i.order,returnRequest:i.raw})]})};function vn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function vi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return vn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vn(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}let va=function(e){var t=e.orderId,r=(0,ei.Bd)().t,n=yT().orderRelations,i=yL(t),a=i.events,o=i.refetch,l=(0,eC.A)(),s=(0,J.useAdminCreateNote)(),c=(0,J.useAdminOrder)(t,{expand:n}).order,u=vi((0,U.useState)(!1),2),d=u[0],f=u[1],p=vi((0,U.useState)(!1),2),m=p[0],h=p[1],y=(0,n5.A)(),b=y.state,v=y.close,g=y.open,x=[{icon:(0,z.jsx)(yV,{size:20}),label:r("timeline-request-return","Request Return"),onClick:function(){return f(!0)}},{icon:(0,z.jsx)(Y.A,{size:20}),label:r("timeline-register-exchange","Register Exchange"),onClick:function(){return h(!0)}},{icon:(0,z.jsx)(yU.A,{size:20}),label:r("timeline-register-claim","Register Claim"),onClick:g}];return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("div",{className:"rounded-rounded border-grey-20 bg-grey-0 h-full w-5/12 border",children:[(0,z.jsxs)("div",{className:"border-grey-20 py-large px-xlarge border-b",children:[(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,z.jsx)("h3",{className:"inter-xlarge-semibold",children:r("timeline-timeline","Timeline")}),(0,z.jsx)("div",{className:(0,en.default)({"pointer-events-none opacity-50":!a}),children:(0,z.jsx)(em,{actions:x})})]}),(0,z.jsx)("div",{className:(0,en.default)("mt-base",{"pointer-events-none opacity-50":!a}),children:(0,z.jsx)(y$,{onSubmit:function(e){e&&s.mutate({resource_id:t,resource_type:"order",value:e},{onSuccess:function(){return l(r("timeline-success","Success"),r("timeline-added-note","Added note"),"success")},onError:function(e){return l(r("timeline-error","Error"),(0,eA.u)(e),"error")}})}})})]}),(0,z.jsx)("div",{className:"py-large px-xlarge",children:a?(0,z.jsx)("div",{className:"flex flex-col",children:a.map(function(e,t){return(0,z.jsx)("div",{children:function(e,t){switch(e.type){case"placed":return(0,z.jsx)(b4,{event:e});case"fulfilled":return(0,z.jsx)(b_,{event:e});case"note":return(0,z.jsx)(bM,{event:e});case"shipped":return(0,z.jsx)(bE,{event:e});case"canceled":return(0,z.jsx)(bq,{event:e});case"return":return(0,z.jsx)(vr,{event:e,refetch:t});case"exchange":return(0,z.jsx)(bk,{event:e,refetch:t},e.id);case"claim":return(0,z.jsx)(bb,{event:e});case"notification":return(0,z.jsx)(bB,{event:e});case"refund":return(0,z.jsx)(b7,{event:e});case"edit-created":return(0,z.jsx)(bQ,{event:e});case"edit-canceled":return(0,z.jsx)(bU,{event:e});case"edit-declined":return(0,z.jsx)(bK,{event:e});case"edit-confirmed":return(0,z.jsx)(bG,{event:e});case"edit-requested":return(0,z.jsx)(b5,{event:e});case"refund-required":return(0,z.jsx)(b2,{event:e});case"payment-required":return(0,z.jsx)(bZ,{event:e});default:return null}}(e,o)},t)})}):(0,z.jsx)("div",{className:"flex h-96 w-full items-center justify-center",children:(0,z.jsx)(X.A,{variant:"secondary",size:"large"})})})]}),d&&c&&(0,z.jsx)(ym,{order:c,onDismiss:function(){return f(!1)}}),m&&c&&(0,z.jsx)(yI,{order:c,onDismiss:function(){return h(!1)}}),b&&c&&(0,z.jsx)(hJ,{order:c,onClose:v})]})},vo=function(e){if(!e)return"N/A";if(e.customer){var t=e.customer.first_name,r=e.customer.last_name;if(t&&r)return"".concat(t," ").concat(r);if(t)return t;if(r)return r}if(e.shipping_address){var n=e.shipping_address.first_name,i=e.shipping_address.last_name;if(n&&i)return"".concat(n," ").concat(i);if(n)return n;if(i)return i}if(e.billing_address){var a=e.billing_address.first_name,o=e.billing_address.last_name;if(a&&o)return"".concat(a," ").concat(o);if(a)return a;if(o)return o}return e.email?e.email:"N/A"};function vl(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function vs(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function o(e){vl(a,n,i,o,l,"next",e)}function l(e){vl(a,n,i,o,l,"throw",e)}o(void 0)})}}function vc(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}var vu=!1;let vd=function(e){var t,r,n,i,a,o,l,s,c=e.item,u=e.currencyCode,d=e.change,f=e.customerId,p=e.regionId,m=(0,ei.Bd)().t,h=(0,eC.A)(),y=U.useContext(a7.H8),b=y.pop,v=y.push,g=(null==d?void 0:d.type)==="item_add",x=(null==d?void 0:d.type)==="item_update",j=!!c.fulfilled_quantity,w=(0,J.useAdminOrderEditAddLineItem)(c.order_edit_id).mutateAsync,O=(0,J.useAdminOrderEditDeleteLineItem)(c.order_edit_id,c.id).mutateAsync,S=(0,J.useAdminOrderEditUpdateLineItem)(c.order_edit_id,c.id).mutateAsync,P=(0,J.useAdminDeleteOrderEditItemChange)(c.order_edit_id,null==d?void 0:d.id).mutateAsync,C=(t=vs(function(e){return vc(this,function(t){switch(t.label){case 0:if(vu)return[2];vu=!0,t.label=1;case 1:return t.trys.push([1,,3,4]),[4,S({quantity:e})];case 2:return t.sent(),[3,4];case 3:return vu=!1,[7];case 4:return[2]}})}),function(e){return t.apply(this,arguments)}),A=(r=vs(function(){return vc(this,function(e){switch(e.label){case 0:if(!c.variant)return h(m("order-line-warning","Warning"),m("order-line-cannot-duplicate-an-item-without-a-variant","Cannot duplicate an item without a variant"),"warning"),[2];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,w({variant_id:c.variant_id,quantity:c.quantity})];case 2:return e.sent(),[3,4];case 3:return e.sent(),h(m("order-line-error","Error"),m("order-line-failed-to-duplicate-item","Failed to duplicate item"),"error"),[3,4];case 4:return[2]}})}),function(){return r.apply(this,arguments)}),N=(n=vs(function(){return vc(this,function(e){switch(e.label){case 0:if(e.trys.push([0,9,,10]),!d)return[3,6];if("item_add"!==d.type)return[3,2];return[4,P()];case 1:e.sent(),e.label=2;case 2:if("item_update"!==d.type)return[3,5];return[4,P()];case 3:return e.sent(),[4,O()];case 4:e.sent(),e.label=5;case 5:return[3,8];case 6:return[4,O()];case 7:e.sent(),e.label=8;case 8:return h(m("order-line-success","Success"),m("order-line-item-removed","Item removed"),"success"),[3,10];case 9:return e.sent(),h(m("order-line-error","Error"),m("order-line-failed-to-remove-item","Failed to remove item"),"error"),[3,10];case 10:return[2]}})}),function(){return n.apply(this,arguments)}),k=(i=vs(function(e){var t;return vc(this,function(r){switch(r.label){case 0:t=e[0].id,r.label=1;case 1:return r.trys.push([1,4,,5]),[4,N()];case 2:return r.sent(),[4,w({variant_id:t,quantity:c.quantity})];case 3:return r.sent(),h(m("order-line-success","Success"),m("order-line-item-added","Item added"),"success"),[3,5];case 4:return r.sent(),h(m("order-line-error","Error"),m("order-line-failed-to-replace-the-item","Failed to replace the item"),"error"),[3,5];case 5:return[2]}})}),function(e){return i.apply(this,arguments)}),_={title:m("order-line-replace-product-variants","Replace Product Variants"),onBack:b,view:(0,z.jsx)(vC,{onSubmit:k,customerId:f,regionId:p,currencyCode:u,isReplace:!0})},E=[!j&&{label:m("order-line-replace-with-other-item","Replace with other item"),onClick:function(){return v(_)},icon:(0,z.jsx)(Y.A,{size:"20"})},{label:m("order-line-duplicate-item","Duplicate item"),onClick:A,icon:(0,z.jsx)(eB,{size:"20"})},!j&&{label:m("order-line-remove-item","Remove item"),onClick:N,variant:"danger",icon:(0,z.jsx)(eu,{size:"20"})}].filter(Boolean);return(0,z.jsx)(r9.A,{side:"top",open:!!j&&void 0,content:m("order-line-line-item-cannot-be-edited","This line item is part of a fulfillment and cannot be edited. Cancel the fulfillment to edit the line item."),children:(0,z.jsxs)("div",{className:"hover:bg-grey-5 rounded-rounded mx-[-5px] mb-1 flex h-[64px] justify-between py-2 px-[5px]",children:[(0,z.jsxs)("div",{className:"flex-grow-1 flex justify-center space-x-4",children:[(0,z.jsx)("div",{className:"rounded-rounded flex h-[48px] w-[36px] overflow-hidden",children:c.thumbnail?(0,z.jsx)("img",{src:c.thumbnail,className:"object-cover"}):(0,z.jsx)(nm,{})}),(0,z.jsxs)("div",{className:"flex flex-col justify-center",children:[(0,z.jsxs)("div",{className:"flex max-w-[310px] items-center gap-2",children:[(0,z.jsx)("span",{className:(0,en.default)("text-grey-900 flex-shrink-0 flex-grow font-semibold",{"text-gray-400":j}),children:c.title}),(null==c?void 0:null===(a=c.variant)||void 0===a?void 0:a.options)&&(0,z.jsxs)("span",{className:(0,en.default)("flex-shrink-1 flex gap-3 truncate text-gray-400",{"text-gray-400":j}),children:["(",c.variant.options.map(function(e){return e.value}).join(" • "),")"]})]}),(0,z.jsxs)("div",{className:"flex items-center",children:[g&&(0,z.jsx)("div",{className:"text-small bg-blue-10 rounded-rounded mr-2 flex h-[24px] w-[42px] flex-shrink-0 items-center justify-center text-blue-500",children:m("order-line-new","New")}),x&&(0,z.jsx)("div",{className:"text-small bg-orange-10 rounded-rounded mr-2 flex h-[24px] w-[68px] flex-shrink-0 items-center justify-center text-orange-500",children:m("order-line-modified","Modified")}),(0,z.jsx)("div",{className:"min-h-[20px]",children:(null===(o=c.variant)||void 0===o?void 0:o.sku)&&(0,z.jsx)(hf,{value:null===(l=c.variant)||void 0===l?void 0:l.sku,displayValue:(0,z.jsx)("span",{className:(0,en.default)("flex gap-3 text-gray-500",{"text-gray-400":j}),children:null===(s=c.variant)||void 0===s?void 0:s.sku}),successDuration:1e3})})]})]})]}),(0,z.jsxs)("div",{className:"flex min-w-[312px] items-center justify-between",children:[(0,z.jsxs)("div",{className:(0,en.default)("flex flex-grow-0 items-center text-gray-400",{"pointer-events-none":j}),children:[(0,z.jsx)(e9.A,{className:(0,en.default)("cursor-pointer text-gray-400",{"pointer-events-none":vu}),onClick:function(){return c.quantity>1&&!j&&C(c.quantity-1)}}),(0,z.jsx)("span",{className:(0,en.default)("min-w-[74px] px-8 text-center text-gray-900",{"!text-gray-400":j}),children:c.quantity}),(0,z.jsx)(n_.A,{className:(0,en.default)("cursor-pointer text-gray-400",{"pointer-events-none":vu}),onClick:function(){return C(c.quantity+1)}})]}),(0,z.jsxs)("div",{className:"flex h-full items-center gap-6",children:[(0,z.jsx)("div",{className:(0,en.default)("small:space-x-2 medium:space-x-4 large:space-x-6 flex",{"pointer-events-none !text-gray-400":j}),children:(0,z.jsxs)("div",{className:(0,en.default)("min-w-[60px] text-right text-gray-900",{"pointer-events-none !text-gray-400":j}),children:[(0,rg.Q2)({amount:c.unit_price*c.quantity,currency:u,tax:c.includes_tax?0:c.tax_lines,digits:2}),(0,z.jsx)("span",{className:"ml-2 text-gray-400",children:u.toUpperCase()})]})}),(0,z.jsx)(em,{forceDropdown:!0,actions:E})]})]})]})})};var vf=r(55127),vp=r.n(vf);function vm(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function vh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function vy(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function vb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||vv(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vv(e,t){if(e){if("string"==typeof e)return vm(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vm(e,t)}}let vg=function(e){var t=(0,ei.Bd)().t,r=e.isReplace,n=e.regionId,i=e.currencyCode,a=e.customerId,o=e.setSelectedVariants,l=vb((0,U.useState)(""),2),s=l[0],c=l[1],u=vb((0,U.useState)(0),2),d=u[0],f=u[1],p=vb((0,U.useState)(0),2),m=p[0],h=p[1],y=vb((0,U.useState)(0),2),b=y[0],v=y[1],g=(0,e8.d)(s,500),x=(0,J.useAdminVariants)({q:g,limit:12,offset:d,region_id:n,customer_id:a}),j=x.isLoading,w=x.count,O=x.variants;(0,U.useEffect)(function(){void 0!==w&&h(Math.ceil(w/12))},[w]);var S=function(e){var r,n=e.row.original,i=rF().getLocationNameById,a=(0,J.useAdminVariantsInventory)(n.id),o=a.variant,l=a.isLoading;if(l)return(0,z.jsx)("div",{className:"flex justify-end",children:(0,z.jsx)(tm,{isLoading:!0,children:(0,z.jsx)("div",{className:"h-[20px] w-[50px]"})})});if(!l&&!(null==o?void 0:null===(r=o.inventory)||void 0===r?void 0:r.length))return(0,z.jsx)("div",{className:"text-right",children:n.inventory_quantity});var s=o.inventory,c=s[0].location_levels.reduce(function(e,t){return e+t.stocked_quantity},0),u=(0,z.jsx)(z.Fragment,{children:s[0].location_levels.map(function(e){return(0,z.jsxs)("div",{className:"font-normal",children:[(0,z.jsx)("span",{className:"font-semibold",children:e.stocked_quantity}),t("variants-table-location"," in {{location}}",{location:i(e.location_id)})]},e.id)})});return(0,z.jsx)(r9.A,{content:u,side:"top",className:"translate-x-1/4",children:(0,z.jsxs)("div",{className:"text-right",children:[c," in ",s[0].location_levels.length," ",vp()("location",s[0].location_levels.length)]})})},P=function(e){var t,r=e.row.original;return(0,z.jsxs)("div",{className:"flex items-center",children:[(0,z.jsx)("div",{className:"my-1.5 mr-4 flex h-[40px] w-[30px] items-center",children:r.product.thumbnail?(0,z.jsx)("img",{src:r.product.thumbnail,className:"rounded-soft h-full object-cover"}):(0,z.jsx)(nm,{})}),(0,z.jsxs)("div",{className:"flex max-w-[200px] flex-col",children:[(0,z.jsx)(r9.A,{content:(0,z.jsx)("span",{className:"font-normal",children:r.product.title}),maxWidth:400,children:(0,z.jsx)("div",{className:"truncate",children:null!==(t=r.sku)&&void 0!==t?t:r.product.title})}),(0,z.jsx)("span",{className:"text-grey-50",children:r.title})]})]})},C=(0,U.useMemo)(function(){return[{Header:(0,z.jsx)("div",{className:"text-small font-semibold text-gray-500",children:t("edit-product","Product")}),accessor:"sku",Cell:P},{Header:(0,z.jsx)("div",{className:"text-small text-right font-semibold text-gray-500",children:t("edit-in-stock","In Stock")}),accessor:"inventory_quantity",Cell:S},{Header:(0,z.jsx)("div",{className:"text-small text-right font-semibold text-gray-500",children:t("edit-price","Price")}),accessor:"amount",Cell:function(e){var t=e.row.original;if(!t.original_price_incl_tax)return null;var r="default"!==t.calculated_price_type;return(0,z.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,z.jsxs)("div",{className:"flex flex-col items-end",children:[r&&(0,z.jsx)("span",{className:"text-gray-400 line-through",children:(0,rg.Q2)({amount:t.original_price_incl_tax,currency:i})}),(0,z.jsx)("span",{children:(0,rg.Q2)({amount:t.calculated_price_incl_tax,currency:i})})]}),(0,z.jsxs)("span",{className:"text-gray-400",children:[" ",i.toUpperCase()]})]})}}]},[]),A=(0,e4.useTable)({columns:C,data:O||[],manualPagination:!0,initialState:{pageIndex:b,pageSize:12,selectedRowIds:{}},pageCount:m,autoResetSelectedRows:!1,autoResetPage:!1,getRowId:function(e){return e.id}},e4.usePagination,e4.useRowSelect,function(e){e.visibleColumns.push(function(e){return[{id:"selection",Header:function(e){var t=e.getToggleAllRowsSelectedProps;return r?null:(0,z.jsx)("div",{children:(0,z.jsx)(tt,vy(vh({},t()),{type:r?"radio":"checkbox"}))})},Cell:function(e){var t=e.row,n=e.toggleAllRowsSelected,i=e.toggleRowSelected,a=t.getToggleRowSelectedProps(),o=t.getToggleRowSelectedProps();return(0,z.jsx)("div",{className:(0,en.default)({"mr-2":r}),children:(0,z.jsx)(tt,vy(vh({},o),{type:r?"radio":"checkbox",onChange:r?function(){n(!1),i(t.id,!a.checked)}:o.onChange}))})}}].concat(function(e){if(Array.isArray(e))return vm(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||vv(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())})});return(0,U.useEffect)(function(){O&&o(O.filter(function(e){return A.state.selectedRowIds[e.id]}))},[A.state.selectedRowIds,O]),(0,z.jsx)(tb,{hasPagination:!0,isLoading:j,numberOfRows:12,pagingState:{count:w,offset:d,pageSize:d+A.rows.length,title:t("edit-products","Products"),currentPage:A.state.pageIndex+1,pageCount:A.pageCount,nextPage:function(){A.canNextPage&&(f(function(e){return e+A.state.pageSize}),v(function(e){return e+1}),A.nextPage())},prevPage:function(){A.canPreviousPage&&(f(function(e){return Math.max(e-A.state.pageSize,0)}),v(function(e){return e-1}),A.previousPage())},hasNext:A.canNextPage,hasPrev:A.canPreviousPage},children:(0,z.jsxs)(td,vy(vh({immediateSearchFocus:!0,enableSearch:!0,searchPlaceholder:t("edit-search-product-variants","Search Product Variants..."),searchValue:s,handleSearch:function(e){f(0),v(0),c(e)}},A.getTableProps()),{children:[A.headerGroups.map(function(e){return(0,z.jsx)(td.HeadRow,vy(vh({},e.getHeaderGroupProps()),{children:e.headers.map(function(e){return(0,z.jsx)(td.HeadCell,vy(vh({},e.getHeaderProps()),{children:e.render("Header")}))})}))}),(0,z.jsx)(td.Body,vy(vh({},A.getTableBodyProps()),{children:A.rows.map(function(e){return A.prepareRow(e),(0,z.jsx)(td.Row,vy(vh({},e.getRowProps()),{children:e.cells.map(function(e){return(0,z.jsx)(td.Cell,vy(vh({},e.getCellProps()),{children:e.render("Cell")}))})}))})}))]}))})};function vx(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function vj(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function vw(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function o(e){vj(a,n,i,o,l,"next",e)}function l(e){vj(a,n,i,o,l,"throw",e)}o(void 0)})}}function vO(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return vx(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vx(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vS(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}function vP(e){var t=(0,ei.Bd)().t,r=e.currencyCode,n=e.amountPaid,i=e.newTotal,a=e.differenceDue;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{className:"bg-grey-20 mb-6 h-px w-full"}),(0,z.jsxs)("div",{className:"mb-2 flex h-[40px] justify-between",children:[(0,z.jsx)("span",{className:"text-gray-500",children:t("edit-amount-paid","Amount Paid")}),(0,z.jsxs)("span",{className:"text-gray-900",children:[(0,rg.Q2)({amount:n,currency:r}),(0,z.jsxs)("span",{className:"text-gray-400",children:[" ",r.toUpperCase()]})]})]}),(0,z.jsxs)("div",{className:"mb-2 flex h-[40px] justify-between",children:[(0,z.jsx)("span",{className:"font-semibold text-gray-900",children:t("edit-new-total","New Total")}),(0,z.jsx)("span",{className:"text-2xl font-semibold",children:(0,rg.Q2)({amount:i,currency:r})})]}),(0,z.jsxs)("div",{className:"flex justify-between",children:[(0,z.jsx)("span",{className:"text-gray-500",children:t("edit-difference-due","Difference Due")}),(0,z.jsxs)("span",{className:(0,en.default)("text-gray-900",{"text-rose-500":a<0,"text-emerald-500":a>=0}),children:[(0,rg.Q2)({amount:a,currency:r}),(0,z.jsxs)("span",{className:"text-gray-400",children:[" ",r.toUpperCase()]})]})]}),(0,z.jsx)("div",{className:"bg-grey-20 mt-8 mb-6 h-px w-full"})]})}function vC(e){var t,r=(0,ei.Bd)().t,n=U.useContext(a7.H8).pop,i=vO((0,U.useState)([]),2),a=i[0],o=i[1],l=(t=vw(function(){return vS(this,function(t){switch(t.label){case 0:return[4,e.onSubmit(a)];case 1:return t.sent(),n(),[2]}})}),function(){return t.apply(this,arguments)});return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(eN.A.Content,{children:(0,z.jsx)("div",{className:"flex min-h-[680px] flex-col justify-between",children:(0,z.jsx)(vg,{regionId:e.regionId,customerId:e.customerId,currencyCode:e.currencyCode,isReplace:!!e.isReplace,setSelectedVariants:o})})}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"space-x-xsmall flex w-full justify-end",children:[(0,z.jsx)(W.A,{variant:"secondary",size:"small",onClick:function(){o([]),n()},children:r("edit-back","Back")}),(0,z.jsx)(W.A,{variant:"primary",size:"small",onClick:l,children:r("edit-save-and-go-back","Save and go back")})]})})]})}function vA(e){var t,r,n,i=e.close,a=e.currentSubtotal,o=e.orderEdit,l=e.currencyCode,s=e.regionId,c=e.customerId,u=e.paidTotal,d=e.refundedTotal,f=(0,ei.Bd)().t,p=(0,U.useRef)(),m=(0,eC.A)(),h=vO((0,U.useState)(),2),y=h[0],b=h[1],v=vO((0,U.useState)(!1),2),g=v[0],x=v[1],j=vO((0,U.useState)(""),2),w=j[0],O=j[1],S=a!==o.subtotal,P=!!o.changes.length,C=(0,J.useAdminRequestOrderEditConfirmation)(o.id),A=C.mutateAsync,N=C.isLoading,k=(0,J.useAdminUpdateOrderEdit)(o.id),_=k.mutateAsync,E=k.isLoading,I=(0,J.useAdminDeleteOrderEdit)(o.id).mutateAsync,D=(0,J.useAdminOrderEditAddLineItem)(o.id).mutateAsync,T=(0,U.useContext)(a7.H8),M=(t=vw(function(){return vS(this,function(e){switch(e.label){case 0:return e.trys.push([0,4,,5]),[4,A()];case 1:if(e.sent(),!y)return[3,3];return[4,_({internal_note:y})];case 2:e.sent(),e.label=3;case 3:return m(f("edit-success","Success"),f("edit-order-edit-set-as-requested","Order edit set as requested"),"success"),[3,5];case 4:return e.sent(),m(f("edit-error","Error"),f("edit-failed-to-request-confirmation","Failed to request confirmation"),"error"),[3,5];case 5:return i(),[2]}})}),function(){return t.apply(this,arguments)}),R=(r=vw(function(){return vS(this,function(e){switch(e.label){case 0:return[4,I()];case 1:return e.sent(),i(),[2]}})}),function(){return r.apply(this,arguments)});(0,U.useEffect)(function(){g&&p.current.focus()},[g]);var L=(n=vw(function(e){return vS(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,Promise.all(e.map(function(e){return D({variant_id:e.id,quantity:1})}))];case 1:return t.sent(),m(f("edit-success","Success"),f("edit-added-successfully","Added successfully"),"success"),[3,3];case 2:return t.sent(),m(f("edit-error","Error"),f("edit-error-occurred","Error occurred"),"error"),[3,3];case 3:return[2]}})}),function(e){return n.apply(this,arguments)}),F=o.items.sort(function(e,t){return new Date(e.created_at)-new Date(t.created_at)});w&&(F=F.filter(function(e){var t;return e.title.toLowerCase().includes(w)||(null===(t=e.variant)||void 0===t?void 0:t.sku.toLowerCase().includes(w))}));var B={title:f("edit-add-product-variants","Add Product Variants"),onBack:T.pop,view:(0,z.jsx)(vC,{onSubmit:L,customerId:c,regionId:s,currencyCode:l})};return(0,z.jsx)(a7.Ay,{open:!0,isLargeModal:!0,handleClose:R,context:T,children:(0,z.jsxs)(eN.A.Body,{children:[(0,z.jsx)(eN.A.Header,{handleClose:R,children:(0,z.jsx)("h1",{className:"inter-xlarge-semibold",children:f("edit-edit-order","Edit Order")})}),(0,z.jsxs)(eN.A.Content,{children:[(0,z.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,z.jsx)("span",{className:"text-large font-semibold text-gray-900",children:f("edit-items","Items")}),(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,z.jsx)(W.A,{size:"small",variant:"ghost",className:"border-grey-20 mr-2 h-[32px] flex-shrink-0 border text-gray-900",onClick:function(){return T.push(B)},children:f("edit-add-items","Add items")}),!g&&(0,z.jsx)(W.A,{size:"small",variant:"secondary",className:(0,en.default)("h–[32px] h-full w-[32px] flex-shrink-0",{"focus:bg-grey-20":g}),onClick:function(){return x(!0)},children:(0,z.jsx)(to.A,{size:16,className:"text-gray-500"})}),g&&(0,z.jsx)(e1.A,{small:!0,deletable:!0,ref:p,value:w,onDelete:function(){g&&O(""),x(function(e){return!e})},placeholder:f("edit-filter-items","Filter items..."),onChange:function(e){return O(e.target.value)},prefix:(0,z.jsx)(to.A,{size:14,className:"text-gray-400"})})]})]}),F.map(function(e){return(0,z.jsx)(vd,{item:e,customerId:c,regionId:s,currencyCode:l,change:o.changes.find(function(t){return t.line_item_id===e.id||t.original_line_item_id===e.id})},e.id)}),(0,z.jsx)("div",{className:"mt-8"}),S&&(0,z.jsx)(vP,{currencyCode:l,amountPaid:u-d,newTotal:o.total,differenceDue:o.total-u}),P&&(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,z.jsx)("span",{className:"text-gray-500",children:f("edit-note","Note")}),(0,z.jsx)(e1.A,{className:"max-w-[455px]",placeholder:f("edit-add-a-note","Add a note..."),onChange:function(e){return b(e.target.value)},value:y})]})]}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"flex w-full items-center justify-end gap-2",children:[(0,z.jsx)(W.A,{variant:"secondary",size:"small",type:"button",onClick:R,children:f("edit-cancel","Cancel")}),(0,z.jsx)(W.A,{variant:"primary",size:"small",type:"button",disabled:E||N||!P,loading:E||N,onClick:M,children:f("edit-save-and-close","Save and close")})]})})]})})}var vN=!1;let vk=function(e){var t=e.order,r=(0,eC.A)(),n=(0,U.useContext)(m9),i=n.hideModal,a=n.orderEdits,o=n.activeOrderEditId,l=n.setActiveOrderEdit,s=(0,J.useAdminCreateOrderEdit)().mutateAsync,c=null==a?void 0:a.find(function(e){return e.id===o});return((0,U.useEffect)(function(){o||vN||(vN=!0,s({order_id:t.id}).then(function(e){return l(e.order_edit.id)}).catch(function(){r("Error","There is already an active order edit on this order","error"),i()}).finally(function(){return vN=!1}))},[o]),c)?(0,z.jsx)(vA,{close:function(){i()},orderEdit:c,currentSubtotal:t.subtotal,regionId:t.region_id,customerId:t.customer_id,currencyCode:t.currency_code,paidTotal:t.paid_total,refundedTotal:t.refunded_total}):null};function v_(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function vE(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}let vI=function(e){var t=e.form,r=e.requireFields,n=t.path,i=t.register,a=t.formState.errors;return(0,z.jsx)("div",{children:(0,z.jsxs)("div",{className:"gap-large grid grid-cols-2",children:[(0,z.jsx)(e1.A,vE(v_({},i(n("first_name"),{required:null!=r&&!!r.first_name&&n8.A.required("First name"),pattern:n8.A.whiteSpaceRule("First name")})),{placeholder:"First Name",label:"First Name",required:null==r?void 0:r.first_name,errors:a})),(0,z.jsx)(e1.A,vE(v_({},t.register(n("last_name"),{required:null!=r&&!!r.last_name&&n8.A.required("Last name"),pattern:n8.A.whiteSpaceRule("Last name")})),{placeholder:"Last Name",label:"Last Name",required:null==r?void 0:r.last_name,errors:a})),(0,z.jsx)(e1.A,vE(v_({},t.register(n("company"),{pattern:n8.A.whiteSpaceRule("Company"),required:null!=r&&!!r.company&&n8.A.required("Company")})),{placeholder:"Company",required:null==r?void 0:r.company,label:"Company",errors:a})),(0,z.jsx)(e1.A,vE(v_({},t.register(n("phone"),{pattern:n8.A.whiteSpaceRule("Phone"),required:null!=r&&!!r.phone&&n8.A.required("Phone")})),{required:null==r?void 0:r.phone,placeholder:"Phone",label:"Phone",errors:a}))]})})};function vD(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function vT(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}let vM=function(e){var t=e.form,r=e.countryOptions,n=e.requireFields,i=t.register,a=t.path,o=t.formState.errors,l=t.control;return(0,z.jsxs)("div",{className:"gap-large grid grid-cols-2",children:[(0,z.jsx)(e1.A,vT(vD({},i(a("address_1"),{required:null!=n&&!!n.address_1&&n8.A.required("Address 1"),pattern:n8.A.whiteSpaceRule("Address 1")})),{placeholder:"Address 1",label:"Address 1",required:null==n?void 0:n.address_1,errors:o})),(0,z.jsx)(e1.A,vT(vD({},i(a("address_2"),{pattern:n8.A.whiteSpaceRule("Address 2"),required:null!=n&&!!n.address_2&&n8.A.required("Address 2")})),{placeholder:"Address 2",required:null==n?void 0:n.address_2,label:"Address 2",errors:o})),(0,z.jsx)(e1.A,vT(vD({},i(a("postal_code"),{required:null!=n&&!!n.postal_code&&n8.A.required("Postal code"),pattern:n8.A.whiteSpaceRule("Postal code")})),{placeholder:"Postal code",label:"Postal code",required:null==n?void 0:n.postal_code,autoComplete:"off",errors:o})),(0,z.jsx)(e1.A,vT(vD({placeholder:"City",label:"City"},i(a("city"),{required:null!=n&&!!n.city&&n8.A.required("City"),pattern:n8.A.whiteSpaceRule("City")})),{required:null==n?void 0:n.city,errors:o})),(0,z.jsx)(e1.A,vT(vD({},i(a("province"),{pattern:n8.A.whiteSpaceRule("Province"),required:null!=n&&!!n.province&&n8.A.required("Province")})),{placeholder:"Province",label:"Province",required:null==n?void 0:n.province,errors:o})),(0,z.jsx)(eR.xI,{control:l,name:a("country_code"),rules:{required:null!=n&&!!n.country_code&&n8.A.required("Country")},render:function(e){var t=e.field,i=t.value,l=t.onChange;return(0,z.jsx)(no,{label:"Country",required:null==n?void 0:n.country_code,value:i,options:r,onChange:l,name:a("country_code"),errors:o,isClearable:!(null==n?void 0:n.country_code)})}})]})};function vR(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function vL(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var vz=function(e){var t=(null==e?void 0:e.country_code)?uw[e.country_code.toUpperCase()]:"";return{contact:{first_name:(null==e?void 0:e.first_name)||"",last_name:(null==e?void 0:e.last_name)||"",phone:(null==e?void 0:e.phone)||"",company:(null==e?void 0:e.company)||null},location:{address_1:(null==e?void 0:e.address_1)||"",address_2:(null==e?void 0:e.address_2)||null,city:(null==e?void 0:e.city)||"",province:(null==e?void 0:e.province)||null,country_code:(null==e?void 0:e.country_code)?{label:t,value:e.country_code}:{label:"",value:""},postal_code:(null==e?void 0:e.postal_code)||""},metadata:eJ(null==e?void 0:e.metadata)}};let vF=function(e){var t=e.address,r=e.allowedCountries,n=e.onClose,i=e.onSave,a=e.open,o=e.type,l=e.submitting,s=void 0!==l&&l,c=(0,ei.Bd)().t,u=(0,eR.mN)({defaultValues:vz(t)}),d=u.reset,f=u.formState.isDirty,p=u.handleSubmit,m=(0,eC.A)();(0,U.useEffect)(function(){a&&d(vz(t))},[t,a,d]);var y=(void 0===r?[]:r).map(function(e){return{label:e.display_name,value:e.iso_2}}).filter(Boolean),b=p(function(e){var t={},r=e.contact,a=e.location,l=e.metadata,s=a.country_code.value,u=eZ(l);return"shipping"===o?t.shipping_address=vL(vR({},r,a),{country_code:s,metadata:u}):t.billing_address=vL(vR({},r,a),{country_code:s,metadata:u}),i(t,{onSuccess:function(){m(c("details-success","Success"),c("details-successfully-updated-address","Successfully updated address"),"success"),n()},onError:function(e){return m(c("details-error","Error"),(0,eA.u)(e),"error")}})});return(0,z.jsx)(eN.A,{open:a,handleClose:n,children:(0,z.jsx)("form",{onSubmit:b,children:(0,z.jsxs)(eN.A.Body,{children:[(0,z.jsx)(eN.A.Header,{handleClose:n,children:(0,z.jsx)("span",{className:"inter-xlarge-semibold",children:o===h.BILLING?c("details-billing-address","Billing Address"):c("details-shipping-address","Shipping Address")})}),(0,z.jsx)(eN.A.Content,{children:(0,z.jsxs)("div",{className:"gap-y-xlarge flex flex-col",children:[(0,z.jsxs)("div",{children:[(0,z.jsx)("h2",{className:"inter-base-semibold mb-base",children:c("details-contact","Contact")}),(0,z.jsx)(vI,{form:(0,eL.m)(u,"contact")})]}),(0,z.jsxs)("div",{children:[(0,z.jsx)("h2",{className:"inter-base-semibold mb-base",children:c("details-location","Location")}),(0,z.jsx)(vM,{form:(0,eL.m)(u,"location"),countryOptions:y})]}),(0,z.jsxs)("div",{children:[(0,z.jsx)("h2",{className:"inter-base-semibold mb-base",children:c("details-metadata","Metadata")}),(0,z.jsx)(e$,{form:(0,eL.m)(u,"metadata")})]})]})}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"gap-x-xsmall flex w-full justify-end",children:[(0,z.jsx)(W.A,{variant:"secondary",size:"small",onClick:n,type:"button",children:c("details-cancel","Cancel")}),(0,z.jsx)(W.A,{size:"small",variant:"primary",type:"submit",loading:s,disabled:s||!f,children:c("details-save-and-close","Save and close")})]})})]})})})},vB=function(e){var t,r,n=e.size,i=void 0===n?"24":n,a=e.color,o=void 0===a?"currentColor":a,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["size","color"]);return(0,z.jsxs)("svg",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({width:i,height:i,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l),r=r={children:[(0,z.jsx)("circle",{cx:"10",cy:"10",r:"7.25",stroke:o,strokeWidth:"1.5"}),(0,z.jsx)("path",{d:"M15 10C15 7.23858 12.7614 5 10 5V10H15Z",fill:o})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))};function vq(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var vH=function(e){var t=e.reservation,r=e.locationName,n=e.onClick,i=(0,ei.Bd)().t;return(0,z.jsxs)("div",{className:"pt-base first:pt-0",children:[i("edit-reservation-button-quantity-item-location-name","{{quantity}} item: ${{locationName}}",{quantity:t.quantity,locationName:r}),(0,z.jsx)(W.A,{onClick:n,variant:"ghost",size:"small",className:"mt-2 w-full border",children:i("reservation-indicator-edit-reservation","Edit reservation")})]})};let vU=function(e){var t,r=e.reservations,n=e.lineItem,i=(0,ei.Bd)().t,a=(0,J.useAdminVariantsInventory)(n.variant_id,{enabled:!!(null==n?void 0:n.variant_id)}),o=a.variant,l=a.isLoading,s=a.isFetching,c=(0,J.useAdminStockLocations)({id:(null==r?void 0:r.map(function(e){return e.location_id}))||[]}).stock_locations,u=function(e){if(Array.isArray(e))return e}(t=U.useState(null))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(t,2)||function(e,t){if(e){if("string"==typeof e)return vq(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vq(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),d=u[0],f=u[1],p=new Map((null==c?void 0:c.map(function(e){return[e.id,e.name]}))||[]),m=(0,t6.sum)((null==r?void 0:r.map(function(e){return e.quantity}))||[]),h=n.quantity-((null==n?void 0:n.fulfilled_quantity)||0)-m;return!l&&!s&&n.variant_id&&(null==o?void 0:o.inventory.length)?(0,z.jsxs)("div",{className:h?"text-rose-50":"text-grey-40",children:[(0,z.jsx)(r9.A,{content:(0,z.jsx)("div",{className:"inter-small-regular flex flex-col items-center px-1 pt-1 pb-2",children:m||h?(0,z.jsxs)("div",{className:"gap-y-base grid grid-cols-1 divide-y",children:[!!h&&(0,z.jsx)("span",{className:"flex w-full items-center",children:i("reservation-indicator-awaiting-reservation-count","{{awaitingReservation}} items not reserved",{awaitingReservation:h})}),null==r?void 0:r.map(function(e){return(0,z.jsx)(vH,{locationName:p.get(e.location_id),totalReservedQuantity:m,reservation:e,lineItem:n,onClick:function(){return f(e)}},e.id)})]}):(0,z.jsx)("span",{className:"flex w-full items-center",children:i("reservation-indicator-this-item-has-been-fulfilled","This item has been fulfilled.")})}),side:"bottom",children:h?m?(0,z.jsx)(vB,{size:20}):(0,z.jsx)($.A,{fillType:"solid",size:20}):(0,z.jsx)(dD.A,{size:20})}),d&&(0,z.jsx)(pA,{totalReservedQuantity:m,close:function(){return f(null)},reservation:d,item:n})]}):(0,z.jsx)("div",{className:"w-[20px]"})},vV=function(e){var t,r,n=e.item,i=e.currencyCode,a=e.reservations,o=e.isAllocatable,l=(0,rz.u)().isFeatureEnabled;return(0,z.jsxs)("div",{className:"hover:bg-grey-5 rounded-rounded mx-[-5px] mb-1 flex h-[64px] justify-between py-2 px-[5px]",children:[(0,z.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,z.jsx)("div",{className:"rounded-rounded flex h-[48px] w-[36px] overflow-hidden",children:n.thumbnail?(0,z.jsx)("img",{src:n.thumbnail,className:"object-cover"}):(0,z.jsx)(nm,{})}),(0,z.jsxs)("div",{className:"flex max-w-[185px] flex-col justify-center",children:[(0,z.jsx)("span",{className:"inter-small-regular text-grey-90 truncate",children:n.title}),(null==n?void 0:n.variant)&&(0,z.jsx)("span",{className:"inter-small-regular text-grey-50 truncate",children:"".concat(n.variant.title).concat(n.variant.sku?" (".concat(n.variant.sku,")"):"")})]})]}),(0,z.jsxs)("div",{className:"flex items-center",children:[(0,z.jsxs)("div",{className:"small:space-x-2 medium:space-x-4 large:space-x-6 mr-3 flex",children:[(0,z.jsx)("div",{className:"inter-small-regular text-grey-50",children:(0,rg.Q2)({amount:(null!==(t=null==n?void 0:n.total)&&void 0!==t?t:0)/n.quantity,currency:i,digits:2,tax:[]})}),(0,z.jsxs)("div",{className:"inter-small-regular text-grey-50",children:["x ",n.quantity]}),l("inventoryService")&&(void 0===o||o)&&(0,z.jsx)(vU,{reservations:a,lineItem:n}),(0,z.jsx)("div",{className:"inter-small-regular text-grey-90 min-w-[55px] text-right",children:(0,rg.Q2)({amount:null!==(r=n.total)&&void 0!==r?r:0,currency:i,digits:2,tax:[]})})]}),(0,z.jsx)("div",{className:"inter-small-regular text-grey-50",children:i.toUpperCase()})]})]})};function vG(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function vW(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function o(e){vG(a,n,i,o,l,"next",e)}function l(e){vG(a,n,i,o,l,"throw",e)}o(void 0)})}}function vY(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}var v$=function(e){var t,r,n,i,a=e.form,o=e.item,l=e.locationId,s=e.reservedQuantity,c=e.compact,u=(0,J.useAdminVariantsInventory)(o.variant_id),d=u.variant,f=u.isLoading,p=a.register,m=a.path;a.setValue(m("line_item_id"),o.id),(0,U.useEffect)(function(){var e;(null==d?void 0:null===(e=d.inventory)||void 0===e?void 0:e.length)&&a.setValue(m("inventory_item_id"),d.inventory[0].id)},[d,a,m]);var h=(0,U.useMemo)(function(){if(f||!l||!d)return{};var e,t,r=d.inventory,n=null==r?void 0:null===(t=r[0])||void 0===t?void 0:null===(e=t.location_levels)||void 0===e?void 0:e.find(function(e){return e.location_id===l});return n?{availableQuantity:n.available_quantity,inStockQuantity:n.stocked_quantity}:{}},[d,l,f]),y=h.availableQuantity,b=h.inStockQuantity;if(!(null===(n=d.inventory)||void 0===n?void 0:n.length))return null;var v=pw(o)-(s||0),g=Math.min(v,"number"==typeof y?y:0);return(0,z.jsxs)("div",{className:"mt-8 flex w-full items-start justify-between",children:[(0,z.jsxs)("div",{className:"gap-x-base flex w-7/12",children:[(0,z.jsx)("div",{className:"min-w-9",children:(0,z.jsx)(pg,{size:"medium",src:o.thumbnail})}),(0,z.jsxs)("div",{className:"text-grey-50 truncate",children:[(0,z.jsxs)("p",{className:"gap-x-2xsmall nowrap flex grow ",children:[(0,z.jsx)("p",{className:"inter-base-semibold text-grey-90 truncate",children:o.title}),"(".concat(o.variant.sku,")")]}),(0,z.jsx)("p",{className:"inter-base-regular ",children:(null===(i=o.variant.options)||void 0===i?void 0:i.map(function(e){return e.value}))||o.variant.title||"-"})]})]}),(0,z.jsxs)("div",{className:(0,en.default)("gap-x-large flex items-center",{"gap-y-xsmall flex-col-reverse":c}),children:[(0,z.jsxs)("div",{className:(0,en.default)("inter-base-regular text-grey-50 gap-x-xsmall flex items-end whitespace-nowrap",{"flex-col":!c}),children:[(0,z.jsxs)("p",{children:[y||0," available"]}),(0,z.jsxs)("p",{children:["(",b||0," in stock)"]})]}),(0,z.jsx)(e1.A,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},p(m("quantity"),{valueAsNumber:!0})),r=r={type:"number",className:"min-w-[120px]",defaultValue:0,disabled:v<0,min:0,max:g>0?g:0,suffix:(0,z.jsxs)("span",{className:"flex",children:["/"," ",(0,z.jsx)("span",{className:"ml-1",children:g>0?g:0})]})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))]})]})};let vQ=function(e){var t,r=e.items,n=e.close,i=e.reservationItemsMap,a=(0,ei.Bd)().t,o=(0,J.useAdminCreateReservation)().mutateAsync,l=(0,J.useMedusa)().client,s=(0,eC.A)(),c=(0,eR.mN)({defaultValues:{items:[]}}),u=c.handleSubmit,d=c.control,f=(0,eR.FH)({control:d,name:"location"}),p=(0,J.useAdminStockLocations)(),m=p.stock_locations,h=p.isLoading,y=(0,U.useMemo)(function(){return m?m.map(function(e){return{value:e.id,label:e.name}}):[]},[m]),b=(t=vW(function(e){var t,r,i;return vY(this,function(c){var u,d;switch(c.label){case 0:if(!(null===(t=e.location)||void 0===t?void 0:t.value))return[2];return[4,Promise.all(e.items.map((u=vW(function(t){return vY(this,function(r){switch(r.label){case 0:if(!t.quantity)return[2,{}];return[4,o({quantity:t.quantity,line_item_id:t.line_item_id,inventory_item_id:t.inventory_item_id,location_id:e.location.value}).then(function(e){return{result:e}}).catch(function(e){return{error:e}})];case 1:return[2,r.sent()]}})}),function(e){return u.apply(this,arguments)})))];case 1:if(!(r=c.sent()).some(function(e){return e.error}))return[3,3];return[4,Promise.all(r.map((d=vW(function(e){var t;return vY(this,function(r){switch(r.label){case 0:if(!(t=e.result))return[3,2];return[4,l.admin.reservations.delete(t.id)];case 1:r.sent(),r.label=2;case 2:return[2]}})}),function(e){return d.apply(this,arguments)})))];case 2:return c.sent(),i=r.filter(function(e){return!!e.error}).map(function(e){var t=e.error;return(0,eA.u)(t)}).join(", "),s(a("reservation-couldnt-allocate-items","Couldn't allocate items"),i,"error"),[3,4];case 3:s(a("reservation-items-allocated","Items allocated"),a("reservation-items-have-been-allocated-successfully","Items have been allocated successfully"),"success"),n(),c.label=4;case 4:return[2]}})}),function(e){return t.apply(this,arguments)});return(0,z.jsx)("form",{onSubmit:u(b),children:(0,z.jsxs)(sF.A,{children:[(0,z.jsx)(sF.A.Header,{children:(0,z.jsxs)("div",{className:"medium:w-8/12 flex w-full justify-between px-8",children:[(0,z.jsx)(W.A,{size:"small",variant:"ghost",type:"button",onClick:n,children:(0,z.jsx)(ao.A,{size:20})}),(0,z.jsxs)("div",{className:"gap-x-small flex",children:[(0,z.jsx)(W.A,{size:"small",variant:"secondary",type:"button",onClick:n,children:a("reservation-cancel","Cancel")}),(0,z.jsx)(W.A,{size:"small",variant:"primary",type:"submit",children:a("reservation-save-reservation","Save reservation")})]})]})}),(0,z.jsx)(sF.A.Main,{className:"medium:w-6/12",children:h||!m?(0,z.jsx)("div",{children:a("reservation-loading","Loading...")}):(0,z.jsxs)("div",{className:"mt-16 flex flex-col",children:[(0,z.jsx)("h1",{className:"inter-xlarge-semibold",children:a("reservation-allocate-order-items","Allocate order items")}),(0,z.jsxs)("div",{className:"mt-6 flex w-full items-center justify-between",children:[(0,z.jsxs)("div",{children:[(0,z.jsx)("p",{className:"inter-base-semibold",children:a("reservation-location","Location")}),(0,z.jsx)("p",{className:"inter-base-regular",children:a("reservation-choose-where-you-wish-to-allocate-from","Choose where you wish to allocate from")})]}),(0,z.jsx)("div",{className:"w-1/2",children:(0,z.jsx)(eR.xI,{name:"location",control:d,rules:{required:!0},render:function(e){var t=e.field,r=t.value,n=t.onChange;return(0,z.jsx)(no,{value:r,onChange:n,options:y})}})})]}),(0,z.jsx)("div",{className:(0,en.default)("border-grey-20 mt-8 flex w-full flex-col border-t",{"pointer-events-none opacity-50":!(null==f?void 0:f.value)}),children:(0,z.jsxs)("div",{children:[(0,z.jsx)("p",{className:"inter-base-semibold mt-8",children:a("reservation-items-to-allocate","Items to allocate")}),(0,z.jsx)("p",{className:"inter-base-regular",children:a("reservation-select-the-number-of-items-that-you-wish-to-allocate","Select the number of items that you wish to allocate.")}),null==r?void 0:r.map(function(e,t){var r;return(0,z.jsx)(v$,{form:(0,eL.m)(c,"items.".concat(t)),item:e,locationId:null==f?void 0:f.value,reservedQuantity:(0,t6.sum)((null===(r=i[e.id])||void 0===r?void 0:r.map(function(e){return e.quantity}))||[])},t)})]})})]})})]})})};function vK(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function vZ(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function vJ(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function o(e){vZ(a,n,i,o,l,"next",e)}function l(e){vZ(a,n,i,o,l,"throw",e)}o(void 0)})}}function vX(e,t){if(e){if("string"==typeof e)return vK(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vK(e,t)}}function v0(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}let v1=function(e){var t,r,n,i,a=e.order,o=e.reservations,l=(0,ei.Bd)().t,s=(0,n5.A)(),c=s.state,u=s.open,d=s.close,f=(0,U.useContext)(m9).showModal,p=(0,J.useMedusa)().client,m=(0,rz.u)().isFeatureEnabled,h=m("inventoryService"),y=function(e){if(Array.isArray(e))return e}(t=U.useState(new Map))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(t,2)||vX(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),b=y[0],v=y[1];U.useEffect(function(){var e;h&&(e=vJ(function(){return v0(this,function(e){switch(e.label){case 0:var t;return[4,Promise.all(a.items.map((t=vJ(function(e){return v0(this,function(t){switch(t.label){case 0:if(!e.variant_id)return[2];return[4,p.admin.variants.getInventory(e.variant_id)];case 1:return[2,t.sent()]}})}),function(e){return t.apply(this,arguments)})))];case 1:return v(new Map(e.sent().filter(function(e){return!!e}).map(function(e){return[e.variant.id,e.variant]}))),[2]}})}),function(){return e.apply(this,arguments)})()},[a.items,h,p.admin.variants]);var g=(0,U.useMemo)(function(){return(null==o?void 0:o.length)&&h?o.reduce(function(e,t){var r;return t.line_item_id&&(e[t.line_item_id]=e[t.line_item_id]?((function(e){if(Array.isArray(e))return vK(e)})(r=e[t.line_item_id])||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||vX(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([t]):[t]),e},{}):{}},[o,h]),x=(0,U.useMemo)(function(){return a.items.every(function(e){if(!e.variant_id||!(null===(t=b.get(e.variant_id))||void 0===t?void 0:t.inventory.length))return!0;var t,r=g[e.id];return e.quantity===e.fulfilled_quantity||r&&(0,t6.sum)(r.map(function(e){return e.quantity}))===e.quantity-(e.fulfilled_quantity||0)})},[a.items,b,g]),j=(0,U.useMemo)(function(){var e,t=0,r=0,n=0,i=(0,t6.sum)((null==a?void 0:a.swaps.map(function(e){return e.difference_due}))||[0]);return(null==a?void 0:null===(e=a.refunds)||void 0===e?void 0:e.length)&&a.refunds.forEach(function(e){("other"===e.reason||"discount"===e.reason)&&(t+=e.amount),"return"===e.reason&&(n+=e.amount),"swap"===e.reason&&(r+=e.amount)}),{hasMovements:i+t+r+n!==0,swapAmount:i,manualRefund:t,swapRefund:r,returnRefund:n}},[a]),w=j.hasMovements,O=j.swapAmount,S=j.manualRefund,P=j.swapRefund,C=j.returnRefund,A=(0,U.useMemo)(function(){var e=[];return m("order_editing")&&e.push({label:l("detail-cards-edit-order","Edit Order"),onClick:f}),m("inventoryService")&&!x&&e.push({label:l("detail-cards-allocate","Allocate"),onClick:u}),e},[f,m,u,x]),N=!["canceled","archived"].includes(a.status);return(0,z.jsxs)(eD,{className:"h-auto min-h-0 w-full",title:"Summary",status:m("inventoryService")&&Array.isArray(o)&&(0,z.jsx)(tv.A,{onClick:x||!N?void 0:u,variant:x||!N?"success":"danger",title:x||!N?l("detail-cards-allocated","Allocated"):l("detail-cards-not-fully-allocated","Not fully allocated"),className:"rounded-rounded border px-3 py-1.5"}),actionables:A,children:[(0,z.jsxs)("div",{className:"mt-6",children:[null===(r=a.items)||void 0===r?void 0:r.map(function(e,t){return(0,z.jsx)(vV,{item:e,currencyCode:a.currency_code,reservations:g[e.id],isAllocatable:N},t)}),(0,z.jsx)(rx,{currency:a.currency_code,totalAmount:a.subtotal,totalTitle:l("detail-cards-subtotal","Subtotal")}),null==a?void 0:null===(n=a.discounts)||void 0===n?void 0:n.map(function(e,t){return(0,z.jsx)(rx,{currency:a.currency_code,totalAmount:-1*a.discount_total,totalTitle:(0,z.jsxs)("div",{className:"inter-small-regular text-grey-90 flex items-center",children:[l("detail-cards-discount","Discount:")," ",(0,z.jsx)(rk.A,{className:"ml-3",variant:"default",children:e.code})]})},t)}),null==a?void 0:null===(i=a.gift_card_transactions)||void 0===i?void 0:i.map(function(e,t){return(0,z.jsx)(rx,{currency:a.currency_code,totalAmount:-1*e.amount,totalTitle:(0,z.jsxs)("div",{className:"inter-small-regular text-grey-90 flex items-center",children:["Gift card:",(0,z.jsx)(rk.A,{className:"ml-3",variant:"default",children:e.gift_card.code}),(0,z.jsx)("div",{className:"ml-2",children:(0,z.jsx)(hf,{value:e.gift_card.code,showValue:!1,iconSize:16})})]})},t)}),(0,z.jsx)(rx,{currency:a.currency_code,totalAmount:a.shipping_total,totalTitle:l("detail-cards-shipping","Shipping")}),(0,z.jsx)(rx,{currency:a.currency_code,totalAmount:a.tax_total,totalTitle:l("detail-cards-tax","Tax")}),(0,z.jsx)(rx,{variant:"large",currency:a.currency_code,totalAmount:a.total,totalTitle:w?l("detail-cards-original-total","Original Total"):l("detail-cards-total","Total")}),(0,z.jsx)(rw,{manualRefund:S,swapAmount:O,swapRefund:P,returnRefund:C,paidTotal:a.paid_total,refundedTotal:a.refunded_total,currency:a.currency_code})]}),c&&(0,z.jsx)(vQ,{reservationItemsMap:g,items:a.items,close:d})]})},v2=function(e){var t,r,n=e.orderId,i=e.email,a=e.handleClose,o=(0,ei.Bd)().t,l=(0,J.useAdminUpdateOrder)(n),s=l.mutate,c=l.isLoading,u=(0,eR.mN)({defaultValues:{email:i}}),d=u.register,f=u.handleSubmit,p=(0,eC.A)();return(0,z.jsx)(eN.A,{handleClose:a,isLargeModal:!0,children:(0,z.jsx)("form",{onSubmit:f(function(e){return s({email:e.email},{onSuccess:function(){p(o("details-success","Success"),o("details-successfully-updated-the-email-address","Successfully updated the email address"),"success"),a()},onError:function(e){return p("Error",(0,eA.u)(e),"error")}})}),children:(0,z.jsxs)(eN.A.Body,{children:[(0,z.jsx)(eN.A.Header,{handleClose:a,children:(0,z.jsx)("span",{className:"inter-xlarge-semibold",children:o("details-email-address","Email Address")})}),(0,z.jsx)(eN.A.Content,{children:(0,z.jsx)("div",{className:"space-y-4",children:(0,z.jsx)("div",{className:"mt-4 flex space-x-4",children:(0,z.jsx)(e1.A,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({label:o("details-email","Email")},d("email")),r=r={placeholder:o("details-email","Email")},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))})})}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"flex h-8 w-full justify-end",children:[(0,z.jsx)(W.A,{variant:"ghost",className:"text-small mr-2 w-32 justify-center",size:"large",type:"button",onClick:a,children:o("details-cancel","Cancel")}),(0,z.jsx)(W.A,{size:"large",className:"text-small w-32 justify-center",variant:"primary",loading:c,disabled:c,type:"submit",children:o("details-save","Save")})]})})]})})})};function v3(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function v5(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function v6(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return v3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v3(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}let v4=function(e){var t=e.orderId,r=e.fulfillment,n=e.handleCancel,i=(0,ei.Bd)().t,a=(0,eR.mN)({defaultValues:{tracking_numbers:[{value:""}]},shouldUnregister:!0}),o=a.control,l=a.watch,s=a.handleSubmit,c=v6((0,U.useState)(!1),2),u=c[0],d=c[1],f=(0,eR.jz)({control:o,name:"tracking_numbers"}),p=f.fields,m=f.append,h=f.remove,y=l("tracking_numbers"),b=p.map(function(e,t){return v5({},e,y[t])}),v=(0,J.useAdminCreateShipment)(t),g=(0,J.useAdminCreateSwapShipment)(t),x=(0,J.useAdminCreateClaimShipment)(t),j=v.isLoading||g.isLoading||x.isLoading,w=(0,eC.A)();return(0,z.jsx)(eN.A,{handleClose:n,isLargeModal:!0,children:(0,z.jsx)("form",{onSubmit:s(function(e){var t,a=r.claim_order_id||r.swap_id||r.order_id,o=v6(a.split("_"),1)[0],l=e.tracking_numbers.map(function(e){return e.value}),s=v,c=i("mark-shipped-successfully-marked-order-as-shipped","Successfully marked order as shipped");switch(o){case"swap":s=g,t={fulfillment_id:r.id,swap_id:a,tracking_numbers:l,no_notification:u},c=i("mark-shipped-successfully-marked-swap-as-shipped","Successfully marked swap as shipped");break;case"claim":s=x,t={fulfillment_id:r.id,claim_id:a,tracking_numbers:l},c=i("mark-shipped-successfully-marked-claim-as-shipped","Successfully marked claim as shipped");break;default:t={fulfillment_id:r.id,tracking_numbers:l,no_notification:u}}s.mutate(t,{onSuccess:function(){w(i("mark-shipped-success","Success"),c,"success"),n()},onError:function(e){return w(i("mark-shipped-error","Error"),(0,eA.u)(e),"error")}})},function(e){console.log(e)}),children:(0,z.jsxs)(eN.A.Body,{children:[(0,z.jsx)(eN.A.Header,{handleClose:n,children:(0,z.jsx)("span",{className:"inter-xlarge-semibold",children:i("mark-shipped-mark-fulfillment-shipped","Mark Fulfillment Shipped")})}),(0,z.jsxs)(eN.A.Content,{children:[(0,z.jsxs)("div",{className:"flex flex-col",children:[(0,z.jsx)("span",{className:"inter-base-semibold mb-2",children:i("mark-shipped-tracking","Tracking")}),(0,z.jsx)("div",{className:"flex flex-col space-y-2",children:b.map(function(e,t){return(0,z.jsx)(eR.xI,{name:"tracking_numbers.".concat(t,".value"),control:o,rules:{shouldUnregister:!0},render:function(e){var r,n,a=e.field;return(0,z.jsx)(e1.A,(r=v5({deletable:0!==t,label:0===t?i("mark-shipped-tracking-number-label","Tracking number"):"",type:"text",placeholder:i("mark-shipped-tracking-number","Tracking number...")},a),n=n={onDelete:function(){return h(t)}},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))}),r))}},e.id)})})]}),(0,z.jsx)("div",{className:"mt-4 flex w-full justify-end",children:(0,z.jsx)(W.A,{size:"small",onClick:function(){return m({value:void 0})},variant:"secondary",disabled:b.some(function(e){return!e.value}),children:i("mark-shipped-add-additional-tracking-number","+ Add Additional Tracking Number")})})]}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"flex h-8 w-full justify-between",children:[(0,z.jsxs)("div",{className:"flex h-full cursor-pointer items-center",onClick:function(){return d(!u)},children:[(0,z.jsx)("div",{className:"text-grey-0 border-grey-30 rounded-base flex h-5 w-5 justify-center border ".concat(!u&&"bg-violet-60"),children:(0,z.jsx)("span",{className:"self-center",children:!u&&(0,z.jsx)(e7,{size:16})})}),(0,z.jsx)("input",{id:"noNotification",className:"hidden",name:"noNotification",checked:!u,type:"checkbox"}),(0,z.jsxs)("span",{className:"text-grey-90 gap-x-xsmall ml-3 flex items-center",children:[i("mark-shipped-send-notifications","Send notifications"),(0,z.jsx)(e0.A,{content:""})]})]}),(0,z.jsxs)("div",{className:"flex",children:[(0,z.jsx)(W.A,{variant:"ghost",className:"text-small mr-2 w-32 justify-center",size:"large",onClick:n,type:"button",children:i("mark-shipped-cancel","Cancel")}),(0,z.jsx)(W.A,{size:"large",className:"text-small w-32 justify-center",variant:"primary",type:"submit",loading:j,disabled:j,children:i("mark-shipped-complete","Complete")})]})]})})]})})})};function v8(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function v7(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function v9(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return v8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v8(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ge=function(e){if(!e)return[];var t,r,n=[];return e.fulfillments.forEach(function(e,t){n.push({title:"Fulfillment #".concat(t+1),type:"default",fulfillment:e})}),(null===(t=e.claims)||void 0===t?void 0:t.length)&&e.claims.forEach(function(e){"not_fulfilled"!==e.fulfillment_status&&e.fulfillments.forEach(function(t,r){n.push({title:"Claim fulfillment #".concat(r+1),type:"claim",fulfillment:t,claim:e})})}),(null===(r=e.swaps)||void 0===r?void 0:r.length)&&e.swaps.forEach(function(e){"not_fulfilled"!==e.fulfillment_status&&e.fulfillments.forEach(function(t,r){n.push({title:"Swap fulfillment #".concat(r+1),type:"swap",fulfillment:t,swap:e})})}),n};let gt=function(){var e,t,r,n,i,a,o=(0,H.useParams)().id,l=(0,ei.Bd)().t,s=rL(),c=v9((0,U.useState)(null),2),u=c[0],d=c[1],f=v9((0,U.useState)(null),2),p=f[0],m=f[1],y=(0,n5.A)(),b=y.state,v=y.toggle,g=v9((0,U.useState)(!1),2),x=g[0],j=g[1],w=v9((0,U.useState)(!1),2),O=w[0],S=w[1],P=v9((0,U.useState)(null),2),C=P[0],A=P[1],N=(0,J.useAdminOrder)(o),k=N.order,_=N.isLoading,E=(0,J.useAdminCapturePayment)(o),I=(0,J.useAdminCancelOrder)(o),D=(0,n5.A)(),T=D.state,M=D.close,R=D.open,L=(0,J.useAdminUpdateOrder)(o).mutate,F=(0,J.useAdminRegion)(null==k?void 0:k.region_id,{enabled:!!(null==k?void 0:k.region_id)}).region,B=(0,rz.u)().isFeatureEnabled,V=(0,U.useMemo)(function(){return B("inventoryService")},[B]),G=(0,J.useAdminReservations)({line_item_id:null==k?void 0:k.items.map(function(e){return e.id})},{enabled:V}),$=G.reservations,Q=G.refetch;(0,U.useEffect)(function(){V&&Q()},[V,Q]);var K=(0,H.useNavigate)(),Z=(0,eC.A)(),ee=v9(ex("".concat(null==k?void 0:k.display_id),{successDuration:5500,onCopied:function(){return Z(l("details-success","Success"),l("details-order-id-copied","Order ID copied"),"success")}}),2)[1],et=v9(ex(null==k?void 0:k.email,{successDuration:5500,onCopied:function(){return Z(l("details-success","Success"),l("details-email-copied","Email copied"),"success")}}),2)[1];(0,q.vC)("esc",function(){return K("/a/orders")}),(0,q.vC)("command+i",ee);var er=(0,tY.X)().getWidgets,en=(e=function(){return function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,function(e){switch(e.label){case 0:return[4,s({heading:l("details-cancel-order-heading","Cancel order"),text:l("details-are-you-sure-you-want-to-cancel-the-order","Are you sure you want to cancel the order?"),extraConfirmation:!0,entityName:l("order-details-display-id","order #{{display_id}}",{display_id:k.display_id})})];case 1:if(!e.sent())return[2];return[2,I.mutate(void 0,{onSuccess:function(){return Z(l("details-success","Success"),l("details-successfully-canceled-order","Successfully canceled order"),"success")},onError:function(e){return Z(l("details-error","Error"),(0,eA.u)(e),"error")}})]}})},t=function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function o(e){v7(a,n,i,o,l,"next",e)}function l(e){v7(a,n,i,o,l,"throw",e)}o(void 0)})},function(){return t.apply(this,arguments)}),ea=ge(k),ec=[{label:l("details-go-to-customer","Go to Customer"),icon:(0,z.jsx)(t7,{size:"20"}),onClick:function(){return K("/a/customers/".concat(null==k?void 0:k.customer.id))}},{label:l("details-transfer-ownership","Transfer ownership"),icon:(0,z.jsx)(Y.A,{size:"20"}),onClick:function(){return v()}}];if(ec.push({label:l("details-edit-shipping-address","Edit Shipping Address"),icon:(0,z.jsx)(hn,{size:"20"}),onClick:function(){d({address:null==k?void 0:k.shipping_address,type:h.SHIPPING}),R()}}),ec.push({label:l("details-edit-billing-address","Edit Billing Address"),icon:(0,z.jsx)(c5,{size:"20"}),onClick:function(){d({address:null==k?void 0:k.billing_address,type:h.BILLING}),R()}}),(null==k?void 0:k.email)&&ec.push({label:l("details-edit-email-address","Edit Email Address"),icon:(0,z.jsx)(hr,{size:"20"}),onClick:function(){m({email:null==k?void 0:k.email})}}),!k&&_)return(0,z.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,z.jsx)(X.A,{size:"small",variant:"secondary"})});k||_||K("/404");var eu=k.items.some(function(e){var t;return e.quantity>(null!==(t=e.fulfilled_quantity)&&void 0!==t?t:0)});return(0,z.jsx)("div",{children:(0,z.jsxs)(he,{orderId:o,children:[(0,z.jsx)(eo,{path:"/a/orders",label:l("details-back-to-orders","Back to Orders"),className:"mb-xsmall"}),_||!k?(0,z.jsx)(eD,{className:"pt-2xlarge flex w-full items-center justify-center",children:(0,z.jsx)(X.A,{size:"large",variant:"secondary"})}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{children:er("order.details.before").map(function(e,t){return(0,z.jsx)(es.A,{injectionZone:"order.details.before",widget:e,entity:k},t)})}),(0,z.jsxs)("div",{className:"flex space-x-4",children:[(0,z.jsxs)("div",{className:"gap-y-base flex h-full w-7/12 flex-col",children:[(0,z.jsx)(eD,{className:"min-h-[200px] w-full",customHeader:(0,z.jsx)(r9.A,{side:"top",content:"Copy ID",children:(0,z.jsxs)("button",{className:"inter-xlarge-semibold text-grey-90 active:text-violet-90 flex cursor-pointer items-center gap-x-2",onClick:ee,children:["#",k.display_id," ",(0,z.jsx)(ew,{size:16})]})}),subtitle:re()(k.created_at).format("D MMMM YYYY hh:mm a"),status:(0,z.jsx)(rS,{status:k.status}),forceDropdown:!0,actionables:[{label:l("details-cancel-order","Cancel Order"),icon:(0,z.jsx)(rI,{size:"20"}),variant:"danger",onClick:function(){return en()}}],children:(0,z.jsxs)("div",{className:"mt-6 flex space-x-6 divide-x",children:[(0,z.jsxs)("div",{className:"flex flex-col",children:[(0,z.jsx)("div",{className:"inter-smaller-regular text-grey-50 mb-1",children:l("details-email","Email")}),(0,z.jsxs)("button",{className:"text-grey-90 active:text-violet-90 flex cursor-pointer items-center gap-x-1",onClick:et,children:[k.email,(0,z.jsx)(ew,{size:12})]})]}),(0,z.jsxs)("div",{className:"flex flex-col pl-6",children:[(0,z.jsx)("div",{className:"inter-smaller-regular text-grey-50 mb-1",children:l("details-phone","Phone")}),(0,z.jsx)("div",{children:(null===(r=k.shipping_address)||void 0===r?void 0:r.phone)||"N/A"})]}),(0,z.jsxs)("div",{className:"flex flex-col pl-6",children:[(0,z.jsx)("div",{className:"inter-smaller-regular text-grey-50 mb-1",children:l("details-payment","Payment")}),(0,z.jsx)("div",{children:null===(n=k.payments)||void 0===n?void 0:n.map(function(e){return(0,t6.capitalize)(e.provider_id)}).join(", ")})]})]})}),(0,z.jsx)(v1,{order:k,reservations:$||[]}),(0,z.jsx)(eD,{className:"h-auto min-h-0 w-full",title:l("details-payment","Payment"),status:(0,z.jsx)(rP,{status:k.payment_status}),customActionable:(0,z.jsx)(rN,{order:k,capturePayment:E,showRefundMenu:function(){return S(!0)}}),children:(0,z.jsxs)("div",{className:"mt-6",children:[k.payments.map(function(e){return(0,z.jsxs)("div",{className:"flex flex-col",children:[(0,z.jsx)(rx,{currency:k.currency_code,totalAmount:e.amount,totalTitle:e.id,subtitle:"".concat(re()(e.created_at).format("DD MMM YYYY hh:mm"))}),!!e.amount_refunded&&(0,z.jsxs)("div",{className:"mt-4 flex justify-between",children:[(0,z.jsxs)("div",{className:"flex",children:[(0,z.jsx)("div",{className:"text-grey-40 mr-2",children:(0,z.jsx)(ht,{})}),(0,z.jsx)("div",{className:"inter-small-regular text-grey-90",children:l("details-refunded","Refunded")})]}),(0,z.jsxs)("div",{className:"flex",children:[(0,z.jsxs)("div",{className:"inter-small-regular text-grey-90 mr-3",children:["-",(0,rg.Q2)({amount:e.amount_refunded,currency:k.currency_code})]}),(0,z.jsx)("div",{className:"inter-small-regular text-grey-50",children:k.currency_code.toUpperCase()})]})]})]},e.id)}),(0,z.jsxs)("div",{className:"mt-4 flex justify-between",children:[(0,z.jsx)("div",{className:"inter-small-semibold text-grey-90",children:l("details-total-paid","Total Paid")}),(0,z.jsxs)("div",{className:"flex",children:[(0,z.jsx)("div",{className:"inter-small-semibold text-grey-90 mr-3",children:(0,rg.Q2)({amount:k.paid_total-k.refunded_total,currency:k.currency_code})}),(0,z.jsx)("div",{className:"inter-small-regular text-grey-50",children:k.currency_code.toUpperCase()})]})]})]})}),(0,z.jsx)(eD,{className:"h-auto min-h-0 w-full",title:l("details-fulfillment","Fulfillment"),status:(0,z.jsx)(rC,{status:k.fulfillment_status}),customActionable:"canceled"!==k.status&&eu&&(0,z.jsx)(W.A,{variant:"secondary",size:"small",onClick:function(){return j(!0)},children:l("details-create-fulfillment","Create Fulfillment")}),children:(0,z.jsxs)("div",{className:"mt-6",children:[k.shipping_methods.map(function(e){var t;return(0,z.jsxs)("div",{className:"flex flex-col",children:[(0,z.jsx)("span",{className:"inter-small-regular text-grey-50",children:l("details-shipping-method","Shipping Method")}),(0,z.jsx)("span",{className:"inter-small-regular text-grey-90 mt-2",children:(null==e?void 0:null===(t=e.shipping_option)||void 0===t?void 0:t.name)||""}),(0,z.jsx)("div",{className:"mt-4 flex w-full flex-grow items-center",children:(0,z.jsx)(eP,{data:null==e?void 0:e.data})})]},e.id)}),(0,z.jsx)("div",{className:"inter-small-regular mt-6 ",children:ea.map(function(e,t){return(0,z.jsx)(rq,{order:k,fulfillmentObj:e,setFullfilmentToShip:A},t)})})]})}),(0,z.jsx)(eD,{className:"h-auto min-h-0 w-full",title:l("details-customer","Customer"),actionables:ec,children:(0,z.jsxs)("div",{className:"mt-6",children:[(0,z.jsxs)("div",{className:"flex w-full items-center space-x-4",children:[(0,z.jsx)("div",{className:"flex h-[40px] w-[40px] ",children:(0,z.jsx)(rr.A,{user:k.customer,font:"inter-large-semibold",color:"bg-fuschia-40"})}),(0,z.jsxs)("div",{children:[(0,z.jsx)("h1",{className:"inter-large-semibold text-grey-90",children:vo(k)}),k.shipping_address&&(0,z.jsxs)("span",{className:"inter-small-regular text-grey-50",children:[k.shipping_address.city,","," ",uw[null===(i=k.shipping_address.country_code)||void 0===i?void 0:i.toUpperCase()]]})]})]}),(0,z.jsxs)("div",{className:"mt-6 flex space-x-6 divide-x",children:[(0,z.jsxs)("div",{className:"flex flex-col",children:[(0,z.jsx)("div",{className:"inter-small-regular text-grey-50 mb-1",children:l("details-contact","Contact")}),(0,z.jsxs)("div",{className:"inter-small-regular flex flex-col",children:[(0,z.jsx)("span",{children:k.email}),(0,z.jsx)("span",{children:(null===(a=k.shipping_address)||void 0===a?void 0:a.phone)||""})]})]}),(0,z.jsx)(rO,{title:l("details-shipping","Shipping"),addr:k.shipping_address}),(0,z.jsx)(rO,{title:l("details-billing","Billing"),addr:k.billing_address})]})]})}),(0,z.jsx)("div",{children:er("order.details.after").map(function(e,t){return(0,z.jsx)(es.A,{injectionZone:"order.details.after",widget:e,entity:k},t)})}),(0,z.jsx)(eT,{data:k,title:l("details-raw-order","Raw order")}),(0,z.jsx)(el,{})]}),(0,z.jsx)(va,{orderId:k.id})]}),(0,z.jsx)(vF,{onClose:M,open:T,onSave:L,address:(null==u?void 0:u.address)||void 0,type:null==u?void 0:u.type,allowedCountries:null==F?void 0:F.countries}),p&&(0,z.jsx)(v2,{handleClose:function(){return m(null)},email:p.email,orderId:k.id}),x&&(0,z.jsx)(y6,{orderToFulfill:k,handleCancel:function(){return j(!1)},orderId:k.id,onComplete:V?Q:function(){}}),O&&(0,z.jsx)(b0,{order:k,onDismiss:function(){return S(!1)}}),b&&(0,z.jsx)(nu,{order:k,onDismiss:v}),C&&(0,z.jsx)(v4,{handleCancel:function(){return A(null)},fulfillment:C,orderId:k.id}),(0,z.jsx)(m9.Consumer,{children:function(e){return e.isModalVisible&&(0,z.jsx)(vk,{order:k})}})]})]})})};function gr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var gn=["orders","drafts"],gi=function(){var e,t="orders",r=(0,ei.Bd)().t,n=(0,m4.nm)().resetInterval,i=(0,H.useNavigate)(),a=(0,J.useAdminCreateBatchJob)(),o=(0,eC.A)(),l=function(e){if(Array.isArray(e))return e}(e=(0,U.useState)())||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,2)||function(e,t){if(e){if("string"==typeof e)return gr(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gr(e,2)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),s=l[0],c=l[1],u=(0,n5.A)(!1),d=u.open,f=u.close,p=u.state,m=(0,tY.X)().getWidgets,h=(0,U.useMemo)(function(){return[(0,z.jsxs)(W.A,{variant:"secondary",size:"small",onClick:function(){return d()},children:[(0,z.jsx)(mP,{size:20}),"Export Orders"]},"export")]},[t]);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("div",{className:"gap-y-xsmall flex h-full grow flex-col",children:[m("order.list.before").map(function(e,t){return(0,z.jsx)(es.A,{injectionZone:"order.list.before",widget:e,entity:void 0},t)}),(0,z.jsx)("div",{className:"flex w-full grow flex-col",children:(0,z.jsx)(eD,{customHeader:(0,z.jsx)(n6,{views:gn,setActiveView:function(e){"drafts"===e&&i("/a/draft-orders")},activeView:t}),className:"h-fit",customActionable:h,children:(0,z.jsx)(m6,{setContextFilters:c})})}),m("order.list.after").map(function(e,t){return(0,z.jsx)(es.A,{injectionZone:"order.list.after",widget:e,entity:void 0},t)}),(0,z.jsx)(el,{})]}),p&&(0,z.jsx)(mC,{title:r("orders-export-orders","Export Orders"),handleClose:function(){return f()},onSubmit:function(){var e={dry_run:!1,type:"order-export",context:s?function(e){var t,r={filterable_fields:{fulfillment_status:e.fulfillment.filter,payment_status:e.payment.filter,region_id:e.region.filter,status:e.status.filter,created_at:Object.keys(e.date.filter||{}).reduce(function(t,r){return t[r]=new Date(1e3*Number(e.date.filter[r])).toISOString(),t},{})}};for(var n in r.filterable_fields)(null===r.filterable_fields[n]||(null===(t=r.filterable_fields[n])||void 0===t?void 0:t.length)===0)&&delete r.filterable_fields[n];return r}(s):{}};a.mutate(e,{onSuccess:function(){n(),o(r("orders-success","Success"),r("orders-successfully-initiated-export","Successfully initiated export"),"success")},onError:function(e){o(r("orders-error","Error"),(0,eA.u)(e),"error")}}),f()},loading:a.isLoading})]})};let ga=function(){var e=(0,(0,V.Y)().getNestedRoutes)("/products");return(0,z.jsxs)(H.Routes,{children:[(0,z.jsx)(H.Route,{index:!0,element:(0,z.jsx)(gi,{})}),(0,z.jsx)(H.Route,{path:"/:id",element:(0,z.jsx)(gt,{})}),e.map(function(e,t){return(0,z.jsx)(H.Route,{path:e.path,element:(0,z.jsx)(Z,{route:e,previousPath:"/orders"})},t)})]})};function go(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function gl(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}let gs=function(){var e=(0,ei.Bd)().t;return[(0,U.useMemo)(function(){return[{Header:e("draft-order-table-draft","Draft"),accessor:"display_id",Cell:function(e){var t=e.cell,r=t.value,n=t.getCellProps;return(0,z.jsx)(td.Cell,gl(go({},n()),{className:"pl-2",children:"#".concat(r)}))}},{Header:e("draft-order-table-order","Order"),accessor:"order",Cell:function(e){var t=e.cell,r=t.value,n=t.getCellProps;return(0,z.jsx)(td.Cell,gl(go({},n()),{children:(null==r?void 0:r.display_id)?"#".concat(null==r?void 0:r.display_id):"-"}))}},{Header:e("draft-order-table-date-added","Date added"),accessor:"created_at",Cell:function(e){var t=e.cell,r=t.value,n=t.getCellProps;return(0,z.jsx)(td.Cell,gl(go({},n()),{children:re()(r).format("DD MMM YYYY")}))}},{Header:e("draft-order-table-customer","Customer"),accessor:"cart",Cell:function(e){var t=e.row,r=e.cell,n=r.value,i=r.getCellProps;return(0,z.jsx)(td.Cell,gl(go({},i()),{children:(0,z.jsx)(rn,{customer:{first_name:(null==n?void 0:n.first_name)||"",last_name:(null==n?void 0:n.last_name)||"",email:n.email},color:rt(t.index)})}))}},{Header:e("draft-order-table-status","Status"),accessor:"status",Cell:function(t){var r=t.cell,n=r.value,i=r.getCellProps;return(0,z.jsx)(td.Cell,gl(go({},i()),{className:"pr-2",children:"completed"===n?(0,z.jsx)(tv.A,{variant:"success",title:e("draft-order-table-completed","Completed")}):(0,z.jsx)(tv.A,{variant:"primary",title:e("draft-order-table-open","Open")})}))}}]},[])]};function gc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function gu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function gd(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function gf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return gc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gc(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var gp=["q","offset","limit"],gm=function(e,t){switch(t.type){case"setFilters":var r;return gd(gu({},e),{query:null==t?void 0:null===(r=t.payload)||void 0===r?void 0:r.query});case"setQuery":return gd(gu({},e),{offset:0,query:t.payload});case"setOffset":return gd(gu({},e),{offset:t.payload});case"reset":return t.payload;default:return e}},gh=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e&&"?"===e[0]&&(e=e.substring(1));var r=(0,U.useMemo)(function(){return gy(e,t)},[e,t]),n=gf((0,U.useReducer)(gm,r),2),i=n[0],a=n[1],o=function(){var e=gu({},i.additionalFilters),t=!0,r=!1,n=void 0;try{for(var a,o=Object.entries(i)[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var l=gf(a.value,2),s=l[0],c=l[1];"query"===s?c&&"string"==typeof c&&(e.q=c):("offset"===s||"limit"===s)&&(e[s]=c)}}catch(e){r=!0,n=e}finally{try{t||null==o.return||o.return()}finally{if(r)throw n}}return e},l=function(e){var t=null!=e?e:i,r={},n=!0,a=!1,o=void 0;try{for(var l,s=Object.entries(t)[Symbol.iterator]();!(n=(l=s.next()).done);n=!0){var c=gf(l.value,2),u=c[0],d=c[1];"query"===u?d&&"string"==typeof d&&(r.q=d):("offset"===u||"limit"===u)&&(r[u]=d)}}catch(e){a=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(a)throw o}}return r},s=function(){var e=l();return t8().stringify(e,{skipNulls:!0})},c=(0,U.useMemo)(function(){return o()},[i]),u=(0,U.useMemo)(function(){return l()},[i]),d=(0,U.useMemo)(function(){return s()},[i]);return gd(gu({},i),{filters:gu({},i),representationObject:u,representationString:d,queryObject:c,paginate:function(e){e>0?a({type:"setOffset",payload:i.offset+i.limit}):a({type:"setOffset",payload:Math.max(i.offset-i.limit,0)})},getQueryObject:o,getQueryString:function(){var e=o();return t8().stringify(e,{skipNulls:!0})},setQuery:function(e){a({type:"setQuery",payload:e})},setFilters:function(e){a({type:"setFilters",payload:e})},setDefaultFilters:function(e){a({type:"setDefaults",payload:e})},reset:function(){a({type:"setFilters",payload:gd(gu({},i),{offset:0,query:null})})}})},gy=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r={offset:0,limit:15,additionalFilters:t};if(e){var n=t8().parse(e),i=!0,a=!1,o=void 0;try{for(var l,s=Object.entries(n)[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=gf(l.value,2),u=c[0],d=c[1];if(gp.includes(u))switch(u){case"offset":"string"==typeof d&&(r.offset=parseInt(d));break;case"limit":"string"==typeof d&&(r.limit=parseInt(d));break;case"q":"string"==typeof d&&(r.query=d)}}}catch(e){a=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}}return r};function gb(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function gv(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function gg(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function gx(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return gb(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gb(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}let gj=function(){var e=(0,H.useLocation)(),t=(0,ei.Bd)().t,r=gh(e.search,{}),n=r.reset,i=r.paginate,a=r.setQuery,o=r.queryObject,l=parseInt(null==o?void 0:o.offset)||0,s=parseInt(null==o?void 0:o.limit)||15,c=gx((0,U.useState)(null==o?void 0:o.query),2),u=c[0],d=c[1],f=gx((0,U.useState)(0),2),p=f[0],m=f[1],h=(0,J.useAdminDraftOrders)(o,{keepPreviousData:!0}),y=h.draft_orders,b=h.isLoading,v=h.isRefetching,g=h.count;(0,U.useEffect)(function(){m(Math.ceil(g/o.limit))},[g,o]);var x=gx(gs(),1)[0],j=(0,e4.useTable)({columns:x,data:y||[],manualPagination:!0,initialState:{pageSize:s,pageIndex:l/s},pageCount:p,autoResetPage:!1},e4.usePagination),w=j.getTableProps,O=j.getTableBodyProps,S=j.headerGroups,P=j.rows,C=j.prepareRow,A=j.canPreviousPage,N=j.canNextPage,k=j.pageCount,_=j.gotoPage,E=j.nextPage,I=j.previousPage,D=j.state.pageIndex;return(0,U.useEffect)(function(){var e=setTimeout(function(){u?(a(u),_(0)):n()},400);return function(){return clearTimeout(e)}},[u]),(0,z.jsx)(tb,{hasPagination:!0,numberOfRows:15,pagingState:{count:g,offset:o.offset,pageSize:o.offset+P.length,title:t("draft-order-table-draft-orders","Draft Orders"),currentPage:D+1,pageCount:k,nextPage:function(){N&&(i(1),E())},prevPage:function(){A&&(i(-1),I())},hasNext:N,hasPrev:A},isLoading:b||v,children:(0,z.jsxs)(td,gg(gv({filteringOptions:[],enableSearch:!0,handleSearch:d,searchValue:u},w()),{children:[(0,z.jsx)(td.Head,{children:null==S?void 0:S.map(function(e){return(0,z.jsx)(td.HeadRow,gg(gv({},e.getHeaderGroupProps()),{children:e.headers.map(function(e,t){return(0,z.jsx)(td.HeadCell,gg(gv({className:"w-[100px]"},e.getHeaderProps()),{children:e.render("Header",{customIndex:t})}))})}))})}),(0,z.jsx)(td.Body,gg(gv({},O()),{children:P.map(function(e){return C(e),(0,z.jsx)(td.Row,gg(gv({color:"inherit",linkTo:"/a/draft-orders/".concat(e.original.id)},e.getRowProps()),{children:e.cells.map(function(e,t){return(0,z.jsx)(U.Fragment,{children:e.render("Cell")},t)})}))})}))]}))})};function gw(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}var gO=(0,U.createContext)(null),gS=function(){var e=(0,U.useContext)(gO),t=(0,eR.xW)(),r=(0,ei.Bd)().t;if(!e)throw Error(r("form-use-new-order-form-must-be-used-within-new-order-form-provider","useNewOrderForm must be used within NewOrderFormProvider"));return{context:e,form:t}};let gP=function(e){var t,r,n=e.children,i=(0,eR.mN)({defaultValues:{items:[],billing_address:void 0,shipping_address:void 0}}),a=(0,eR.jz)({control:i.control,name:"items"}),o=(0,eR.FH)({control:i.control,name:"region"}),l=(0,J.useAdminRegion)(null==o?void 0:o.value,{enabled:!!o}).region,s=(0,eR.FH)({control:i.control,name:"shipping_option"}),c=(0,J.useAdminShippingOption)(null==s?void 0:s.value,{enabled:!!(null==s?void 0:s.value)}).shipping_option;(0,U.useEffect)(function(){s&&(i.resetField("shipping_option"),i.resetField("custom_shipping_price"))},[o]);var u=(0,U.useMemo)(function(){return l?l.countries.map(function(e){return{label:e.display_name,value:e.iso_2}}):[]},[l]),d=(0,J.useMedusa)().client;(0,U.useEffect)(function(){var e,t;(e=function(){var e,t,r;return function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,function(n){switch(n.label){case 0:if(!a.fields.length)return[3,2];return e=a.fields.reduce(function(e,t){return t.variant_id&&(e[t.variant_id]=t),e},{}),t=a.fields.map(function(e){return e.variant_id}).filter(Boolean),[4,d.admin.variants.list({id:t,region_id:null==l?void 0:l.id})];case 1:r=n.sent().variants,a.replace(r.map(function(t){var r,n;return{quantity:e[t.id].quantity,variant_id:t.id,title:t.title,unit_price:(0,rg.RU)(t,l,!1),product_title:null===(r=t.product)||void 0===r?void 0:r.title,thumbnail:null===(n=t.product)||void 0===n?void 0:n.thumbnail}})),n.label=2;case 2:return[2]}})},t=function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function o(e){gw(a,n,i,o,l,"next",e)}function l(e){gw(a,n,i,o,l,"throw",e)}o(void 0)})},function(){return t.apply(this,arguments)})()},[l]);var f=(0,J.useAdminShippingOptions)({region_id:null==l?void 0:l.id,is_return:!1},{enabled:!!l}).shipping_options,p=(0,U.useMemo)(function(){if(!f)return[];var e=a.fields.reduce(function(e,t){return e+t.quantity*t.unit_price},0);return f.reduce(function(t,r){if(r.requirements){var n=r.requirements.find(function(e){return"min_subtotal"===e.type}),i=r.requirements.find(function(e){return"max_subtotal"===e.type});if(n&&e<=n.amount||i&&e>=i.amount)return t}return t.push(r),t},[])},[f,a]);return(0,z.jsx)(gO.Provider,{value:{validCountries:u,region:l,selectedShippingOption:c,items:a,shippingOptions:p},children:(0,z.jsx)(eR.Op,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},i),r=r={children:n},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))})};var gC=r(94225);let gA=function(e){return!e||Object.values(e).every(function(e){return null==e||""===e})},gN=function(){var e,t,r=(0,ei.Bd)().t,n=gS(),i=n.context.validCountries,a=n.form,o=(0,eR.FH)({control:a.control,name:"shipping_address"}),l=(0,eR.FH)({control:a.control,name:"shipping_address_id"}),s=(0,eR.FH)({control:a.control,name:"same_as_shipping"});return(0,z.jsxs)("div",{className:"min-h-[705px]",children:[(0,z.jsx)("span",{className:"inter-base-semibold",children:r("components-billing-address","Billing Address")}),!gA(o)||l?(0,z.jsxs)("div",{className:"mt-4 mb-6 flex cursor-pointer items-center",onClick:function(){s?(a.resetField("billing_address"),a.resetField("billing_address_id")):(a.setValue("billing_address",o),a.setValue("billing_address_id",l)),a.setValue("same_as_shipping",!s)},children:[(0,z.jsx)("div",{className:"text-grey-0 border-grey-30 rounded-base flex h-5 w-5 justify-center border ".concat(s&&"bg-violet-60"),children:(0,z.jsx)("span",{className:"self-center",children:s&&(0,z.jsx)(e7,{size:16})})}),(0,z.jsx)("input",(e=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({className:"hidden",type:"checkbox"},a.register("same_as_shipping")),t=t={tabIndex:-1},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e)),(0,z.jsx)("span",{className:"text-grey-90 ml-3",children:r("components-use-same-as-shipping","Use same as shipping")})]}):null,(0,z.jsx)("div",{className:(0,en.default)({"pointer-events-none opacity-50":s}),tabIndex:s?-1:void 0,children:(0,z.jsx)(hB,{countryOptions:i,form:(0,eL.m)(a,"billing_address"),type:h.BILLING})})]})};function gk(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function g_(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function gE(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}let gI=function(e){var t,r=e.onSubmit,n=e.region,i=(0,ei.Bd)().t,a=function(e){if(Array.isArray(e))return e}(t=(0,U.useState)(0))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(t,2)||function(e,t){if(e){if("string"==typeof e)return gk(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gk(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),o=a[0],l=a[1],s=(0,U.useContext)(a7.H8).pop,c=(0,eR.mN)(),u=c.register,d=c.handleSubmit;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(eN.A.Content,{children:(0,z.jsxs)("div",{className:"gap-y-xsmall min-h-[705px]",children:[(0,z.jsx)(e1.A,gE(g_({placeholder:i("components-e-g-gift-wrapping","E.g. Gift wrapping"),label:i("components-title","Title")},u("title",{required:!0})),{className:"my-4",required:!0})),(0,z.jsx)(cW.Root,{currentCurrency:n.currency_code,size:"small",readOnly:!0,children:(0,z.jsx)(cW.Amount,{required:!0,label:i("components-price","Price"),amount:o,onChange:function(e){return l(e||0)}})}),(0,z.jsx)(e1.A,gE(g_({className:"my-4",label:i("components-quantity","Quantity")},u("quantity",{required:!0})),{type:"number",required:!0}))]})}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"gap-x-xsmall flex w-full justify-end",children:[(0,z.jsx)(W.A,{variant:"ghost",size:"small",className:"w-[112px]",onClick:function(){return s()},children:i("components-back","Back")}),(0,z.jsx)(W.A,{variant:"primary",className:"w-[112px]",size:"small",onClick:d(function(e){r(e.title,e.quantity,o),s()}),children:i("components-add","Add")})]})})]})};function gD(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function gT(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function gM(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function gR(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function gL(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return gD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gD(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}let gz=function(){var e,t,r=(0,ei.Bd)().t,n=U.useContext(gC.x1),i=n.enableNextPage,a=n.disableNextPage,o=n.nextStepEnabled,l=gS(),s=l.context,c=s.region,u=s.items,d=l.form,f=d.control,p=d.register,m=d.setValue,h=(0,J.useMedusa)().client,y=u.fields,b=u.append,v=u.remove,g=u.update,x=gL((0,U.useState)(-1),2),j=x[0],w=x[1],O=gL((0,U.useState)(-1),2),S=O[0],P=O[1],C=(0,U.useContext)(a7.H8),A=(e=function(e){var t,r;return function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,function(n){switch(n.label){case 0:return t=y.map(function(e){return e.variant_id}),r=e.filter(function(e){return!t.includes(e.id)}).map(function(e){return e.id}),[4,h.admin.variants.list({id:r,region_id:null==c?void 0:c.id})];case 1:return b(n.sent().variants.map(function(e){var t,r;return{quantity:1,variant_id:e.id,title:e.title,unit_price:(0,rg.RU)(e,c,!1),product_title:null===(t=e.product)||void 0===t?void 0:t.title,thumbnail:null===(r=e.product)||void 0===r?void 0:r.thumbnail}})),o||i(),[2]}})},t=function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function o(e){gT(a,n,i,o,l,"next",e)}function l(e){gT(a,n,i,o,l,"throw",e)}o(void 0)})},function(e){return t.apply(this,arguments)}),N=function(e,t){var r=y[e];r.quantity=r.quantity+t,r.quantity>0&&g(e,r)},k=function(e,t,r){var n=(0,rg.bS)(r,t);m("items.".concat(e,".unit_price"),n)},_=function(e,t,r){b({title:e,unit_price:r,quantity:t}),o||i()},E=function(e){v(e),o&&u.fields.length<1&&a()};return(0,U.useEffect)(function(){u.fields.length?i():a()},[]),(0,z.jsxs)("div",{className:"flex min-h-[705px] flex-col pt-4",children:[(0,z.jsx)("span",{className:"inter-base-semibold mb-4",children:r("components-items-for-the-order","Items for the order")}),y.length>0&&c&&(0,z.jsxs)(td,{children:[(0,z.jsx)(td.Head,{children:(0,z.jsxs)(td.HeadRow,{className:"text-grey-50 inter-small-semibold border-t",children:[(0,z.jsx)(td.HeadCell,{children:r("components-details","Details")}),(0,z.jsx)(td.HeadCell,{className:"pr-8 text-right",children:r("components-quantity","Quantity")}),(0,z.jsx)(td.HeadCell,{className:"text-right",children:r("components-price-excl-taxes","Price (excl. Taxes)")}),(0,z.jsx)(td.HeadCell,{})]})}),(0,z.jsx)(td.Body,{children:y.map(function(e,t){return(0,z.jsxs)(td.Row,{className:(0,en.default)("border-b-grey-0 hover:bg-grey-0"),children:[(0,z.jsx)(td.Cell,{children:(0,z.jsxs)("div",{className:"flex min-w-[240px] items-center py-2",children:[(0,z.jsx)("div",{className:"h-[40px] w-[30px] ",children:e.thumbnail?(0,z.jsx)("img",{className:"h-full w-full rounded object-cover",src:e.thumbnail}):(0,z.jsx)(nm,{})}),(0,z.jsxs)("div",{className:"inter-small-regular text-grey-50 ml-4 flex flex-col",children:[e.product_title&&(0,z.jsx)("span",{className:"text-grey-90",children:e.product_title}),(0,z.jsx)("span",{children:e.title})]})]})}),(0,z.jsx)(td.Cell,{className:"w-32 pr-8 text-right",children:j===t?(0,z.jsx)(e1.A,gR(gM({type:"number"},p("items.".concat(t,".quantity"),{valueAsNumber:!0})),{onBlur:function(){return w(-1)}})):(0,z.jsxs)("div",{className:"text-grey-50 flex w-full justify-end text-right ",children:[(0,z.jsx)("span",{onClick:function(){return N(t,-1)},className:"hover:bg-grey-20 mr-2 flex h-5 w-5 cursor-pointer items-center justify-center rounded",children:(0,z.jsx)(e9.A,{size:16})}),(0,z.jsx)("button",{type:"button",className:"hover:bg-grey-20 cursor-pointer rounded px-1",onClick:function(){return w(t)},children:(0,z.jsx)("input",gR(gM({type:"number"},p("items.".concat(t,".quantity"),{valueAsNumber:!0})),{className:"text-grey-90 w-full bg-transparent text-center",disabled:!0}))}),(0,z.jsx)("span",{onClick:function(){return N(t,1)},className:(0,en.default)("hover:bg-grey-20 ml-2 flex h-5 w-5 cursor-pointer items-center justify-center rounded"),children:(0,z.jsx)(n_.A,{size:16})})]})}),(0,z.jsx)(td.Cell,{className:"text-right",children:S===t?(0,z.jsx)(eR.xI,{control:f,name:"items.".concat(t,".unit_price"),render:function(e){var r=e.field.value;return(0,z.jsx)(e1.A,{type:"number",value:(0,rg.Pt)(c.currency_code,r),onBlur:function(){P(-1)},prefix:(0,rg.Qj)(c.currency_code),onChange:function(e){k(t,+e.target.value,c.currency_code)}})}}):(0,z.jsx)(eR.xI,{name:"items.".concat(t,".unit_price"),control:f,render:function(e){var r=e.field.value;return(0,z.jsx)("span",{className:"cursor-pointer",onClick:function(){P(t)},children:(0,rg.Pt)(c.currency_code,r)})}})}),(0,z.jsx)(td.Cell,{className:"text-grey-40 pr-1 text-right",children:c.currency_code.toUpperCase()}),(0,z.jsx)(td.Cell,{children:(0,z.jsx)(W.A,{variant:"ghost",size:"small",onClick:function(){return E(t)},children:(0,z.jsx)(eu,{size:20,className:"text-grey-50"})})})]},e.id)})})]}),(0,z.jsxs)("div",{className:"gap-x-xsmall mt-3 flex w-full justify-end",children:[(0,z.jsxs)(W.A,{variant:"ghost",size:"small",className:"border-grey-20 border",onClick:function(){var e;C.push((e=C.pop,{title:r("components-add-custom-item","Add Custom Item"),onBack:function(){return e()},view:(0,z.jsx)(gI,{onSubmit:_,region:c})}))},children:[(0,z.jsx)(n_.A,{size:20}),r("components-add-custom","Add Custom")]}),(0,z.jsxs)(W.A,{variant:"ghost",size:"small",className:"border-grey-20 border",onClick:function(){var e,t;C.push((e=C.pop,t=u.fields.map(function(e){return{id:e.variant_id}}),{title:r("components-add-products","Add Products"),onBack:function(){return e()},view:(0,z.jsx)(yS,{selectedItems:t||[],onSubmit:A})}))},children:[(0,z.jsx)(n_.A,{size:20}),r("components-add-existing","Add Existing")]})]})]})},gF=function(){var e=(0,ei.Bd)().t,t=U.useContext(gC.x1),r=t.enableNextPage,n=t.disableNextPage,i=gS().form.control,a=(0,eR.FH)({control:i,name:"region"}),o=(0,J.useAdminRegions)().regions,l=(0,U.useMemo)(function(){return o?o.map(function(e){return{label:e.name,value:e.id}}):[]},[o]);return(0,U.useEffect)(function(){a?r():n()},[a]),(0,z.jsxs)("div",{className:"flex min-h-[705px] flex-col",children:[(0,z.jsx)("span",{className:"inter-base-semibold mb-4",children:e("components-choose-region","Choose region")}),(0,z.jsx)(eR.xI,{control:i,name:"region",render:function(t){var r=t.field,n=r.onChange,i=r.value;return(0,z.jsx)(no,{label:e("components-region","Region"),onChange:n,value:i,options:l})}})]})};function gB(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}let gq=function(){var e,t=(0,ei.Bd)().t,r=(0,U.useContext)(gC.x1),n=r.disableNextPage,i=r.enableNextPage,a=function(e){if(Array.isArray(e))return e}(e=(0,U.useState)(!1))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,2)||function(e,t){if(e){if("string"==typeof e)return gB(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gB(e,2)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),o=a[0],l=a[1],s=gS(),c=s.context,u=c.region,d=c.shippingOptions,f=s.form,p=f.control,m=f.setValue,h=(0,eR.FH)({control:p,name:"custom_shipping_price"});(0,U.useEffect)(function(){!o&&h&&l(!0)},[h]);var y=(0,eR.FH)({control:p,name:"shipping_option"});return(0,U.useEffect)(function(){y||n(),y&&i()},[y]),(0,z.jsxs)("div",{className:"min-h-[705px]",children:[(0,z.jsxs)("span",{className:"inter-base-semibold",children:["Shipping method"," ",(0,z.jsx)("span",{className:"inter-base-regular text-grey-50",children:t("select-shipping-to-name","(To {{name}})",{name:u.name})})]}),u?(null==d?void 0:d.length)?(0,z.jsxs)("div",{className:"mt-4",children:[(0,z.jsx)(eR.xI,{control:p,name:"shipping_option",render:function(e){var r=e.field,n=r.value,i=r.onChange;return(0,z.jsx)(cB,{label:t("components-choose-a-shipping-method","Choose a shipping method"),onChange:i,value:n,options:(null==d?void 0:d.map(function(e){return{value:e.id,label:"".concat(e.name," - ").concat((0,rg.a_)(e.amount,u))}}))||[]})}}),(0,z.jsxs)("div",{className:"mt-4",children:[!o&&(0,z.jsx)("div",{className:"flex w-full justify-end",children:(0,z.jsx)(W.A,{variant:"ghost",size:"small",className:"border-grey-20 w-[125px] border",disabled:!y,onClick:function(){return l(!0)},children:t("components-set-custom-price","Set custom price")})}),o&&(0,z.jsxs)("div",{className:"flex items-center",children:[(0,z.jsx)("div",{className:"w-full",children:(0,z.jsx)(eR.xI,{control:p,name:"custom_shipping_price",render:function(e){var r=e.field,n=r.value,i=r.onChange;return(0,z.jsx)(cW.Root,{readOnly:!0,size:"small",currentCurrency:u.currency_code,children:(0,z.jsx)(cW.Amount,{label:t("components-custom-price","Custom Price"),amount:n,onChange:i})})}})}),(0,z.jsx)(W.A,{variant:"ghost",size:"small",onClick:function(){l(!1),m("custom_shipping_price",void 0)},className:"text-grey-40 ml-8 h-8 w-8",children:(0,z.jsx)(eu,{size:20})})]})]})]}):(0,z.jsxs)("div",{className:"inter-small-regular bg-orange-5 rounded-rounded mt-6 flex p-4 text-orange-50",children:[(0,z.jsx)("div",{className:"mr-3 h-full",children:(0,z.jsx)(yU.A,{size:20})}),(0,z.jsxs)("div",{className:"flex flex-col",children:[(0,z.jsx)("span",{className:"inter-small-semibold",children:t("components-attention","Attention!")}),t("components-no-options-for-orders-without-shipping",'You don\'t have any options for orders without shipping. Please add one (e.g. "In-store fulfillment") with "Show on website" unchecked in region settings and continue.')]})]}):(0,z.jsx)("div",{className:"flex flex-1 items-center justify-center",children:(0,z.jsx)(X.A,{})})]})};var gH=r(38798);let gU=function(e){var t;return{first_name:e.first_name||"",last_name:e.last_name||"",company:e.company,address_1:e.address_1||"",address_2:e.address_2,city:e.city||"",province:e.province,postal_code:e.postal_code||"",country_code:{label:uw[null===(t=e.country_code)||void 0===t?void 0:t.toUpperCase()]||"",value:e.country_code||""},phone:e.phone}};var gV=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;function gG(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function gW(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}let gY=function(){var e,t,r,n,i,a=(0,ei.Bd)().t,o=function(e){if(Array.isArray(e))return e}(e=(0,U.useState)(!1))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,2)||function(e,t){if(e){if("string"==typeof e)return gG(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gG(e,2)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),l=o[0],s=o[1],c=(0,U.useContext)(gC.x1),u=c.disableNextPage,d=c.enableNextPage,f=gS(),p=f.context.validCountries,m=f.form,y=(t=function(e){var t;return function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,function(r){switch(r.label){case 0:return t=gH.A.stringify({q:e,offset:0,limit:10},{skipNull:!0,skipEmptyString:!0}),[4,tF.customers.list("?".concat(t)).then(function(e){return e.data.customers.map(function(e){var t=e.id,r=e.first_name,n=e.last_name,i=e.email;return{label:"".concat(r||""," ").concat(n||""," (").concat(i,")"),value:t}})}).catch(function(){return[]})];case 1:return[2,r.sent()]}})},r=function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function o(e){gW(a,n,i,o,l,"next",e)}function l(e){gW(a,n,i,o,l,"throw",e)}o(void 0)})},function(e){return r.apply(this,arguments)}),b=(0,eR.FH)({control:m.control,name:"customer_id"}),v=(0,J.useAdminCustomer)(null==b?void 0:b.value,{enabled:!!(null==b?void 0:b.value)}).customer,g=(0,U.useMemo)(function(){if(!v)return[];var e=p.map(function(e){return e.value});return v.shipping_addresses.filter(function(t){var r=t.country_code;return!r||e.includes(r)})},[v,p]),x=function(e){var t=/\(([^()]*)\)$/.exec(null==e?void 0:e.label);t?m.setValue("email",t[1]):m.setValue("email","")},j=function(e){if(v){var t,r=null===(t=v.shipping_addresses)||void 0===t?void 0:t.find(function(t){return t.id===e});r&&m.setValue("shipping_address",gU(r))}},w=(0,eR.FH)({control:m.control,name:"email"}),O=(0,eR.FH)({control:m.control,name:"shipping_address"});return(0,U.useEffect)(function(){if(!w||!(null==w?void 0:w.match(gV))){u();return}O&&!gA(O)&&(O.first_name&&O.last_name&&O.address_1&&O.city&&O.country_code&&O.postal_code?d():u())},[O,w]),(0,U.useEffect)(function(){m.setValue("shipping_address.first_name",""),m.setValue("shipping_address.last_name",""),m.setValue("shipping_address.phone",""),m.setValue("shipping_address.address_1",""),m.setValue("shipping_address.address_2",""),m.setValue("shipping_address.city",""),m.setValue("shipping_address.country_code",null),m.setValue("shipping_address.province",""),m.setValue("shipping_address.postal_code","")},[null==b?void 0:b.value,l]),(0,U.useEffect)(function(){s(!1)},[null==b?void 0:b.value]),(0,z.jsxs)("div",{className:"flex min-h-[705px] flex-col gap-y-8",children:[(0,z.jsxs)("div",{children:[(0,z.jsx)("span",{className:"inter-base-semibold",children:a("components-customer-and-shipping-details","Customer and shipping details")}),(0,z.jsx)(eR.xI,{control:m.control,name:"customer_id",render:function(e){var t=e.field,r=t.value,n=t.onChange;return(0,z.jsx)(cB,{className:"mt-4",label:a("components-find-existing-customer","Find existing customer"),options:[],enableSearch:!0,value:r||null,onChange:function(e){x(e),n(e)},filterOptions:y,clearSelected:!0})}})]}),(0,z.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,z.jsx)("span",{className:"inter-base-semibold",children:a("components-email","Email")}),(0,z.jsx)(e1.A,(n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},m.register("email")),i=i={label:a("components-email","Email"),placeholder:"lebron@james.com",disabled:!!b,required:!0,prefix:b?(0,z.jsx)(nO.A,{size:16,className:"text-grey-40"}):void 0,tabIndex:b?-1:0},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))}),n))]}),g.length&&!l?(0,z.jsxs)("div",{children:[(0,z.jsx)("span",{className:"inter-base-semibold",children:a("components-choose-existing-addresses","Choose existing addresses")}),(0,z.jsx)(eR.xI,{control:m.control,name:"shipping_address_id",render:function(e){var t=e.field,r=t.value,n=t.onChange;return(0,z.jsx)(oy.Root,{className:"mt-4",value:r,onValueChange:function(e){n(e),j(e)},children:g.map(function(e,t){var n;return(0,z.jsx)(oy.Item,{label:"".concat(e.first_name," ").concat(e.last_name),checked:!!r&&e.id===r,description:"".concat(e.address_1,", ").concat(e.address_2," ").concat(e.postal_code," ").concat(e.city," ").concat(null===(n=e.country_code)||void 0===n?void 0:n.toUpperCase()),value:e.id},t)})})}}),(0,z.jsx)("div",{className:"mt-4 flex w-full justify-end",children:(0,z.jsx)(W.A,{variant:"ghost",size:"small",className:"border-grey-20 w-[112px] border",onClick:function(){m.setValue("shipping_address_id",void 0),s(!0)},children:a("components-create-new","Create new")})})]}):(0,z.jsx)("div",{children:(0,z.jsx)(hB,{form:(0,eL.m)(m,"shipping_address"),countryOptions:p,type:h.SHIPPING})})]})};function g$(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function gQ(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function gK(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return g$(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g$(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var gZ=function(e){var t=e.title,r=e.editIndex,n=e.children,i=(0,U.useContext)(gC.x1).setPage,a=(0,ei.Bd)().t;return(0,z.jsxs)("div",{className:"inter-small-regular border-grey-20 mt-4 flex w-full flex-col border-b pb-8 last:border-b-0 ",children:[(0,z.jsxs)("div",{className:"inter-base-semibold mb-4 flex w-full justify-between",children:[t,(0,z.jsx)("span",{onClick:function(){return i(r)},className:"inter-small-semibold text-violet-60 cursor-pointer",children:a("components-edit","Edit")})]}),n]})};let gJ=function(){var e,t,r,n=gK((0,U.useState)(!1),2),i=n[0],a=n[1],o=gK((0,U.useState)(void 0),2),l=o[0],s=o[1],c=gK((0,U.useState)(void 0),2),u=c[0],d=c[1],f=(0,ei.Bd)().t,p=gS(),m=p.form,h=p.context,y=h.items,b=h.region,v=h.selectedShippingOption,g=(0,eR.FH)({defaultValue:void 0,control:m.control,name:"shipping_address"}),x=(0,eR.FH)({defaultValue:void 0,control:m.control,name:"billing_address"}),j=(0,eR.FH)({control:m.control,name:"email"}),w=(0,eR.FH)({control:m.control,name:"region"}),O=(0,eR.FH)({control:m.control,name:"discount_code"}),S=(0,eR.FH)({control:m.control,name:"shipping_option"}),P=(0,eR.FH)({control:m.control,name:"custom_shipping_price"}),C=(0,J.useAdminGetDiscountByCode)(O,{enabled:!!O}),A=C.discount,N=C.status,k=C.isFetching,_=(0,J.useAdminShippingOptions)({region_id:null==w?void 0:w.value},{enabled:!!w&&!!S}).shipping_options,E=(0,U.useMemo)(function(){if(!S||!_)return 0;var e=_.find(function(e){return e.id===S.value});return e&&e.amount||0},[_,S]),I=(e=function(){return function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,function(e){return m.setValue("discount_code",u),[2]})},t=function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function o(e){gQ(a,n,i,o,l,"next",e)}function l(e){gQ(a,n,i,o,l,"throw",e)}o(void 0)})},function(){return t.apply(this,arguments)});(0,U.useEffect)(function(){A&&b&&(A.regions.find(function(e){return e.id===b.id})||(s(f("components-the-discount-is-not-applicable-to-the-selected-region","The discount is not applicable to the selected region")),d(void 0),m.setValue("discount_code",void 0),a(!0)))},[A]),(0,U.useEffect)(function(){"error"===N&&(s(f("components-the-discount-code-is-invalid","The discount code is invalid")),d(void 0),m.setValue("discount_code",void 0),a(!0))},[N]);var D=function(){m.setValue("discount_code",void 0),a(!1),d("")};return(0,z.jsxs)("div",{className:"min-h-[705px]",children:[(0,z.jsxs)(gZ,{title:"Items",editIndex:1,children:[(0,z.jsxs)(td,{children:[(0,z.jsx)(td.Head,{children:(0,z.jsxs)(td.HeadRow,{className:"inter-small-semibold text-grey-50 border-t",children:[(0,z.jsx)(td.HeadCell,{children:"Details"}),(0,z.jsx)(td.HeadCell,{className:"text-right",children:f("components-quantity","Quantity")}),(0,z.jsx)(td.HeadCell,{className:"text-right",children:f("components-price-excl-taxes","Price (excl. Taxes)")}),(0,z.jsx)(td.HeadCell,{})]})}),(0,z.jsx)(td.Body,{children:b&&y&&y.fields.map(function(e){return(0,z.jsxs)(td.Row,{className:(0,en.default)("border-b-grey-0 hover:bg-grey-0"),children:[(0,z.jsx)(td.Cell,{children:(0,z.jsxs)("div",{className:"flex min-w-[240px] py-2",children:[(0,z.jsx)("div",{className:"h-[40px] w-[30px] ",children:e.thumbnail?(0,z.jsx)("img",{className:"h-full w-full rounded object-cover",src:e.thumbnail}):(0,z.jsx)(nm,{})}),(0,z.jsxs)("div",{className:"inter-small-regular text-grey-50 ml-4 flex flex-col",children:[(0,z.jsx)("span",{children:(0,z.jsx)("span",{className:"text-grey-90",children:e.product_title})}),(0,z.jsx)("span",{children:e.title})]})]})}),(0,z.jsx)(td.Cell,{className:"text-right",children:e.quantity}),(0,z.jsx)(td.Cell,{className:"text-right",children:(0,rg.Pt)(null==b?void 0:b.currency_code,e.unit_price)})]},e.id)})})]}),!i&&!(null==A?void 0:A.rule)&&(0,z.jsx)("div",{className:"flex w-full justify-end",children:(0,z.jsxs)(W.A,{variant:"ghost",size:"small",className:"inter-small-semibold border-grey-20 border",onClick:function(){return a(!0)},children:[(0,z.jsx)(n_.A,{size:20}),f("components-add-discount","Add Discount")]})}),i&&!(null==A?void 0:A.rule)&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{children:(0,z.jsxs)("div",{className:"gap-x-base flex w-full items-center",children:[(0,z.jsx)(e1.A,{type:"text",placeholder:f("components-summer-10","SUMMER10"),onFocus:function(){return s(void 0)},value:u,onChange:function(e){return d(e.target.value)}}),(0,z.jsx)(W.A,{variant:"ghost",className:"text-grey-40 h-8 w-8",size:"small",type:"button",onClick:function(){return a(!1)},children:(0,z.jsx)(ao.A,{size:20})})]})}),(0,z.jsxs)("div",{className:"space-between mt-4 flex w-full justify-between ",children:[(0,z.jsx)("div",{className:"pt-2",children:l&&(0,z.jsx)("span",{className:"text-rose-50",children:l})}),(0,z.jsxs)(W.A,{className:"border-grey-20 h-full border",variant:"ghost",size:"small",loading:k,onClick:function(){return I()},children:[(0,z.jsx)(n_.A,{size:20}),f("components-add-discount","Add Discount")]})]})]}),A&&b&&(0,z.jsxs)("div",{className:"inter-small-regular border-grey-20 mt-4 flex w-full flex-col border-b border-t pt-4 last:border-b-0 ",children:[(0,z.jsxs)("div",{className:"inter-base-semibold mb-4 flex w-full justify-between",children:[(0,z.jsxs)("span",{children:[f("components-discount","Discount"),(0,z.jsx)("span",{className:"inter-base-regular text-grey-50 ml-0.5",children:f("select-shipping-code","(Code: {{code}})",{code:A.code})})]}),(0,z.jsx)("span",{onClick:function(){return D()},className:"inter-small-semibold text-violet-60 cursor-pointer",children:(0,z.jsx)(ao.A,{size:20})})]}),(0,z.jsxs)("div",{className:"flex w-full",children:[(0,z.jsxs)("div",{className:(0,en.default)("border-grey-20 flex flex-col pr-6",{"border-r":"free_shipping"!==A.rule.type}),children:[(0,z.jsx)("span",{className:"text-grey-50",children:f("components-type","Type")}),(0,z.jsx)("span",{children:"free_shipping"!==A.rule.type?"".concat(A.rule.type.charAt(0).toUpperCase()).concat(A.rule.type.slice(1)):"Free Shipping"})]}),"free_shipping"!==A.rule.type&&(0,z.jsxs)("div",{className:"flex flex-col pl-6",children:[(0,z.jsx)("span",{className:"text-grey-50",children:f("components-value","Value")}),(0,z.jsx)("span",{children:"fixed"===A.rule.type?"".concat((0,rg.Pt)(b.currency_code,A.rule.value)," ").concat(b.currency_code.toUpperCase()):"".concat(A.rule.value," %")})]})]})]})]}),(0,z.jsx)(gZ,{title:"Customer",editIndex:3,children:(0,z.jsxs)("div",{className:"flex items-center",children:[(0,z.jsx)("div",{className:"mr-3 h-5 w-5",children:(0,z.jsx)(rr.A,{color:"bg-grey-80",user:{email:j,first_name:null==g?void 0:g.first_name,last_name:null==g?void 0:g.last_name},font:"inter-small-regular"})}),j]})}),v&&(0,z.jsx)(gZ,{title:"Shipping details",editIndex:2,children:(0,z.jsxs)("div",{className:"grid w-full grid-cols-2 gap-x-6",children:[!gA(g)&&g&&(0,z.jsxs)("div",{className:"border-grey-20 flex flex-col border-r pr-6",children:[(0,z.jsx)("span",{className:"text-grey-50",children:f("components-address","Address")}),(0,z.jsxs)("span",{children:[g.address_1,", ",g.address_2]}),(0,z.jsx)("span",{children:"".concat(g.postal_code," ").concat(g.city,",\n                ").concat(null===(r=g.country_code)||void 0===r?void 0:r.label)})]}),b&&(0,z.jsxs)("div",{className:"flex flex-col",children:[(0,z.jsx)("span",{className:"text-grey-50",children:f("components-shipping-method","Shipping method")}),(0,z.jsxs)("span",{children:[v.name," -"," ",P&&b?(0,z.jsxs)("p",{children:[(0,z.jsx)("span",{className:"text-grey-40 mr-2 line-through",children:(0,rg.a_)(E,b)}),(0,rg.Pt)(b.currency_code,P),b.currency_code.toUpperCase()]}):(0,rg.a_)(v.amount,b)]})]})]})}),!gA(x)&&x&&(0,z.jsxs)(gZ,{title:f("components-billing-details","Billing details"),editIndex:3,children:[(0,z.jsx)("span",{className:"text-grey-50",children:f("components-address","Address")}),(0,z.jsxs)("span",{children:[x.address_1,", ",x.address_2]}),(0,z.jsx)("span",{children:"".concat(x.postal_code," ").concat(x.city,",\n                ").concat(x.country_code.label)})]})]})},gX=function(e){var t=e.onDismiss,r=U.useContext(gC.x1),n=U.useContext(a7.H8),i=(0,ei.Bd)().t,a=(0,H.useNavigate)(),o=(0,eC.A)(),l=(0,J.useAdminCreateDraftOrder)().mutate,s=gS(),c=s.form,u=c.handleSubmit,d=c.reset;s.context.region;var f=u(function(e){var n,s,c,u,f,p,m,h,y,b,v,g,x,j,w,O,S,P,C,A,N,k,_;l({email:e.email,items:e.items.map(function(e){return e.variant_id?{quantity:e.quantity,variant_id:e.variant_id}:{quantity:e.quantity,title:e.title,unit_price:e.unit_price}}),region_id:e.region.value,shipping_methods:[{option_id:e.shipping_option.value,price:"number"==typeof e.custom_shipping_price?e.custom_shipping_price:void 0}],shipping_address:e.shipping_address_id?e.shipping_address_id:gA(e.shipping_address)?void 0:{address_1:null===(n=e.shipping_address)||void 0===n?void 0:n.address_1,address_2:(null===(s=e.shipping_address)||void 0===s?void 0:s.address_2)||void 0,city:null===(c=e.shipping_address)||void 0===c?void 0:c.city,country_code:null===(f=e.shipping_address)||void 0===f?void 0:null===(u=f.country_code)||void 0===u?void 0:u.value,company:(null===(p=e.shipping_address)||void 0===p?void 0:p.company)||void 0,first_name:null===(m=e.shipping_address)||void 0===m?void 0:m.first_name,last_name:null===(h=e.shipping_address)||void 0===h?void 0:h.last_name,phone:(null===(y=e.shipping_address)||void 0===y?void 0:y.phone)||void 0,postal_code:null===(b=e.shipping_address)||void 0===b?void 0:b.postal_code,province:(null===(v=e.shipping_address)||void 0===v?void 0:v.province)||void 0},billing_address:e.billing_address_id?e.billing_address_id:e.billing_address?{address_1:null===(g=e.billing_address)||void 0===g?void 0:g.address_1,address_2:(null===(x=e.billing_address)||void 0===x?void 0:x.address_2)||void 0,city:null===(j=e.billing_address)||void 0===j?void 0:j.city,country_code:null===(O=e.billing_address)||void 0===O?void 0:null===(w=O.country_code)||void 0===w?void 0:w.value,company:(null===(S=e.billing_address)||void 0===S?void 0:S.company)||void 0,first_name:null===(P=e.billing_address)||void 0===P?void 0:P.first_name,last_name:null===(C=e.billing_address)||void 0===C?void 0:C.last_name,phone:(null===(A=e.billing_address)||void 0===A?void 0:A.phone)||void 0,postal_code:null===(N=e.billing_address)||void 0===N?void 0:N.postal_code,province:(null===(k=e.billing_address)||void 0===k?void 0:k.province)||void 0}:void 0,customer_id:null===(_=e.customer_id)||void 0===_?void 0:_.value,discounts:e.discount_code?[{code:e.discount_code}]:void 0},{onSuccess:function(e){var n=e.draft_order;o(i("new-success","Success"),i("new-order-created","Order created"),"success"),d(),t(),r.reset(),a("/a/draft-orders/".concat(n.id))},onError:function(e){o(i("new-error","Error"),e.message,"error")}})});return(0,z.jsx)(gC.Ay,{layeredContext:n,context:r,onSubmit:f,steps:[(0,z.jsx)(gF,{}),(0,z.jsx)(gz,{}),(0,z.jsx)(gq,{}),(0,z.jsx)(gY,{}),(0,z.jsx)(gN,{}),(0,z.jsx)(gJ,{})],lastScreenIsSummary:!0,title:i("new-create-draft-order","Create Draft Order"),handleClose:t})};function g0(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}let g1=function(e){var t,r=e.heading,n=e.text,i=e.cancelText,a=e.confirmText,o=e.handleClose,l=e.onConfirm,s=function(e){if(Array.isArray(e))return e}(t=(0,U.useState)(!1))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(t,2)||function(e,t){if(e){if("string"==typeof e)return g0(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g0(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),c=s[0],u=s[1];return(0,z.jsx)(eN.A,{isLargeModal:!1,handleClose:o,children:(0,z.jsxs)(eN.A.Body,{children:[(0,z.jsx)(eN.A.Content,{children:(0,z.jsxs)("div",{className:"flex flex-col",children:[(0,z.jsx)("span",{className:"inter-large-semibold",children:r}),(0,z.jsx)("span",{className:"inter-base-regular text-grey-50 mt-1",children:n})]})}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"flex h-8 w-full justify-end",children:[(0,z.jsx)(W.A,{variant:"ghost",className:"text-small mr-2 w-24 justify-center",size:"small",onClick:o,children:i}),(0,z.jsx)(W.A,{loading:c,size:"small",className:"text-small w-24 justify-center",variant:"primary",onClick:function(e){e.preventDefault(),u(!0),l().finally(function(){u(!1),o()})},disabled:c,children:a})]})})]})})};function g2(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function g3(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function g5(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function o(e){g3(a,n,i,o,l,"next",e)}function l(e){g3(a,n,i,o,l,"throw",e)}o(void 0)})}}function g6(e,t){if(e){if("string"==typeof e)return g2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g2(e,t)}}function g4(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}let g8=function(e){var t,r,n,i,a=e.order,o=(0,ei.Bd)().t,l=(0,J.useMedusa)().client,s=(0,rz.u)().isFeatureEnabled,c=(0,U.useMemo)(function(){return s("inventoryService")},[s]),u=a.cart,d=u.region,f=function(e){if(Array.isArray(e))return e}(t=U.useState(new Map))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(t,2)||g6(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),p=f[0],m=f[1];U.useEffect(function(){var e;c&&(e=g5(function(){return g4(this,function(e){switch(e.label){case 0:var t;return[4,Promise.all(u.items.map((t=g5(function(e){return g4(this,function(t){switch(t.label){case 0:if(!e.variant_id)return[2];return[4,l.admin.variants.getInventory(e.variant_id)];case 1:return[2,t.sent()]}})}),function(e){return t.apply(this,arguments)})))];case 1:return m(new Map(e.sent().filter(function(e){return!!e}).map(function(e){return[e.variant.id,e.variant]}))),[2]}})}),function(){return e.apply(this,arguments)})()},[u.items,c,l.admin.variants]);var h=(0,J.useAdminReservations)({line_item_id:null==u?void 0:u.items.map(function(e){return e.id})},{enabled:c}).reservations,y=(0,U.useMemo)(function(){return(null==h?void 0:h.length)&&c?h.reduce(function(e,t){var r;return t.line_item_id&&(e[t.line_item_id]=e[t.line_item_id]?((function(e){if(Array.isArray(e))return g2(e)})(r=e[t.line_item_id])||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||g6(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([t]):[t]),e},{}):{}},[h,c]),b=(0,n5.A)(),v=b.state,g=b.open,x=b.close,j=(0,U.useMemo)(function(){return u.items.every(function(e){if(!e.variant_id||!(null===(t=p.get(e.variant_id))||void 0===t?void 0:t.inventory.length))return!0;var t,r=y[e.id];return e.quantity===e.fulfilled_quantity||r&&(0,t6.sum)(r.map(function(e){return e.quantity}))===e.quantity-(e.fulfilled_quantity||0)})},[u.items,p,y]),w=(0,U.useMemo)(function(){var e=[];return c&&!j&&e.push({label:"Allocate",onClick:g}),e},[c,g,j]);return(0,z.jsxs)(eD,{className:"mb-4 h-auto min-h-0 w-full",title:"Summary",status:s("inventoryService")&&Array.isArray(h)&&(0,z.jsx)(tv.A,{onClick:j?void 0:g,variant:j?"success":"danger",title:j?o("detail-cards-allocated","Allocated"):o("detail-cards-not-fully-allocated","Not fully allocated"),className:"rounded-rounded border px-3 py-1.5"}),actionables:w,children:[(0,z.jsxs)("div",{className:"mt-6",children:[null==u?void 0:null===(r=u.items)||void 0===r?void 0:r.map(function(e,t){var r,n,i,a;return(0,z.jsxs)("div",{className:"hover:bg-grey-5 rounded-rounded mx-[-5px] mb-1 flex h-[64px] justify-between py-2 px-[5px]",children:[(0,z.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,z.jsx)("div",{className:"rounded-rounded flex h-[48px] w-[36px] items-center justify-center",children:(null==e?void 0:e.thumbnail)?(0,z.jsx)("img",{src:e.thumbnail,className:"rounded-rounded object-cover"}):(0,z.jsx)(nm,{})}),(0,z.jsxs)("div",{className:"flex flex-col justify-center",children:[(0,z.jsx)("span",{className:"inter-small-regular text-grey-90 max-w-[225px] truncate",children:e.title}),(null==e?void 0:e.variant)&&(0,z.jsx)("span",{className:"inter-small-regular text-grey-50",children:e.variant.sku})]})]}),(0,z.jsxs)("div",{className:"flex  items-center",children:[(0,z.jsxs)("div",{className:"small:space-x-2 medium:space-x-4 large:space-x-6 mr-3 flex",children:[(0,z.jsx)("div",{className:"inter-small-regular text-grey-50",children:(0,rg.Q2)({amount:(null!==(r=null==e?void 0:e.total)&&void 0!==r?r:0)/e.quantity,currency:null!==(n=null==d?void 0:d.currency_code)&&void 0!==n?n:"",digits:2,tax:[]})}),(0,z.jsxs)("div",{className:"inter-small-regular text-grey-50",children:["x ",e.quantity]}),c&&(0,z.jsx)(vU,{reservations:y[e.id],lineItem:e}),(0,z.jsx)("div",{className:"inter-small-regular text-grey-90",children:(0,rg.Q2)({amount:null!==(i=e.total)&&void 0!==i?i:0,currency:null!==(a=null==d?void 0:d.currency_code)&&void 0!==a?a:"",digits:2,tax:[]})})]}),(0,z.jsx)("div",{className:"inter-small-regular text-grey-50",children:null==d?void 0:d.currency_code.toUpperCase()})]})]},t)}),(0,z.jsx)(rx,{currency:null==d?void 0:d.currency_code,totalAmount:null==a?void 0:null===(n=a.cart)||void 0===n?void 0:n.subtotal,totalTitle:o("detail-cards-subtotal","Subtotal")}),null==u?void 0:null===(i=u.discounts)||void 0===i?void 0:i.map(function(e,t){return(0,z.jsxs)("div",{className:"mt-4 flex items-center justify-between",children:[(0,z.jsxs)("div",{className:"inter-small-regular text-grey-90 flex items-center",children:["Discount:"," ",(0,z.jsx)(rk.A,{className:"ml-3",variant:"default",children:e.code})]}),(0,z.jsxs)("div",{className:"inter-small-regular text-grey-90",children:["-",(0,rg.Q2)({amount:null==u?void 0:u.discount_total,currency:(null==d?void 0:d.currency_code)||"",digits:2,tax:null==d?void 0:d.tax_rate})]})]},t)}),(0,z.jsx)(rx,{currency:null==d?void 0:d.currency_code,totalAmount:null==u?void 0:u.shipping_total,totalTitle:o("detail-cards-shipping","Shipping")}),(0,z.jsx)(rx,{currency:null==d?void 0:d.currency_code,totalAmount:null==u?void 0:u.tax_total,totalTitle:o("detail-cards-tax","Tax")}),(0,z.jsx)(rx,{currency:null==d?void 0:d.currency_code,variant:"large",totalAmount:null==u?void 0:u.total,totalTitle:o("detail-cards-total","Total")})]}),v&&(0,z.jsx)(vQ,{reservationItemsMap:y,items:u.items,close:x})]})};function g7(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function g9(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function xe(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function o(e){g9(a,n,i,o,l,"next",e)}function l(e){g9(a,n,i,o,l,"throw",e)}o(void 0)})}}function xt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return g7(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g7(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xr(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}let xn=function(){var e,t,r,n,i,a=(0,H.useParams)().id,o=(0,ei.Bd)().t,l={resource:"",onDelete:function(){return Promise.resolve(console.log("Delete resource"))},show:!1},s=xt((0,U.useState)(l),2),c=s[0],u=s[1],d=xt((0,U.useState)(null),2),f=d[0],p=d[1],m=xt((0,U.useState)(!1),2),y=m[0],b=m[1],v=(0,J.useAdminDraftOrder)(a),g=v.draft_order,x=v.isLoading,j=(0,J.useAdminStore)(),w=j.store,O=j.isLoading,S=xt((0,U.useState)(""),2),P=S[0],C=S[1];(0,U.useEffect)(function(){w&&g&&w.payment_link_template&&C(w.payment_link_template.replace(/\{cart_id\}/,g.cart_id))},[x,O]);var A=(0,J.useAdminDraftOrderRegisterPayment)(a),N=(0,J.useAdminDeleteDraftOrder)(a),k=(0,J.useAdminUpdateDraftOrder)(a),_=(0,H.useNavigate)(),E=(0,eC.A)(),I=(e=xe(function(){var e;return xr(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,3,4]),[4,A.mutateAsync()];case 1:return t.sent(),E(o("draft-orders-success","Success"),o("draft-orders-successfully-mark-as-paid","Successfully mark as paid"),"success"),[3,4];case 2:return e=t.sent(),E(o("draft-orders-error","Error"),(0,eA.u)(e),"error"),[3,4];case 3:return b(!1),[7];case 4:return[2]}})}),function(){return e.apply(this,arguments)}),D=(t=xe(function(){return xr(this,function(e){return[2,N.mutate(void 0,{onSuccess:function(){return E(o("draft-orders-success","Success"),o("draft-orders-successfully-canceled-order","Successfully canceled order"),"success")},onError:function(e){return E(o("draft-orders-error","Error"),(0,eA.u)(e),"error")}})]})}),function(){return t.apply(this,arguments)}),T=(0,tY.X)().getWidgets,M=T("draft_order.details.after"),R=T("draft_order.details.before"),L=(g||{}).cart,F=(L||{}).region;return(0,z.jsxs)("div",{children:[(0,z.jsx)(eo,{path:"/a/draft-orders",label:o("draft-orders-back-to-draft-orders","Back to Draft Orders"),className:"mb-xsmall"}),x||!g?(0,z.jsx)(eD,{className:"pt-2xlarge flex w-full items-center justify-center",children:(0,z.jsx)(X.A,{size:"large",variant:"secondary"})}):(0,z.jsx)("div",{className:"flex space-x-4",children:(0,z.jsxs)("div",{className:"flex h-full w-full flex-col",children:[(null==R?void 0:R.length)>0&&(0,z.jsx)("div",{className:"mb-4 flex w-full flex-col gap-y-4",children:R.map(function(e,t){return(0,z.jsx)(es.A,{widget:e,injectionZone:"draft_order.details.before",entity:g},t)})}),(0,z.jsx)(eD,{className:"mb-4 min-h-[200px] w-full",title:o("on-mark-as-paid-confirm-order-id","Order #{{display_id}}",{display_id:g.display_id}),subtitle:re()(g.created_at).format("D MMMM YYYY hh:mm a"),status:(0,z.jsx)(function(){switch(null==g?void 0:g.status){case"completed":return(0,z.jsx)(tv.A,{title:o("draft-orders-completed","Completed"),variant:"success"});case"open":return(0,z.jsx)(tv.A,{title:o("draft-orders-open","Open"),variant:"default"});default:return null}},{}),customActionable:(null==g?void 0:g.status)==="completed"&&(0,z.jsx)(W.A,{variant:"secondary",size:"small",onClick:function(){return _("/a/orders/".concat(g.order_id))},children:o("draft-orders-go-to-order","Go to Order")}),forceDropdown:(null==g?void 0:g.status)!=="completed",actionables:(null==g?void 0:g.status)==="completed"?[{label:o("draft-orders-go-to-order","Go to Order"),icon:null,onClick:function(){return console.log("Should not be here")}}]:[{label:o("draft-orders-cancel-draft-order","Cancel Draft Order"),icon:null,variant:"danger",onClick:function(){return u({resource:o("draft-orders-draft-order","Draft Order"),onDelete:function(){return D()},show:!0})}}],children:(0,z.jsxs)("div",{className:"mt-6 flex space-x-6 divide-x",children:[(0,z.jsxs)("div",{className:"flex flex-col",children:[(0,z.jsx)("div",{className:"inter-smaller-regular text-grey-50 mb-1",children:o("draft-orders-email","Email")}),(0,z.jsx)("div",{children:null==L?void 0:L.email})]}),(0,z.jsxs)("div",{className:"flex flex-col pl-6",children:[(0,z.jsx)("div",{className:"inter-smaller-regular text-grey-50 mb-1",children:o("draft-orders-phone","Phone")}),(0,z.jsx)("div",{children:(null==L?void 0:null===(r=L.shipping_address)||void 0===r?void 0:r.phone)||"N/A"})]}),(0,z.jsxs)("div",{className:"flex flex-col pl-6",children:[(0,z.jsx)("div",{className:"inter-smaller-regular text-grey-50 mb-1",children:o("draft-orders-amount","Amount {{currency_code}}",{currency_code:null==F?void 0:F.currency_code.toUpperCase()})}),(0,z.jsx)("div",{children:(null==L?void 0:L.total)&&(null==F?void 0:F.currency_code)?(0,rg.Q2)({amount:null==L?void 0:L.total,currency:null==F?void 0:F.currency_code}):"N/A"})]})]})}),(0,z.jsx)(g8,{order:g}),(0,z.jsx)(eD,{className:"mb-4 h-auto min-h-0 w-full",title:o("draft-orders-payment","Payment"),customActionable:(null==g?void 0:g.status)!=="completed"&&(0,z.jsx)(function(){var e=o("draft-orders-mark-as-paid","Mark as paid");return(0,z.jsx)(W.A,{variant:"secondary",size:"small",onClick:function(){return b(!0)},children:e})},{}),children:(0,z.jsxs)("div",{className:"mt-6",children:[(0,z.jsx)(rx,{currency:null==F?void 0:F.currency_code,totalAmount:null==L?void 0:L.subtotal,totalTitle:o("draft-orders-subtotal","Subtotal")}),(0,z.jsx)(rx,{currency:null==F?void 0:F.currency_code,totalAmount:null==L?void 0:L.shipping_total,totalTitle:o("draft-orders-shipping","Shipping")}),(0,z.jsx)(rx,{currency:null==F?void 0:F.currency_code,totalAmount:null==L?void 0:L.tax_total,totalTitle:o("draft-orders-tax","Tax")}),(0,z.jsx)(rx,{variant:"bold",currency:null==F?void 0:F.currency_code,totalAmount:null==L?void 0:L.total,totalTitle:o("draft-orders-total-to-pay","Total to pay")}),(null==g?void 0:g.status)!=="completed"&&(0,z.jsxs)("div",{className:"text-grey-50 inter-small-regular mt-5 flex w-full items-center",children:[(0,z.jsx)("span",{className:"mr-2.5",children:o("draft-orders-payment-link","Payment link:")}),(null==w?void 0:w.payment_link_template)?(0,z.jsx)(hf,{value:P,displayValue:g.cart_id,successDuration:1e3}):o("draft-orders-configure-payment-link-in-store-settings","Configure payment link in store settings")]})]})}),(0,z.jsx)(eD,{className:"mb-4 h-auto min-h-0 w-full",title:o("draft-orders-shipping","Shipping"),children:(0,z.jsx)("div",{className:"mt-6",children:null==L?void 0:L.shipping_methods.map(function(e){return(0,z.jsxs)("div",{className:"flex flex-col",children:[(0,z.jsx)("span",{className:"inter-small-regular text-grey-50",children:o("draft-orders-shipping-method","Shipping Method")}),(0,z.jsx)("span",{className:"inter-small-regular text-grey-90 mt-2",children:(null==e?void 0:e.shipping_option.name)||""}),(0,z.jsxs)("div",{className:"bg-grey-5 mt-8 flex h-full min-h-[100px] flex-col px-3 py-2",children:[(0,z.jsxs)("span",{className:"inter-base-semibold",children:[o("draft-orders-data","Data")," ",(0,z.jsx)("span",{className:"text-grey-50 inter-base-regular",children:o("draft-orders-1-item","(1 item)")})]}),(0,z.jsx)("div",{className:"mt-4 flex flex-grow items-center",children:(0,z.jsx)(eP,{data:null==e?void 0:e.data})})]})]},e.id)})})}),(0,z.jsx)(eD,{className:"mb-4 h-auto min-h-0 w-full",title:o("draft-orders-customer","Customer"),actionables:[{label:o("draft-orders-edit-shipping-address","Edit Shipping Address"),icon:(0,z.jsx)(hn,{size:"20"}),onClick:function(){return p({address:null==L?void 0:L.shipping_address,type:h.SHIPPING})}},{label:o("draft-orders-edit-billing-address","Edit Billing Address"),icon:(0,z.jsx)(c5,{size:"20"}),onClick:function(){(null==L?void 0:L.billing_address)&&p({address:null==L?void 0:L.billing_address,type:h.BILLING})}},{label:o("draft-orders-go-to-customer","Go to Customer"),icon:(0,z.jsx)(t7,{size:"20"}),onClick:function(){return _("/a/customers/".concat(null==L?void 0:L.customer.id))}}],children:(0,z.jsxs)("div",{className:"mt-6",children:[(0,z.jsxs)("div",{className:"flex w-full items-center space-x-4",children:[(0,z.jsx)("div",{className:"flex h-[40px] w-[40px] ",children:(0,z.jsx)(rr.A,{user:null==L?void 0:L.customer,font:"inter-large-semibold",color:"bg-grey-80"})}),(0,z.jsxs)("div",{children:[(0,z.jsx)("h1",{className:"inter-large-semibold text-grey-90",children:vo(L)}),(null==L?void 0:L.shipping_address)&&(0,z.jsxs)("span",{className:"inter-small-regular text-grey-50",children:[L.shipping_address.city,","," ",uw[null===(n=L.shipping_address.country_code)||void 0===n?void 0:n.toUpperCase()]]})]})]}),(0,z.jsxs)("div",{className:"mt-6 flex space-x-6 divide-x",children:[(0,z.jsxs)("div",{className:"flex flex-col",children:[(0,z.jsx)("div",{className:"inter-small-regular text-grey-50 mb-1",children:o("draft-orders-contact","Contact")}),(0,z.jsxs)("div",{className:"inter-small-regular flex flex-col",children:[(0,z.jsx)("span",{children:null==L?void 0:L.email}),(0,z.jsx)("span",{children:(null==L?void 0:null===(i=L.shipping_address)||void 0===i?void 0:i.phone)||""})]})]}),(0,z.jsx)(rO,{title:o("draft-orders-shipping","Shipping"),addr:(null==L?void 0:L.shipping_address)||void 0}),(0,z.jsx)(rO,{title:o("draft-orders-billing","Billing"),addr:(null==L?void 0:L.billing_address)||void 0})]})]})}),(null==M?void 0:M.length)>0&&(0,z.jsx)("div",{className:"mb-4 flex w-full flex-col gap-y-4",children:M.map(function(e,t){return(0,z.jsx)(es.A,{widget:e,injectionZone:"draft_order.details.after",entity:g},t)})}),(0,z.jsx)(eD,{className:"mb-4 h-auto min-h-0 w-full pt-[15px]",title:o("draft-orders-raw-draft-order","Raw Draft Order"),children:(0,z.jsx)(eP,{data:g})})]})}),f&&(0,z.jsx)(vF,{onClose:function(){return p(null)},onSave:k.mutate,address:f.address,type:f.type,allowedCountries:null==F?void 0:F.countries}),c.show&&(0,z.jsx)(e_,{text:o("draft-orders-are-you-sure","Are you sure?"),heading:o("draft-orders-remove-resource-heading","Remove {{resource}}",{resource:null==c?void 0:c.resource}),successText:o("draft-orders-remove-resource-success-text","{{resource}} has been removed",{resource:(null==c?void 0:c.resource)||"Resource"}),onDelete:function(){return c.onDelete()},handleClose:function(){return u(l)}}),y&&(0,z.jsx)(g1,{heading:o("draft-orders-mark-as-paid","Mark as paid"),text:o("draft-orders-this-will-create-an-order-mark-this-as-paid-if-you-received-the-payment","This will create an order. Mark this as paid if you received the payment."),confirmText:o("draft-orders-mark-paid","Mark paid"),cancelText:o("draft-orders-cancel","Cancel"),handleClose:function(){return b(!1)},onConfirm:I})]})};function xi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var xa=["orders","drafts"],xo=function(){var e,t=(0,H.useNavigate)(),r=(0,ei.Bd)().t,n="drafts",i=function(e){if(Array.isArray(e))return e}(e=(0,U.useState)(!1))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,2)||function(e,t){if(e){if("string"==typeof e)return xi(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xi(e,2)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),a=i[0],o=i[1],l=(0,tY.X)().getWidgets,s=(0,U.useMemo)(function(){return[{label:r("draft-orders-create-draft-order","Create draft order"),onClick:function(){return o(!0)},icon:(0,z.jsx)(n_.A,{size:20})}]},[n]);return(0,z.jsxs)("div",{className:"gap-y-xsmall flex h-full grow flex-col",children:[l("draft_order.list.before").map(function(e,t){return(0,z.jsx)(es.A,{entity:null,injectionZone:"draft_order.list.before",widget:e},t)}),(0,z.jsx)("div",{className:"flex w-full grow flex-col",children:(0,z.jsx)(eD,{customHeader:(0,z.jsx)(n6,{views:xa,setActiveView:function(e){"orders"===e&&t("/a/orders")},activeView:n}),actionables:s,className:"h-fit",children:(0,z.jsx)(gj,{})})}),l("draft_order.list.after").map(function(e,t){return(0,z.jsx)(es.A,{entity:null,injectionZone:"draft_order.list.after",widget:e},t)}),(0,z.jsx)(el,{}),a&&(0,z.jsx)(gP,{children:(0,z.jsx)(gX,{onDismiss:function(){return o(!1)}})})]})};let xl=function(){return(0,z.jsxs)(H.Routes,{children:[(0,z.jsx)(H.Route,{index:!0,element:(0,z.jsx)(xo,{})}),(0,z.jsx)(H.Route,{path:"/:id",element:(0,z.jsx)(xn,{})})]})};var xs=r(44612),xc=r(54332),xu=r(30978),xd=r(33362);function xf(){return(xf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function xp(e){if(null==e)throw TypeError("Cannot destructure "+e);return e}function xm(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function xh(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var xy=eR.Op,xb=U.createContext({}),xv=U.createContext({}),xg=function(){var e=U.useContext(xb),t=U.useContext(xv),r=(0,eR.xW)().getFieldState,n=(0,eR.lN)({name:e.name}),i=r(e.name,n);if(!e)throw Error("useFormField should be used within a FormField");var a=t.id;return xm({id:a,name:e.name,formItemId:"".concat(a,"-form-item"),formDescriptionId:"".concat(a,"-form-item-description"),formErrorMessageId:"".concat(a,"-form-item-message")},i)},xx=U.forwardRef(function(e,t){var r=e.className,n=xh(e,["className"]),i=U.useId();return(0,z.jsx)(xv.Provider,{value:{id:i},children:(0,z.jsx)("div",xm({ref:t,className:(0,xc.clx)("flex flex-col space-y-2",r)},n))})});xx.displayName="Form.Item";var xj=U.forwardRef(function(e,t){var r=e.className,n=xh(e,["className"]),i=xg().formItemId;return(0,z.jsx)(xc.Label,xm({ref:t,className:(0,xc.clx)(r),htmlFor:i,weight:"plus"},n))});xj.displayName="Form.Label";var xw=U.forwardRef(function(e,t){var r=xf({},xp(e)),n=xg(),i=n.error,a=n.formItemId,o=n.formDescriptionId,l=n.formErrorMessageId;return(0,z.jsx)(xd.DX,xm({ref:t,id:a,"aria-describedby":i?"".concat(o," ").concat(l):"".concat(o),"aria-invalid":!!i},r))});xw.displayName="Form.Control";var xO=U.forwardRef(function(e,t){var r=e.className,n=xh(e,["className"]),i=xg().formDescriptionId;return(0,z.jsx)(xc.Hint,xm({ref:t,id:i,className:r},n))});xO.displayName="Form.Hint";var xS=U.forwardRef(function(e,t){var r,n,i=e.className,a=e.children,o=xh(e,["className","children"]),l=xg(),s=l.error,c=l.formErrorMessageId,u=s?String(null==s?void 0:s.message):a;return u?(0,z.jsx)(xc.Hint,(r=xm({ref:t,id:c,className:i,variant:s?"error":"info"},o),n=n={children:u},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))}),r)):null});xS.displayName="Form.ErrorMessage";var xP=Object.assign(xy,{Item:xx,Label:xj,Control:xw,Hint:xO,ErrorMessage:xS,Field:function(e){var t=xf({},xp(e));return(0,z.jsx)(xb.Provider,{value:{name:t.name},children:(0,z.jsx)(eR.xI,xm({},t))})}});function xC(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function xA(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function xN(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function xk(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function x_(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||xE(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xE(e,t){if(e){if("string"==typeof e)return xC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xC(e,t)}}var xI=U.createContext(null),xD=function(){var e=U.useContext(xI);if(!e)throw Error("FilterMenu compound components cannot be rendered outside the FilterMenu component");return e},xT=function(e){var t=e.children,r=e.onClearFilters,n=xk(e,["children","onClearFilters"]),i=(0,ei.Bd)().t;return(0,z.jsxs)(xc.Popover,xN(xA({},n),{children:[(0,z.jsx)(xc.Popover.Trigger,{"data-filter-component":!0,asChild:!0,children:(0,z.jsxs)(xc.Button,{variant:"secondary",className:"relative overflow-visible",children:[(0,z.jsx)(xs.Adjustments,{className:"text-ui-fg-subtle"}),i("filter-menu-trigger","View")]})}),(0,z.jsx)(xI.Provider,{value:U.useMemo(function(){return{onClearFilters:r}},[r]),children:t})]}))};xT.displayName="FilterMenu";var xM=function(e){var t=e.children,r=e.sideOffset,n=e.side,i=e.alignOffset,a=e.align,o=e.className,l=xk(e,["children","sideOffset","side","alignOffset","align","className"]),s=xD().onClearFilters,c=(0,ei.Bd)().t;return(0,z.jsxs)(xc.Popover.Content,xN(xA({"data-filter-component":!0,sideOffset:void 0===r?8:r,side:void 0===n?"bottom":n,alignOffset:void 0===i?-32:i,align:void 0===a?"start":a,className:(0,xc.clx)("shadow-elevation-flyout bg-ui-bg-base min-w-[320px] rounded-lg",o)},l),{children:[t,(0,z.jsx)(xB.Seperator,{}),(0,z.jsx)("div",xN(xA({className:"px-3 py-2"},l),{children:(0,z.jsx)(xc.Button,{variant:"secondary",type:"button",className:"w-full",onClick:s,children:c("filter-menu-clear-button","Clear")})}))]}))};xM.displayName="FilterMenu.Content";var xR=function(e){var t=e.checked,r=e.onCheckedChange,n=e.label,i=U.useCallback(function(){r(!t)},[t,r]);return(0,z.jsxs)("button",{type:"button",onClick:i,className:"bg-ui-bg-base focus:bg-ui-bg-base-hover hover:bg-ui-bg-base-hover transition-fg txt-compact-xsmall-plus flex w-full cursor-pointer items-center gap-x-2 rounded-md px-3 py-2 outline-none",children:[(0,z.jsx)("div",{className:"flex h-5 w-5 items-center justify-center",children:t&&(0,z.jsx)(xs.CheckMini,{})}),(0,z.jsx)("span",{children:n})]})},xL=function(e){var t=e.name,r=e.placeholder,n=e.options,i=e.value,a=void 0===i?[]:i,o=e.onChange,l=U.useRef(null),s=U.useRef(null),c=x_(U.useState(!1),2),u=c[0],d=c[1],f=(0,ei.Bd)().t;U.useEffect(function(){var e=function(e){l.current&&!l.current.contains(e.target)&&d(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}},[]),U.useEffect(function(){var e=function(e){if(u&&"ArrowDown"===e.key){e.preventDefault();var t,r=e.target?e.target.nextElementSibling:null;if(r)r.focus();else{var n,i=null===(n=l.current)||void 0===n?void 0:n.firstElementChild;i&&i.focus()}}if(u&&"ArrowUp"===e.key){e.preventDefault();var a=e.target?e.target.previousElementSibling:null;if(a)a.focus();else{var o,c=null===(o=l.current)||void 0===o?void 0:o.lastElementChild;c&&c.focus()}}u&&"Escape"===e.key&&(e.preventDefault(),d(!1),null===(t=s.current)||void 0===t||t.focus())};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}},[u]);var p=(void 0===r?"Select filter":r)||f("filter-menu-select-item-default-placeholder","Select filter");return(0,z.jsxs)(xc.Popover,{open:u,"data-filter-component":!0,children:[(0,z.jsxs)("div",{className:"flex w-full items-center justify-between px-3 py-2",children:[(0,z.jsx)("span",{className:"txt-compact-xsmall-plus text-ui-fg-base",children:t}),(0,z.jsx)(xc.Popover.Trigger,{ref:s,className:(0,xc.clx)("bg-ui-bg-field hover:bg-ui-bg-field-hover transition-fg shadow-buttons-neutral flex h-8 w-[152px] items-center gap-x-2 rounded-md py-1 pr-2 text-left","focus:!shadow-borders-interactive-with-active data-[state=open]:!shadow-borders-interactive-with-active outline-none",{"pl-2":0===a.length,"pl-1":a.length>0}),onClick:function(){d(!u)},asChild:!0,children:(0,z.jsxs)("button",{children:[a.length>0?(0,z.jsxs)(xc.Badge,{className:"flex items-center tabular-nums",children:[a.length,(0,z.jsxs)("span",{className:"bg-ui-tag-neutral-bg focus:bg-ui-tag-neutral-bg-hover transition-fg flex h-5 w-5 items-center justify-center rounded-sm outline-none",role:"button",onClick:function(e){e.stopPropagation(),o([])},onKeyDown:function(e){"Enter"===e.key&&(e.stopPropagation(),o([]))},children:[(0,z.jsx)("span",{className:"sr-only",children:f("filter-menu-select-item-clear-button","Clear the selected options")}),(0,z.jsx)(xs.XMarkMini,{})]})]}):null,(0,z.jsx)("div",{className:"flex-1",children:a.length>0?(0,z.jsx)("span",{className:"text-ui-fg-base txt-compact-medium",children:f("filter-menu-select-item-selected","Selected")}):(0,z.jsx)("span",{className:"text-ui-fg-muted txt-compact-medium",children:p})}),(0,z.jsx)(xs.ChevronUpDown,{className:"text-ui-fg-muted"})]})})]}),(0,z.jsx)(xc.Popover.Content,{ref:l,sideOffset:8,side:"right",align:"start",alignOffset:-8,className:"shadow-elevation-flyout bg-ui-bg-base min-w-[220px] overflow-hidden rounded-lg p-1","data-filter-child":!0,children:n.map(function(e,t){return(0,z.jsx)(xR,{checked:a.includes(e.value),onCheckedChange:function(){if(a.includes(e.value)){o(a.filter(function(t){return t!==e.value}));return}o(((function(e){if(Array.isArray(e))return xC(e)})(a)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(a)||xE(a)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([e.value]))},label:e.label},t)})})]})};xL.displayName="FilterMenu.SelectItem";var xz=function(e){var t=e.name,r=e.value,n=e.onChange,i=x_(U.useState("lt"),2),a=i[0],o=i[1],l=x_(U.useState(!!r),2),s=l[0],c=l[1],u=(0,ei.Bd)().t,d=U.useCallback(function(e){if(!e){n(void 0);return}var t={lt:void 0,gt:void 0,gte:void 0,lte:void 0};switch(a){case"lt":t.lt=e;break;case"gt":t.gt=e}n(t)},[a,n]),f=U.useCallback(function(e){o(e),n(void 0)},[n]),p=U.useCallback(function(e){if(!e){n(void 0);return}var t={gte:e.from,lte:e.to};t.gte=e.from,t.lte=e.to,n(t)},[n]);return(0,z.jsxs)("div",{className:"px-3 py-2",children:[(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,z.jsx)("span",{className:"txt-compact-xsmall-plus text-ui-fg-base",children:t}),(0,z.jsx)(xc.Switch,{checked:s,onCheckedChange:function(e){c(e),e||n(void 0)}})]}),(0,z.jsx)(eh.bL,{open:s,children:(0,z.jsx)(eh.UC,{"data-filter-component":!0,className:"z-[1]",children:(0,z.jsxs)("div",{className:"flex flex-col gap-y-2 py-2",children:[(0,z.jsxs)(xc.Select,{size:"small",onValueChange:f,value:a,children:[(0,z.jsx)(xc.Select.Trigger,{children:(0,z.jsx)(xc.Select.Value,{})}),(0,z.jsxs)(xc.Select.Content,{className:"z-10",children:[(0,z.jsx)(xc.Select.Item,{value:"lt",children:u("filter-menu-date-item-before","Before")}),(0,z.jsx)(xc.Select.Item,{value:"gt",children:u("filter-menu-date-item-after","After")}),(0,z.jsx)(xc.Select.Item,{value:"btwn",children:u("filter-menu-date-item-between","Between")})]})]}),["lt","gt"].includes(a)?(0,z.jsx)(xc.DatePicker,{size:"small",value:r?r[a]:void 0,onChange:d}):(0,z.jsx)(xc.DatePicker,{size:"small",mode:"range",value:r?{from:r.gte,to:r.lte}:void 0,onChange:p})]})})})]})};xz.displayName="FilterMenu.DateItem";var xF=U.forwardRef(function(e,t){var r=e.className,n=xk(e,["className"]);return(0,z.jsx)(xc.Popover.Seperator,xA({ref:t,className:(0,xc.clx)("border-ui-border-base border-t",r)},n))});xF.displayName="FilterMenu.Seperator";var xB=Object.assign(xT,{Content:xM,SelectItem:xL,DateItem:xz,Seperator:xF});function xq(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function xH(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xU(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){xH(e,t,r[t])})}return e}function xV(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function xG(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function xW(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return xq(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xq(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var xY=function(e){var t=e.form,r=e.layout,n=e.enableTaxToggle;return(0,z.jsxs)("div",{className:"flex w-full flex-col gap-y-12",children:[(0,z.jsx)(x$,{form:t,layout:r}),(0,z.jsx)(xQ,{form:t,layout:r,enableTaxToggle:n}),(0,z.jsx)(xK,{form:t,layout:r}),(0,z.jsx)(xX,{form:t,layout:r})]})},x$=function(e){var t=e.form,r=e.layout,n=(0,ei.Bd)().t;return(0,z.jsxs)("div",{className:"flex flex-col gap-y-6",children:[(0,z.jsxs)("div",{children:[(0,z.jsx)(xc.Heading,{level:"h2",children:n("price-list-details-form-type-heading","Type")}),(0,z.jsx)(xc.Text,{className:"text-ui-fg-subtle",children:n("price-list-details-form-type-description","Choose the type of price list you want to create.")})]}),(0,z.jsx)(xP.Field,{control:t.control,name:t.path("type.value"),render:function(e){var t=e.field;return(0,z.jsxs)(xP.Item,{children:[(0,z.jsx)(xP.Control,{children:(0,z.jsxs)(xc.RadioGroup,xV(xU({},t),{onValueChange:t.onChange,className:(0,xc.clx)("grid gap-4",{"grid-cols-2":"focus"===r,"grid-cols-1":"drawer"===r}),children:[(0,z.jsx)(xc.RadioGroup.ChoiceBox,{id:"type_opt_sale","aria-describedby":"type_opt_sale_desc",value:"sale",label:n("price-list-details-form-type-label-sale","Sale"),description:n("price-list-details-form-type-hint-sale","Use this if you are creating a sale.")}),(0,z.jsx)(xc.RadioGroup.ChoiceBox,{id:"type_opt_override","aria-describedby":"type_opt_override_desc",value:"override",label:n("price-list-details-form-type-label-override","Override"),description:n("price-list-details-form-type-hint-override","Use this if you are overriding prices.")})]}))}),(0,z.jsx)(xP.ErrorMessage,{})]})}})]})},xQ=function(e){var t=e.form,r=e.layout,n=e.enableTaxToggle,i=(0,ei.Bd)().t;return(0,z.jsxs)("div",{className:"flex flex-col gap-y-6",children:[(0,z.jsxs)("div",{children:[(0,z.jsx)(xc.Heading,{level:"h2",children:i("price-list-details-form-general-heading","General")}),(0,z.jsx)(xc.Text,{className:"text-ui-fg-subtle",children:i("price-list-details-form-general-description","Choose a title and description for the price list.")})]}),(0,z.jsx)("div",{className:(0,xc.clx)("grid gap-4",{"grid-cols-1":"drawer"===r,"grid-cols-2":"focus"===r}),children:(0,z.jsx)(xP.Field,{control:t.control,name:t.path("general.name"),render:function(e){var t,r=e.field;return(0,z.jsxs)(xP.Item,{children:[(0,z.jsx)(xP.Label,{children:i("price-list-details-form-general-name-label","Name")}),(0,z.jsx)(xP.Control,{children:(0,z.jsx)(xc.Input,xV(xU({},r),{placeholder:null!==(t=i("price-list-details-form-general-name-placeholder","Black Friday Sale"))&&void 0!==t?t:void 0}))}),(0,z.jsx)(xP.ErrorMessage,{})]})}})}),(0,z.jsx)(xP.Field,{control:t.control,name:t.path("general.description"),render:function(e){var t,r=e.field;return(0,z.jsxs)(xP.Item,{children:[(0,z.jsx)(xP.Label,{children:i("price-list-details-form-general-description-label","Description")}),(0,z.jsx)(xP.Control,{children:(0,z.jsx)(xc.Textarea,xV(xU({},r),{placeholder:null!==(t=i("price-list-details-form-general-description-placeholder","Prices for the Black Friday sale..."))&&void 0!==t?t:void 0}))}),(0,z.jsx)(xP.ErrorMessage,{})]})}}),n&&(0,z.jsx)(xP.Field,{control:t.control,name:t.path("general.tax_inclusive"),render:function(e){var t=e.field,r=t.value,n=t.onChange,a=xG(e.field,["value","onChange"]);return(0,z.jsx)(xP.Item,{children:(0,z.jsxs)("div",{className:"flex items-start justify-between",children:[(0,z.jsxs)("div",{className:"flex flex-col",children:[(0,z.jsx)(xP.Label,{children:i("price-list-details-form-tax-inclusive-label","Tax inclusive prices")}),(0,z.jsx)(xP.Hint,{className:"!txt-medium",children:i("price-list-details-form-tax-inclusive-hint","Choose to make all prices in this list inclusive of tax.")})]}),(0,z.jsx)(xP.Control,{children:(0,z.jsx)(xc.Switch,xV(xU({},a),{checked:r,onCheckedChange:n}))})]})})}})]})},xK=function(e){var t=e.form,r=e.layout,n=xW(U.useState(!!t.getValues(t.path("dates.starts_at"))),2),i=n[0],a=n[1],o=xW(U.useState(!!t.getValues(t.path("dates.ends_at"))),2),l=o[0],s=o[1],c=(0,ei.Bd)().t;return(0,z.jsxs)("div",{className:"flex flex-col gap-y-12",children:[(0,z.jsxs)("div",{children:[(0,z.jsxs)("div",{children:[(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,z.jsx)(xc.Heading,{level:"h2",children:c("price-list-details-form-dates-starts-at-heading","Price list has a start date?")}),(0,z.jsx)(xc.Switch,{checked:i,onCheckedChange:function(e){e||t.setValue(t.path("dates.starts_at"),void 0,{shouldDirty:!0,shouldTouch:!0}),a(e)}})]}),(0,z.jsx)(xc.Text,{className:"text-ui-fg-subtle",children:c("price-list-details-form-dates-starts-at-description","Schedule the price overrides to activate in the future.")})]}),(0,z.jsx)(eh.bL,{open:i,children:(0,z.jsx)(eh.UC,{forceMount:!0,className:"group",children:(0,z.jsx)("div",{className:(0,xc.clx)("hidden gap-4 pt-6 group-data-[state='open']:grid",{"grid-cols-2":"focus"===r,"grid-cols-1":"drawer"===r}),children:(0,z.jsx)(xP.Field,{control:t.control,name:t.path("dates.starts_at"),render:function(e){var t=e.field,r=(t.ref,t.value),n=xG(e.field,["ref","value"]);return(0,z.jsxs)(xP.Item,{children:[(0,z.jsx)(xP.Label,{children:c("price-list-details-form-dates-starts-at-label","Start date")}),(0,z.jsx)(xP.Control,{children:(0,z.jsx)(xc.DatePicker,xV(xU({},n),{value:null!=r?r:void 0,showTimePicker:!0}))}),(0,z.jsx)(xP.ErrorMessage,{})]})}})})})})]}),(0,z.jsxs)("div",{children:[(0,z.jsxs)("div",{children:[(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,z.jsx)(xc.Heading,{level:"h2",children:c("price-list-details-form-ends-at-heading","Price list has an expiry date?")}),(0,z.jsx)(xc.Switch,{checked:l,onCheckedChange:function(e){e||t.setValue(t.path("dates.ends_at"),void 0,{shouldDirty:!0,shouldTouch:!0}),s(e)}})]}),(0,z.jsx)(xc.Text,{className:"text-ui-fg-subtle",children:c("price-list-details-form-ends-at-description","Schedule the price overrides to deactivate in the future.")})]}),(0,z.jsx)(eh.bL,{open:l,children:(0,z.jsx)(eh.UC,{forceMount:!0,className:"group",children:(0,z.jsx)("div",{className:(0,xc.clx)("hidden gap-4 pt-6 group-data-[state='open']:grid",{"grid-cols-2":"focus"===r,"grid-cols-1":"drawer"===r}),children:(0,z.jsx)(xP.Field,{control:t.control,name:t.path("dates.ends_at"),render:function(e){var t=e.field,r=(t.ref,t.value),n=xG(e.field,["ref","value"]);return(0,z.jsxs)(xP.Item,{children:[(0,z.jsx)(xP.Label,{children:c("price-list-details-form-ends-at-label","Expiry date")}),(0,z.jsx)(xP.Control,{children:(0,z.jsx)(xc.DatePicker,xV(xU({},n),{value:null!=r?r:void 0,showTimePicker:!0}))}),(0,z.jsx)(xP.ErrorMessage,{})]})}})})})})]})]})},xZ=(0,us.createColumnHelper)(),xJ=function(){var e=(0,ei.Bd)().t;return{columns:U.useMemo(function(){return[xZ.display({id:"select",header:function(e){var t=e.table;return(0,z.jsx)(xc.Checkbox,{checked:t.getIsSomePageRowsSelected()?"indeterminate":t.getIsAllPageRowsSelected(),onCheckedChange:function(e){return t.toggleAllPageRowsSelected(!!e)},"aria-label":"Select all customer groups on the current page"})},cell:function(e){var t=e.row;return(0,z.jsx)(xc.Checkbox,{checked:t.getIsSelected(),onCheckedChange:function(e){return t.toggleSelected(!!e)},"aria-label":"Select row"})}}),xZ.accessor("name",{header:function(){return e("price-list-details-form-customer-groups-name","Name")},cell:function(e){return e.getValue()}}),xZ.accessor("customers",{header:function(){return(0,z.jsx)("div",{className:"w-full text-right",children:e("price-list-details-form-customer-groups-members","Members")})},cell:function(e){var t;return(0,z.jsx)("div",{className:"w-full text-right",children:(null===(t=e.getValue())||void 0===t?void 0:t.length)||"-"})}})]},[e])}},xX=function(e){var t,r,n,i=e.form,a=e.layout,o=i.register,l=i.path,s=i.setValue,c=xW(U.useState(!!(null===(t=i.getValues(i.path("customer_groups.ids")))||void 0===t?void 0:t.length)),2),u=c[0],d=c[1],f=(0,ei.Bd)().t,p=xW(U.useState(""),2),m=p[0],h=p[1],y=(0,e8.d)(m,500),b=xW(U.useState(xU({},null===(r=i.getValues(i.path("customer_groups.ids")))||void 0===r?void 0:r.reduce(function(e,t){return xV(xU({},e),xH({},t,!0))},{}))),2),v=b[0],g=b[1],x=xW(U.useState({pageIndex:0,pageSize:4}),2),j=x[0],w=x[1],O=U.useMemo(function(){return j.pageIndex*j.pageSize},[j.pageIndex,j.pageSize]),S=xW(U.useState({}),2),P=S[0],C=S[1];U.useEffect(function(){u||C({})},[u]);var A=(0,J.useAdminCustomerGroups)({limit:4,offset:O,expand:"customers",q:y},{keepPreviousData:!0}),N=A.customer_groups,k=A.count,_=A.isLoading,E=A.isError,I=U.useMemo(function(){return k?Math.ceil(k/4):0},[k]),D=xJ().columns,T=(0,us.useReactTable)({columns:D,data:null!=N?N:[],getCoreRowModel:(0,us.getCoreRowModel)(),getPaginationRowModel:(0,us.getPaginationRowModel)(),getRowId:function(e){return e.id},state:{rowSelection:v,pagination:j},pageCount:I,enableRowSelection:!0,onRowSelectionChange:g,manualPagination:!0,onPaginationChange:w});return(U.useEffect(function(){o(l("customer_groups.ids"))},[o,l]),U.useEffect(function(){s(l("customer_groups.ids"),Object.keys(v),{shouldDirty:!0,shouldTouch:!0})},[v,l,s]),_)?(0,z.jsx)("div",{children:(0,z.jsx)(xs.Spinner,{className:"animate-spin"})}):E?(0,z.jsx)(xc.Container,{children:(0,z.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,z.jsx)(xs.ExclamationCircle,{}),(0,z.jsx)(xc.Text,{className:"text-ui-fg-subtle",children:f("price-list-details-form-customer-groups-error","An error occurred while loading customer groups. Reload the page and try again. If the issue persists, try again later.")})]})}):N?(0,z.jsxs)("div",{className:"w-full",children:[(0,z.jsxs)("div",{children:[(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,z.jsx)(xc.Heading,{level:"h2",children:f("price-list-details-form-customer-groups-heading","Customer availability")}),(0,z.jsx)(xc.Switch,{checked:u,onCheckedChange:d})]}),(0,z.jsx)(xc.Text,{className:"text-ui-fg-subtle",children:f("price-list-details-form-customer-groups-description","Specify which customer groups the price overrides should apply for.")})]}),(0,z.jsx)(eh.bL,{open:u,onOpenChange:d,children:(0,z.jsx)(eh.UC,{children:(0,z.jsx)("div",{className:"pt-6",children:(0,z.jsxs)(xc.Container,{className:"overflow-hidden p-0 ",children:[(0,z.jsxs)("div",{className:(0,xc.clx)("flex px-8 pt-6 pb-4",{"items-center justify-between":"focus"===a,"flex-col gap-y-4":"drawer"===a}),children:[(0,z.jsx)(xc.Heading,{children:f("price-list-details-form-customer-groups-content-heading","Customer Groups")}),(0,z.jsxs)("div",{className:(0,xc.clx)("flex items-center gap-x-2",{"w-full":"drawer"===a}),children:[(0,z.jsx)(xB,{onClearFilters:function(){return C({})},children:(0,z.jsxs)(xB.Content,{side:"top",children:[(0,z.jsx)(xB.DateItem,{name:"Created at",value:P.created_at,onChange:function(e){C(function(t){return xV(xU({},t),{created_at:e})})}}),(0,z.jsx)(xB.Seperator,{}),(0,z.jsx)(xB.DateItem,{name:"Updated at",value:P.updated_at,onChange:function(e){C(function(t){return xV(xU({},t),{updated_at:e})})}})]})}),(0,z.jsx)(xc.Input,{className:(0,xc.clx)({"w-full":"drawer"===a}),type:"search",placeholder:null!==(n=f("price-list-details-form-customer-groups-search-placeholder","Search"))&&void 0!==n?n:void 0,size:"small",value:m,onChange:function(e){return h(e.target.value)}})]})]}),(0,z.jsxs)(xc.Table,{children:[(0,z.jsx)(xc.Table.Header,{children:T.getHeaderGroups().map(function(e){return(0,z.jsx)(xc.Table.Row,{className:"[&_th:first-of-type]:w-[1%] [&_th:first-of-type]:whitespace-nowrap",children:e.headers.map(function(e){return(0,z.jsx)(xc.Table.HeaderCell,{children:(0,us.flexRender)(e.column.columnDef.header,e.getContext())},e.id)})},e.id)})}),(0,z.jsx)(xc.Table.Body,{className:"border-b-0",children:T.getRowModel().rows.map(function(e){return(0,z.jsx)(xc.Table.Row,{children:e.getVisibleCells().map(function(e){return(0,z.jsx)(xc.Table.Cell,{children:(0,us.flexRender)(e.column.columnDef.cell,e.getContext())},e.id)})},e.id)})})]}),(0,z.jsx)(xc.Table.Pagination,{count:null!=k?k:0,canNextPage:T.getCanNextPage(),canPreviousPage:T.getCanPreviousPage(),nextPage:T.nextPage,previousPage:T.previousPage,pageIndex:j.pageIndex,pageCount:I,pageSize:j.pageSize})]})})})})]}):(0,z.jsx)(xc.Container,{children:(0,z.jsx)(xc.Text,{className:"text-ui-fg-subtle",children:f("price-list-details-form-customer-groups-no-groups","No customer groups found.")})})},x0=r(14476),x1=x0.Ik({type:x0.Ik({value:x0.k5(["sale","override"],{required_error:"Type is required"})}),general:x0.Ik({name:x0.Yj().nonempty({message:"Name is required"}),description:x0.Yj().nonempty({message:"Description is required"}),tax_inclusive:x0.zM()}),dates:x0.Ik({starts_at:x0.p6().nullable().optional(),ends_at:x0.p6().nullable().optional()}).superRefine(function(e,t){e.starts_at&&e.ends_at&&e.starts_at>e.ends_at&&(t.addIssue({code:x0.eq.custom,message:"Start date cannot be after end date",path:["starts_at"]}),t.addIssue({code:x0.eq.custom,message:"End date cannot be before start date",path:["ends_at"]}))}),customer_groups:x0.Ik({ids:x0.YO(x0.Yj())})});function x2(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function x3(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function o(e){x2(a,n,i,o,l,"next",e)}function l(e){x2(a,n,i,o,l,"throw",e)}o(void 0)})}}function x5(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}!function(e){e.ACTIVE="active",e.DRAFT="draft"}(g||(g={})),function(e){e.SALE="sale",e.OVERRIDE="override"}(x||(x={}));var x6=function(e){var t,r,n,i,a=e.open,o=e.onOpenChange,l=e.priceList,s=(0,J.useAdminUpdatePriceList)(l.id),c=s.mutateAsync,u=s.isLoading,d=(0,ei.Bd)().t,f=(0,eR.mN)({defaultValues:x4(l)}),p=(0,(0,rz.u)().isFeatureEnabled)("tax_inclusive_pricing"),m=f.reset,h=f.formState.isDirty,y=f.handleSubmit;U.useEffect(function(){a&&m(x4(l))},[l,a,m]);var b=(0,xc.usePrompt)(),v=(0,eC.A)(),g=U.useCallback((t=x3(function(e){return x5(this,function(t){switch(t.label){case 0:if(!h)return[3,2];return[4,b({title:d("price-list-details-drawer-prompt-title","Are you sure?"),description:d("price-list-details-drawer-prompt-description","You have unsaved changes, are you sure you want to exit?")})];case 1:if(!t.sent())return o(!0),[2];t.label=2;case 2:return m(),o(e),[2]}})}),function(e){return t.apply(this,arguments)}),[h,d,m,b,o]),x=y((r=x3(function(e){var t,r;return x5(this,function(n){switch(n.label){case 0:return[4,c({type:e.details.type.value,name:e.details.general.name,description:e.details.general.description,starts_at:null!==(t=e.details.dates.starts_at)&&void 0!==t?t:null,ends_at:null!==(r=e.details.dates.ends_at)&&void 0!==r?r:null,includes_tax:p?e.details.general.tax_inclusive:void 0,customer_groups:e.details.customer_groups.ids.map(function(e){return{id:e}})},{onSuccess:function(){v(d("price-list-details-notification-succes-title","Price list updated"),d("price-list-details-drawer-notification-success-message","Successfully updated price list"),"success"),o(!1)},onError:function(e){v(d("price-list-details-drawer-notification-error-title","An error occurred"),(0,eA.u)(e),"error")}})];case 1:return n.sent(),[2]}})}),function(e){return r.apply(this,arguments)}));return(0,z.jsx)(xc.Drawer,{open:a,onOpenChange:g,children:(0,z.jsx)(xP,(n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},f),i=i={children:(0,z.jsxs)(xc.Drawer.Content,{children:[(0,z.jsx)(xc.Drawer.Header,{children:(0,z.jsx)(xc.Drawer.Title,{children:d("price-list-details-drawer-title","Edit Price List Details")})}),(0,z.jsx)(xc.Drawer.Body,{className:"overflow-y-auto",children:(0,z.jsx)(xY,{form:(0,eL.m)(f,"details"),layout:"drawer",enableTaxToggle:p})}),(0,z.jsxs)(xc.Drawer.Footer,{children:[(0,z.jsx)(xc.Drawer.Close,{asChild:!0,children:(0,z.jsx)(xc.Button,{variant:"secondary",children:d("price-list-details-drawer-cancel-button","Cancel")})}),(0,z.jsx)(xc.Button,{onClick:x,isLoading:u,children:d("price-list-details-drawer-save-button","Save")})]})]})},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))}),n))})},x4=function(e){var t,r;return{details:{type:{value:e.type},general:{name:e.name,description:e.description,tax_inclusive:e.includes_tax},customer_groups:{ids:null!==(r=null===(t=e.customer_groups)||void 0===t?void 0:t.map(function(e){return e.id}))&&void 0!==r?r:[]},dates:{starts_at:e.starts_at?new Date(e.starts_at):void 0,ends_at:e.ends_at?new Date(e.ends_at):void 0}}}};function x8(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function x7(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function x9(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function o(e){x7(a,n,i,o,l,"next",e)}function l(e){x7(a,n,i,o,l,"throw",e)}o(void 0)})}}function je(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}var jt=function(e){var t,r,n,i,a,o,l=e.priceList,s=function(e){if(Array.isArray(e))return e}(t=U.useState(!1))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(t,2)||function(e,t){if(e){if("string"==typeof e)return x8(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return x8(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),c=s[0],u=s[1],d=(0,ei.Bd)().t,f=(0,xc.usePrompt)(),p=(0,eC.A)(),m=(0,H.useNavigate)(),h=(0,J.useAdminDeletePriceList)(l.id).mutateAsync,y=(r=x9(function(){var e,t,r,n,i;return je(this,function(a){switch(a.label){case 0:return e=l.name,r=null!==(t=d("price-list-details-section-prompt-confirm-text","Delete"))&&void 0!==t?t:void 0,i=null!==(n=d("price-list-details-section-prompt-cancel-text","Cancel"))&&void 0!==n?n:void 0,[4,f({title:d("price-list-details-section-prompt-title","Delete price list"),description:d("price-list-details-section-prompt-description",'Are you sure you want to delete the price list "{{name}}"?',{name:e}),verificationText:e,confirmText:r,cancelText:i})];case 1:if(!a.sent())return[2];return[4,h(void 0,{onSuccess:function(){p(d("price-list-details-section-delete-notification-success-title","Successfully deleted price list"),d("price-list-details-section-delete-notification-success-message",'The price list "{{name}}" was successfully deleted',{name:e}),"success"),m("/a/price-lists",{replace:!0})},onError:function(e){p(d("price-list-details-section-delete-notification-error-title","Failed to delete price list"),(0,eA.u)(e),"error")}})];case 2:return a.sent(),[2]}})}),function(){return r.apply(this,arguments)});return(0,z.jsxs)("div",{children:[(0,z.jsxs)(xc.Container,{children:[(0,z.jsxs)("div",{className:"flex flex-col gap-y-1 pb-6",children:[(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,z.jsx)(xc.Heading,{children:l.name}),(0,z.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,z.jsx)(jr,{priceListId:l.id,status:l.status,endsAt:l.ends_at,startsAt:l.starts_at}),(0,z.jsx)(jn,{onOpenDrawer:function(){u(!c)},onDelete:y})]})]}),(0,z.jsx)(xc.Text,{children:null==l?void 0:l.description})]}),(0,z.jsxs)("div",{className:"small:grid-cols-2 medium:grid-cols-3 grid grid-cols-1 gap-6",children:[(0,z.jsxs)("div",{className:"border-ui-border-base flex flex-col gap-y-1 border-l px-4",children:[(0,z.jsx)(xc.Text,{size:"base",className:"text-ui-fg-subtle",children:d("price-list-details-section-customer-groups","Customer Groups")}),(null!==(a=null===(n=l.customer_groups)||void 0===n?void 0:n.length)&&void 0!==a?a:0)>0?(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,z.jsx)(xc.Text,{size:"large",children:l.customer_groups.slice(0,2).map(function(e){return e.name}).join(", ")}),((null===(i=l.customer_groups)||void 0===i?void 0:i.length)||0)>2&&(0,z.jsx)(xc.Tooltip,{content:(0,z.jsx)("div",{className:"flex flex-col",children:l.customer_groups.slice(2).map(function(e){return(0,z.jsx)(xc.Text,{size:"small",children:e.name},e.id)})}),children:(0,z.jsxs)(xc.Badge,{size:"small",className:"cursor-default",children:["+",l.customer_groups.length-2]})})]}):(0,z.jsx)(xc.Text,{size:"large",className:"text-ui-fg-muted",children:"-"})]}),(0,z.jsxs)("div",{className:"border-ui-border-base flex flex-col gap-y-1 border-l px-4",children:[(0,z.jsx)(xc.Text,{size:"base",className:"text-ui-fg-subtle",children:d("price-list-details-section-last-edited","Last edited")}),(0,z.jsx)(xc.Text,{size:"large",children:(0,xu.default)(new Date(l.updated_at),"EEE d, MMM yyyy")})]}),(0,z.jsxs)("div",{className:"border-ui-border-base flex flex-col gap-y-1 border-l px-4",children:[(0,z.jsx)(xc.Text,{size:"base",className:"text-ui-fg-subtle",children:d("price-list-details-section-number-of-prices","Prices")}),(0,z.jsx)(xc.Text,{size:"large",children:null!==(o=l.prices.length)&&void 0!==o?o:0})]})]})]}),(0,z.jsx)(x6,{onOpenChange:u,open:c,priceList:l})]})},jr=function(e){var t,r=e.status,n=e.endsAt,i=e.startsAt,a=e.priceListId,o=(0,ei.Bd)().t,l=(0,eC.A)(),s=(0,J.useAdminUpdatePriceList)(a).mutateAsync,c="active"===r,u=!!n&&new Date(n)<new Date,d=!!i&&new Date(i)>new Date,f=U.useMemo(function(){return u?o("price-list-details-section-status-menu-expired","Expired"):"draft"===r?o("price-list-details-section-status-menu-draft","Draft"):d?o("price-list-details-section-status-menu-scheduled","Scheduled"):o("price-list-details-section-status-active","Active")},[r,o,u,d]),p=U.useMemo(function(){return u?(0,z.jsx)(xs.EllipseRedSolid,{}):"draft"===r?(0,z.jsx)(xs.EllipseGreySolid,{}):d?(0,z.jsx)(xs.EllipseOrangeSolid,{}):(0,z.jsx)(xs.EllipseGreenSolid,{})},[r,u,d]),m=(t=x9(function(){var e;return je(this,function(t){return s({status:e=c?g.DRAFT:g.ACTIVE},{onSuccess:function(){l(o("price-list-details-section-status-menu-notification-success-title","Successfully updated price list status"),o("price-list-details-section-status-menu-notification-success-message","The price list status was successfully updated to {{status}}",{status:e}),"success")},onError:function(e){l(o("price-list-details-section-status-menu-notification-error-title","Failed to update price list status"),(0,eA.u)(e),"error")}}),[2]})}),function(){return t.apply(this,arguments)});return(0,z.jsxs)(xc.DropdownMenu,{children:[(0,z.jsx)(xc.DropdownMenu.Trigger,{asChild:!0,disabled:u,children:(0,z.jsxs)(xc.Button,{variant:"secondary",className:"!text-ui-fg-base flex items-center !gap-x-1.5 pl-2.5 pr-3 capitalize",children:[p,f]})}),(0,z.jsx)(xc.DropdownMenu.Content,{align:"end",side:"bottom",className:"min-w-[200px]",onClick:m,children:(0,z.jsxs)(xc.DropdownMenu.Item,{children:[c?(0,z.jsx)(xs.EllipseGreySolid,{}):(0,z.jsx)(xs.EllipseGreenSolid,{}),(0,z.jsx)("span",{children:c?o("price-list-details-section-status-menu-item-draft","Draft"):o("price-list-details-section-status-menu-item-activate","Activate")})]})})]})},jn=function(e){var t=e.onDelete,r=e.onOpenDrawer,n=(0,ei.Bd)().t;return(0,z.jsxs)(xc.DropdownMenu,{children:[(0,z.jsx)(xc.DropdownMenu.Trigger,{asChild:!0,children:(0,z.jsx)(xc.IconButton,{children:(0,z.jsx)(xs.EllipsisHorizontal,{})})}),(0,z.jsxs)(xc.DropdownMenu.Content,{align:"end",side:"bottom",children:[(0,z.jsxs)(xc.DropdownMenu.Item,{onClick:r,children:[(0,z.jsx)(xs.PencilSquare,{className:"text-ui-fg-subtle"}),(0,z.jsx)("span",{className:"ml-2",children:n("price-list-details-menu-item-edit","Edit details")})]}),(0,z.jsx)(xc.DropdownMenu.Separator,{}),(0,z.jsxs)(xc.DropdownMenu.Item,{onClick:t,children:[(0,z.jsx)(xs.Trash,{className:"text-ui-fg-subtle"}),(0,z.jsx)("span",{className:"ml-2",children:n("price-list-details-menu-item-delete","Delete")})]})]})]})};function ji(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ja(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ji(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ji(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var jo=function(){var e=ja((0,H.useSearchParams)(),1)[0],t=(0,H.useNavigate)(),r=ja(U.useState(e.get("q")||""),2),n=r[0],i=r[1],a=(0,e8.d)(n,500);return U.useEffect(function(){var r=new URLSearchParams(e);a?r.set("q",a):r.delete("q"),t({search:r.toString()},{replace:!0})},[a,e,t]),{query:n,setQuery:i}},jl=function(e,t){var r=t.get(e);if(r){var n=JSON.parse(r),i=["lt","gt","gte","lte"],a=Object.keys(n).reduce(function(e,t){return i.includes(t)&&(e[t]=n[t]),e},{});if(0!==Object.keys(a).length)return Object.keys(a).reduce(function(e,t){if(a[t]){var r=a[t];e[t]=new Date(r)}return e},{})}},js=function(e,t){var r=t.get(e);if(r)return r.split(",").filter(function(e){return!!e})},jc=function(e,t){var r=t.get(e);if(r)return r};function ju(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var jd=function(e){var t=e.value,r=e.onClearFilters,n=e.onFilterChange,i=(0,ei.Bd)().t,a=function(e,r){var i,a;n((i=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){ju(e,t,r[t])})}return e}({},t),a=null!=(a=ju({},e,r))?a:{},Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(a)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(a)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(a,e))}),i))};return(0,z.jsx)(xB,{onClearFilters:r,children:(0,z.jsxs)(xB.Content,{children:[(0,z.jsx)(xB.DateItem,{name:i("price-list-product-filter-created-at","Created at"),value:null==t?void 0:t.created_at,onChange:function(e){return a("created_at",e)}}),(0,z.jsx)(xB.Seperator,{}),(0,z.jsx)(xB.DateItem,{name:i("price-list-product-filter-updated-at","Updated at"),value:null==t?void 0:t.updated_at,onChange:function(e){return a("updated_at",e)}})]})})},jf=r(70893);function jp(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function jm(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return jp(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jp(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var jh=function(e){var t,r,n=e.form,i=e.setProduct,a=e.productIds,o=e.priceListId,l=n.control,s=n.path,c=n.getValues;n.formState.isDirty;var u=(0,ei.Bd)().t,d=jm(U.useState({}),2),f=d[0],p=d[1],m=jm(U.useState(""),2),h=m[0],y=m[1],b=(0,e8.d)(h,500),v=(0,J.useAdminProducts)((t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({id:a,q:b,price_list_id:o?[o]:void 0},f),r=r={expand:"variants.prices"},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t),{keepPreviousData:!0,enabled:!!(null==a?void 0:a.length)}),g=v.products,x=v.isLoading,j=v.isError,w=u("price-list-prices-form-products-error","An error occurred while preparing the form. Reload the page and try again. If the issue persists, try again later.");return j?(0,z.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,z.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,z.jsx)(xs.ExclamationCircle,{}),(0,z.jsx)(xc.Text,{className:"text-ui-fg-subtle",children:w})]})}):x?(0,z.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,z.jsx)(xs.Spinner,{className:"animate-spin"})}):g?(0,z.jsxs)("div",{className:"relative flex h-full w-full flex-col",children:[(0,z.jsxs)("div",{children:[(0,z.jsxs)("div",{className:"border-ui-border-base bg-ui-bg-base z-10 flex items-center justify-between border-b px-4 py-3",children:[(0,z.jsxs)("div",{className:"flex items-center gap-x-3",children:[(0,z.jsx)(xc.Heading,{children:u("price-list-prices-form-heading","Edit prices")}),(0,z.jsx)(xP.Field,{control:l,name:s("products"),render:function(){return(0,z.jsx)(xP.Item,{children:(0,z.jsx)(xP.ErrorMessage,{})})}})]}),(0,z.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,z.jsx)(jd,{onClearFilters:function(){return p({})},value:f,onFilterChange:p}),(0,z.jsx)(xc.Input,{type:"search",placeholder:"Search",size:"small",value:h,onChange:function(e){return y(e.target.value)}})]})]}),(0,z.jsx)("div",{className:"border-ui-border-base border-b",children:(0,z.jsx)("table",{className:"w-full text-left",children:(0,z.jsx)("thead",{children:(0,z.jsxs)("tr",{className:"[&_th]:text-ui-fg-subtle [&_th]:txt-compact-small-plus border-ui-border-base [&_th:last-of-type]:border-r-0 [&_th]:w-1/3 [&_th]:border-r [&_th]:px-4 [&_th]:py-2.5",children:[(0,z.jsx)("th",{children:u("price-list-prices-form-variant","Variant")}),(0,z.jsx)("th",{children:u("price-list-prices-form-sku","SKU")}),(0,z.jsx)("th",{className:"text-right",children:u("price-list-prices-form-prices","Prices")})]})})})})]}),(0,z.jsx)("div",{className:"relative flex h-full flex-1 flex-col overflow-y-auto",children:g.map(function(e){return(0,z.jsxs)("div",{children:[(0,z.jsxs)("div",{className:"bg-ui-bg-subtle border-ui-border-base sticky top-0 flex items-center justify-between border-b p-4",children:[(0,z.jsxs)("div",{className:"flex items-center gap-x-4",children:[(0,z.jsx)("div",{className:"bg-ui-bg-subtle h-10 w-[30px] overflow-hidden rounded-md",children:e.thumbnail&&(0,z.jsx)("img",{src:e.thumbnail,className:"h-full w-full object-cover"})}),(0,z.jsxs)("div",{children:[(0,z.jsx)(xc.Text,{size:"small",weight:"plus",children:e.title}),(0,z.jsx)(xc.Text,{size:"small",className:"text-ui-fg-subtle",children:u("price-list-prices-form-prices-variant-count","{{count}} variants",{count:e.variants.length})})]})]}),(0,z.jsx)(xc.Button,{variant:"secondary",onClick:function(){i(e)},children:u("price-list-prices-form-add-prices-button","Add prices")})]}),(0,z.jsx)("table",{className:"w-full",children:(0,z.jsx)("tbody",{children:e.variants.map(function(t){var r=0,n=c(s("products.".concat(e.id,".variants.").concat(t.id)));if(n){if(n.currency){var i=!0,a=!1,o=void 0;try{for(var l,d=Object.keys(n.currency)[Symbol.iterator]();!(i=(l=d.next()).done);i=!0){var f=l.value;n.currency[f].amount&&r++}}catch(e){a=!0,o=e}finally{try{i||null==d.return||d.return()}finally{if(a)throw o}}}if(n.region){var p=!0,m=!1,h=void 0;try{for(var y,b=Object.keys(n.region)[Symbol.iterator]();!(p=(y=b.next()).done);p=!0){var v=y.value;n.region[v].amount&&r++}}catch(e){m=!0,h=e}finally{try{p||null==b.return||b.return()}finally{if(m)throw h}}}}return(0,z.jsxs)("tr",{className:"[&_td]:text-ui-fg-subtle [&_td]:txt-compact-small border-ui-border-base border-b [&_td:last-of-type]:border-r-0 [&_td]:w-1/3 [&_td]:border-r [&_td]:px-4 [&_td]:py-2.5",children:[(0,z.jsx)("td",{children:t.title}),(0,z.jsx)("td",{children:t.sku?t.sku:"-"}),(0,z.jsx)("td",{className:"text-right",children:u("price-list-prices-form-prices-count","{{count}} prices",{count:r})})]},t.id)})})})]},e.id)})})]}):(0,z.jsxs)("div",{className:"flex h-full w-full items-center justify-center gap-x-2",children:[(0,z.jsx)(xs.ExclamationCircle,{}),(0,z.jsx)(xc.Text,{className:"text-ui-fg-subtle",children:w})]})},jy=function(e,t){var r=sS.q[e.toUpperCase()];return t&&r?parseFloat((t/Math.pow(10,r.decimal_digits)).toFixed(r.decimal_digits)):null},jb=function(e,t){var r=sS.q[e.toUpperCase()];return t&&r?parseFloat((t*Math.pow(10,r.decimal_digits)).toFixed(0)):null},jv=x0.Ik({products:x0.g1(x0.Yj(),x0.Ik({variants:x0.g1(x0.Yj(),x0.Ik({currency:x0.g1(x0.Yj(),x0.Ik({id:x0.Yj().nullable().optional(),amount:x0.Yj().nullable()})).optional(),region:x0.g1(x0.Yj(),x0.Ik({id:x0.Yj().nullable().optional(),amount:x0.Yj().nullable()})).optional()}))}))}),jg=function(e){var t=e.priceList,r=e.productIds,n=e.enable,i=void 0===n?{products:!0}:n,a=(0,J.useAdminProducts)({id:r,price_list_id:t?[t.id]:void 0},{keepPreviousData:!0,enabled:!!(null==r?void 0:r.length)&&i.products}),o=a.products,l=a.isLoading,s=a.isError,c=(0,J.useAdminStore)(),u=c.store,d=c.isLoading,f=c.isError,p=U.useMemo(function(){return u?u.currencies:[]},[u]),m=(0,J.useAdminRegions)({limit:1e3},{keepPreviousData:!0}),h=m.regions,y=m.isLoading,b=m.isError,v=i.products&&l||d||y;return{isError:i.products&&s||f||b,isLoading:v,isNotFound:i.products&&!o||!h||!p,products:null!=o?o:[],currencies:p,regions:null!=h?h:[]}};function jx(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function jj(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||jO(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jw(e){return function(e){if(Array.isArray(e))return jx(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||jO(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jO(e,t){if(e){if("string"==typeof e)return jx(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jx(e,t)}}var jS=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,t=jj(U.useState([]),2),r=t[0],n=t[1],i=jj(U.useState([]),2),a=i[0],o=i[1],l=r.length>0,s=a.length>0;return{undo:U.useCallback(function(){if(l){var t=r[r.length-1],i=r.slice(0,r.length-1);t.undo(),n(i),o([t].concat(jw(a.slice(0,e-1))))}},[l,a,r,e]),redo:U.useCallback(function(){if(s){var t=a[0],i=a.slice(1);t.redo(),n(jw(r).concat([t]).slice(0,e-1)),o(i)}},[s,a,r,e]),execute:U.useCallback(function(t){t.execute(),n(function(r){return jw(r).concat([t]).slice(0,e-1)}),o([])},[e]),canUndo:l,canRedo:s}};function jP(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function jC(e){return function(e){if(Array.isArray(e))return jP(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||jA(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jA(e,t){if(e){if("string"==typeof e)return jP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jP(e,t)}}var jN=function(e){return"".concat(e.row,"-").concat(e.col)},jk=function(e){var t,r=function(e){if(Array.isArray(e))return e}(t=e.split("-"))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(t,2)||jA(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),n=r[0],i=r[1];return{row:parseInt(n),col:parseInt(i)}},j_=function(e){if(!e)return null;var t=e.closest("td");if(!t||!jI(t))return null;var r=t.cellIndex,n=t.parentElement.rowIndex;return n&&r?{row:n,col:r}:null},jE=function(e,t){return e?(t||document).querySelector('td[data-row-index="'.concat(e.row,'"][data-col-index="').concat(e.col,'"]')):null},jI=function(e){if(!e)return!1;var t=e.parentElement;return!!t&&"TR"===t.nodeName},jD=function(e){if(!e)return null;var t=e.closest("td");return t&&"true"===t.getAttribute("data-editable")&&jI(t)?t:null};function jT(e,t){if(e>t){var r;t=(r=[e,t])[0],e=r[1]}for(var n=[],i=e;i<=t;i++)n.push(i);return n}var jM=function(e,t){if(!e||!jD(e))return null;var r=j_(e);if(!r)return null;var n=jz(Object.keys(t).map(function(e){return jk(e)}))[0],i=n.topLeft,a=n.bottomRight;if(!i||!a)return null;var o=r.col<i.col,l=r.col>a.col,s=r.row<i.row,c=r.row>a.row;if(!o&&!l&&!s&&!c)return null;var u=jT(i.row,a.row),d=jT(i.col,a.col),f=!1;return((o||l)&&(u.includes(r.row)||(f=!1),f=!0),(s||c)&&(d.includes(r.col)||(f=!1),f=!0),f)?o?{range:jR({row:i.row,col:r.col},{row:a.row,col:i.col-1}),position:"left"}:l?{range:jR({row:i.row,col:a.col+1},{row:a.row,col:r.col}),position:"right"}:s?{range:jR({row:i.row-1,col:i.col},{row:r.row,col:a.col}),position:"above"}:c?{range:jR({row:a.row+1,col:i.col},{row:r.row,col:a.col}),position:"below"}:null:s&&l?i.row-r.row<r.col-a.col?{range:jR({row:i.row-1,col:a.col},{row:r.row,col:i.col}),position:"above"}:{range:jR({row:i.row,col:a.col+1},{row:a.row,col:r.col}),position:"right"}:s&&o?i.row-r.row<i.col-r.col?{range:jR({row:i.row-1,col:i.col},{row:r.row,col:a.col}),position:"above"}:{range:jR({row:i.row,col:r.col},{row:a.row,col:i.col-1}),position:"left"}:c&&l?r.row-a.row<r.col-a.col?{range:jR({row:a.row,col:a.col+1},{row:r.row,col:i.col}),position:"below"}:{range:jR({row:a.row+1,col:i.col},{row:r.row,col:a.col}),position:"right"}:c&&o?r.row-a.row<i.col-r.col?{range:jR({row:a.row,col:i.col-1},{row:r.row,col:a.col}),position:"below"}:{range:jR({row:a.row+1,col:a.col},{row:r.row,col:i.col}),position:"left"}:null},jR=function(e,t){for(var r={},n=Math.min(e.col,t.col),i=Math.max(e.col,t.col),a=Math.min(e.row,t.row),o=Math.max(e.row,t.row),l=n;l<=i;l++)for(var s=a;s<=o;s++)r["".concat(s,"-").concat(l)]=!0;return r},jL=function(e,t,r){var n=r||document;return Object.keys(jR(e,t)).map(function(e){var t=jk(e),r=n.querySelector('td[data-row-index="'.concat(t.row,'"][data-col-index="').concat(t.col,'"]'));if(!r)return null;var i=r.getAttribute("data-variant-id"),a=r.getAttribute("data-region-id"),o=r.getAttribute("data-currency-code"),l=r.getAttribute("data-type");return i&&(a||o)&&l?{variantId:i,regionId:a,currencyCode:o,type:l}:null}).filter(Boolean)},jz=function(e){var t=new Map,r=!0,n=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var l=a.value,s=l.col,c=l.row;t.has(s)||t.set(s,new Set),t.get(s).add(c)}}catch(e){n=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(n)throw i}}var u=new Set,d=[],f=function(e,r,n){if(!(!t.has(e)||!t.get(e).has(r)||u.has("".concat(e,"-").concat(r)))){u.add("".concat(e,"-").concat(r)),n.push({col:e,row:r});var i=[{col:e-1,row:r},{col:e+1,row:r},{col:e,row:r-1},{col:e,row:r+1}],a=!0,o=!1,l=void 0;try{for(var s,c=i[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var d=s.value,p=d.col,m=d.row;f(p,m,n)}}catch(e){o=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw l}}}},p=!0,m=!1,h=void 0;try{for(var y,b=e[Symbol.iterator]();!(p=(y=b.next()).done);p=!0){var v=y.value,g=v.col,x=v.row;if(!u.has("".concat(g,"-").concat(x))){var j=[];f(g,x,j),d.push(j)}}}catch(e){m=!0,h=e}finally{try{p||null==b.return||b.return()}finally{if(m)throw h}}return d.map(function(e){var t,r,n,i,a=(t=Math).min.apply(t,jC(e.map(function(e){return e.col}))),o=(r=Math).max.apply(r,jC(e.map(function(e){return e.col})));return{topLeft:{col:a,row:(n=Math).min.apply(n,jC(e.map(function(e){return e.row})))},bottomRight:{col:o,row:(i=Math).max.apply(i,jC(e.map(function(e){return e.row})))}}})},jF=function(e,t){var r=t.topLeft,n=t.bottomRight;return!!r&&!!n&&e.col>=r.col&&e.col<=n.col&&e.row>=r.row&&e.row<=n.row},jB=function(e,t){var r={top:!1,left:!1,bottom:!1,right:!1};if(!e)return r;var n=!0,i=!1,a=void 0;try{for(var o,l=t[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var s,c,u,d,f=o.value;jF(e,f)&&(e.row===(null===(s=f.topLeft)||void 0===s?void 0:s.row)&&(r.top=!0),e.col===(null===(c=f.topLeft)||void 0===c?void 0:c.col)&&(r.left=!0),e.row===(null===(u=f.bottomRight)||void 0===u?void 0:u.row)&&(r.bottom=!0),e.col===(null===(d=f.bottomRight)||void 0===d?void 0:d.col)&&(r.right=!0))}}catch(e){i=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(i)throw a}}return r},jq=function(e,t){if(!t)return null;var r=Object.keys(e);if(!r.length)return null;var n=r.map(function(e){return jk(e)}).map(function(e){return jE(e)}).filter(Boolean);if(!n.length)return null;var i=n[0],a=n[n.length-1];if(!i||!a)return null;var o=i.getBoundingClientRect(),l=a.getBoundingClientRect(),s=l.right-o.left,c=l.bottom-o.top,u=t.getBoundingClientRect();return{width:s,height:c,left:o.left-u.left,top:o.top-u.top}};function jH(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function jU(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function jV(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function jG(e,t,r){return t&&jV(e.prototype,t),r&&jV(e,r),e}function jW(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var jY=function(){function e(t){jU(this,e),jW(this,"items",[]),t&&this.insertMultiple(t)}return jG(e,[{key:"insert",value:function(e){var t=this.findInsertionIndex(e);this.items[t]!==e&&this.items.splice(t,0,e)}},{key:"remove",value:function(e){var t=this.findInsertionIndex(e);this.items[t]===e&&this.items.splice(t,1)}},{key:"getPrev",value:function(e){var t=this.findInsertionIndex(e);return 0===t?null:this.items[t-1]}},{key:"getNext",value:function(e){var t=this.findInsertionIndex(e);return t===this.items.length-1?null:this.items[t+1]}},{key:"getFirst",value:function(){return 0===this.items.length?null:this.items[0]}},{key:"getLast",value:function(){return 0===this.items.length?null:this.items[this.items.length-1]}},{key:"toArray",value:function(){var e;return function(e){if(Array.isArray(e))return jH(e)}(e=this.items)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return jH(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jH(e,void 0)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},{key:"insertMultiple",value:function(e){var t=this;e.forEach(function(e){return t.insert(e)})}},{key:"findInsertionIndex",value:function(e){for(var t=0,r=this.items.length-1;t<=r;){var n=Math.floor((t+r)/2);if(this.items[n]===e)return n;this.items[n]<e?t=n+1:r=n-1}return t}}]),e}(),j$=function(){function e(t){var r=t.selection,n=t.prev,i=t.next,a=t.setter;jU(this,e),jW(this,"_selection",void 0),jW(this,"_prev",void 0),jW(this,"_next",void 0),jW(this,"_setter",void 0),this._selection=r,this._prev=n,this._next=i,this._setter=a}return jG(e,[{key:"execute",value:function(){this._setter(this._selection,this._next)}},{key:"undo",value:function(){this._setter(this._selection,this._prev)}},{key:"redo",value:function(){this.execute()}}]),e}(),jQ=function(){function e(t){var r=t.selection,n=t.prev,i=t.next,a=t.setter;jU(this,e),jW(this,"_selection",void 0),jW(this,"_prev",void 0),jW(this,"_next",void 0),jW(this,"_setter",void 0),this._selection=r,this._prev=n,this._next=i,this._setter=a}return jG(e,[{key:"execute",value:function(){this._setter(this._selection,this._next)}},{key:"undo",value:function(){this._setter(this._selection,this._prev)}},{key:"redo",value:function(){this.execute()}}]),e}();function jK(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function jZ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jJ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){jZ(e,t,r[t])})}return e}function jX(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function j0(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||j5(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j1(e){return function(e){if(Array.isArray(e))return jK(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||j5(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j2(e){var t=function(e,t){if("object"!==j3(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==j3(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===j3(t)?t:String(t)}function j3(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function j5(e,t){if(e){if("string"==typeof e)return jK(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jK(e,t)}}var j6=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],j4=function(e){var t=e.product,r=e.regions,n=e.currencies,i=e.control,a=e.taxInclEnabled,o=e.priceListTaxInclusive,l=e.setValue,s=e.getValues,c=(0,ei.Bd)().t,u=(0,eC.A)(),d=U.useRef(null),f=U.useRef(null),p=jS(),m=p.redo,h=p.undo,y=p.execute,b=j0(U.useState(!1),2),v=b[0],g=b[1],x=j0(U.useState(null),2),j=x[0],w=x[1],O=j0(U.useState(null),2),S=O[0],P=O[1],C=j0(U.useState({}),2),A=C[0],N=C[1],k=j0(U.useState([]),2),_=k[0],E=k[1],I=U.useMemo(function(){return new jY},[]),D=U.useMemo(function(){return new jY},[]),T=j0(U.useState({}),2),M=T[0],R=T[1],L=j0(U.useState(!1),2),F=L[0],B=L[1],q=j0(U.useState(!1),2),H=q[0],V=q[1],G=j0(U.useState(null),2),W=G[0],Y=G[1],$=j0(U.useState([]),2),Q=$[0],K=$[1],Z=j0(U.useState({}),2),J=Z[0],X=Z[1],ee=j0(U.useState(null),2),et=ee[0],er=ee[1],en=j0(U.useState(n.map(function(e){return e.code})),2),ea=en[0],eo=en[1],el=j0(U.useState([]),2),es=el[0],ec=el[1],eu=j0(U.useState(!1),2),ed=eu[0],ef=eu[1],ep=U.useCallback(function(e){var t={isSelected:!1,isAnchor:!1,isRangeEnd:!1,borders:{bottom:!1,left:!1,right:!1,top:!1},outline:{bottom:!1,left:!1,right:!1,top:!1}};return e&&(A[jN(e)]&&(t.isSelected=!0),j&&j.row===e.row&&j.col===e.col&&(t.isAnchor=!0),S&&S.row===e.row&&S.col===e.col&&(t.isRangeEnd=!0),t.borders=jB(e,_),t.outline=jB(e,Q)),t},[A,j,S,_,Q]),em=U.useCallback(function(e){var t=Object.keys(e);if(!t.length)return[];var r=[],n=!0,i=!1,a=void 0;try{for(var o,l=t[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var c=o.value,u=jk(c),f=jL(u,u,d.current)[0],p=f.variantId,m=f.currencyCode,h=f.regionId,y=f.type,b=m?"currency":"region",v=m||h,g="variants.".concat(p,".").concat(b,".").concat(v,".").concat(y),x=s(g);r[u.row]||(r[u.row]=Array(u.col+1).fill(null)),r[u.row][u.col]=null!=x?x:""}}catch(e){i=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(i)throw a}}return r.map(function(e){return e.filter(function(e){return null!==e})}).filter(Boolean)},[s]),eh=U.useCallback(function(e,t){if(t.length){var r=Object.keys(e);if(r.length){var n=[],i=!0,a=!1,o=void 0;try{for(var s,c=r[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var u=s.value,f=jk(u),p=jL(f,f,d.current)[0],m=p.variantId,h=p.currencyCode,y=p.regionId,b=p.type,v=h?"currency":"region",g=h||y,x="variants.".concat(m,".").concat(v,".").concat(g,".").concat(b);n[f.row]||(n[f.row]=Array(f.col+1).fill(null)),n[f.row][f.col]=x}}catch(e){a=!0,o=e}finally{try{i||null==c.return||c.return()}finally{if(a)throw o}}for(var j=n.map(function(e){return e.filter(function(e){return null!==e})}).filter(Boolean),w=0;w<j.length;w++)for(var O=t[w%t.length],S=j[w],P=0;P<S.length;P++)l(S[P],O[P%O.length],{shouldTouch:!0,shouldDirty:!0})}}},[l]),ey=U.useCallback(function(e){var t=Object.keys(A),r=j?jN(j):null,n=e?jN(e):null;1===t.length&&r===t[0]&&r&&n&&r===n||(w(null),N({}),P(null)),X({}),E([]),K([])},[j,A]),eb=U.useCallback(function(e){w(e),P(e)},[]),ev=U.useCallback(function(e){I.insert(e.col),D.insert(e.row);var t=jN(e);R(function(e){return jX(jJ({},e),jZ({},t,!0))})},[I,D]),eg=U.useCallback(function(e){I.remove(e.col);var t=jN(e);M[t],R(function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(M,[t].map(j2)))},[M,I]),ex=U.useCallback(function(e){if(!H){var t=e.target;if(jD(t)){B(!0);var r=j_(t);if(e.shiftKey){P(r);return}ey(r),w(r)}}},[H,ey]),ej=U.useCallback(function(e){if(F){var t=e.target;if(jD(t)){var r=j_(t),n=null;return n=requestAnimationFrame(function(){P(r)}),function(){null!==n&&cancelAnimationFrame(n)}}}},[F]),ew=U.useCallback(function(e){if(H&&j&&S){var t=jM(e.target,A);if(!t){X({}),er(null);return}X(t.range),er(t.position)}},[H,j,S,A]),eO=U.useCallback(function(e){ej(e),ew(e)},[ej,ew]),eS=U.useCallback(function(){if(V(!1),X({}),er(null),Y(null),eV(null),Object.keys(J).length&&Object.keys(A).length){var e=em(A),t=em(J);y(new jQ({selection:J,next:e,prev:t,setter:eh})),N(jJ({},A,J))}},[y,J,em,A,eh]),eP=U.useCallback(function(e){H?eS():F&&B(!1)},[H,F,eS]),eA=U.useCallback(function(e){if(e.preventDefault(),!v){if(!j){var t=D.getFirst(),r=I.getFirst();if(!t||!r)return;eb({row:t,col:r});return}if("ArrowUp"===e.key){if(e.shiftKey){if(!S)return;var n=D.getPrev(S.row);if(!n)return;var i={row:n,col:S.col};P(i);var a=jE(i,d.current);if(!a)return;a.scrollIntoView({block:"nearest"});return}if(e.metaKey||e.ctrlKey){var o=D.getFirst();if(!o)return;var l={row:o,col:j.col};eb(l);var s=jE(l,d.current);if(!s)return;s.scrollIntoView({block:"nearest"});return}var c=D.getPrev(j.row);if(!c)return;var u={row:c,col:j.col};eb(u);var f=jE(u,d.current);if(!f)return;f.scrollIntoView({block:"nearest"})}if("ArrowDown"===e.key){if(e.shiftKey){if(!S)return;var p=D.getNext(S.row);if(!p)return;var m={row:p,col:S.col};P(m);var h=jE(m,d.current);if(!h)return;h.scrollIntoView({block:"nearest"});return}if(e.metaKey||e.ctrlKey){var y=D.getLast();if(!y)return;var b={row:y,col:j.col};eb(b);var g=jE(b,d.current);if(!g)return;g.scrollIntoView({block:"nearest"});return}var x=D.getNext(j.row);if(!x)return;var w={row:x,col:j.col};eb(w);var O=jE(w,d.current);if(!O)return;O.scrollIntoView({block:"nearest"});return}if("ArrowLeft"===e.key){if(e.shiftKey){if(!S)return;var C=I.getPrev(S.col);if(!C)return;var A={row:S.row,col:C};P(A);var N=jE(A,d.current);if(!N)return;N.scrollIntoView({block:"nearest"});return}if(e.metaKey||e.ctrlKey){var k=I.getFirst();if(!k)return;var _={row:j.row,col:k};eb(_);var E=jE(_,d.current);if(!E)return;E.scrollIntoView({block:"nearest"});return}var T=I.getPrev(j.col);if(!T)return;var M={row:j.row,col:T};eb(M);var R=jE(M,d.current);if(!R)return;R.scrollIntoView({block:"nearest"});return}if("ArrowRight"===e.key){if(e.shiftKey){if(!S)return;var L=I.getNext(S.col);if(!L)return;var z={row:S.row,col:L};P(z);var F=jE(z,d.current);if(!F)return;F.scrollIntoView({block:"nearest"});return}if(e.metaKey||e.ctrlKey){var B=I.getLast();if(!B)return;var q={row:j.row,col:B};eb(q);var H=jE(q,d.current);if(!H)return;H.scrollIntoView({block:"nearest"});return}var U=I.getNext(j.col);if(!U)return;var V={row:j.row,col:U};eb(V);var G=jE(V,d.current);if(!G)return;G.scrollIntoView({block:"nearest"});return}}},[j,S,D,I,v,eb]),eN=U.useCallback(function(e){if(Object.keys(A).length){e.preventDefault(),e.stopPropagation();var t=em(A),r=t.map(function(e){return e.map(function(){return""})});y(new j$({selection:A,prev:t,next:r,setter:eh}));var n=jE(j,d.current);n&&n.focus()}},[j,A,em,eh,y]),ek=U.useCallback(function(e){if(j){if(e.shiftKey){var t=I.getPrev(j.col);if(!t){var r=D.getPrev(j.row);if(!r)return;var n=I.getLast();if(!n)return;var i={row:r,col:n};eb(i);var a=jE(i,d.current);if(!a)return;a.scrollIntoView({block:"nearest"});return}var o={row:j.row,col:t};eb(o);var l=jE(o,d.current);if(!l)return;l.scrollIntoView({block:"nearest"});return}var s=I.getNext(j.col);if(!s){var c=D.getNext(j.row);if(!c)return;var u=I.getFirst();if(!u)return;var f={row:c,col:u};eb(f);var p=jE(f,d.current);if(!p)return;p.scrollIntoView({block:"nearest"});return}var m={row:j.row,col:s};eb(m);var h=jE(m,d.current);h&&h.scrollIntoView({block:"nearest"})}},[j,D,I,eb]),e_=U.useCallback(function(e){if(e.shiftKey){m();return}h()},[m,h]),eE=U.useCallback(function(e){if(Object.keys(A).length){var t=em(A),r=[],n=null===(s=e.clipboardData)||void 0===s?void 0:s.getData("text/plain");if(n){var i=n.split("\n"),a=!0,o=!1,l=void 0;try{for(var s,d,f=i[Symbol.iterator]();!(a=(d=f.next()).done);a=!0){var p=d.value;r.push(p.split("	"))}}catch(e){o=!0,l=e}finally{try{a||null==f.return||f.return()}finally{if(o)throw l}}if(r.some(function(e){return e.some(function(e){return isNaN(+e)})})){u(c("price-list-product-prices-form-invalid-data-title","Invalid data"),c("price-list-product-prices-form-invalid-data-body","The data you pasted contains values that are not numbers."),"error");return}y(new jQ({selection:A,next:r,prev:t,setter:eh}))}}},[A,eh,em,y,u,c]),eI=U.useCallback(function(e){var t,r=em(A).map(function(e){return e.join("	")}).join("\n");e.preventDefault(),null===(t=e.clipboardData)||void 0===t||t.setData("text/plain",r)},[em,A]),eD=U.useCallback(function(e){if(!ed){if(j6.includes(e.key)){e.preventDefault(),eA(e);return}if("Backspace"===e.key){if(v)return;e.preventDefault(),eN(e)}if("z"===e.key&&e_(e),"Tab"===e.key){var t;if(!(null===(t=d.current)||void 0===t?void 0:t.contains(e.target)))return;e.preventDefault(),ek(e)}}},[eA,eN,e_,ek,v,ed]),eT=U.useCallback(function(){if(j){var e=j.col,t=D.getNext(j.row);(t||(e=I.getNext(e))&&(t=D.getFirst()))&&eb({row:t,col:e})}},[j,D,I,eb]),eM=U.useCallback(function(e){Object.keys(A).length&&(e.preventDefault(),e.stopPropagation(),V(!0))},[A]),eL=U.useCallback(function(e){ea.includes(e)?eo(function(t){return t.filter(function(t){return t!==e})}):eo(function(t){return j1(t).concat([e])})},[ea]),ez=U.useCallback(function(e){es.includes(e)?ec(function(t){return t.filter(function(t){return t!==e})}):ec(function(t){return j1(t).concat([e])})},[es]);U.useEffect(function(){j&&S&&N(jR(j,S))},[j,S]),U.useEffect(function(){j&&W&&X(jR(j,W))},[j,W]),U.useEffect(function(){j&&N(function(e){return jX(jJ({},e),jZ({},jN(j),!0))})},[j]),U.useEffect(function(){j&&!S&&P(j)},[j,S]),U.useEffect(function(){if(!F){var e=Object.keys(A);0!==e.length&&E(jz(e.map(function(e){return jk(e)}).filter(function(e){return!!e})))}},[F,A]),U.useEffect(function(){var e=Object.keys(J);0!==e.length&&K(jz(e.map(function(e){return jk(e)}).filter(function(e){return!!e})))},[J]),U.useEffect(function(){return document.addEventListener("mouseup",eP),document.addEventListener("keydown",eD),document.addEventListener("copy",eI),document.addEventListener("paste",eE),function(){document.removeEventListener("mouseup",eP),document.removeEventListener("keydown",eD),document.removeEventListener("copy",eI),document.removeEventListener("paste",eE)}},[eP,eD,eI,eE]),U.useEffect(function(){var e=d.current;if(e){var t=function(t){if(!j){var r=D.getFirst(),n=I.getFirst();if(r&&n){eb({row:r,col:n});var i=jE({row:r,col:n},e);i&&(i.scrollIntoView({block:"nearest"}),i.focus())}}};return e.addEventListener("focusin",t),function(){e.removeEventListener("focusin",t)}}},[eb,ey,j,D,I]),U.useEffect(function(){if(j){var e=jE(j,d.current);e&&e.focus()}},[j]);var eF=j0(U.useState(null),2),eB=eF[0],eq=eF[1],eH=j0(U.useState(null),2),eU=eH[0],eV=eH[1],eG=j0(U.useState(null),2),eW=eG[0],eY=eG[1];return U.useEffect(function(){eq(jq(A,d.current))},[A]),U.useEffect(function(){eV(jq(J,d.current))},[J]),U.useEffect(function(){if(!j){eY(null);return}eY(jq(jZ({},jN(j),!0),d.current))},[j]),(0,z.jsxs)("div",{className:"h-full",children:[(0,z.jsx)("div",{className:"border-ui-border-base flex items-center justify-between border-b px-4 py-3",children:(0,z.jsxs)(xc.DropdownMenu,{open:ed,onOpenChange:ef,children:[(0,z.jsx)(xc.DropdownMenu.Trigger,{asChild:!0,children:(0,z.jsxs)(xc.Button,{variant:"secondary",type:"button",children:[(0,z.jsx)(xs.Adjustments,{className:"text-ui-fg-subtle"}),c("price-list-product-prices-form-column-visibility-button","Currencies")]})}),(0,z.jsxs)(xc.DropdownMenu.Content,{className:"no-scrollbar max-h-[var(--radix-popper-available-height)] overflow-y-auto",collisionPadding:16,children:[(0,z.jsx)(xc.DropdownMenu.Label,{children:c("price-list-product-prices-form-column-visibility-currencies-label","Currencies")}),n.map(function(e){return(0,z.jsx)(xc.DropdownMenu.CheckboxItem,{checked:ea.includes(e.code),onClick:function(t){t.stopPropagation(),t.preventDefault(),eL(e.code)},children:(0,z.jsxs)("span",{children:[e.name," ",(0,z.jsxs)("span",{className:"text-ui-fg-subtle",children:["(",e.code.toUpperCase(),")"]})]})},e.code)}),(0,z.jsx)(xc.DropdownMenu.Separator,{}),(0,z.jsx)(xc.DropdownMenu.Label,{children:c("price-list-product-prices-form-column-visibility-regions-label","Regions")}),r.map(function(e){return(0,z.jsx)(xc.DropdownMenu.CheckboxItem,{checked:es.includes(e.id),onClick:function(t){t.stopPropagation(),t.preventDefault(),ez(e.id)},children:(0,z.jsxs)("span",{children:[e.name," ",(0,z.jsxs)("span",{className:"text-ui-fg-subtle",children:["(",e.currency_code.toUpperCase(),")"]})]})},e.id)})]})]})}),(0,z.jsxs)("div",{ref:f,className:"relative h-[calc(100%-57px)] w-full overflow-auto",children:[(0,z.jsx)("div",{role:"presentation",style:eW||{display:"none"},className:"border-ui-border-interactive pointer-events-none absolute z-[52] border"}),(0,z.jsx)("div",{role:"presentation",style:eB||{display:"none"},className:"border-ui-border-interactive pointer-events-none absolute z-[51] border"}),(0,z.jsx)("div",{role:"presentation",style:eU||{display:"none"},className:(0,xc.clx)("border-ui-border-interactive pointer-events-none absolute z-50 border border-dashed",{"border-b-0":"above"===et,"border-t-0":"below"===et,"border-l-0":"right"===et,"border-r-0":"left"===et})}),(0,z.jsxs)("table",{className:(0,xc.clx)("txt-compact-small text-ui-fg-base w-full",{"select-none":F}),ref:d,children:[(0,z.jsx)("thead",{children:(0,z.jsxs)("tr",{className:"[&_th]:txt-compact-small-plus text-ui-fg-subtle [&_th]:border-ui-border-base h-10 [&_th:last-of-type]:border-r-0 [&_th]:min-w-[220px] [&_th]:border-b [&_th]:border-r",children:[(0,z.jsx)("th",{className:"max-w-[220px] text-left",children:(0,z.jsx)("div",{className:"px-4 py-2.5",children:c("price-list-product-prices-form-column-product-label","Product")})}),n.map(function(e){var t=null!=o?o:e.includes_tax;return ea.includes(e.code)?(0,z.jsx)("th",{className:"text-left",children:(0,z.jsxs)("div",{className:"flex items-center justify-between px-4 py-2.5",children:[(0,z.jsx)("span",{children:c("price-list-product-prices-form-column-currencies-price-label","Price {{code}}",{code:e.code.toUpperCase()})}),a&&(0,z.jsx)("div",{children:t&&(0,z.jsx)(xs.BuildingTax,{className:"text-ui-fg-subtle"})})]})},e.code):null}),r.map(function(e){var t=null!=o?o:e.includes_tax;return es.includes(e.id)?(0,z.jsx)("th",{className:"text-left",children:(0,z.jsxs)("div",{className:"flex items-center justify-between px-4 py-2.5",children:[(0,z.jsx)("span",{children:c("price-list-product-prices-form-column-regions-price-label","Price {{name}} ({{code}})",{name:e.name,code:e.currency_code.toUpperCase()})}),a&&(0,z.jsx)("div",{children:t&&(0,z.jsx)(xs.BuildingTax,{className:"text-ui-fg-subtle"})})]})},e.id):null})]})}),(0,z.jsxs)("tbody",{children:[(0,z.jsxs)("tr",{className:"bg-ui-bg-subtle h-10 [&_td:last-of-type]:border-r-0 [&_td]:border-b [&_td]:border-r",children:[(0,z.jsx)("td",{className:"w-[220px] max-w-[220px]",children:(0,z.jsxs)("div",{className:"grid w-[220px] grid-cols-[16px_1fr] gap-x-3 overflow-hidden px-4 py-2.5",children:[(0,z.jsx)("div",{className:"bg-ui-bg-component h-[22px] w-4 rounded-[4px]",children:t.thumbnail&&(0,z.jsx)("img",{src:t.thumbnail,className:"h-full w-full object-cover"})}),(0,z.jsx)("div",{className:"flex items-center",children:(0,z.jsx)("p",{className:"w-[160px] overflow-hidden text-ellipsis whitespace-nowrap",children:t.title})})]})}),n.map(function(e){return ea.includes(e.code)?(0,z.jsx)("td",{children:(0,z.jsx)("div",{className:"text-ui-fg-muted px-4 py-2.5 text-right",children:"-"})},e.code):null}),r.map(function(e){return es.includes(e.id)?(0,z.jsx)("td",{children:(0,z.jsx)("div",{className:"text-ui-fg-muted px-4 py-2.5 text-right",children:"-"})},e.id):null})]}),t.variants.map(function(e){return(0,z.jsxs)("tr",{className:"[&_td]:border-r-ui-border-base [&_td]:border-b-ui-border-base h-10 [&_td:last-of-type]:border-r-transparent [&_td]:border [&_td]:border-l-transparent [&_td]:border-t-transparent",children:[(0,z.jsx)("td",{className:"max-w-[220px]",children:(0,z.jsxs)("div",{className:"flex w-[220px] items-center gap-x-3 overflow-hidden px-4 py-2.5",children:[(0,z.jsx)("div",{className:"h-[22px] w-4"}),(0,z.jsxs)("p",{className:"text-ui-fg-subtle w-[160px] overflow-hidden text-ellipsis whitespace-nowrap",children:[(0,z.jsx)("span",{children:e.title}),e.sku&&(0,z.jsx)("span",{className:"px-2",children:"\xb7"}),e.sku&&(0,z.jsx)("span",{children:e.sku})]})]})}),n.map(function(t){if(!ea.includes(t.code))return null;var r=sS.q[t.code.toUpperCase()];return(0,z.jsx)(eR.xI,{control:i,name:"variants.".concat(e.id,".currency.").concat(t.code,".amount"),render:function(n){var i=n.field;return(0,z.jsx)(j8,jJ({symbol:r.symbol_native,decimalScale:r.decimal_digits,type:"amount",variantId:e.id,currencyCode:t.code,onRegisterCell:ev,onUnregisterCell:eg,onDragToFillStart:eM,onCellMouseDown:ex,onCellOver:eO,getCellState:ep,setIsEditing:g,onNextRow:eT},i))}},t.code)}),r.map(function(t){if(!es.includes(t.id))return null;var r=sS.q[t.currency_code.toUpperCase()];return(0,z.jsx)(eR.xI,{control:i,name:"variants.".concat(e.id,".region.").concat(t.id,".amount"),render:function(n){var i=n.field;return(0,z.jsx)(j8,jJ({symbol:r.symbol_native,decimalScale:r.decimal_digits,type:"amount",variantId:e.id,regionId:t.id,onRegisterCell:ev,onUnregisterCell:eg,onDragToFillStart:eM,onCellMouseDown:ex,onCellOver:eO,getCellState:ep,setIsEditing:g,onNextRow:eT},i))}},t.id)})]},e.id)})]})]})]})]})},j8=U.forwardRef(function(e,t){var r,n=e.value,i=e.name,a=e.type,o=e.onChange,l=e.onBlur,s=e.onRegisterCell,c=e.onUnregisterCell,u=e.onDragToFillStart,d=e.onCellMouseDown,f=e.onCellOver,p=e.getCellState,m=e.setIsEditing,h=e.onNextRow,y=e.symbol,b=e.decimalScale,v=e.variantId,g=e.regionId,x=e.currencyCode,j=j0(U.useState(n?{value:n,float:parseFloat(n)}:void 0),2),w=j[0],O=j[1],S=j0(U.useState(!1),2),P=S[0],C=S[1],A=j0(U.useState(null),2),N=A[0],k=A[1],_=U.useRef(null),E=U.useRef(null);U.useImperativeHandle(t,function(){return E.current});var I=null===(r=_.current)||void 0===r?void 0:r.cellIndex,D=jI(_.current)?_.current.parentElement.rowIndex:void 0;U.useEffect(function(){P||O(n?{value:n,float:parseFloat(n)}:{value:""})},[n,P]),U.useEffect(function(){if(I&&D){var e={col:I,row:D};return s(e),k(e),function(){c(e)}}},[I,D]);var T=p(N),M=T.isAnchor,R=T.isSelected,L=T.borders;U.useEffect(function(){if(E.current&&!P){var e=(null==w?void 0:w.value)&&w.value.endsWith(".")?w.value.slice(0,-1):null==w?void 0:w.value;o(e?(0,sO.formatValue)({value:e.replace(/,/g,"."),decimalScale:null!=b?b:0,decimalSeparator:".",disableGroupSeparators:!0}):""),E.current.blur();return}},[P,o]),U.useEffect(function(){if(!M){var e;C(!1),m(!1),null===(e=E.current)||void 0===e||e.blur(),l()}},[M,l,m]);var F=U.useCallback(function(){var e,t;null===(e=E.current)||void 0===e||e.focus(),null===(t=E.current)||void 0===t||t.setSelectionRange(E.current.value.length,E.current.value.length)},[]),B=U.useCallback(function(e){if(e.stopPropagation(),e.preventDefault(),!P){if(M&&2===e.detail){C(!0),m(!0),F();return}d(e)}},[d,m,F,M,P]),q=U.useCallback(function(e){if(M){if(P){h();return}C(!0),m(!0),F()}},[M,P,h,m,F]),H=U.useCallback(function(e){var t;M&&!P&&(e.stopPropagation(),e.preventDefault(),C(!0),m(!0),O({value:""}),null===(t=E.current)||void 0===t||t.focus())},[M,P,O,m]),V=U.useCallback(function(e){if(M&&!P){e.stopPropagation(),e.preventDefault(),C(!0),m(!0);var t,r=e.key;O({float:parseFloat(r),value:String(r)}),null===(t=E.current)||void 0===t||t.focus()}},[M,P,m]),G=U.useCallback(function(e){if(P&&E.current){var t=E.current,r=t.selectionStart,n=t.value.length;if(null===r){t.setSelectionRange(0,0);return}switch(e.key){case"ArrowUp":t.setSelectionRange(0,0);break;case"ArrowDown":t.setSelectionRange(n,n);break;case"ArrowLeft":if(0===r)return;t.setSelectionRange(r-1,r-1);break;case"ArrowRight":if(r===n)return;t.setSelectionRange(r+1,r+1)}}},[P]),W=U.useCallback(function(e){var t;P&&(e.stopPropagation(),e.preventDefault(),null===(t=E.current)||void 0===t||t.focus(),C(!1),l())},[P,l]),Y=U.useCallback(function(e){"Enter"===e.key&&q(e)," "===e.key&&H(e),j6.includes(e.key)&&G(e),isNaN(parseInt(e.key))||V(e),"Escape"===e.key&&W(e)},[q,H,G,V,W]);U.useEffect(function(){return document.addEventListener("keydown",Y),function(){document.removeEventListener("keydown",Y)}},[Y]);var $=U.useCallback(function(){P&&C(!1),l()},[l,P]),Q=U.useCallback(function(e){var t;e.stopPropagation(),null===(t=_.current)||void 0===t||t.scrollIntoView({block:"nearest"})},[]);return(0,z.jsxs)("td",{ref:_,className:(0,xc.clx)("relative h-[10] min-w-[220px] outline-none",{"!bg-ui-bg-highlight":R&&!P},{"before:shadow-borders-active before:pointer-events-none before:absolute before:inset-0 before:z-50 before:content-['']":M&&P}),onMouseDown:B,onMouseOver:f,"data-variant-id":v,"data-region-id":g,"data-currency-code":x,"data-type":a,"data-editable":!0,"data-row-index":D,"data-col-index":I,"aria-colindex":I,"aria-rowindex":D,tabIndex:0,children:[(0,z.jsxs)("div",{className:"flex items-center px-4 py-2.5",children:[y&&(0,z.jsx)("span",{className:"text-ui-fg-muted h-full w-fit",children:y}),(0,z.jsx)(sO.default,{ref:E,allowNegativeValue:!1,name:i,value:null==w?void 0:w.value,onBlur:$,onFocus:Q,onValueChange:function(e,t,r){O(r?{value:r.value,float:r.float}:void 0)},decimalScale:P?void 0:b,autoFocus:!1,tabIndex:-1,placeholder:"-",className:(0,xc.clx)("h-full flex-1 cursor-default bg-transparent text-right outline-none")})]}),L.bottom&&L.right&&(0,z.jsx)("div",{onMouseDown:u,className:"bg-ui-bg-interactive absolute -bottom-1 -right-1 z-50 h-2 w-2 cursor-crosshair rounded-full"})]})});j8.displayName="PriceListProductPricesForm.Cell";var j7=x0.Ik({variants:x0.g1(x0.Yj(),x0.Ik({currency:x0.g1(x0.Yj(),x0.Ik({id:x0.Yj().nullable().optional(),amount:x0.Yj().nullable()})).optional(),region:x0.g1(x0.Yj(),x0.Ik({id:x0.Yj().nullable().optional(),amount:x0.Yj().nullable()})).optional()}))});function j9(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function we(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){we(e,t,r[t])})}return e}function wr(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function wn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return j9(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return j9(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var wi=(0,us.createColumnHelper)(),wa=function(){var e=(0,ei.Bd)().t;return{columns:U.useMemo(function(){return[wi.display({id:"select",header:function(t){var r,n=t.table;return(0,z.jsx)(xc.Checkbox,{checked:n.getIsSomePageRowsSelected()?"indeterminate":n.getIsAllPageRowsSelected(),onCheckedChange:function(e){return n.toggleAllPageRowsSelected(!!e)},"aria-label":null!==(r=e("price-list-products-form-select-all","Select all products on the current page"))&&void 0!==r?r:void 0})},cell:function(t){var r,n=t.table,i=t.row,a=n.options.meta.productIds,o=i.getIsSelected()||a.includes(i.id);return(0,z.jsx)(xc.Checkbox,{checked:o,disabled:a.includes(i.id),onCheckedChange:function(e){i.toggleSelected(!!e)},"aria-label":null!==(r=e("price-list-products-form-select-row","Select row"))&&void 0!==r?r:void 0})}}),wi.accessor("title",{header:function(){return e("price-list-products-form-product-label","Product")},cell:function(t){var r,n=t.getValue(),i=t.row.original.thumbnail;return(0,z.jsxs)("div",{className:"flex items-center gap-x-3",children:[(0,z.jsx)("div",{className:"bg-ui-bg-subtle flex h-8 w-6 items-center justify-center overflow-hidden rounded-[4px]",children:i?(0,z.jsx)("img",{src:i,alt:null!==(r=e("price-list-products-form-product-thumbnail","{{title}} thumbnail",{title:n}))&&void 0!==r?r:void 0,className:"h-full w-full object-cover"}):(0,z.jsx)(xs.PhotoSolid,{})}),(0,z.jsx)(xc.Text,{size:"small",className:"text-ui-fg-base",children:n})]})}}),wi.accessor("collection",{header:function(){return e("price-list-products-form-collection-label","Collection")},cell:function(e){var t,r;return null!==(r=null===(t=e.getValue())||void 0===t?void 0:t.title)&&void 0!==r?r:"-"}}),wi.accessor("sales_channels",{header:function(){return e("price-list-products-form-sales-channels-label","Availability")},cell:function(t){var r=t.getValue();if(!r||0===r.length)return"-";var n=r[0].name,i=r.length-1;return i?(0,z.jsx)("span",{children:e("price-list-products-form-sales-channels-value","{{first}} + {{remaining}} more",{first:n,remaining:i})}):(0,z.jsx)("span",{children:n})}}),wi.accessor("status",{header:function(){return e("price-list-products-form-status-label","Status")},cell:function(e){var t=e.getValue();return(0,z.jsx)(xc.StatusBadge,{color:"published"===t?"green":"grey",className:"capitalize",children:t})}}),wi.accessor("variants",{header:function(){return(0,z.jsx)("div",{className:"text-right",children:e("price-list-products-form-inventory-label","Inventory")})},cell:function(t){var r,n="-",i=t.getValue();return i&&0!==i.length||(n="-"),n=null!==(r=e("price-list-products-form-inventory-value","{{totalStock}} in stock across {{variants}} variants",{totalStock:i.reduce(function(e,t){return e+t.inventory_quantity},0),variants:i.length}))&&void 0!==r?r:void 0,(0,z.jsx)("div",{className:"text-right",children:n})}})]},[e])}},wo=function(e){var t,r,n=e.form,i=e.productIds,a=n.register,o=n.path,l=n.setValue,s=n.getValues,c=n.control;n.formState.isDirty;var u=(0,ei.Bd)().t,d=wn(U.useState((null!==(t=s(o("ids")))&&void 0!==t?t:[]).reduce(function(e,t){return wr(wt({},e),we({},t,!0))},{})),2),f=d[0],p=d[1];U.useEffect(function(){var e;p((null!==(e=s(o("ids")))&&void 0!==e?e:[]).reduce(function(e,t){return wr(wt({},e),we({},t,!0))},{}))},[s,o]);var m=wn(U.useState({pageIndex:0,pageSize:20}),2),h=m[0],y=m[1],b=U.useMemo(function(){return h.pageIndex*h.pageSize},[h.pageIndex,h.pageSize]),v=wn(U.useState({created_at:void 0,updated_at:void 0}),2),g=v[0],x=v[1],j=wn(U.useState(""),2),w=j[0],O=j[1],S=(0,e8.d)(w,500),P=(0,J.useAdminProducts)(wt({limit:20,offset:b,expand:"variants,sales_channels,collection",q:S},g),{keepPreviousData:!0}),C=P.products,A=P.count,N=P.isLoading,k=P.isError,_=U.useMemo(function(){return A?Math.ceil(A/20):0},[A]),E=wa().columns,I=(0,us.useReactTable)({columns:E,data:null!=C?C:[],getCoreRowModel:(0,us.getCoreRowModel)(),getPaginationRowModel:(0,us.getPaginationRowModel)(),getRowId:function(e){return e.id},state:{rowSelection:f,pagination:h},meta:{productIds:null!=i?i:[]},pageCount:_,enableRowSelection:!0,onRowSelectionChange:p,manualPagination:!0,onPaginationChange:y});return(U.useEffect(function(){a(o("ids"))},[a,o]),U.useEffect(function(){l(o("ids"),Object.keys(f),{shouldDirty:!0,shouldTouch:!0})},[f,o,l]),N)?(0,z.jsxs)("div",{className:"flex h-full w-full items-center justify-center",children:[(0,z.jsx)(xs.Spinner,{className:"animate-spin"}),(0,z.jsx)("span",{className:"sr-only",children:u("price-list-products-form-loading","Loading products")})]}):k?(0,z.jsxs)("div",{className:"flex h-full w-full items-center justify-center gap-x-2",children:[(0,z.jsx)(xs.ExclamationCircle,{}),(0,z.jsx)(xc.Text,{className:"text-ui-fg-subtle",children:u("price-list-products-form-error","An error occurred while loading products. Reload the page and try again. If the issue persists, try again later.")})]}):C?(0,z.jsxs)("div",{className:"flex h-full flex-col",children:[(0,z.jsxs)("div",{className:"border-ui-border-base flex items-center justify-between border-b px-8 pb-4 pt-6",children:[(0,z.jsxs)("div",{className:"flex items-center gap-x-3",children:[(0,z.jsx)(xc.Heading,{children:u("price-list-products-form-heading","Choose products")}),(0,z.jsx)(xP.Field,{control:c,name:o("ids"),render:function(){return(0,z.jsx)(xP.Item,{children:(0,z.jsx)(xP.ErrorMessage,{})})}})]}),(0,z.jsxs)("div",{className:(0,xc.clx)("flex items-center gap-x-2"),children:[(0,z.jsx)(jd,{onClearFilters:function(){return x({created_at:void 0,updated_at:void 0})},onFilterChange:x,value:g}),(0,z.jsx)(xc.Input,{type:"search",placeholder:null!==(r=u("price-list-products-form-search-placeholder","Search"))&&void 0!==r?r:void 0,size:"small",value:w,onChange:function(e){return O(e.target.value)}})]})]}),(0,z.jsx)("div",{className:"border-ui-border-base relative h-full flex-1 overflow-y-auto border-b",children:(0,z.jsxs)(xc.Table,{children:[(0,z.jsx)(xc.Table.Header,{className:"border-t-0",children:I.getHeaderGroups().map(function(e){return(0,z.jsx)(xc.Table.Row,{className:"[&_th:first-of-type]:w-[1%] [&_th:first-of-type]:whitespace-nowrap",children:e.headers.map(function(e){return(0,z.jsx)(xc.Table.HeaderCell,{children:(0,us.flexRender)(e.column.columnDef.header,e.getContext())},e.id)})},e.id)})}),(0,z.jsx)(xc.Table.Body,{className:"border-b-0",children:I.getRowModel().rows.map(function(e){return(0,z.jsx)(xc.Table.Row,{className:(0,xc.clx)({"bg-ui-bg-disabled hover:bg-ui-bg-disabled":null==i?void 0:i.includes(e.id)},{"bg-ui-bg-highlight hover:bg-ui-bg-highlight-hover":e.getIsSelected()}),children:e.getVisibleCells().map(function(e){return(0,z.jsx)(xc.Table.Cell,{children:(0,us.flexRender)(e.column.columnDef.cell,e.getContext())},e.id)})},e.id)})})]})}),(0,z.jsx)(xc.Table.Pagination,{count:null!=A?A:0,canNextPage:I.getCanNextPage(),canPreviousPage:I.getCanPreviousPage(),nextPage:I.nextPage,previousPage:I.previousPage,pageIndex:h.pageIndex,pageCount:_,pageSize:h.pageSize})]}):(0,z.jsxs)("div",{className:"flex h-full w-full items-center justify-center gap-x-2",children:[(0,z.jsx)(xs.ExclamationCircle,{}),(0,z.jsx)(xc.Text,{className:"text-ui-fg-subtle",children:u("price-list-products-form-no-products","No products found.")})]})},wl=x0.Ik({ids:x0.Yj().array().min(1,{message:"At least one product must be selected"})});function ws(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function wc(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function wu(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function o(e){wc(a,n,i,o,l,"next",e)}function l(e){wc(a,n,i,o,l,"throw",e)}o(void 0)})}}function wd(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wf(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){wd(e,t,r[t])})}return e}function wp(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function wm(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ws(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ws(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wh(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}!function(e){e.PRODUCTS="products",e.PRICES="prices",e.EDIT="edit"}(j||(j={}));var wy=x0.Ik({products:wl,prices:jv}),wb=function(e){var t,r,n,i,a=e.open,o=e.onOpenChange,l=e.priceList,s=e.productIds,c=wm(U.useState(null),2),u=c[0],d=c[1],f=wm(U.useState([]),2),p=f[0],m=f[1],h=wm(U.useState("products"),2),y=h[0],b=h[1],v=wm(U.useState((wd(i={},"products","not-started"),wd(i,"prices","not-started"),wd(i,"edit","not-started"),i)),2),g=v[0],x=v[1],j=(0,ei.Bd)().t,w=j("price-list-new-form-prompt-title","Are you sure?"),O=j("price-list-new-form-prompt-exit-description","You have unsaved changes, are you sure you want to exit?"),S=j("price-list-new-form-prompt-back-description","You have unsaved changes, are you sure you want to go back?"),P=(0,xc.usePrompt)(),C=(0,eC.A)(),A=(0,(0,rz.u)().isFeatureEnabled)("tax_inclusive_pricing"),N=(0,eR.mN)({resolver:(0,jf.u)(wy),defaultValues:{products:{ids:[]},prices:{products:{}}}}),k=N.trigger,_=N.handleSubmit,E=N.setValue,I=N.setError,D=N.getValues,T=N.reset,M=N.formState.isDirty,R=(0,eR.mN)({resolver:(0,jf.u)(j7)}),L=R.control,F=R.handleSubmit,B=R.reset,q=R.setValue,H=R.getValues,V=R.formState.isDirty,G=(0,J.useAdminCreatePriceListPrices)(l.id),W=G.mutateAsync,Y=G.isLoading,$=jg({productIds:p}),Q=$.isError,K=$.isLoading,Z=$.isNotFound,X=$.regions,ee=$.currencies,et=U.useCallback(function(){var e;o(!1),b("products"),m([]),x((wd(e={},"products","not-started"),wd(e,"prices","not-started"),wd(e,"edit","not-started"),e)),B(),T({products:{ids:[]},prices:{products:{}}})},[o,T,B]),er=U.useCallback((t=wu(function(e){return wh(this,function(t){switch(t.label){case 0:if(!(!e&&(M||V)))return[3,2];return[4,P({title:w,description:O})];case 1:if(!t.sent())return o(!0),[2];et(),t.label=2;case 2:return o(e),[2]}})}),function(e){return t.apply(this,arguments)}),[M,V,w,O,P,et,o]),en=F(function(e){u&&(E("prices.products.".concat(u.id),e,{shouldDirty:!0,shouldTouch:!0}),d(null),B(void 0,{keepDirty:!1,keepTouched:!1}),x(function(e){return wp(wf({},e),wd({},"prices","in-progress"))}),b("prices"))}),ea=_((r=wu(function(e){var t,r,n,i,a,o,l,s,c;return wh(this,function(u){switch(u.label){case 0:if(t=[],r=Object.keys(e.prices.products),n=e.products.ids,!r.length||!e.prices.products)return I("prices.products",{type:"manual",message:j("price-list-add-products-modal-no-prices-error","Please assign prices for at least one product.")}),[2];if(!(n.filter(function(e){return!r.includes(e)}).length>0))return[3,2];return[4,P({title:j("price-list-add-products-modal-missing-prices-title","Incomplete price list"),description:j("price-list-add-products-modal-missing-prices-description","Prices have not been assigned to all of your chosen products. Would you like to continue?")})];case 1:if(!u.sent())return[2];u.label=2;case 2:i=!0,a=!1,o=void 0;try{for(l=function(){var r=c.value,n=e.prices.products[r],i=!0,a=!1,o=void 0;try{for(var l,s=Object.keys(n.variants)[Symbol.iterator]();!(i=(l=s.next()).done);i=!0)!function(){var e=l.value,r=n.variants[e];if(r.currency){var i=!0,a=!1,o=void 0;try{for(var s,c=Object.keys(r.currency)[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var u=s.value,d=r.currency[u].amount;if(d&&u){var f=jb(u,parseFloat(d));if(f){var p={amount:f,variant_id:e,currency_code:u};t.push(p)}}}}catch(e){a=!0,o=e}finally{try{i||null==c.return||c.return()}finally{if(a)throw o}}}if(r.region){var m=!0,h=!1,y=void 0;try{for(var b,v=Object.keys(r.region)[Symbol.iterator]();!(m=(b=v.next()).done);m=!0)!function(){var n=b.value,i=r.region[n].amount;if(i&&n){var a=jb(X.find(function(e){return e.id===n}).currency_code,parseFloat(i));a&&t.push({amount:a,variant_id:e,region_id:n})}}()}catch(e){h=!0,y=e}finally{try{m||null==v.return||v.return()}finally{if(h)throw y}}}}()}catch(e){a=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}},s=Object.keys(e.prices.products)[Symbol.iterator]();!(i=(c=s.next()).done);i=!0)l()}catch(e){a=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}return[4,W({prices:t},{onSuccess:function(){C(j("price-list-add-products-modal-success-title","New prices added"),j("price-list-add-products-modal-success-message","The new prices have been added to the price list."),"success"),et()},onError:function(e){C(j("price-list-add-products-modal-error-title","An error occurred"),(0,eA.u)(e),"error")}})];case 3:return u.sent(),[2]}})}),function(e){return r.apply(this,arguments)})),eo=U.useCallback(function(e){if(!e){d(null),b("prices");return}B(D("prices.products.".concat(e.id))),d(e),b("edit")},[B,D]),el=U.useCallback(wu(function(){var e,t,r=arguments;return wh(this,function(n){switch(n.label){case 0:if(e=r.length>0&&void 0!==r[0]?r[0]:"prices",!V)return[3,2];return[4,P({title:w,description:S})];case 1:if(!n.sent())return[2];n.label=2;case 2:return t=u?D("prices.products.".concat(u.id)):void 0,b(e),d(null),B(t,{keepDirty:!1,keepTouched:!1}),[2]}})}),[P,B,D,u,V,w,S]),es=U.useCallback((n=wu(function(e){return wh(this,function(t){switch(t.label){case 0:if("edit"!==y)return[3,2];return[4,el(e)];case 1:return t.sent(),[2];case 2:return b(e),[2]}})}),function(e){return n.apply(this,arguments)}),[y,el]),ec=U.useCallback(function(e){m(function(t){var r=!0,n=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var l=a.value;e.includes(l)||E("prices.products.".concat(l),{variants:{}})}}catch(e){n=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(n)throw i}}return e})},[E]),eu=U.useCallback(wu(function(){var e;return wh(this,function(t){switch(t.label){case 0:if(!u)return b("prices"),[2];if(!V)return[3,2];return[4,P({title:"Are you sure?",description:"You have unsaved changes, are you sure you want to exit?"})];case 1:if(!t.sent())return[2];t.label=2;case 2:return e=D("prices.products.".concat(u.id)),d(null),B(e),b("prices"),[2]}})}),[D,B,P,V,u]),ed=U.useCallback(wu(function(){return wh(this,function(e){switch(e.label){case 0:return[4,k("products")];case 1:if(!e.sent())return x(function(e){return wp(wf({},e),wd({},"products","in-progress"))}),[2];return ec(D("products.ids")),b("prices"),x(function(e){return wp(wf({},e),wd({},"products","completed"))}),[2]}})}),[k,D,ec]),ef=U.useCallback(wu(function(){return wh(this,function(e){switch(e.label){case 0:switch(y){case"products":return[3,1];case"prices":return[3,2];case"edit":return[3,3]}return[3,5];case 1:return er(!1),[3,5];case 2:return b("products"),[3,5];case 3:return[4,eu()];case 4:return e.sent(),[3,5];case 5:return[2]}})}),[y,eu,er]),ep=U.useMemo(function(){return"products"===y?j("price-list-add-products-modal-back-button-cancel","Cancel"):j("price-list-add-products-modal-back-button","Back")},[y,j]),em=U.useCallback(wu(function(){return wh(this,function(e){switch(e.label){case 0:switch(y){case"products":return[3,1];case"prices":return[3,2];case"edit":return[3,4]}return[3,6];case 1:return ed(),[3,6];case 2:return[4,ea()];case 3:case 5:return e.sent(),[3,6];case 4:return[4,en()];case 6:return[2]}})}),[ed,en,ea,y]),eh=U.useMemo(function(){switch(y){case"products":return j("price-list-add-products-modal-next-button-continue","Continue");case"prices":return j("price-list-add-products-modal-next-button-submit-and-close","Submit and Close");case"edit":return j("price-list-add-products-modal-next-button-continue-save-prices","Save Prices")}},[y,j]);return(0,z.jsx)(xc.FocusModal,{open:a,onOpenChange:er,children:(0,z.jsx)(xc.ProgressTabs,{value:y,onValueChange:function(e){return es(e)},children:(0,z.jsxs)(xc.FocusModal.Content,{children:[(0,z.jsxs)(xc.FocusModal.Header,{className:"flex w-full items-center justify-between",children:[(0,z.jsxs)(xc.ProgressTabs.List,{className:"border-ui-border-base -my-2 ml-2 min-w-0 flex-1 border-l",children:[(0,z.jsx)(xc.ProgressTabs.Trigger,{value:"products",className:"w-full max-w-[200px]",status:g.products,children:(0,z.jsx)("span",{className:"w-full overflow-hidden text-ellipsis whitespace-nowrap",children:j("price-list-add-products-modal-products-tab","Choose Products")})}),(0,z.jsx)(xc.ProgressTabs.Trigger,{disabled:"completed"!==g.products,value:"prices",className:"w-full max-w-[200px]",status:g.prices,children:(0,z.jsx)("span",{className:"w-full overflow-hidden text-ellipsis whitespace-nowrap",children:j("price-list-add-products-modal-prices-tab","Edit Prices")})}),u&&(0,z.jsx)(xc.ProgressTabs.Trigger,{value:"edit",className:"w-full max-w-[200px]",status:V?"in-progress":"not-started",children:(0,z.jsx)("span",{className:"w-full overflow-hidden text-ellipsis whitespace-nowrap",children:u.title})})]}),(0,z.jsxs)("div",{className:"flex flex-1 items-center justify-end gap-x-2",children:[(0,z.jsx)(xc.Button,{disabled:Y,variant:"secondary",onClick:ef,children:ep}),(0,z.jsx)(xc.Button,{type:"button",className:"whitespace-nowrap",isLoading:Y,onClick:em,children:eh})]})]}),(0,z.jsx)(xc.FocusModal.Body,{className:"flex h-full w-full flex-col items-center overflow-y-auto",children:(0,z.jsxs)(xP,wp(wf({},N),{children:[(0,z.jsx)(xc.ProgressTabs.Content,{value:"products",className:"h-full w-full",children:(0,z.jsx)(wo,{form:(0,eL.m)(N,"products"),productIds:s})}),(0,z.jsx)(xc.ProgressTabs.Content,{value:"prices",className:"h-full w-full",children:K?(0,z.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,z.jsx)(xs.Spinner,{className:"text-ui-fg-subtle animate-spin"})}):Q||Z?(0,z.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,z.jsxs)("div",{className:"text-ui-fg-subtle flex items-center gap-x-2",children:[(0,z.jsx)(xs.ExclamationCircle,{}),(0,z.jsx)(xc.Text,{children:j("price-list-add-products-modal-error","An error occurred while preparing the form. Reload the page and try again. If the issue persists, try again later.")})]})}):(0,z.jsx)(jh,{setProduct:eo,form:(0,eL.m)(N,"prices"),productIds:p})}),u&&(0,z.jsx)(xc.ProgressTabs.Content,{value:"edit",className:"h-full w-full",children:K?(0,z.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,z.jsx)(xs.Spinner,{className:"text-ui-fg-subtle animate-spin"})}):Q||Z?(0,z.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,z.jsxs)("div",{className:"text-ui-fg-subtle flex items-center gap-x-2",children:[(0,z.jsx)(xs.ExclamationCircle,{}),(0,z.jsx)(xc.Text,{children:j("price-list-add-products-modal-error","An error occurred while preparing the form. Reload the page and try again. If the issue persists, try again later.")})]})}):(0,z.jsx)(j4,{product:u,currencies:ee,regions:X,control:L,priceListTaxInclusive:l.includes_tax,taxInclEnabled:A,setValue:q,getValues:H})})]}))})]})})})};function wv(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function wg(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function wx(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function o(e){wg(a,n,i,o,l,"next",e)}function l(e){wg(a,n,i,o,l,"throw",e)}o(void 0)})}}function wj(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return wv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wv(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ww(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}!function(e){e.PRICES="prices",e.EDIT="edit"}(w||(w={}));var wO=function(e){var t,r,n,i,a,o=e.open,l=e.onOpenChange,s=e.priceList,c=e.productIds,u=wj(U.useState("prices"),2),d=u[0],f=u[1],p=wj(U.useState(null),2),m=p[0],h=p[1],y=U.useRef(null),b=(0,ei.Bd)().t,v=b("price-list-edit-prices-modal-prompt-title","Are you sure?"),g=b("price-list-edit-prices-modal-prompt-exit-description","You have unsaved changes, are you sure you want to exit?"),x=b("price-list-edit-prices-modal-prompt-back-description","You have unsaved changes, are you sure you want to go back?"),j=(0,xc.usePrompt)(),w=(0,eC.A)(),O=(0,(0,rz.u)().isFeatureEnabled)("tax_inclusive_pricing"),S=(0,eR.mN)({resolver:(0,jf.u)(jv)}),P=S.handleSubmit,C=S.reset,A=S.formState.isDirty,N=S.getValues,k=S.setValue,_=(0,eR.mN)({resolver:(0,jf.u)(j7)}),E=_.control,I=_.handleSubmit,D=_.reset,T=_.formState.isDirty,M=_.setValue,R=_.getValues,L=jg({productIds:c,priceList:s}),F=L.isLoading,B=L.isError,q=L.isNotFound,H=L.regions,V=L.currencies,G=L.products,W=(0,J.useAdminUpdatePriceList)(s.id),Y=W.mutateAsync,$=W.isLoading,Q=(0,J.useAdminDeletePriceListPrices)(s.id),K=Q.mutateAsync,Z=Q.isLoading,X=U.useCallback(function(){l(!1),f("prices"),y.current=null,D(),C()},[l,C,D]),ee=U.useCallback((t=wx(function(e){return ww(this,function(t){switch(t.label){case 0:if(e)return l(e),[2];if(!(A||T))return[3,2];return[4,j({title:v,description:g})];case 1:if(!t.sent())return[2];t.label=2;case 2:return X(),[2]}})}),function(e){return t.apply(this,arguments)}),[X,j,l,A,T,g,v]);U.useEffect(function(){if(!F&&!B&&!q&&o){var e={products:{}},t=!0,r=!1,n=void 0;try{for(var i,a=G[Symbol.iterator]();!(t=(i=a.next()).done);t=!0)!function(){var t=i.value,r={variants:{}},n=!0,a=!1,o=void 0;try{for(var l,c=t.variants[Symbol.iterator]();!(n=(l=c.next()).done);n=!0)!function(){var e=l.value;r.variants[e.id]={currency:{},region:{}};var t=!0,n=!1,i=void 0;try{for(var a,o=H[Symbol.iterator]();!(t=(a=o.next()).done);t=!0)!function(){var t=a.value,n=s.prices.find(function(r){return r.variant_id===e.id&&r.region_id===t.id}),i=n?jy(t.currency_code,n.amount):null;r.variants[e.id].region[t.id]={id:n?n.id:"",amount:i?"".concat(i):""}}()}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}var c=!0,u=!1,d=void 0;try{for(var f,p=V[Symbol.iterator]();!(c=(f=p.next()).done);c=!0)!function(){var t=f.value,n=s.prices.find(function(r){return r.variant_id===e.id&&r.currency_code===t.code&&null===r.region_id}),i=n?jy(t.code,n.amount):null;r.variants[e.id].currency[t.code]={id:n?n.id:"",amount:i?"".concat(i):""}}()}catch(e){u=!0,d=e}finally{try{c||null==p.return||p.return()}finally{if(u)throw d}}}()}catch(e){a=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}e.products[t.id]=r}()}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}y.current=e,C(e)}},[F,B,q,G,H,V,s,C,o]);var et=U.useCallback(function(e){if(!e){h(null),f("prices");return}D(N("products.".concat(e.id))),h(e),f("edit")},[D,N]),er=U.useCallback(wx(function(){var e,t=arguments;return ww(this,function(r){switch(r.label){case 0:if(e=t.length>0&&void 0!==t[0]?t[0]:"prices",!T)return[3,2];return[4,j({title:v,description:x})];case 1:if(!r.sent())return[2];r.label=2;case 2:return f(e),h(null),D(void 0,{keepDirty:!1,keepTouched:!1}),[2]}})}),[T,j,x,v,D]),en=U.useCallback((r=wx(function(e){return ww(this,function(t){switch(t.label){case 0:if("edit"!==d)return[3,2];return[4,er(e)];case 1:return t.sent(),[2];case 2:return f(e),[2]}})}),function(e){return r.apply(this,arguments)}),[er,d]),ea=I(function(e){m&&(k("products.".concat(m.id),e,{shouldDirty:!0,shouldTouch:!0}),h(null),D(void 0,{keepDirty:!1,keepTouched:!1}),f("prices"))}),eo=P((n=wx(function(e){var t,r,n,i,a,o,l,s,c,u;return ww(this,function(d){switch(d.label){case 0:t=[],r=[],n=!0,i=!1,a=void 0;try{for(o=function(){var n=s.value,i=e.products[n],a=!0,o=!1,l=void 0;try{for(var c,u=Object.keys(i.variants)[Symbol.iterator]();!(a=(c=u.next()).done);a=!0)!function(){var e=c.value,a=i.variants[e];if(a.currency){var o=!0,l=!1,s=void 0;try{for(var u,d=Object.keys(a.currency)[Symbol.iterator]();!(o=(u=d.next()).done);o=!0){var f,p,m,h=u.value,b=a.currency[h],v=b.id,g=b.amount;if(!g){v&&r.push(v);continue}if(h){var x=jb(h,parseFloat(g));if(x){var j=null===(m=y.current)||void 0===m?void 0:null===(p=m.products[n])||void 0===p?void 0:null===(f=p.variants[e].currency)||void 0===f?void 0:f[h];if(!j||!j.id||!j.amount||jb(h,parseFloat(j.amount))!==x){var w={id:v||void 0,amount:x,variant_id:e,currency_code:h};t.push(w)}}}}}catch(e){l=!0,s=e}finally{try{o||null==d.return||d.return()}finally{if(l)throw s}}}if(a.region){var O=!0,S=!1,P=void 0;try{for(var C,A=Object.keys(a.region)[Symbol.iterator]();!(O=(C=A.next()).done);O=!0)!function(){var i,o,l,s=C.value,c=a.region[s],u=c.id,d=c.amount;if(!d)return u&&r.push(u);if(s){var f=H.find(function(e){return e.id===s}).currency_code,p=jb(f,parseFloat(d));if(p){var m=null===(l=y.current)||void 0===l?void 0:null===(o=l.products[n])||void 0===o?void 0:null===(i=o.variants[e].region)||void 0===i?void 0:i[s];(!m||!m.id||!m.amount||jb(f,parseFloat(m.amount))!==p)&&t.push({id:u||void 0,amount:p,variant_id:e,region_id:s})}}}()}catch(e){S=!0,P=e}finally{try{O||null==A.return||A.return()}finally{if(S)throw P}}}}()}catch(e){o=!0,l=e}finally{try{a||null==u.return||u.return()}finally{if(o)throw l}}},l=Object.keys(e.products)[Symbol.iterator]();!(n=(s=l.next()).done);n=!0)o()}catch(e){i=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(i)throw a}}return c=!1,[4,Y({prices:t},{onSuccess:function(){c=!0},onError:function(e){w(b("price-list-edit-prices-modal-notification-update-error","An error occurred"),(0,eA.u)(e),"error")}})];case 1:if(d.sent(),!c)return[2];if(u=!0,!(r.length>0))return[3,3];return[4,K({price_ids:r},{onSuccess:function(){u=!0},onError:function(){u=!1}})];case 2:d.sent(),d.label=3;case 3:return u?w(b("price-list-edit-prices-modal-notification-update-success-title","Prices updated"),b("price-list-edit-prices-modal-notification-update-success-description","Successfully updated prices"),"success"):w(b("price-list-edit-prices-modal-notification-remove-error-title","An error occurred"),b("price-list-edit-prices-modal-notification-remove-error-description","Some prices were not updated correctly. Try again."),"warning"),X(),[2]}})}),function(e){return n.apply(this,arguments)})),el=U.useCallback(wx(function(){return ww(this,function(e){switch(e.label){case 0:switch(d){case"prices":return[3,1];case"edit":return[3,3]}return[3,5];case 1:return[4,eo()];case 2:case 4:return e.sent(),[3,5];case 3:return[4,ea()];case 5:return[2]}})}),[eo,ea,d]),es=U.useMemo(function(){switch(d){case"prices":return b("price-list-edit-prices-modal-next-button-save-and-close","Save and Close");case"edit":return b("price-list-edit-prices-modal-next-button-save","Save Prices")}},[d,b]),ec=U.useCallback(wx(function(){return ww(this,function(e){switch(e.label){case 0:switch(d){case"prices":return[3,1];case"edit":return[3,2]}return[3,4];case 1:return ee(!1),[3,4];case 2:return[4,er()];case 3:return e.sent(),[3,4];case 4:return[2]}})}),[ee,er,d]),eu=U.useMemo(function(){return"prices"===d?b("price-list-edit-prices-modal-back-button-cancel","Cancel"):b("price-list-edit-prices-modal-back-button-back","Back")},[d,b]);return(0,z.jsx)(xc.FocusModal,{open:o,onOpenChange:ee,children:(0,z.jsx)(xc.ProgressTabs,{value:d,onValueChange:function(e){return en(e)},children:(0,z.jsxs)(xc.FocusModal.Content,{children:[(0,z.jsxs)(xc.FocusModal.Header,{className:"flex w-full items-center justify-start",children:[(0,z.jsxs)(xc.ProgressTabs.List,{className:"border-ui-border-base -my-2 ml-2 min-w-0 flex-1 border-l",children:[(0,z.jsx)(xc.ProgressTabs.Trigger,{value:"prices",disabled:F||B,className:"w-full max-w-[200px]",status:A?"in-progress":"not-started",children:(0,z.jsx)("span",{className:"w-full overflow-hidden text-ellipsis whitespace-nowrap",children:b("price-list-edit-prices-modal-overview-tab","Edit Prices")})}),m&&(0,z.jsx)(xc.ProgressTabs.Trigger,{value:"edit",disabled:F||B,className:"w-full max-w-[200px]",status:T?"in-progress":"not-started",children:(0,z.jsx)("span",{className:"w-full overflow-hidden text-ellipsis whitespace-nowrap",children:null==m?void 0:m.title})})]}),(0,z.jsxs)("div",{className:"ml-auto flex items-center justify-end gap-x-2",children:[(0,z.jsx)(xc.Button,{variant:"secondary",onClick:ec,disabled:$||Z,children:eu}),(0,z.jsx)(xc.Button,{onClick:el,className:"whitespace-nowrap",isLoading:$||Z,children:es})]})]}),(0,z.jsx)(xc.FocusModal.Body,{className:"h-full w-full overflow-y-auto",children:(0,z.jsx)(xP,(i=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},S),a=a={children:F?(0,z.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,z.jsx)(xs.Spinner,{className:"text-ui-fg-subtle animate-spin"})}):B||q?(0,z.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,z.jsxs)("div",{className:"text-ui-fg-subtle flex items-center gap-x-2",children:[(0,z.jsx)(xs.ExclamationCircle,{}),(0,z.jsx)(xc.Text,{children:b("price-list-edit-prices-modal-error-loading","An error occurred while preparing the form. Reload the page and try again. If the issue persists, try again later.")})]})}):(0,z.jsxs)(U.Fragment,{children:[(0,z.jsx)(xc.ProgressTabs.Content,{value:"prices",className:"h-full w-full",children:(0,z.jsx)(jh,{setProduct:et,form:(0,eL.m)(S),priceListId:s.id,productIds:c})}),m&&(0,z.jsx)(xc.ProgressTabs.Content,{value:"edit",className:"h-full w-full",children:(0,z.jsx)(j4,{product:m,currencies:V,regions:H,control:E,taxInclEnabled:O,priceListTaxInclusive:s.includes_tax,getValues:R,setValue:M})})]})},Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(a)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(a)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(a,e))}),i))})]})})})};function wS(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function wP(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function wC(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function o(e){wP(a,n,i,o,l,"next",e)}function l(e){wP(a,n,i,o,l,"throw",e)}o(void 0)})}}function wA(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return wS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wS(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wN(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}var wk=function(e){var t,r,n,i=e.priceList,a=wA((0,H.useSearchParams)(),1)[0],o=(0,H.useNavigate)(),l=(0,ei.Bd)().t,s=wA(U.useState(!1),2),c=s[0],u=s[1],d=wA(U.useState(!1),2),f=d[0],p=d[1],m=wA(U.useState(null),2),h=m[0],y=m[1],b=wA(U.useState({}),2),v=b[0],g=b[1],x=wA(U.useState({pageIndex:0,pageSize:10}),2),j=x[0],w=x[1],O=U.useMemo(function(){return j.pageIndex*j.pageSize},[j.pageIndex,j.pageSize]),S=jo(),P=S.query,C=S.setQuery,A=(0,xc.usePrompt)(),N=(0,eC.A)(),k=(0,J.useAdminDeletePriceListProductsPrices)(i.id),_=k.mutateAsync,E=k.isLoading,I=(t=wC(function(){return wN(this,function(e){switch(e.label){case 0:return[4,A({title:l("price-list-prices-section-prompt-title","Are you sure?"),description:l("price-list-prices-section-prompt-description","This will permanently delete the product prices from the list")})];case 1:if(!e.sent())return[2];return[4,_({product_ids:Object.keys(v)},{onSuccess:function(){N(l("price-list-prices-secton-delete-success-title","Prices deleted"),l("price-list-prices-section-delete-success-description","Successfully deleted prices for {{count}} products",{count:Object.keys(v).length}),"success"),g({})},onError:function(e){N(l("price-list-prices-section-delete-error-title","An error occurred"),(0,eA.u)(e),"error")}})];case 2:return e.sent(),[2]}})}),function(){return t.apply(this,arguments)}),D=(0,J.useAdminPriceListProducts)(i.id,{limit:10,offset:O,expand:"variants,collection",created_at:jl("created_at",a),updated_at:jl("updated_at",a),q:jc("q",a)},{keepPreviousData:!0}),T=D.products,M=D.count,R=D.isLoading,L=D.isError,F=(0,J.useAdminPriceListProducts)(i.id,{limit:M,fields:"id"},{enabled:!!M}).products,B=U.useCallback(function(e){switch(e){case!0:p(!0);break;case!1:p(!1),y(null),g({})}},[]),q=U.useCallback(function(){y(null==F?void 0:F.map(function(e){return e.id})),p(!0)},[F]),V=U.useCallback(function(){y(Object.keys(v)),p(!0)},[v]),G=U.useMemo(function(){return M?Math.ceil(M/10):0},[M]),W=wE({onEditProductPrices:function(e){y([e]),p(!0)}}).columns,Y=(0,us.useReactTable)({columns:W,data:null!=T?T:[],getCoreRowModel:(0,us.getCoreRowModel)(),getPaginationRowModel:(0,us.getPaginationRowModel)(),getRowId:function(e){return e.id},state:{rowSelection:v,pagination:j},meta:{priceListId:i.id},pageCount:G,enableRowSelection:!0,onRowSelectionChange:g,manualPagination:!0,onPaginationChange:w});return(0,z.jsxs)(xc.Container,{className:"p-0",children:[(0,z.jsxs)("div",{className:"flex items-center justify-between px-8 pt-6 pb-4",children:[(0,z.jsx)(xc.Heading,{children:l("price-list-prices-section-heading","Prices")}),(0,z.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,z.jsx)(jd,{value:{created_at:jl("created_at",a),updated_at:jl("updated_at",a)},onFilterChange:function(e){var t=new URLSearchParams(a);e.created_at?t.set("created_at",JSON.stringify(e.created_at)):t.delete("created_at"),e.updated_at?t.set("updated_at",JSON.stringify(e.updated_at)):t.delete("updated_at"),o({search:t.toString()},{replace:!0})},onClearFilters:function(){var e=new URLSearchParams(a);e.delete("created_at"),e.delete("updated_at"),o({search:e.toString()},{replace:!0})}}),(0,z.jsx)(xc.Input,{type:"search",size:"small",placeholder:null!==(r=l("price-list-prices-section-search-placeholder","Search products"))&&void 0!==r?r:void 0,value:P,onChange:function(e){return C(e.target.value)}}),(0,z.jsxs)(xc.DropdownMenu,{children:[(0,z.jsx)(xc.DropdownMenu.Trigger,{asChild:!0,children:(0,z.jsx)(xc.IconButton,{children:(0,z.jsx)(xs.EllipsisHorizontal,{})})}),(0,z.jsxs)(xc.DropdownMenu.Content,{align:"end",side:"bottom",children:[(0,z.jsxs)(xc.DropdownMenu.Item,{onClick:q,children:[(0,z.jsx)(xs.CurrencyDollar,{className:"text-ui-fg-subtle"}),(0,z.jsx)("span",{className:"ml-2",children:l("price-list-prices-section-prices-menu-edit","Edit prices")})]}),(0,z.jsxs)(xc.DropdownMenu.Item,{onClick:function(){return u(!0)},children:[(0,z.jsx)(xs.Tag,{className:"text-ui-fg-subtle"}),(0,z.jsx)("span",{className:"ml-2",children:l("price-list-prices-section-prices-menu-add","Add products")})]})]})]})]})]}),(0,z.jsxs)("div",{className:"border-ui-border-base relative h-full flex-1 border-b",style:{height:528},children:[R&&(0,z.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,z.jsx)(xs.Spinner,{className:"text-ui-fg-subtle animate-spin"})}),L&&(0,z.jsxs)("div",{className:"text-ui-fg-subtle absolute inset-0 flex items-center justify-center gap-x-2",children:[(0,z.jsx)(xs.ExclamationCircle,{}),(0,z.jsx)(xc.Text,{size:"small",children:l("price-list-prices-section-table-load-error","An error occured while fetching the products. Try to reload the page, or if the issue persists, try again later.")})]}),(0,z.jsxs)(xc.Table,{children:[(0,z.jsx)(xc.Table.Header,{children:Y.getHeaderGroups().map(function(e){return(0,z.jsx)(xc.Table.Row,{className:"[&_th]:w-1/3 [&_th:first-of-type]:w-[1%] [&_th:first-of-type]:whitespace-nowrap",children:e.headers.map(function(e){return(0,z.jsx)(xc.Table.HeaderCell,{children:(0,us.flexRender)(e.column.columnDef.header,e.getContext())},e.id)})},e.id)})}),(0,z.jsx)(xc.Table.Body,{className:"border-b-0",children:Y.getRowModel().rows.map(function(e){return(0,z.jsx)(xc.Table.Row,{className:(0,xc.clx)("transition-fg [&_td:last-of-type]:w-[1%] [&_td:last-of-type]:whitespace-nowrap",{"bg-ui-bg-highlight hover:bg-ui-bg-highlight-hover":e.getIsSelected()}),children:e.getVisibleCells().map(function(e){return(0,z.jsx)(xc.Table.Cell,{children:(0,us.flexRender)(e.column.columnDef.cell,e.getContext())},e.id)})},e.id)})})]})]}),(0,z.jsx)(xc.Table.Pagination,{count:null!=M?M:0,canNextPage:Y.getCanNextPage(),canPreviousPage:Y.getCanPreviousPage(),nextPage:Y.nextPage,previousPage:Y.previousPage,pageIndex:j.pageIndex,pageCount:G,pageSize:j.pageSize}),(0,z.jsx)(wb,{productIds:null!==(n=null==F?void 0:F.map(function(e){return e.id}))&&void 0!==n?n:[],priceList:i,open:c,onOpenChange:u}),h&&(0,z.jsx)(wO,{open:f,onOpenChange:B,productIds:h,priceList:i}),(0,z.jsx)(xc.CommandBar,{open:Object.keys(v).length>0,children:(0,z.jsxs)(xc.CommandBar.Bar,{children:[(0,z.jsx)(xc.CommandBar.Value,{children:l("price-list-prices-section-bar-count","{{count}} selected",{count:Object.keys(v).length})}),(0,z.jsx)(xc.CommandBar.Seperator,{}),(0,z.jsx)(xc.CommandBar.Command,{shortcut:"e",label:l("price-list-prices-section-edit-command","Edit"),action:V,disabled:E||c||f}),(0,z.jsx)(xc.CommandBar.Seperator,{}),(0,z.jsx)(xc.CommandBar.Command,{shortcut:"d",label:l("price-list-prices-section-delete-command","Delete"),action:I,disabled:E||c||f})]})})]})},w_=(0,us.createColumnHelper)(),wE=function(e){var t=e.onEditProductPrices,r=(0,ei.Bd)().t;return{columns:U.useMemo(function(){return[w_.display({id:"select",header:function(e){var t,n=e.table;return(0,z.jsx)(xc.Checkbox,{checked:n.getIsSomePageRowsSelected()?"indeterminate":n.getIsAllPageRowsSelected(),onCheckedChange:function(e){return n.toggleAllPageRowsSelected(!!e)},"aria-label":null!==(t=r("price-list-prices-section-select-all-checkbox-label","Select all products on the current page"))&&void 0!==t?t:void 0})},cell:function(e){var t,n=e.row;return(0,z.jsx)(xc.Checkbox,{checked:n.getIsSelected(),onCheckedChange:function(e){return n.toggleSelected(!!e)},"aria-label":null!==(t=r("price-list-prices-section-select-checkbox-label","Select row"))&&void 0!==t?t:void 0})}}),w_.accessor("title",{header:function(){return r("price-list-prices-section-table-product","Product")},cell:function(e){var t,n=e.getValue(),i=e.row.original.thumbnail;return(0,z.jsxs)("div",{className:"flex items-center gap-x-3",children:[(0,z.jsx)("div",{className:"bg-ui-bg-subtle flex h-8 w-6 items-center justify-center overflow-hidden rounded-[4px]",children:i?(0,z.jsx)("img",{src:i,alt:null!==(t=r("price-list-prices-section-table-thumbnail-alt","{{title}} thumbnail",{title:n}))&&void 0!==t?t:void 0,className:"h-full w-full object-cover"}):(0,z.jsx)(xs.PhotoSolid,{})}),(0,z.jsx)(xc.Text,{size:"small",className:"text-ui-fg-base",children:n})]})}}),w_.accessor("collection",{header:function(){return r("price-list-prices-section-table-collection","Collection")},cell:function(e){var t,r;return null!==(r=null===(t=e.getValue())||void 0===t?void 0:t.title)&&void 0!==r?r:"-"}}),w_.accessor("variants",{header:function(){return r("price-list-prices-section-table-variants","Variants")},cell:function(e){var t,r=e.getValue();return null!==(t=null==r?void 0:r.length)&&void 0!==t?t:"-"}}),w_.display({id:"actions",cell:function(e){var r=e.table,n=e.row,i=r.options.meta.priceListId;return(0,z.jsx)(wI,{row:n,priceListId:i,onEditProductPrices:t})}})]},[r,t])}},wI=function(e){var t,r=e.row,n=e.priceListId,i=e.onEditProductPrices,a=(0,J.useAdminDeletePriceListProductPrices)(n,r.original.id).mutateAsync,o=(0,xc.usePrompt)(),l=(0,eC.A)(),s=(t=wC(function(){return wN(this,function(e){switch(e.label){case 0:return[4,o({title:"Are you sure?",description:"This will permanently delete the product prices from the list"})];case 1:if(!e.sent())return[2];return[2,a(void 0,{onSuccess:function(e){var t=e.deleted;t&&l("Prices deleted","Successfully deleted prices for ".concat(r.original.title),"success"),t||l("Failed to delete prices","No prices were deleted for ".concat(r.original.title),"error")},onError:function(e){l("An error occurred",(0,eA.u)(e),"error")}})]}})}),function(){return t.apply(this,arguments)});return(0,z.jsxs)(xc.DropdownMenu,{children:[(0,z.jsx)(xc.DropdownMenu.Trigger,{asChild:!0,children:(0,z.jsx)(xc.IconButton,{variant:"transparent",children:(0,z.jsx)(xs.EllipsisHorizontal,{})})}),(0,z.jsxs)(xc.DropdownMenu.Content,{align:"end",side:"bottom",children:[(0,z.jsxs)(xc.DropdownMenu.Item,{onClick:function(){i(r.original.id)},children:[(0,z.jsx)(xs.PencilSquare,{className:"text-ui-fg-subtle"}),(0,z.jsx)("span",{className:"ml-2",children:"Edit prices"})]}),(0,z.jsx)(xc.DropdownMenu.Separator,{}),(0,z.jsxs)(xc.DropdownMenu.Item,{onClick:s,children:[(0,z.jsx)(xs.Trash,{className:"text-ui-fg-subtle"}),(0,z.jsx)("span",{className:"ml-2",children:"Delete prices"})]})]})]})},wD=function(){var e=(0,H.useParams)().id,t=(0,ei.Bd)().t,r=(0,tY.X)().getWidgets,n=(0,J.useAdminPriceList)(e,{enabled:!!e}),i=n.price_list,a=n.isLoading,o=n.isError;return a?(0,z.jsx)(xc.Container,{className:"flex min-h-[320px] items-center justify-center",children:(0,z.jsx)(xs.Spinner,{className:"text-ui-fg-subtle animate-spin"})}):o||!i?(0,z.jsx)(xc.Container,{className:"flex min-h-[320px] items-center justify-center",children:(0,z.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,z.jsx)(xs.ExclamationCircle,{className:"text-ui-fg-base"}),(0,z.jsx)(xc.Text,{className:"text-ui-fg-subtle",children:t("price-list-edit-error","An error occurred while loading price list. Reload the page and try again. If the issue persists, try again later.")})]})}):(0,z.jsx)(z.Fragment,{children:(0,z.jsxs)("div",{className:"flex flex-col gap-y-2",children:[r("price_list.details.before").map(function(e,t){return(0,z.jsx)(es.A,{injectionZone:"price_list.details.before",widget:e,entity:i},t)}),(0,z.jsx)(jt,{priceList:i},"gs_".concat(i.id,"_").concat(i.updated_at)),(0,z.jsx)(wk,{priceList:i},"ps_".concat(i.id,"_").concat(i.updated_at)),r("price_list.details.after").map(function(e,t){return(0,z.jsx)(es.A,{injectionZone:"price_list.details.after",widget:e,entity:i},t)}),(0,z.jsx)(el,{})]})})};function wT(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function wM(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function wR(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function o(e){wM(a,n,i,o,l,"next",e)}function l(e){wM(a,n,i,o,l,"throw",e)}o(void 0)})}}function wL(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wz(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){wL(e,t,r[t])})}return e}function wF(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function wB(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return wT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wT(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wq(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}!function(e){e.DETAILS="details",e.PRODUCTS="products",e.PRICES="prices",e.EDIT="edit"}(O||(O={}));var wH=x0.Ik({details:x1,products:wl,prices:jv}),wU=function(){var e,t,r,n,i=wB(U.useState(!1),2),a=i[0],o=i[1],l=wB(U.useState(null),2),s=l[0],c=l[1],u=wB(U.useState([]),2),d=u[0],f=u[1],p=wB(U.useState("details"),2),m=p[0],h=p[1],y=wB(U.useState((wL(n={},"details","not-started"),wL(n,"products","not-started"),wL(n,"prices","not-started"),wL(n,"edit","not-started"),n)),2),b=y[0],v=y[1],x=(0,ei.Bd)().t,j=x("price-list-new-form-prompt-title","Are you sure?"),w=x("price-list-new-form-prompt-exit-description","You have unsaved changes, are you sure you want to exit?"),O=x("price-list-new-form-prompt-back-description","You have unsaved changes, are you sure you want to go back?"),S=(0,xc.usePrompt)(),P=(0,eC.A)(),C=(0,(0,rz.u)().isFeatureEnabled)("tax_inclusive_pricing"),A=(0,eR.mN)({resolver:(0,jf.u)(wH),defaultValues:{details:{type:{value:"sale"},general:{name:"",description:"",tax_inclusive:!1},customer_groups:{ids:[]},dates:{ends_at:null,starts_at:null}},products:{ids:[]},prices:{products:{}}}}),N=A.trigger,k=A.reset,_=A.getValues,E=A.setValue,I=A.setError,D=A.handleSubmit,T=A.formState.isDirty,M=(0,eR.FH)({control:A.control,name:"details.general.tax_inclusive",defaultValue:!1}),R=(0,eR.mN)({resolver:(0,jf.u)(j7)}),L=R.control,F=R.handleSubmit,B=R.reset,q=R.formState.isDirty,H=R.setValue,V=R.getValues,G=(0,J.useAdminCreatePriceList)(),W=G.mutateAsync,Y=G.isLoading,$=jg({productIds:d,enable:{products:!1}}),Q=$.isLoading,K=$.isError,Z=$.isNotFound,X=$.regions,ee=$.currencies,et=U.useCallback(function(){var e;o(!1),h("details"),f([]),v((wL(e={},"details","not-started"),wL(e,"products","not-started"),wL(e,"prices","not-started"),wL(e,"edit","not-started"),e)),B(),k()},[k,B]),er=U.useCallback((e=wR(function(e){return wq(this,function(t){switch(t.label){case 0:if(!(!e&&(T||q)))return[3,2];return[4,S({title:j,description:w})];case 1:if(!t.sent())return o(!0),[2];et(),t.label=2;case 2:return o(e),[2]}})}),function(t){return e.apply(this,arguments)}),[T,q,j,w,S,et]),en=F(function(e){s&&(E("prices.products.".concat(s.id),e,{shouldDirty:!0,shouldTouch:!0}),c(null),B(void 0,{keepDirty:!1,keepTouched:!1}),h("prices"))}),ea=U.useCallback((t=wR(function(e){return wq(this,function(t){switch(t.label){case 0:var r;return[4,D((r=wR(function(t){var r,n,i,a,o,l,s,c,u;return wq(this,function(d){switch(d.label){case 0:if(r=[],n=Object.keys(t.prices.products),i=t.products.ids,!n.length||!t.prices.products)return I("prices.products",{type:"manual",message:x("price-list-new-form-no-prices-error","Please set prices for at least one product.")}),[2];if(!(i.filter(function(e){return!n.includes(e)}).length>0))return[3,2];return[4,S({title:x("price-list-new-form-missing-prices-title","Incomplete price list"),description:x("price-list-new-products-modal-missing-prices-description","Prices have not been assigned to all of your chosen products. Would you like to proceed?")})];case 1:if(!d.sent())return[2];d.label=2;case 2:a=!0,o=!1,l=void 0;try{for(s=function(){var e=u.value,n=t.prices.products[e],i=!0,a=!1,o=void 0;try{for(var l,s=Object.keys(n.variants)[Symbol.iterator]();!(i=(l=s.next()).done);i=!0)!function(){var e=l.value,t=n.variants[e];if(t.currency){var i=!0,a=!1,o=void 0;try{for(var s,c=Object.keys(t.currency)[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var u=s.value,d=t.currency[u].amount;if(d){var f=jb(u,parseFloat(d));if(f){var p={amount:f,variant_id:e,currency_code:u};r.push(p)}}}}catch(e){a=!0,o=e}finally{try{i||null==c.return||c.return()}finally{if(a)throw o}}}if(t.region){var m=!0,h=!1,y=void 0;try{for(var b,v=Object.keys(t.region)[Symbol.iterator]();!(m=(b=v.next()).done);m=!0)!function(){var n=b.value,i=t.region[n].amount;if(i){var a=jb(X.find(function(e){return e.id===n}).currency_code,parseFloat(i));a&&r.push({amount:a,variant_id:e,region_id:n})}}()}catch(e){h=!0,y=e}finally{try{m||null==v.return||v.return()}finally{if(h)throw y}}}}()}catch(e){a=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}},c=Object.keys(t.prices.products)[Symbol.iterator]();!(a=(u=c.next()).done);a=!0)s()}catch(e){o=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw l}}return[4,W({name:t.details.general.name,description:t.details.general.description,type:t.details.type.value,includes_tax:C?t.details.general.tax_inclusive:void 0,customer_groups:t.details.customer_groups.ids.map(function(e){return{id:e}}),status:e,ends_at:t.details.dates.ends_at||void 0,starts_at:t.details.dates.starts_at||void 0,prices:r},{onSuccess:function(){P(x("price-list-new-form-notification-success-title","Price list created"),x("price-list-new-form-notification-success-message","Successfully created price list"),"success"),et()},onError:function(e){P(x("price-list-new-form-notification-error-title","An error occurred"),(0,eA.u)(e),"error")}})];case 3:return d.sent(),[2]}})}),function(e){return r.apply(this,arguments)}))()];case 1:return t.sent(),[2]}})}),function(e){return t.apply(this,arguments)}),[D,W,P,et,I,S,x,C,X]),eo=U.useCallback(function(e){if(!e){c(null),h("prices");return}B(_("prices.products.".concat(e.id))),c(e),h("edit")},[B,_]),el=U.useCallback(wR(function(){var e,t=arguments;return wq(this,function(r){switch(r.label){case 0:if(e=t.length>0&&void 0!==t[0]?t[0]:"prices",!q)return[3,2];return[4,S({title:j,description:O})];case 1:if(!r.sent())return[2];r.label=2;case 2:return h(e),c(null),B(void 0,{keepDirty:!1,keepTouched:!1}),[2]}})}),[S,B,q,j,O]),es=U.useCallback((r=wR(function(e){return wq(this,function(t){switch(t.label){case 0:if("edit"!==m)return[3,2];return[4,el(e)];case 1:return t.sent(),[2];case 2:return h(e),[2]}})}),function(e){return r.apply(this,arguments)}),[m,el]),ec=U.useCallback(function(e){f(function(t){var r=!0,n=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var l=a.value;e.includes(l)||E("prices.products.".concat(l),{variants:{}})}}catch(e){n=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(n)throw i}}return e})},[E]),eu=U.useCallback(wR(function(){return wq(this,function(e){switch(e.label){case 0:return[4,N("details")];case 1:if(!e.sent())return v(function(e){return wF(wz({},e),wL({},"details","in-progress"))}),[2];return h("products"),v(function(e){return wF(wz({},e),wL({},"details","completed"))}),[2]}})}),[N]),ed=U.useCallback(wR(function(){return wq(this,function(e){switch(e.label){case 0:return[4,N("products")];case 1:if(!e.sent())return v(function(e){return wF(wz({},e),wL({},"products","in-progress"))}),[2];return ec(_("products.ids")),h("prices"),v(function(e){return wF(wz({},e),wL({},"products","completed"))}),[2]}})}),[N,_,ec]),ef=U.useCallback(wR(function(){return wq(this,function(e){switch(e.label){case 0:switch(m){case"details":return[3,1];case"products":return[3,3];case"prices":return[3,5];case"edit":return[3,7]}return[3,9];case 1:return[4,eu()];case 2:case 4:case 6:case 8:return e.sent(),[3,9];case 3:return[4,ed()];case 5:return[4,ea(g.ACTIVE)];case 7:return[4,en()];case 9:return[2]}})}),[eu,ed,ea,en,m]),ep=U.useMemo(function(){switch(m){case"prices":return x("price-list-new-form-next-button-save-and-publish","Save and Publish");case"edit":return x("price-list-new-form-next-button-save","Save Prices");default:return x("price-list-new-form-next-button-continue","Continue")}},[m,x]),em=U.useCallback(wR(function(){return wq(this,function(e){switch(e.label){case 0:switch(m){case"details":return[3,1];case"products":return[3,3];case"prices":return[3,4];case"edit":return[3,5]}return[3,7];case 1:return[4,er(!1)];case 2:case 6:return e.sent(),[3,7];case 3:return h("details"),[3,7];case 4:return h("products"),[3,7];case 5:return[4,el()];case 7:return[2]}})}),[er,el,m]),eh=U.useMemo(function(){return"details"===m?x("price-list-new-form-back-button-cancel","Cancel"):x("price-list-new-form-back-button-back","Back")},[m,x]);return(0,z.jsxs)(xc.FocusModal,{open:a,onOpenChange:er,children:[(0,z.jsx)(xc.FocusModal.Trigger,{asChild:!0,children:(0,z.jsx)(xc.Button,{variant:"secondary",children:"Create New"})}),(0,z.jsx)(xc.ProgressTabs,{value:m,onValueChange:function(e){return es(e)},children:(0,z.jsxs)(xc.FocusModal.Content,{children:[(0,z.jsxs)(xc.FocusModal.Header,{className:"flex w-full items-center justify-start",children:[(0,z.jsxs)(xc.ProgressTabs.List,{className:"border-ui-border-base -my-2 ml-2 min-w-0 flex-1 border-l",children:[(0,z.jsx)(xc.ProgressTabs.Trigger,{value:"details",className:"w-full min-w-0 max-w-[200px]",status:b.details,children:(0,z.jsx)("span",{className:"w-full overflow-hidden text-ellipsis whitespace-nowrap",children:x("price-list-new-form-details-tab","Create Price List")})}),(0,z.jsx)(xc.ProgressTabs.Trigger,{value:"products",disabled:"completed"!==b.details,className:"w-full min-w-0  max-w-[200px]",status:b.products,children:(0,z.jsx)("span",{className:"w-full overflow-hidden text-ellipsis whitespace-nowrap",children:x("price-list-new-form-products-tab","Choose Products")})}),(0,z.jsx)(xc.ProgressTabs.Trigger,{value:"prices",disabled:"completed"!==b.details||"completed"!==b.products,className:"w-full min-w-0 max-w-[200px]",status:b.prices,children:(0,z.jsx)("span",{className:"w-full overflow-hidden text-ellipsis whitespace-nowrap",children:x("price-list-new-form-prices-tab","Edit Prices")})}),s&&(0,z.jsx)(xc.ProgressTabs.Trigger,{value:"edit",disabled:Q||K,className:"w-full min-w-0 max-w-[200px]",status:q?"in-progress":"not-started",children:(0,z.jsx)("span",{className:"w-full overflow-hidden text-ellipsis whitespace-nowrap",children:null==s?void 0:s.title})})]}),(0,z.jsxs)("div",{className:"ml-auto flex items-center justify-end gap-x-2",children:[(0,z.jsx)(xc.Button,{variant:"secondary",onClick:em,disabled:Y,children:eh}),"prices"===m&&!Y&&(0,z.jsx)(xc.Button,{onClick:function(){return ea(g.DRAFT)},children:x("price-list-new-form-save-as-draft","Save as Draft")}),(0,z.jsx)(xc.Button,{type:"button",onClick:ef,isLoading:Y,children:ep})]})]}),a&&(0,z.jsx)(xc.FocusModal.Body,{className:"flex h-full w-full flex-col items-center overflow-y-auto",children:(0,z.jsxs)(xP,wF(wz({},A),{children:[(0,z.jsx)(xc.ProgressTabs.Content,{value:"details",className:"h-full w-full max-w-[720px]",children:(0,z.jsx)("div",{className:"px-8 py-12",children:(0,z.jsx)(xY,{form:(0,eL.m)(A,"details"),layout:"focus",enableTaxToggle:C})})}),(0,z.jsx)(xc.ProgressTabs.Content,{value:"products",className:"h-full w-full",children:(0,z.jsx)(wo,{form:(0,eL.m)(A,"products")})}),(0,z.jsx)(xc.ProgressTabs.Content,{value:"prices",className:"h-full w-full",children:Q?(0,z.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,z.jsx)(xs.Spinner,{className:"text-ui-fg-subtle animate-spin"})}):K||Z?(0,z.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,z.jsxs)("div",{className:"text-ui-fg-subtle flex items-center gap-x-2",children:[(0,z.jsx)(xs.ExclamationCircle,{}),(0,z.jsx)(xc.Text,{children:x("price-list-new-form-error-loading-products","An error occurred while preparing the form. Reload the page and try again. If the issue persists, try again later.")})]})}):(0,z.jsx)(jh,{setProduct:eo,form:(0,eL.m)(A,"prices"),productIds:d})}),s&&(0,z.jsx)(xc.ProgressTabs.Content,{value:"edit",className:"h-full w-full",children:Q?(0,z.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,z.jsx)(xs.Spinner,{className:"text-ui-fg-subtle animate-spin"})}):K||Z?(0,z.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,z.jsxs)("div",{className:"text-ui-fg-subtle flex items-center gap-x-2",children:[(0,z.jsx)(xs.ExclamationCircle,{}),(0,z.jsx)(xc.Text,{children:x("price-list-new-form-error-loading-products","An error occurred while preparing the form. Reload the page and try again. If the issue persists, try again later.")})]})}):(0,z.jsx)(j4,{priceListTaxInclusive:M,taxInclEnabled:C,product:s,currencies:ee,regions:X,control:L,getValues:V,setValue:H})})]}))})]})})]})};function wV(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function wG(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function wW(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function o(e){wG(a,n,i,o,l,"next",e)}function l(e){wG(a,n,i,o,l,"throw",e)}o(void 0)})}}function wY(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return wV(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wV(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w$(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}var wQ=function(){var e=(0,H.useNavigate)(),t=wY((0,H.useSearchParams)(),1)[0],r=function(r,n){var i=new URLSearchParams(t);n?i.set(r,JSON.stringify(n)):i.delete(r),e({search:i.toString()},{replace:!0})};return(0,z.jsx)(xB,{onClearFilters:function(){e({search:new URLSearchParams().toString()},{replace:!0})},children:(0,z.jsxs)(xB.Content,{children:[(0,z.jsx)(xB.SelectItem,{name:"Status",onChange:function(r){var n=new URLSearchParams(t);if(0===r.length){n.delete("status"),e({search:n.toString()},{replace:!0});return}n.has("status")&&n.delete("status"),n.set("status",r.join(",")),e({search:n.toString()},{replace:!0})},options:[{label:"Active",value:"active"},{label:"Draft",value:"draft"}],value:js("status",t)}),(0,z.jsx)(xB.Seperator,{}),(0,z.jsx)(xB.DateItem,{name:"Created at",value:jl("created_at",t),onChange:function(e){return r("created_at",e)}}),(0,z.jsx)(xB.Seperator,{}),(0,z.jsx)(xB.DateItem,{name:"Updated at",value:jl("updated_at",t),onChange:function(e){return r("updated_at",e)}})]})})},wK=function(){var e=(0,tY.X)().getWidgets,t=wY((0,H.useSearchParams)(),1)[0],r=jo(),n=r.query,i=r.setQuery,a=(0,H.useNavigate)(),o=(0,J.useAdminPriceLists)({limit:10,status:js("status",t),created_at:jl("created_at",t),updated_at:jl("updated_at",t),q:jc("q",t),expand:"customer_groups"},{keepPreviousData:!0}),l=o.price_lists,s=o.count,c=o.isLoading,u=o.isError,d=(0,us.useReactTable)({data:null!=l?l:[],columns:wJ,getCoreRowModel:(0,us.getCoreRowModel)(),getPaginationRowModel:(0,us.getPaginationRowModel)()});return c?(0,z.jsx)(xc.Container,{style:{height:671},className:"flex items-center justify-center",children:(0,z.jsx)(xs.Spinner,{className:"text-ui-fg-subtle animate-spin"})}):u?(0,z.jsx)(xc.Container,{style:{height:671},className:"flex items-center justify-center",children:(0,z.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,z.jsx)(xs.ExclamationCircle,{className:"text-ui-fg-base"}),(0,z.jsx)(xc.Text,{className:"text-ui-fg-subtle",children:"An error occurred while loading the price lists. Try to reload the page or try again later."})]})}):(0,z.jsxs)("div",{children:[(0,z.jsxs)("div",{className:"flex flex-col gap-y-2",children:[e("price_list.list.before").map(function(e,t){return(0,z.jsx)(es.A,{injectionZone:"price_list.list.before",widget:e,entity:void 0},t)}),(0,z.jsxs)(xc.Container,{className:"overflow-hidden p-0",children:[(0,z.jsxs)("div",{className:"flex items-center justify-between px-8 pt-6 pb-4",children:[(0,z.jsx)(xc.Heading,{children:"Price Lists"}),(0,z.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,z.jsx)(wQ,{}),(0,z.jsx)(xc.Input,{size:"small",type:"search",placeholder:"Search",value:n,onChange:function(e){i(e.target.value)}}),(0,z.jsx)(wU,{})]})]}),(0,z.jsx)("div",{style:{height:528},children:(0,z.jsxs)(xc.Table,{children:[(0,z.jsx)(xc.Table.Header,{children:d.getHeaderGroups().map(function(e){return(0,z.jsx)(xc.Table.Row,{className:"[&_th]:w-1/5 [&_th:last-of-type]:w-[1%]",children:e.headers.map(function(e){return(0,z.jsx)(xc.Table.HeaderCell,{children:(0,us.flexRender)(e.column.columnDef.header,e.getContext())},e.id)})},e.id)})}),(0,z.jsx)(xc.Table.Body,{className:"border-b-0",children:d.getRowModel().rows.map(function(e){return(0,z.jsx)(xc.Table.Row,{className:(0,xc.clx)("cursor-pointer [&_td:last-of-type]:w-[1%]"),onClick:function(){a("/a/pricing/".concat(e.original.id))},children:e.getVisibleCells().map(function(e){return(0,z.jsx)(xc.Table.Cell,{children:(0,us.flexRender)(e.column.columnDef.cell,e.getContext())},e.id)})},e.id)})})]})}),(0,z.jsx)(xc.Table.Pagination,{className:(0,xc.clx)({"border-ui-border-base border-t":(null==l?void 0:l.length)!==10}),count:null!=s?s:0,canNextPage:d.getCanNextPage(),canPreviousPage:d.getCanPreviousPage(),nextPage:d.nextPage,previousPage:d.previousPage,pageIndex:d.getState().pagination.pageIndex,pageCount:d.getPageCount(),pageSize:10})]}),e("price_list.list.after").map(function(e,t){return(0,z.jsx)(es.A,{injectionZone:"price_list.list.after",widget:e,entity:void 0},t)})]}),(0,z.jsx)(el,{})]})},wZ=(0,us.createColumnHelper)(),wJ=[wZ.accessor("name",{header:"Name",cell:function(e){return e.getValue()}}),wZ.accessor("description",{header:"Description",cell:function(e){return(0,z.jsx)("span",{className:"overflow-hidden text-ellipsis whitespace-nowrap",children:e.getValue()})}}),wZ.accessor("status",{header:"Status",cell:function(e){var t=e.getValue,r=e.row,n=r.original.starts_at,i=r.original.ends_at,a=!!i&&new Date(i)<new Date,o=!!n&&new Date(n)>new Date,l=t()===g.DRAFT;return(0,z.jsx)(xc.StatusBadge,{color:a?"red":l?"grey":o?"orange":"green",children:(0,z.jsx)("span",{className:"capitalize",children:a?"Expired":l?"Draft":o?"Scheduled":"Active"})})}}),wZ.accessor("customer_groups",{header:"Customer Groups",cell:function(e){var t;return(null===(t=e.getValue())||void 0===t?void 0:t.length)||"-"}}),wZ.display({id:"actions",cell:function(e){return(0,z.jsx)(wX,{row:e.row})}})],wX=function(e){var t,r,n=e.row,i=(0,J.useAdminDeletePriceList)(n.original.id).mutateAsync,a=(0,J.useAdminUpdatePriceList)(n.original.id).mutateAsync,o=(0,xc.usePrompt)(),l=(0,eC.A)(),s=(0,H.useNavigate)(),c=(t=wW(function(e){return w$(this,function(t){switch(t.label){case 0:return e.stopPropagation(),[4,o({title:"Are you sure?",description:"This will permanently delete the price list",verificationText:n.original.name})];case 1:if(!t.sent())return[2];return[2,i(void 0,{onSuccess:function(){l("Price list deleted","Successfully deleted ".concat(n.original.name),"success")},onError:function(e){l("An error occurred",(0,eA.u)(e),"error")}})]}})}),function(e){return t.apply(this,arguments)}),u=(r=wW(function(e){return w$(this,function(t){return e.stopPropagation(),[2,a({status:"active"===n.original.status?g.DRAFT:g.ACTIVE},{onSuccess:function(){l("Price list updated","Successfully updated ".concat(n.original.name),"success")},onError:function(e){l("An error occurred",(0,eA.u)(e),"error")}})]})}),function(e){return r.apply(this,arguments)}),d=!!n.original.ends_at&&new Date(n.original.ends_at)<new Date,f="active"===n.original.status;return(0,z.jsxs)(xc.DropdownMenu,{children:[(0,z.jsx)(xc.DropdownMenu.Trigger,{asChild:!0,children:(0,z.jsx)(xc.IconButton,{variant:"transparent",children:(0,z.jsx)(xs.EllipsisHorizontal,{className:"text-ui-fg-subtle"})})}),(0,z.jsxs)(xc.DropdownMenu.Content,{children:[(0,z.jsxs)(xc.DropdownMenu.Item,{onClick:function(e){e.stopPropagation(),s("/a/pricing/".concat(n.original.id))},children:[(0,z.jsx)(xs.PencilSquare,{className:"text-ui-fg-subtle"}),(0,z.jsx)("span",{className:"ml-2",children:"Edit"})]}),!d&&(0,z.jsxs)(xc.DropdownMenu.Item,{onClick:u,children:[f?(0,z.jsx)(xs.EllipseGreySolid,{}):(0,z.jsx)(xs.EllipseGreenSolid,{}),(0,z.jsx)("span",{className:"ml-2",children:f?"Mark as draft":"Mark as active"})]}),(0,z.jsx)(xc.DropdownMenu.Separator,{}),(0,z.jsxs)(xc.DropdownMenu.Item,{onClick:c,children:[(0,z.jsx)(xs.Trash,{className:"text-ui-fg-subtle"}),(0,z.jsx)("span",{className:"ml-2",children:"Delete"})]})]})]})};let w0=function(){return(0,z.jsxs)(H.Routes,{children:[(0,z.jsx)(H.Route,{index:!0,element:(0,z.jsx)(wK,{})}),(0,z.jsx)(H.Route,{path:"new",element:(0,z.jsx)(wU,{})}),(0,z.jsx)(H.Route,{path:":id",element:(0,z.jsx)(wD,{})})]})};var w1=r(3050);let w2=function(e){var t,r,n=e.size,i=void 0===n?"24px":n,a=e.color,o=void 0===a?"currentColor":a,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["size","color"]);return(0,z.jsxs)("svg",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({width:i,height:i,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l),r=r={children:[(0,z.jsx)("path",{d:"M7.5 10.75C7.91421 10.75 8.25 10.4142 8.25 10C8.25 9.58579 7.91421 9.25 7.5 9.25C7.08579 9.25 6.75 9.58579 6.75 10C6.75 10.4142 7.08579 10.75 7.5 10.75Z",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M7.5 5.75C7.91421 5.75 8.25 5.41421 8.25 5C8.25 4.58579 7.91421 4.25 7.5 4.25C7.08579 4.25 6.75 4.58579 6.75 5C6.75 5.41421 7.08579 5.75 7.5 5.75Z",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M7.5 15.75C7.91421 15.75 8.25 15.4142 8.25 15C8.25 14.5858 7.91421 14.25 7.5 14.25C7.08579 14.25 6.75 14.5858 6.75 15C6.75 15.4142 7.08579 15.75 7.5 15.75Z",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M12.5 10.75C12.9142 10.75 13.25 10.4142 13.25 10C13.25 9.58579 12.9142 9.25 12.5 9.25C12.0858 9.25 11.75 9.58579 11.75 10C11.75 10.4142 12.0858 10.75 12.5 10.75Z",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M12.5 5.75C12.9142 5.75 13.25 5.41421 13.25 5C13.25 4.58579 12.9142 4.25 12.5 4.25C12.0858 4.25 11.75 4.58579 11.75 5C11.75 5.41421 12.0858 5.75 12.5 5.75Z",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M12.5 15.75C12.9142 15.75 13.25 15.4142 13.25 15C13.25 14.5858 12.9142 14.25 12.5 14.25C12.0858 14.25 11.75 14.5858 11.75 15C11.75 15.4142 12.0858 15.75 12.5 15.75Z",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},w3=function(e){var t,r,n=e.size,i=void 0===n?"20":n,a=e.color,o=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["size","color"]);return(0,z.jsx)("svg",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({width:i,height:i,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),r=r={children:(0,z.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.0869 6.25006C13.7804 6.25006 14.22 7.00005 13.8859 7.61318L10.7988 13.2737C10.4525 13.9089 9.54748 13.9089 9.20123 13.2737L6.1141 7.61368C5.78 7.00054 6.21963 6.25055 6.91312 6.25055L13.0869 6.25006Z",fill:void 0===a?"currentColor":a})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},w5=function(e){var t,r,n=e.content,i=e.icon,a=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["content","icon"]);return(0,z.jsx)(r9.A,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({content:n,side:"top"},a),r=r={children:i},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},w6=function(e){var t,r,n=e.size,i=void 0===n?"20px":n,a=e.color,o=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["size","color"]);return(0,z.jsx)("svg",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({width:i,height:i,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),r=r={children:(0,z.jsx)("path",{d:"M3.49557 8.24663C3.58387 8.23322 3.67454 8.22613 3.76678 8.22613H16.2328C16.325 8.22613 16.4157 8.23322 16.504 8.24663M3.49557 8.24663C3.03418 8.31808 2.61956 8.56856 2.34165 8.94373C2.06373 9.31891 1.94494 9.78852 2.01103 10.2507L2.68668 14.9811C2.74703 15.4037 2.95781 15.7905 3.28032 16.0703C3.60284 16.3501 4.01546 16.5041 4.44243 16.5042H15.5579C15.9849 16.5041 16.3975 16.3501 16.72 16.0703C17.0426 15.7905 17.2533 15.4037 17.3137 14.9811L17.9893 10.2507C18.0554 9.78852 17.9366 9.31891 17.6587 8.94373C17.3808 8.56856 16.9654 8.31808 16.504 8.24663M3.49557 8.24663L3.49636 5.26967C3.49636 4.79934 3.68314 4.34827 4.01564 4.01562C4.34813 3.68298 4.79912 3.496 5.26945 3.49579H8.32761C8.64115 3.49606 8.94174 3.62084 9.16331 3.84268L10.8363 5.51407C11.0578 5.73591 11.3584 5.86068 11.672 5.86096H14.7301C15.2006 5.86096 15.6518 6.04785 15.9844 6.38051C16.3171 6.71318 16.504 7.16437 16.504 7.63484V8.24663",stroke:void 0===a?"currentColor":a,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))};var w4=r(36917),w8=r(27308);function w7(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}let w9=function(e){var t,r,n=e.item,i=(0,ei.Bd)().t,a=(0,eC.A)(),o=!!(null===(r=n.category_children)||void 0===r?void 0:r.length),l=(0,U.useContext)(OO),s=(0,J.useAdminDeleteProductCategory)(n.id).mutateAsync,c=[{label:i("components-edit","Edit"),onClick:function(){return l.editCategory(n)},icon:(0,z.jsx)(ec,{size:20})},{label:i("components-delete","Delete"),variant:"danger",onClick:(t=function(){return function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,s()];case 1:return e.sent(),a(i("components-success","Success"),i("components-category-deleted","Category deleted"),"success"),[3,3];case 2:return e.sent(),a(i("components-error","Error"),i("components-category-deletion-failed","Category deletion failed"),"error"),[3,3];case 3:return[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function o(e){w7(a,n,i,o,l,"next",e)}function l(e){w7(a,n,i,o,l,"throw",e)}o(void 0)})}),icon:(0,z.jsx)(eu,{size:20}),disabled:!!n.category_children.length}];return(0,z.jsx)("div",{className:"bg-white",children:(0,z.jsxs)("div",{style:{marginLeft:-8*e.depth},className:"flex h-[40px] items-center",children:[(0,z.jsx)("div",{className:"flex w-[32px] items-center justify-center",children:e.handler}),(0,z.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,z.jsxs)("div",{className:"flex items-center",children:[o&&(0,z.jsx)("div",{className:"absolute flex w-[20px] cursor-pointer items-center justify-center",children:e.collapseIcon}),(0,z.jsxs)("div",{className:"ml-[20px] flex w-[32px] items-center justify-center",children:[o&&(0,z.jsx)(w6,{color:"#889096",size:18}),!o&&(0,z.jsx)(w4.A,{color:"#889096",size:18})]}),(0,z.jsx)("span",{className:(0,en.default)("ml-2 select-none text-xs font-medium",{"font-normal text-gray-400":!o}),children:n.name}),(0,z.jsxs)("div",{className:"flex w-[64px] items-center justify-center",children:[!n.is_active&&(0,z.jsx)(w5,{content:i("components-category-status-is-inactive","Category status is inactive"),icon:(0,z.jsx)(pU,{size:"32",className:"cursor-pointer",outerColor:"#FFE5E5"})}),n.is_internal&&(0,z.jsx)(w5,{content:i("components-category-visibility-is-private","Category visibility is private"),icon:(0,z.jsx)(w8.A,{color:"#889096",size:18,className:"cursor-pointer"})})]})]}),(0,z.jsxs)("div",{className:"flex items-center gap-2",children:[(0,z.jsx)(r9.A,{style:{zIndex:1},content:(0,z.jsxs)(z.Fragment,{children:[i("components-add-category-item-to","Add category item to")," ",(0,z.jsx)("span",{className:"text-grey-80 font-semibold",children:'"'.concat(n.name,'"')})]}),children:(0,z.jsx)(W.A,{size:"small",variant:"ghost",onClick:function(){return l.createSubCategory(n)},children:(0,z.jsx)(n_.A,{color:"#687076",size:18})})}),(0,z.jsx)(em,{forceDropdown:!0,actions:c,customTrigger:(0,z.jsx)(W.A,{size:"small",variant:"ghost",className:"h-xlarge w-xlarge focus-visible:border-violet-60 focus-visible:shadow-input focus:shadow-none focus-visible:outline-none",children:(0,z.jsx)(ef,{color:"#687076",size:20})})})]})]})]})})};function Oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Ot(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function Or(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Oe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Oe(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}let On=U.memo(function(e){var t,r,n=(0,ei.Bd)().t,i=(0,J.useMedusa)().client,a=(0,uc.useQueryClient)(),o=(0,eC.A)(),l=Or((0,n5.A)(!1),3),s=l[0],c=l[1],u=l[2],d=Or((0,n5.A)(!1),3),f=d[0],p=d[1],m=d[2],h=e.categories,y=(0,U.useCallback)((t=function(e){var t,r,l,s,d,f;return function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,function(h){switch(h.label){case 0:c(),t=null,r=e.dragItem,l=e.items,d=Or((s=e.targetPath).slice(-1),1)[0],s.length>1&&(f=(0,t6.dropRight)((0,t6.flatMap)(s.slice(0,-1),function(e){return[e,"category_children"]})),t=(0,t6.get)(l,f).id),h.label=1;case 1:return h.trys.push([1,3,4,6]),m(),[4,i.admin.productCategories.update(r.id,{parent_category_id:t,rank:d})];case 2:return h.sent(),o(n("components-success","Success"),n("components-successfully-updated-category-tree","Successfully updated category tree"),"success"),[3,6];case 3:return h.sent(),o(n("components-error","Error"),n("components-failed-to-update-category-tree","Failed to update category tree"),"error"),p(),[3,6];case 4:return[4,a.invalidateQueries(J.adminProductCategoryKeys.lists())];case 5:return h.sent(),u(),[7];case 6:return[2]}})},r=function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function o(e){Ot(a,n,i,o,l,"next",e)}function l(e){Ot(a,n,i,o,l,"throw",e)}o(void 0)})},function(e){return r.apply(this,arguments)}),[]),b=(0,U.useMemo)(function(){return(0,z.jsx)(w1.A,{items:h,collapsed:!0,onChange:y,childrenProp:"category_children",maxDepth:99,renderItem:function(e){var t=e.item,r=e.depth,n=e.handler,i=e.collapseIcon;return(0,z.jsx)(w9,{item:t,depth:r,handler:n,collapseIcon:i})},handler:(0,z.jsx)(w2,{className:"cursor-grab",color:"#889096"}),renderCollapseIcon:function(e){var t=e.isCollapsed;return(0,z.jsx)(w3,{style:{top:-2,width:32,left:-12,transform:t?"rotate(270deg)":""},color:"#889096",size:18})}})},[h,f]);return(0,z.jsxs)("div",{style:{pointerEvents:s?"none":"initial",position:"relative"},children:[b,s&&(0,z.jsx)("div",{style:{top:0,bottom:0,width:"100%",cursor:"progress",position:"absolute"}})]})});function Oi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Oa=function(e){return e.reduce(function(e,t){return(null==t?void 0:t.category_children.length)?e=e.concat(Oa(t.category_children)).concat(t):e.push(t),e},[])},Oo=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=null;return(r.push(e),e.parent_category_id&&(r=Oo(n=t.find(function(t){return t.id===e.parent_category_id}),t,r)),n)?r:r.reverse()},Ol=function(e,t){return{name:(null==t?void 0:t.name)||"",handle:(null==t?void 0:t.handle)||"",description:(null==t?void 0:t.description)||"",metadata:{entries:Object.entries((null==t?void 0:t.metadata)||{}).map(function(e){var t=function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,2)||function(e,t){if(e){if("string"==typeof e)return Oi(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Oi(e,2)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();return{key:t[0],value:t[1],state:"existing"}})},is_active:{value:(null==t?void 0:t.is_active)?(null==t?void 0:t.is_active)?S.Active:S.Inactive:S.Active,label:(null==t?void 0:t.is_active)?e("modals-active","Public"):e("modals-inactive","Inactive")},is_public:{value:(null==t?void 0:t.is_internal)&&(null==t?void 0:t.is_internal)?P.Private:P.Public,label:(null==t?void 0:t.is_internal)?e("modals-private","Private"):e("modals-public","Public")}}};let Os=function(e){var t,r,n=e.nodes,i=e.currentNode,a=e.showPlaceholder,o=void 0!==a&&a,l=e.placeholderText,s=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["nodes","currentNode","showPlaceholder","placeholderText"]),c=Oo(i,n);return(0,z.jsx)("span",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},s),r=r={children:(0,z.jsxs)("span",{className:"text-grey-40",children:[c.map(function(e,t){var r=e.name;return(0,z.jsxs)("div",{className:"inline-block",children:[(0,z.jsx)("span",{children:r.length>25?r.substring(0,25)+"...":r}),(o||c.length!==t+1)&&(0,z.jsx)("span",{className:"mx-2",children:"/"})]},e.id)}),o&&(0,z.jsx)("span",{children:(0,z.jsx)("span",{className:"border-grey-40 rounded-[10px] border-[1px] border-dashed px-[8px] py-[4px]",children:void 0===l?"":l})})]})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))};function Oc(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function Ou(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function Od(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}!function(e){e.Active="active",e.Inactive="inactive"}(S||(S={})),function(e){e.Public="public",e.Private="private"}(P||(P={}));var Of=function(e){return[{label:e("modals-public","Public"),value:"public"},{label:e("modals-private","Private"),value:"private"}]},Op=function(e){return[{label:e("modals-active","Active"),value:"active"},{label:e("modals-inactive","Inactive"),value:"inactive"}]};let Om=function(e){var t,r,n=(0,ei.Bd)().t,i=e.closeModal,a=e.parentCategory,o=e.categories,l=(0,eC.A)(),s=(0,uc.useQueryClient)(),c=(0,eR.mN)({defaultValues:Ol(n),mode:"onChange"}),u=c.register,d=c.handleSubmit,f=c.watch,p=(c.reset,c.control),m=c.formState,h=(m.errors,m.isDirty),y=m.isValid,b=m.isSubmitting,v=f("name",""),g=(0,J.useAdminCreateProductCategory)().mutateAsync,x=d((t=function(e){var t,r,o;return function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,function(c){switch(c.label){case 0:return c.trys.push([0,3,,4]),[4,g({name:e.name,handle:e.handle,description:e.description,is_active:"active"===e.is_active.value,is_internal:"private"===e.is_public.value,parent_category_id:null!==(t=null==a?void 0:a.id)&&void 0!==t?t:null,metadata:eZ(e.metadata)})];case 1:return c.sent(),[4,s.invalidateQueries(J.adminProductCategoryKeys.lists())];case 2:return c.sent(),i(),l(n("modals-success","Success"),n("modals-successfully-created-a-category","Successfully created a category"),"success"),[3,4];case 3:return r=c.sent(),o=(0,eA.u)(r)||n("modals-failed-to-create-a-new-category","Failed to create a new category"),l(n("modals-error","Error"),o,"error"),[3,4];case 4:return[2]}})},r=function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function o(e){Oc(a,n,i,o,l,"next",e)}function l(e){Oc(a,n,i,o,l,"throw",e)}o(void 0)})},function(e){return r.apply(this,arguments)}));return(0,z.jsxs)(sF.A,{children:[(0,z.jsx)(sF.A.Header,{children:(0,z.jsxs)("div",{className:"medium:w-8/12 flex w-full justify-between px-8",children:[(0,z.jsx)(W.A,{size:"small",variant:"ghost",onClick:i,children:(0,z.jsx)(ao.A,{size:20})}),(0,z.jsx)("div",{className:"gap-x-small flex",children:(0,z.jsx)(W.A,{size:"small",variant:"primary",disabled:!h||!y||b,onClick:x,className:"rounded-rounded",children:n("modals-save-category","Save category")})})]})}),(0,z.jsx)(sF.A.Main,{className:"no-scrollbar flex w-full justify-center",children:(0,z.jsxs)("div",{className:"small:w-4/5 medium:w-7/12 large:w-6/12 my-16 max-w-[700px]",children:[(0,z.jsx)("h1",{className:"inter-xlarge-semibold text-grey-90 pb-6",children:a?n("modals-add-category-to","Add category to {{name}}",{name:a.name}):n("modals-add-category","Add category")}),a&&(0,z.jsx)("div",{className:"mb-6",children:(0,z.jsx)(Os,{nodes:o,currentNode:a,showPlaceholder:!0,placeholderText:v||"New"})}),(0,z.jsx)("h4",{className:"inter-large-semibold text-grey-90 pb-1",children:n("modals-details","Details")}),(0,z.jsxs)("div",{className:"mb-8 flex justify-between gap-6",children:[(0,z.jsx)(e1.A,Ou({required:!0,label:n("modals-name","Name"),type:"string",className:"w-[338px]",placeholder:n("modals-give-this-category-a-name","Give this category a name")},u("name",{required:!0}))),(0,z.jsx)(e1.A,Ou({label:n("modals-handle","Handle"),type:"string",className:"w-[338px]",placeholder:n("modals-custom-handle","Custom handle")},u("handle")))]}),(0,z.jsx)("div",{className:"mb-8",children:(0,z.jsx)(sw.A,Ou({label:n("modals-description","Description"),placeholder:n("modals-give-this-category-a-description","Give this category a description")},u("description")))}),(0,z.jsxs)("div",{className:"mb-8 flex justify-between gap-6",children:[(0,z.jsx)("div",{className:"flex-1",children:(0,z.jsx)(eR.xI,{name:"is_active",control:p,rules:{required:!0},render:function(e){var t,r=e.field;return(0,z.jsx)(no,Od(Ou({},r),{label:n("modals-status","Status"),placeholder:"Choose status",options:Op(n),value:Op(n)[(null===(t=r.value)||void 0===t?void 0:t.value)==="active"?0:1]}))}})}),(0,z.jsx)("div",{className:"flex-1",children:(0,z.jsx)(eR.xI,{name:"is_public",control:p,rules:{required:!0},render:function(e){var t=e.field;return(0,z.jsx)(no,Od(Ou({},t),{label:n("modals-visibility","Visibility"),placeholder:"Choose visibility",options:Of(n),value:Of(n)["public"===t.value.value?0:1]}))}})})]}),(0,z.jsxs)("div",{className:"mt-xlarge",children:[(0,z.jsx)("h2",{className:"inter-base-semibold mb-base",children:n("collection-modal-metadata","Metadata")}),(0,z.jsx)(e$,{form:(0,eL.m)(c,"metadata")})]})]})})]})};function Oh(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function Oy(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function Ob(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var Ov=function(e){return[{label:"Public",value:P.Public},{label:"Private",value:P.Private}]},Og=function(e){return[{label:"Active",value:S.Active},{label:"Inactive",value:S.Inactive}]};let Ox=function(e){var t,r,n=e.isVisible,i=e.close,a=e.activeCategory,o=e.categories,l=(0,ei.Bd)().t,s=(0,eC.A)(),c=(0,J.useAdminUpdateProductCategory)(null==a?void 0:a.id).mutateAsync,u=(0,eR.mN)({defaultValues:Ol(l,a),mode:"onChange"}),d=u.register,f=u.handleSubmit,p=(u.watch,u.reset),m=u.control,h=u.formState,y=(h.errors,h.isDirty),b=h.isValid,v=h.isSubmitting;(0,U.useEffect)(function(){a&&p(Ol(l,a))},[a,p]);var g=(t=function(e){var t,r;return function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,c({name:e.name,handle:e.handle,description:e.description,is_active:e.is_active.value===S.Active,is_internal:e.is_public.value===P.Private,metadata:eZ(e.metadata)})];case 1:return n.sent(),s(l("modals-success","Success"),l("modals-successfully-updated-the-category","Successfully updated the category"),"success"),i(),[3,3];case 2:return t=n.sent(),r=(0,eA.u)(t)||l("modals-failed-to-update-the-category","Failed to update the category"),s(l("modals-error","Error"),r,"error"),[3,3];case 3:return[2]}})},r=function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function o(e){Oh(a,n,i,o,l,"next",e)}function l(e){Oh(a,n,i,o,l,"throw",e)}o(void 0)})},function(e){return r.apply(this,arguments)});return(0,z.jsx)(pv,{close:function(){i()},isVisible:!!n,children:(0,z.jsxs)("div",{className:"flex h-full flex-col justify-between overflow-auto",children:[(0,z.jsxs)("div",{className:"flex items-center justify-between p-6",children:[(0,z.jsx)(W.A,{size:"small",variant:"secondary",className:"h-8 w-8 p-2",onClick:e.close,children:(0,z.jsx)(ao.A,{size:20,className:"text-grey-50"})}),(0,z.jsx)("div",{className:"gap-x-small flex",children:(0,z.jsx)(W.A,{size:"small",variant:"primary",disabled:!y||!b||v,onClick:f(g),className:"rounded-rounded",children:l("modals-save-category","Save category")})})]}),(0,z.jsx)("h3",{className:"inter-large-semibold flex items-center gap-2 text-xl text-gray-900 px-6",children:l("modals-edit-product-category","Edit product category")}),(0,z.jsx)("div",{className:"block h-[1px] bg-gray-200"}),a&&(0,z.jsx)("div",{className:"mt-[25px] px-6",children:(0,z.jsx)(Os,{nodes:o,currentNode:a})}),(0,z.jsxs)("div",{className:"flex-grow px-6",children:[(0,z.jsx)(e1.A,Oy({required:!0,label:l("modals-name","Name"),type:"string",className:"my-6",placeholder:l("modals-give-this-category-a-name","Give this category a name")},d("name",{required:!0}))),(0,z.jsx)(e1.A,Oy({label:l("modals-handle","Handle"),className:"my-6",type:"string",placeholder:l("modals-custom-handle","Custom handle")},d("handle"))),(0,z.jsx)(sw.A,Oy({label:l("modals-description","Description"),className:"my-6",placeholder:l("modals-give-this-category-a-description","Give this category a description")},d("description"))),(0,z.jsx)(eR.xI,{name:"is_active",control:m,rules:{required:!0},render:function(e){var t,r=e.field;return(0,z.jsx)(no,Ob(Oy({},r),{label:l("modals-status","Status"),placeholder:"Choose status",options:Og(l),value:Og(l)[(null===(t=r.value)||void 0===t?void 0:t.value)===S.Active?0:1]}))}}),(0,z.jsx)(eR.xI,{name:"is_public",control:m,rules:{required:!0},render:function(e){var t=e.field;return(0,z.jsx)(no,Ob(Oy({},t),{className:"my-6",label:l("modals-visibility","Visibility"),placeholder:"Choose visibility",options:Ov(l),value:Ov(l)[t.value.value===P.Public?0:1]}))}}),(0,z.jsxs)("div",{className:"mt-small mb-xlarge",children:[(0,z.jsx)("h2",{className:"inter-base-semibold mb-base",children:l("collection-modal-metadata","Metadata")}),(0,z.jsx)(e$,{form:(0,eL.m)(u,"metadata")})]})]})]})})};function Oj(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Ow(){var e=(0,ei.Bd)().t;return(0,z.jsx)("div",{className:"flex min-h-[600px] items-center justify-center",children:(0,z.jsx)("p",{className:"text-grey-40",children:e("pages-no-product-categories-yet","No product categories yet, use the above button to create your first category.")})})}var OO=(0,U.createContext)({});let OS=function(){var e,t=(0,ei.Bd)().t,r=(0,n5.A)(),n=r.state,i=r.open,a=r.close,o=(0,n5.A)(),l=o.state,s=o.open,c=o.close,u=function(e){if(Array.isArray(e))return e}(e=(0,U.useState)())||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,2)||function(e,t){if(e){if("string"==typeof e)return Oj(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Oj(e,2)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),d=u[0],f=u[1],p=(0,J.useAdminProductCategories)({parent_category_id:"null",include_descendants_tree:!0}),m=p.product_categories,h=void 0===m?[]:m,y=p.isLoading,b=[{label:t("pages-add-category","Add category"),onClick:i}],v=!y&&!h.length,g=Oa(h);return(0,z.jsx)(OO.Provider,{value:{editCategory:function(e){f(e),s()},createSubCategory:function(e){y||(f(e),i())}},children:(0,z.jsx)("div",{className:"flex h-full grow flex-col",children:(0,z.jsxs)("div",{className:"flex w-full grow flex-col",children:[(0,z.jsx)(eD,{className:"h-full",title:t("pages-product-categories","Product Categories"),subtitle:t("pages-helps-you-to-keep-your-products-organized","Helps you to keep your products organized."),actionables:b,footerMinHeight:40,setBorders:!0,children:v?(0,z.jsx)(Ow,{}):y?null:(0,z.jsx)(On,{categories:h})}),(0,z.jsx)(el,{}),n&&(0,z.jsx)(Om,{parentCategory:d,categories:g,closeModal:function(){a(),f(void 0)}}),(0,z.jsx)(Ox,{close:c,activeCategory:d,isVisible:!!d&&l,categories:g})]})})})},OP=function(){var e=(0,(0,V.Y)().getNestedRoutes)("/product-categories");return(0,z.jsxs)(H.Routes,{children:[(0,z.jsx)(H.Route,{index:!0,element:(0,z.jsx)(OS,{})}),e.map(function(e,t){return(0,z.jsx)(H.Route,{path:e.path,element:(0,z.jsx)(Z,{route:e,previousPath:"/product-categories"})},t)})]})};var OC=(0,U.createContext)(null),OA=function(){var e=(0,U.useContext)(OC);if(!e)throw Error("useOptionsContext must be used within a OptionsProvider");return e};let ON=function(e){var t=e.product,r=e.children,n=(0,J.useAdminProducts)({id:t.id,expand:"options,options.values"}),i=n.products,a=n.status,o=n.refetch,l=(0,U.useMemo)(function(){return i&&i.length>0&&"loading"!==a?i[0].options:void 0},[i,a]);return(0,z.jsx)(OC.Provider,{value:{options:l,status:a,refetch:o},children:r})};function Ok(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function O_(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}let OE=function(e){var t=e.form,r=t.path,n=t.register,i=t.formState.errors;return(0,z.jsxs)("div",{children:[(0,z.jsx)("p",{className:"inter-base-regular text-grey-50",children:"Configure the general information for this variant."}),(0,z.jsx)("div",{className:"pt-large",children:(0,z.jsxs)("div",{className:"gap-x-large grid grid-cols-2",children:[(0,z.jsx)(e1.A,O_(Ok({label:"Custom title",placeholder:"Green / XL..."},n(r("title"),{pattern:n8.A.whiteSpaceRule("Title")})),{errors:i})),(0,z.jsx)(e1.A,O_(Ok({label:"Material",placeholder:"80% wool, 20% cotton..."},t.register(r("material"),{pattern:n8.A.whiteSpaceRule("Material")})),{errors:i}))]})})]})};function OI(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function OD(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function OT(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function o(e){OD(a,n,i,o,l,"next",e)}function l(e){OD(a,n,i,o,l,"throw",e)}o(void 0)})}}function OM(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function OR(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||OL(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function OL(e,t){if(e){if("string"==typeof e)return OI(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return OI(e,t)}}function Oz(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}var OF=function(e,t,r,n){return{title:"Manage locations",onBack:function(){return e()},view:(0,z.jsx)(OB,{existingLevels:t,locationOptions:r,onSubmit:n})}},OB=function(e){var t,r=e.existingLevels,n=e.locationOptions,i=e.onSubmit,a=(0,a7.lK)().pop,o=(0,U.useMemo)(function(){return r.map(function(e){return e.location_id})},[r]),l=OR((0,U.useState)(o),2),s=l[0],c=l[1],u=OR((0,U.useState)(!1),2),d=u[0],f=u[1];U.useEffect(function(){f(!s.every(function(e){return o.includes(e)})||s.length!==o.length)},[o,s]);var p=function(e){s.includes(e)?c(s.filter(function(t){return t!==e})):c(((function(e){if(Array.isArray(e))return OI(e)})(s)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(s)||OL(s)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([e]))},m=(t=OT(function(e){return Oz(this,function(t){switch(t.label){case 0:return e.preventDefault(),[4,i({added:s.filter(function(e){return!o.includes(e)}),removed:o.filter(function(e){return!!e&&!s.includes(e)})}).then(function(){a()})];case 1:return t.sent(),[2]}})}),function(e){return t.apply(this,arguments)}),h=!!n.length;return(0,z.jsx)("div",{className:"h-full w-full",children:(0,z.jsxs)("form",{onSubmit:m,children:[(0,z.jsx)(eN.A.Content,{children:(0,z.jsxs)("div",{children:[(0,z.jsxs)("div",{className:(0,en.default)("border-grey-20 text-grey-50 flex w-full items-center justify-between",{"pb-base border-b":h}),children:[(0,z.jsxs)("div",{children:[(0,z.jsx)("p",{children:h?"Select locations that stock the selected variant":"You don't have any locations"}),h&&(0,z.jsx)("p",{children:"(".concat(s.length," of ").concat(n.length," selected)")})]}),h&&(0,z.jsx)(W.A,{size:"small",variant:"ghost",className:"border",onClick:function(e){e.preventDefault(),c(n.map(function(e){return e.id}))},children:"Select all"})]}),n.map(function(e){var t=s.find(function(t){return t===e.id});return(0,z.jsxs)("div",{className:"border-grey-20 py-base flex items-center justify-between gap-6 border-b",children:[(0,z.jsxs)("div",{className:"flex items-center",children:[(0,z.jsx)(r_,{className:"mr-base",children:(0,z.jsx)(rE.A,{})}),(0,z.jsx)("h3",{children:e.name})]}),(0,z.jsx)(so.A,{checked:!!t,onCheckedChange:function(){return p(e.id)}})]},e.id)})]})}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"gap-x-xsmall flex w-full justify-end",children:[(0,z.jsx)(W.A,{variant:"ghost",size:"small",className:"w-[112px]",onClick:function(){return a()},type:"button",children:"Back"}),(0,z.jsx)(W.A,{variant:"primary",className:"nowrap w-[134px]",size:"small",type:"submit",disabled:!d,children:"Save and go back"})]})})]})})};let Oq=function(e){var t,r=e.form,n=e.locationLevels,i=(0,U.useMemo)(function(){return new Map(n.map(function(e){return[e.location_id,e]}))},[n]),a=(0,a7.lK)(),o=(0,J.useAdminStockLocations)(),l=o.stock_locations,s=o.isLoading,c=(0,U.useMemo)(function(){return s||!l?new Map:new Map(l.map(function(e){return[e.id,e]}))},[l,s]),u=r.control,d=r.register,f=r.watch,p=f("manage_inventory"),m=(0,eR.jz)({control:u,name:"location_levels"}),h=m.fields,y=m.append,b=m.remove,v=f("location_levels"),g=new Map(null==v?void 0:v.map(function(e){return[e.location_id,e]})),x=(t=OT(function(e){return Oz(this,function(t){return e.removed.map(function(e){return h.findIndex(function(t){return t.location_id===e})}).forEach(function(e){return b(e)}),e.added.forEach(function(e){var t,r,n,a;y({location_id:e,stocked_quantity:null!==(n=null===(t=i.get(e))||void 0===t?void 0:t.stocked_quantity)&&void 0!==n?n:0,reserved_quantity:null!==(a=null===(r=i.get(e))||void 0===r?void 0:r.reserved_quantity)&&void 0!==a?a:0})}),[2]})}),function(e){return t.apply(this,arguments)});return(0,z.jsxs)(sV,{type:"multiple",defaultValue:["general"],children:[(0,z.jsx)(sV.Item,{title:"General",value:"general",children:(0,z.jsx)("div",{className:"gap-y-xlarge mt-large flex flex-col",children:(0,z.jsx)("div",{className:"flex flex-col gap-y-4",children:(0,z.jsxs)("div",{className:"gap-large grid grid-cols-2",children:[(0,z.jsx)(e1.A,OM({label:"Stock keeping unit (SKU)",placeholder:"SUN-G, JK1234..."},d("sku"))),(0,z.jsx)(e1.A,OM({label:"EAN (Barcode)",placeholder:"123456789102..."},d("ean"))),(0,z.jsx)(e1.A,OM({label:"UPC (Barcode)",placeholder:"023456789104..."},d("upc"))),(0,z.jsx)(e1.A,OM({label:"Barcode",placeholder:"123456789104..."},d("barcode")))]})})})}),(0,z.jsx)(sV.Item,{title:"Inventory",value:"inventory",children:(0,z.jsxs)("div",{className:"gap-y-small mt-large flex flex-col",children:[(0,z.jsxs)("div",{className:"gap-y-2xsmall flex flex-col",children:[(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,z.jsx)("h3",{className:"inter-base-semibold mb-2xsmall",children:"Manage inventory"}),(0,z.jsx)(eR.xI,{control:u,name:"manage_inventory",render:function(e){var t=e.field,r=t.value,n=t.onChange;return(0,z.jsx)(so.A,{checked:r,onCheckedChange:n})}})]}),(0,z.jsx)("p",{className:"inter-base-regular text-grey-50",children:"When checked Medusa will regulate the inventory when orders and returns are made."})]}),p&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("div",{className:"gap-y-2xsmall flex flex-col",children:[(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,z.jsx)("h3",{className:"inter-base-semibold mb-2xsmall",children:"Allow backorders"}),(0,z.jsx)(eR.xI,{control:u,name:"allow_backorder",render:function(e){var t=e.field,r=t.value,n=t.onChange;return(0,z.jsx)(so.A,{checked:r,onCheckedChange:n})}})]}),(0,z.jsx)("p",{className:"inter-base-regular text-grey-50",children:"When checked the product will be available for purchase despite the product being sold out"})]}),(0,z.jsxs)("div",{className:"flex w-full flex-col text-base",children:[(0,z.jsx)("h3",{className:"inter-base-semibold mb-2xsmall",children:"Quantity"}),!s&&l&&(0,z.jsxs)("div",{className:"flex w-full flex-col",children:[(0,z.jsxs)("div",{className:"inter-base-regular text-grey-50 flex justify-between py-3",children:[(0,z.jsx)("div",{className:"",children:"Location"}),(0,z.jsx)("div",{className:"",children:"In Stock"})]}),h.map(function(e,t){var r=c.get(e.location_id),n=g.get(e.location_id);return(0,z.jsxs)("div",{className:"flex items-center py-3",children:[(0,z.jsxs)("div",{className:"inter-base-regular flex items-center",children:[(0,z.jsx)(r_,{className:"mr-base",children:(0,z.jsx)(rE.A,{})}),null==r?void 0:r.name]}),(0,z.jsxs)("div",{className:"ml-auto flex",children:[(0,z.jsxs)("div",{className:"mr-base text-small text-grey-50 flex flex-col",children:[(0,z.jsx)("span",{className:"whitespace-nowrap text-right",children:"".concat(n.reserved_quantity," reserved")}),(0,z.jsx)("span",{className:"whitespace-nowrap text-right",children:"".concat(n.stocked_quantity-n.reserved_quantity," available")})]}),(0,z.jsx)(e1.A,OM({placeholder:"0",type:"number",min:0},d("location_levels.".concat(t,".stocked_quantity"),{valueAsNumber:!0})))]})]},e.id)})]})]}),(0,z.jsx)("div",{className:"flex",children:(0,z.jsx)(W.A,{variant:"secondary",size:"small",type:"button",className:"w-full",onClick:function(){a.push(OF(a.pop,h,l||[],x))},children:"Manage locations"})})]})]})}),(0,z.jsxs)(sV.Item,{title:"Shipping",value:"shipping",children:[(0,z.jsx)("p",{className:"inter-base-regular text-grey-50",children:"Shipping information can be required depending on your shipping provider, and whether or not you are shipping internationally."}),(0,z.jsxs)("div",{className:"mt-large",children:[(0,z.jsx)("h3",{className:"inter-base-semibold mb-2xsmall",children:"Dimensions"}),(0,z.jsx)("p",{className:"inter-base-regular text-grey-50 mb-large",children:"Configure to calculate the most accurate shipping rates."}),(0,z.jsx)(uk,{form:(0,eL.m)(r,"dimensions")})]}),(0,z.jsxs)("div",{className:"mt-xlarge",children:[(0,z.jsx)("h3",{className:"inter-base-semibold mb-2xsmall",children:"Customs"}),(0,z.jsx)("p",{className:"inter-base-regular text-grey-50 mb-large",children:"Configure if you are shipping internationally."}),(0,z.jsx)(uC,{form:(0,eL.m)(r,"customs")})]})]})]})};function OH(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function OU(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}let OV=function(e){var t,r,n=e.form,i=U.useContext(a7.H8),a=(0,(0,rz.u)().isFeatureEnabled)("stockLocationService"),o=(0,J.useAdminStockLocations)({},{enabled:a}),l=o.stock_locations,s=o.refetch;U.useEffect(function(){a&&s()},[a,s]);var c=U.useMemo(function(){return new Map(null==l?void 0:l.map(function(e){return[e.id,e]}))},[l]),u=n.path,d=n.control,f=n.register,p=n.formState.errors,m=n.watch,h=(0,eR.jz)({control:d,name:u("stock_location")}),y=h.fields,b=h.append,v=h.remove,g=m(null==y?void 0:y.map(function(e,t){return u("stock_location.".concat(t,".stocked_quantity"))})),x=U.useMemo(function(){return(0,t6.sum)(g)},[g]),j=(t=function(e){return function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,function(t){return e.removed.map(function(e){return y.findIndex(function(t){return t.location_id===e.id})}).forEach(function(e){return v(e)}),e.added.forEach(function(e){b({location_id:e,stocked_quantity:0})}),[2]})},r=function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function o(e){OH(a,n,i,o,l,"next",e)}function l(e){OH(a,n,i,o,l,"throw",e)}o(void 0)})},function(e){return r.apply(this,arguments)});return(0,z.jsxs)("div",{children:[(0,z.jsx)("p",{className:"inter-base-regular text-grey-50",children:"Configure the inventory and stock for this variant."}),(0,z.jsxs)("div",{className:"gap-y-xlarge pt-large flex flex-col",children:[(0,z.jsxs)("div",{className:"gap-large grid grid-cols-2",children:[(0,z.jsx)(e1.A,OU({label:"Stock keeping unit (SKU)",placeholder:"SUN-G, JK1234..."},f(u("sku")))),!a&&(0,z.jsx)(e1.A,OU({label:"Quantity in stock",type:"number",placeholder:"100...",errors:p},f(u("inventory_quantity"),{valueAsNumber:!0}))),(0,z.jsx)(e1.A,OU({label:"EAN (Barcode)",placeholder:"123456789102..."},f(u("ean")))),(0,z.jsx)(e1.A,OU({label:"UPC (Barcode)",placeholder:"023456789104..."},f(u("upc")))),(0,z.jsx)(e1.A,OU({label:"Barcode",placeholder:"123456789104..."},f(u("barcode"))))]}),(0,z.jsxs)("div",{className:"gap-y-2xsmall flex flex-col",children:[(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,z.jsx)("h3",{className:"inter-base-semibold mb-2xsmall",children:"Manage inventory"}),(0,z.jsx)(eR.xI,{control:d,name:u("manage_inventory"),render:function(e){var t=e.field,r=t.value,n=t.onChange;return(0,z.jsx)(so.A,{checked:r,onCheckedChange:n})}})]}),(0,z.jsx)("p",{className:"inter-base-regular text-grey-50",children:"When checked Medusa will regulate the inventory when orders and returns are made."})]}),(0,z.jsxs)("div",{className:"gap-y-2xsmall flex flex-col",children:[(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,z.jsx)("h3",{className:"inter-base-semibold mb-2xsmall",children:"Allow backorders"}),(0,z.jsx)(eR.xI,{control:d,name:u("allow_backorder"),render:function(e){var t=e.field,r=t.value,n=t.onChange;return(0,z.jsx)(so.A,{checked:r,onCheckedChange:n})}})]}),(0,z.jsx)("p",{className:"inter-base-regular text-grey-50",children:"When checked the product will be available for purchase despite the product being sold out"})]}),(0,z.jsx)(uT,{featureFlag:"inventoryService",children:(0,z.jsx)("div",{className:(0,en.default)({"pointer-events-none opacity-50 transition-opacity duration-100":!n.watch(u("manage_inventory"))}),children:(0,z.jsxs)("div",{className:"flex flex-col",children:[(0,z.jsxs)("div",{className:"gap-y-2xsmall mb-4 flex flex-col",children:[(0,z.jsx)("h3",{className:"inter-base-semibold mb-2xsmall",children:"Quantity"}),(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,z.jsx)("p",{className:"inter-base-regular text-grey-50",children:"Location"}),(0,z.jsx)("p",{className:"inter-base-regular text-grey-50",children:"In Stock"})]})]}),(0,z.jsx)("div",{className:"gap-y-base flex flex-col pb-6",children:y.map(function(e,t){var r;return(0,z.jsxs)("div",{className:"flex items-center",children:[(0,z.jsxs)("div",{className:"inter-base-regular flex items-center",children:[(0,z.jsx)(r_,{className:"mr-base",children:(0,z.jsx)(rE.A,{})}),null===(r=c.get(e.location_id))||void 0===r?void 0:r.name]}),(0,z.jsx)("div",{className:"ml-auto flex",children:(0,z.jsx)(e1.A,OU({placeholder:"0",type:"number"},f(u("stock_location.".concat(t,".stocked_quantity")),{valueAsNumber:!0})))})]},e.id)})}),!!y.length&&(0,z.jsxs)("div",{className:"text-grey-50 mb-6 flex items-center justify-between border-t border-dashed pt-6",children:[(0,z.jsx)("p",{children:"Total inventory at all locations"}),(0,z.jsx)("p",{children:"".concat(x," available")})]}),(0,z.jsx)(W.A,{variant:"ghost",size:"small",className:"w-full border",type:"button",onClick:function(){i.push(OF(i.pop,y,l,j))},children:"Manage locations"})]})})})]})]})},OG=function(e){var t=e.form,r=e.isEdit,n=(0,rz.u)().isFeatureEnabled,i=(0,eR.jz)({control:t.control,name:"options"}).fields,a=!r||!n("inventoryService");return(0,z.jsxs)(sV,{type:"multiple",defaultValue:["general"],children:[(0,z.jsx)(sV.Item,{title:"General",value:"general",required:!0,children:(0,z.jsxs)("div",{children:[(0,z.jsx)(OE,{form:(0,eL.m)(t,"general")}),(0,z.jsxs)("div",{className:"mt-xlarge",children:[(0,z.jsxs)("div",{className:"mb-base gap-x-2xsmall flex items-center",children:[(0,z.jsx)("h3",{className:"inter-base-semibold",children:"Options"}),(0,z.jsx)(e0.A,{type:"info",content:"Options are used to define the color, size, etc. of the variant."})]}),(0,z.jsx)("div",{className:"gap-large pb-2xsmall grid grid-cols-2",children:i.map(function(e,r){var n,i;return(0,z.jsx)(e1.A,(n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({required:!0,label:e.title},t.register("options.".concat(r,".value"),{required:"Option value for ".concat(e.title," is required")})),i=i={errors:t.formState.errors},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))}),n),e.id)})})]})]})}),a&&(0,z.jsx)(sV.Item,{title:"Stock & Inventory",value:"stock",children:(0,z.jsx)(OV,{form:(0,eL.m)(t,"stock")})}),(0,z.jsxs)(sV.Item,{title:"Shipping",value:"shipping",children:[(0,z.jsx)("p",{className:"inter-base-regular text-grey-50",children:"Shipping information can be required depending on your shipping provider, and whether or not you are shipping internationally."}),(0,z.jsxs)("div",{className:"mt-large",children:[(0,z.jsx)("h3",{className:"inter-base-semibold mb-2xsmall",children:"Dimensions"}),(0,z.jsx)("p",{className:"inter-base-regular text-grey-50 mb-large",children:"Configure to calculate the most accurate shipping rates."}),(0,z.jsx)(uk,{form:(0,eL.m)(t,"dimensions")})]}),a&&(0,z.jsxs)("div",{className:"mt-xlarge",children:[(0,z.jsx)("h3",{className:"inter-base-semibold mb-2xsmall",children:"Customs"}),(0,z.jsx)("p",{className:"inter-base-regular text-grey-50 mb-large",children:"Configure if you are shipping internationally."}),(0,z.jsx)(uC,{form:(0,eL.m)(t,"customs")})]})]}),(0,z.jsxs)(sV.Item,{title:"Metadata",value:"metadata",children:[(0,z.jsx)("p",{className:"inter-base-regular text-grey-50 mb-base",children:"Metadata can be used to store additional information about the variant."}),(0,z.jsx)(e$,{form:(0,eL.m)(t,"metadata")})]})]})};function OW(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function OY(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function o(e){OW(a,n,i,o,l,"next",e)}function l(e){OW(a,n,i,o,l,"throw",e)}o(void 0)})}}function O$(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function OQ(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function OK(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}var OZ=function(e){return{general:{title:null,material:null},stock:{sku:null,ean:null,upc:null,barcode:null,inventory_quantity:null,manage_inventory:!1,allow_backorder:!1,stock_location:[]},options:e.options.map(function(e){return{title:e.title,id:e.id,value:""}}),prices:{prices:[]},dimensions:{weight:null,width:null,height:null,length:null},customs:{mid_code:null,hs_code:null,origin_country:null},metadata:{entries:[],deleted:[]}}},OJ=function(e){var t=e.general,r=e.stock,n=e.options,i=e.prices,a=e.dimensions,o=e.customs,l=i.prices.filter(function(e){return"number"==typeof e.amount}).map(function(e){return{amount:e.amount,currency_code:e.region_id?void 0:e.currency_code,region_id:e.region_id}});return OQ(O$(OQ(O$({},t,o,r),{inventory_quantity:r.inventory_quantity||0}),a,o),{origin_country:o.origin_country?o.origin_country.value:null,prices:l,metadata:eZ(e.metadata),title:e.general.title||"".concat(null==n?void 0:n.map(function(e){return e.value}).join(" / ")),options:n.map(function(e){return{option_id:e.id,value:e.value}})})};let OX=function(e){var t,r=e.open,n=e.onClose,i=e.product,a=(0,a7.lK)(),o=(0,ei.Bd)().t,l=(0,J.useMedusa)().client,s=(0,eR.mN)({defaultValues:OZ(i)}),c=uj(i.id),u=c.onAddVariant,d=c.addingVariant,f=s.handleSubmit,p=s.reset;(0,U.useEffect)(function(){p(OZ(i))},[i,p]);var m=function(){p(OZ(i)),n()},h=(t=OY(function(e,t){var r,n,a;return OK(this,function(o){switch(o.label){case 0:if(r=e.variants,n=new Map(i.variants.map(function(e){return[e.id,!0]})),!(a=r.find(function(e){return!n.get(e.id)})))return[2];return[4,l.admin.variants.getInventory(a.id)];case 1:var s;return[4,Promise.all(o.sent().variant.inventory.map((s=OY(function(e){return OK(this,function(r){var n;return[2,Promise.all(t.map((n=OY(function(t){return OK(this,function(r){return l.admin.inventoryItems.createLocationLevel(e.id,{location_id:t.location_id,stocked_quantity:t.stocked_quantity}),[2]})}),function(e){return n.apply(this,arguments)})))]})}),function(e){return s.apply(this,arguments)})).flat())];case 2:return o.sent(),[2]}})}),function(e,r){return t.apply(this,arguments)}),y=f(function(e){var t=e.stock.stock_location;delete e.stock.stock_location,u(OJ(e),function(e){(null==t?void 0:t.length)?h(e,t).then(function(){m()}):m()})});return(0,z.jsx)(a7.Ay,{context:a,open:r,handleClose:m,children:(0,z.jsxs)(eN.A.Body,{children:[(0,z.jsx)(eN.A.Header,{handleClose:m,children:(0,z.jsx)("h1",{className:"inter-xlarge-semibold",children:o("product-variants-section-add-variant","Add Variant")})}),(0,z.jsxs)("form",{onSubmit:y,children:[(0,z.jsx)(eN.A.Content,{children:(0,z.jsx)(OG,{isEdit:!1,form:s})}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"gap-x-xsmall flex w-full items-center justify-end",children:[(0,z.jsx)(W.A,{variant:"secondary",size:"small",type:"button",onClick:m,children:o("product-variants-section-cancel","Cancel")}),(0,z.jsx)(W.A,{variant:"primary",size:"small",type:"submit",loading:d,children:o("product-variants-section-save-and-close","Save and close")})]})})]})]})})},O0=function(e){var t=e.form,r=e.isLoading,n=e.locationLevels;return r?null:(0,z.jsx)(z.Fragment,{children:(0,z.jsx)(Oq,{locationLevels:n,form:t})})};var O1=r(45381);function O2(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function O3(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function o(e){O2(a,n,i,o,l,"next",e)}function l(e){O2(a,n,i,o,l,"throw",e)}o(void 0)})}}function O5(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function O6(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}var O4=function(e){var t,r=e.variantInventory,n=e.onSubmit,i=e.isLoadingInventory,a=e.handleClose,o=e.updatingVariant,l=e.variant,s=(0,ei.Bd)().t,c=(0,eR.mN)({defaultValues:O8(r,l)}),u=c.formState.isDirty,d=c.handleSubmit,f=c.reset,p=(null===(t=r.inventory[0])||void 0===t?void 0:t.location_levels)||[],m=d(function(e){n(e)});return(0,z.jsxs)("form",{onSubmit:m,noValidate:!0,children:[(0,z.jsx)(eN.A.Content,{children:(0,z.jsx)(O0,{form:c,locationLevels:p,isLoading:i})}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"gap-x-xsmall flex w-full items-center justify-end",children:[(0,z.jsx)(W.A,{variant:"secondary",size:"small",type:"button",onClick:function(){f(O8(r)),a()},children:s("product-variants-section-cancel","Cancel")}),(0,z.jsx)(W.A,{variant:"primary",size:"small",type:"submit",disabled:!u,loading:o,children:s("product-variants-section-save-and-close","Save and close")})]})})]})},O8=function(e,t){var r,n=null==e?void 0:e.inventory[0];if(!n)return{sku:null,ean:(null==t?void 0:t.ean)||null,barcode:(null==t?void 0:t.barcode)||null,upc:(null==t?void 0:t.upc)||null,inventory_quantity:null,manage_inventory:!1,allow_backorder:null!==(r=null==t?void 0:t.allow_backorder)&&void 0!==r&&r,location_levels:null,dimensions:{height:null,length:null,width:null,weight:null},customs:{origin_country:null,mid_code:null,hs_code:null}};var i=null;if(n.origin_country){var a=uO.find(function(e){return e.alpha2===n.origin_country||e.alpha3===n.origin_country});a&&(i={label:null==a?void 0:a.name,value:null==a?void 0:a.alpha2})}return{sku:n.sku,ean:(null==t?void 0:t.ean)||null,barcode:(null==t?void 0:t.barcode)||null,upc:(null==t?void 0:t.upc)||null,inventory_quantity:n.inventory_quantity,manage_inventory:!!n,allow_backorder:!!(null==t?void 0:t.allow_backorder),location_levels:n.location_levels,dimensions:{height:n.height,length:n.length,width:n.width,weight:n.weight},customs:{origin_country:i,mid_code:n.mid_code,hs_code:n.hs_code}}};let O7=function(e){var t,r=e.onClose,n=e.product,i=e.variant,a=(0,ei.Bd)().t,o=(0,J.useMedusa)().client,l=(0,U.useContext)(a7.H8),s=(0,J.useAdminVariantsInventory)(i.id),c=s.variant,u=s.isLoading,d=s.refetch,f=function(){r()},p=uj(n.id),m=p.onUpdateVariant,h=p.updatingVariant,y=function(e){var t,r,n=e.dimensions||{},i=e.customs||{},a=null===(r=e.customs)||void 0===r?void 0:null===(t=r.origin_country)||void 0===t?void 0:t.value;return delete e.dimensions,delete e.customs,delete e.ean,delete e.barcode,delete e.upc,delete e.allow_backorder,az(O5({},n,i,e,a&&{origin_country:a}))},b=(t=O3(function(e){var t,r,a,l,s,u,p,h,b,v,g,x,j,w,O,S,P,C;return O6(this,function(A){var N,k,_,E;switch(A.label){case 0:if(r=e.location_levels||[],a=e.manage_inventory,s=null==(l=null==c?void 0:null===(t=c.inventory)||void 0===t?void 0:t[0])?void 0:l.id,delete e.manage_inventory,delete e.location_levels,u=s,p=e.ean,h=e.barcode,b=e.upc,v=e.allow_backorder,g=y(e),x=!1,!l)return[3,7];if(O=a&&null!==(w=null==l?void 0:null===(j=l.location_levels)||void 0===j?void 0:j.filter(function(e){return!r.find(function(t){return t.location_id===e.location_id})}))&&void 0!==w?w:[],!u)return[3,2];return[4,Promise.all(O.map((N=O3(function(e){return O6(this,function(t){switch(t.label){case 0:return[4,o.admin.inventoryItems.deleteLocationLevel(u,e.location_id)];case 1:return t.sent(),[2]}})}),function(e){return N.apply(this,arguments)})))];case 1:A.sent(),O.length&&(x=!0),A.label=2;case 2:if(a)return[3,4];return[4,o.admin.inventoryItems.delete(s)];case 3:return A.sent(),u=void 0,x=!0,[3,6];case 4:return[4,o.admin.inventoryItems.update(s,g)];case 5:A.sent(),A.label=6;case 6:return[3,10];case 7:if(!a)return[3,10];return[4,o.admin.products.updateVariant(n.id,i.id,{manage_inventory:!0})];case 8:return A.sent(),[4,o.admin.inventoryItems.create(O5({variant_id:i.id},g))];case 9:u=A.sent().inventory_item.id,A.label=10;case 10:if(!u)return[3,12];return[4,Promise.all(r.map((k=O3(function(e){return O6(this,function(t){switch(t.label){case 0:if(!e.location_id)return[2];if(!e.id)return[3,2];return[4,o.admin.inventoryItems.updateLocationLevel(u,e.location_id,{stocked_quantity:e.stocked_quantity})];case 1:return t.sent(),[3,4];case 2:return[4,o.admin.inventoryItems.createLocationLevel(u,{location_id:e.location_id,stocked_quantity:e.stocked_quantity})];case 3:t.sent(),t.label=4;case 4:return[2]}})}),function(e){return k.apply(this,arguments)})))];case 11:A.sent(),r.length&&(x=!0),A.label=12;case 12:return S=e.dimensions,P=e.customs,C=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["dimensions","customs"]),m(i.id,O5({},aF((_=O5({},S,P,C),E=E={ean:p,barcode:h,upc:b,allow_backorder:v},Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(E)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(E)).forEach(function(e){Object.defineProperty(_,e,Object.getOwnPropertyDescriptor(E,e))}),_))),function(){d(),x&&O1.q.invalidateQueries(J.adminInventoryItemsKeys.lists()),f()}),[2]}})}),function(e){return t.apply(this,arguments)});return(0,z.jsxs)(a7.Ay,{context:l,handleClose:f,children:[(0,z.jsx)(eN.A.Header,{handleClose:f,children:(0,z.jsx)("h1",{className:"inter-xlarge-semibold",children:a("product-variants-section-edit-stock-inventory","Edit stock & inventory")})}),!u&&(0,z.jsx)(O4,{variantInventory:c,onSubmit:b,variant:i,isLoadingInventory:u,handleClose:f,updatingVariant:h})]})};var O9=U.createContext(null),Se=function(){var e=(0,U.useContext)(O9);if(null===e)throw Error("useEditVariantsModal must be used within a EditVariantsModalProvicer");return e};function St(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var Sr=function(e){var t=e.variant,r=e.product,n=(0,ei.Bd)().t,i=Se().onClose,a=(0,eR.mN)({defaultValues:Ss(t,r)}),o=a.reset,l=(0,U.useContext)(a7.H8),s=l.pop,c=l.reset,u=uj(r.id),d=u.updatingVariant,f=u.onUpdateVariant,p=function(){o(Ss(t,r)),s()},m=function(){o(Ss(t,r)),c(),i()};(0,U.useEffect)(function(){o(Ss(t,r))},[t,r,o]);var h=a.handleSubmit(function(e){f(t.id,Sn(e),p)}),y=a.handleSubmit(function(e){f(t.id,Sn(e),m)});return(0,z.jsx)(z.Fragment,{children:(0,z.jsxs)("form",{noValidate:!0,children:[(0,z.jsx)(eN.A.Content,{children:(0,z.jsx)(OG,{isEdit:!0,form:a})}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"gap-x-xsmall flex w-full items-center justify-end",children:[(0,z.jsx)(W.A,{variant:"secondary",size:"small",type:"button",children:n("edit-variants-modal-cancel","Cancel")}),(0,z.jsx)(W.A,{variant:"primary",size:"small",type:"button",disabled:d||!a.formState.isDirty,loading:d,onClick:h,children:n("edit-variants-modal-save-and-go-back","Save and go back")}),(0,z.jsx)(W.A,{variant:"primary",size:"small",type:"button",disabled:d||!a.formState.isDirty,loading:d,onClick:y,children:n("edit-variants-modal-save-and-close","Save and close")})]})})]})})},Sn=function(e){var t,r,n=e.customs,i=e.dimensions,a=e.prices,o=e.options,l=e.general,s=e.stock,c=null==a?void 0:a.prices.filter(function(e){return"number"==typeof e.amount}).map(function(e){return{amount:e.amount,currency_code:e.region_id?void 0:e.currency_code,region_id:e.region_id,id:e.id||void 0}});return t=St({},l,n,s,i,n),r=r={metadata:eZ(e.metadata),origin_country:(null==n?void 0:n.origin_country)?n.origin_country.value:null,prices:c,options:null==o?void 0:o.map(function(e){return{option_id:e.id,value:e.value}})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t},Si=function(e){var t=(0,ei.Bd)().t,r=U.useContext(a7.H8).pop;return(0,U.useMemo)(function(){return{title:t("edit-variants-modal-edit-variant","Edit Variant"),subtitle:e.variant.title,onBack:r,view:(0,z.jsx)(Sr,St({},e))}},[e])};function Sa(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function So(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function o(e){Sa(a,n,i,o,l,"next",e)}function l(e){Sa(a,n,i,o,l,"throw",e)}o(void 0)})}}function Sl(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}var Ss=function(e,t){var r=t.options.map(function(t){var r;return{title:t.title,id:t.id,value:(null===(r=e.options.find(function(e){return e.option_id===t.id}))||void 0===r?void 0:r.value)||""}}),n=uO.find(function(t){var r;return t.name.toLowerCase()===(null===(r=e.origin_country)||void 0===r?void 0:r.toLowerCase())}),i=n?{label:n.name,value:n.alpha2}:null;return{general:{title:e.title,material:e.material},stock:{sku:e.sku,ean:e.ean,inventory_quantity:e.inventory_quantity,manage_inventory:e.manage_inventory,allow_backorder:e.allow_backorder,barcode:e.barcode,upc:e.upc},customs:{hs_code:e.hs_code,mid_code:e.mid_code,origin_country:i},dimensions:{weight:e.weight,width:e.width,height:e.height,length:e.length},prices:{prices:e.prices.filter(function(e){return!e.price_list_id}).map(function(e){return{id:e.id,amount:e.amount,currency_code:e.currency_code,region_id:e.region_id}})},options:r,metadata:eJ(e.metadata)}};let Sc=function(e){var t,r=e.onClose,n=e.product,i=e.variant,a=e.isDuplicate,o=void 0!==a&&a,l=(0,ei.Bd)().t,s=(0,eR.mN)({defaultValues:Ss(i,n)}),c=s.formState.isDirty,u=s.handleSubmit,d=s.reset,f=function(){d(Ss(i,n)),r()},p=uj(n.id),m=p.onUpdateVariant,h=p.onAddVariant,y=p.addingVariant,b=p.updatingVariant,v=(0,J.useMedusa)().client,g=(t=So(function(e,t){var r,i,a;return Sl(this,function(o){switch(o.label){case 0:if(r=e.variants,i=new Map(n.variants.map(function(e){return[e.id,!0]})),!(a=r.find(function(e){return!i.get(e.id)})))return[2];return[4,v.admin.variants.getInventory(a.id)];case 1:var l;return[4,Promise.all(o.sent().variant.inventory.map((l=So(function(e){return Sl(this,function(r){var n;return[2,Promise.all(t.map((n=So(function(t){return Sl(this,function(r){return v.admin.inventoryItems.createLocationLevel(e.id,{location_id:t.location_id,stocked_quantity:t.stocked_quantity}),[2]})}),function(e){return n.apply(this,arguments)})))]})}),function(e){return l.apply(this,arguments)})).flat())];case 2:return o.sent(),[2]}})}),function(e,r){return t.apply(this,arguments)}),x=u(function(e){var t=e.stock.stock_location;delete e.stock.stock_location,o?h(OJ(e),function(e){void 0!==t?g(e,t).then(function(){f()}):f()}):m(i.id,Sn(e),f)}),j=(0,U.useContext)(a7.H8);return(0,z.jsxs)(a7.Ay,{context:j,handleClose:f,children:[(0,z.jsx)(eN.A.Header,{handleClose:f,children:(0,z.jsxs)("h1",{className:"inter-xlarge-semibold",children:[l("product-variants-section-edit-variant","Edit Variant"),i.title&&(0,z.jsxs)("span",{className:"inter-xlarge-regular text-grey-50",children:[" ","(",i.title,")"]})]})}),(0,z.jsxs)("form",{onSubmit:x,noValidate:!0,children:[(0,z.jsx)(eN.A.Content,{children:(0,z.jsx)(OG,{isEdit:!0,form:s})}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"gap-x-xsmall flex w-full items-center justify-end",children:[(0,z.jsx)(W.A,{variant:"secondary",size:"small",type:"button",onClick:f,children:l("product-variants-section-cancel","Cancel")}),(0,z.jsx)(W.A,{variant:"primary",size:"small",type:"submit",disabled:!c&&!o,loading:y||b,children:l("product-variants-section-save-and-close","Save and close")})]})})]})]})};var Su=r(5079),Sd=r(58410);let Sf=function(e){var t,r,n=e.size,i=void 0===n?"24px":n,a=e.color,o=void 0===a?"currentColor":a,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["size","color"]);return(0,z.jsxs)("svg",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({width:i,height:i,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l),r=r={children:[(0,z.jsx)("path",{d:"M7.49935 10.8337C7.95959 10.8337 8.33268 10.4606 8.33268 10.0003C8.33268 9.54009 7.95959 9.16699 7.49935 9.16699C7.03911 9.16699 6.66602 9.54009 6.66602 10.0003C6.66602 10.4606 7.03911 10.8337 7.49935 10.8337Z",stroke:o,strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M7.49935 4.99967C7.95959 4.99967 8.33268 4.62658 8.33268 4.16634C8.33268 3.7061 7.95959 3.33301 7.49935 3.33301C7.03911 3.33301 6.66602 3.7061 6.66602 4.16634C6.66602 4.62658 7.03911 4.99967 7.49935 4.99967Z",stroke:o,strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M7.49935 16.6667C7.95959 16.6667 8.33268 16.2936 8.33268 15.8333C8.33268 15.3731 7.95959 15 7.49935 15C7.03911 15 6.66602 15.3731 6.66602 15.8333C6.66602 16.2936 7.03911 16.6667 7.49935 16.6667Z",stroke:o,strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M12.4993 10.8337C12.9596 10.8337 13.3327 10.4606 13.3327 10.0003C13.3327 9.54009 12.9596 9.16699 12.4993 9.16699C12.0391 9.16699 11.666 9.54009 11.666 10.0003C11.666 10.4606 12.0391 10.8337 12.4993 10.8337Z",stroke:o,strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M12.4993 4.99967C12.9596 4.99967 13.3327 4.62658 13.3327 4.16634C13.3327 3.7061 12.9596 3.33301 12.4993 3.33301C12.0391 3.33301 11.666 3.7061 11.666 4.16634C11.666 4.62658 12.0391 4.99967 12.4993 4.99967Z",stroke:o,strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M12.4993 16.6667C12.9596 16.6667 13.3327 16.2936 13.3327 15.8333C13.3327 15.3731 12.9596 15 12.4993 15C12.0391 15 11.666 15.3731 11.666 15.8333C11.666 16.2936 12.0391 16.6667 12.4993 16.6667Z",stroke:o,strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))};function Sp(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Sm(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Sp(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Sp(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Sh={CARD:"card"},Sy=function(e){var t,r,n=e.id,i=e.index,a=e.ean,o=e.sku,l=e.title,s=e.moveCard,c=e.product,u=(0,ei.Bd)().t,d=(0,eR.xW)(),f=d.register,p=d.formState.errors,m=Si({product:c,variant:c.variants.find(function(e){return e.id===n})}),h=(0,U.useContext)(a7.H8).push,y=(0,U.useMemo)(function(){return[{label:u("edit-variants-modal-edit-variant","Edit Variant"),icon:(0,z.jsx)(ec,{size:20,className:"text-grey-50"}),onClick:function(){return h(m)}}]},[m,h]),b=(0,U.useRef)(null),v=Sm((0,Su.H)({accept:Sh.CARD,collect:function(e){return{handlerId:e.getHandlerId()}},hover:function(e,t){if(b.current){var r,n=e.index;if(n!==i){var a=null===(r=b.current)||void 0===r?void 0:r.getBoundingClientRect(),o=(a.bottom-a.top)/2,l=t.getClientOffset().y-a.top;n<i&&l<o||n>i&&l>o||(s(n,i),e.index=i)}}}}),2),g=v[0].handlerId,x=v[1],j=Sm((0,Sd.i)({type:Sh.CARD,item:function(){return{id:n,index:i}},collect:function(e){return{isDragging:e.isDragging()}}}),3),w=j[0].isDragging,O=j[1],S=j[2];return O(x(b)),(0,z.jsxs)("div",{ref:S,"data-handler-id":g,className:(0,en.default)("rounded-rounded hover:bg-grey-5 focus-within:bg-grey-5 py-xsmall pl-xsmall pr-base grid h-16 translate-y-0 translate-x-0 grid-cols-[32px_1fr_1fr_48px] transition-all",{"bg-grey-5 opacity-50":w}),children:[(0,z.jsx)("div",{className:"text-grey-40 flex cursor-move items-center justify-center",ref:b,children:(0,z.jsx)(Sf,{size:20})}),(0,z.jsxs)("div",{className:"ml-base flex flex-col justify-center text-left",children:[(0,z.jsxs)("p",{className:"inter-base-semibold",children:[l,o&&(0,z.jsxs)("span",{className:"text-grey-50 inter-base-regular",children:["(",o,")"]})]}),a&&(0,z.jsx)("span",{className:"inter-base-regular text-grey-50",children:a})]}),(0,z.jsx)("div",{className:"flex items-center justify-end text-right",children:(0,z.jsx)(e1.A,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},f("variants.".concat(i,".inventory_quantity"),{min:n8.A.nonNegativeNumberRule("Inventory"),valueAsNumber:!0})),r=r={type:"number",placeholder:"100...",className:"max-w-[200px]",errors:p},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}),(0,z.jsx)("div",{className:"ml-xlarge pr-base flex items-center justify-center",children:(0,z.jsx)(em,{forceDropdown:!0,actions:y,customTrigger:(0,z.jsx)(W.A,{variant:"ghost",className:"w-xlarge h-xlarge text-grey-50 flex items-center justify-center p-0",children:(0,z.jsx)(ef,{size:20})})})})]})},Sb=function(e){return{variants:(e.variants||[]).sort(function(e,t){return e.variant_rank-t.variant_rank}).map(function(e,t){return{id:e.id,title:e.title,ean:e.ean,sku:e.sku,variant_rank:e.variant_rank||t+1,inventory_quantity:e.inventory_quantity}})}};let Sv=function(e){var t,r,n=e.open,i=e.onClose,a=e.product,o=(0,U.useContext)(a7.H8),l=uj(a.id),s=l.onUpdate,c=l.updating,u=(0,ei.Bd)().t,d=(0,eR.mN)({defaultValues:Sb(a)}),f=d.control,p=d.handleSubmit,m=d.reset,h=d.formState.isDirty,y=(0,eR.jz)({control:f,name:"variants",keyName:"fieldId"}),b=y.fields,v=y.move,g=(0,U.useCallback)(function(e,t){v(e,t)},[]),x=(0,U.useCallback)(function(e,t){return(0,z.jsx)(Sy,{index:t,id:e.id,title:e.title,ean:e.ean,sku:e.sku,inventory_quantity:e.inventory_quantity,moveCard:g,product:a},e.fieldId)},[g,a]),j=(0,U.useCallback)(function(){m(Sb(a))},[a,m]),w=function(){j(),o.reset(),i()};(0,U.useEffect)(function(){j()},[a,j]);var O=p(function(e){s({variants:e.variants.map(function(e){return{id:e.id,inventory_quantity:e.inventory_quantity}})},function(){w()},u("edit-variants-modal-update-success","Variants were successfully updated"))});return(0,z.jsx)(O9.Provider,{value:{onClose:i},children:(0,z.jsx)(a7.Ay,{handleClose:w,open:n,context:o,children:(0,z.jsxs)(eN.A.Body,{children:[(0,z.jsx)(eN.A.Header,{handleClose:w,children:(0,z.jsx)("h1",{className:"inter-xlarge-semibold",children:u("edit-variants-modal-edit-variants","Edit Variants")})}),(0,z.jsx)(eR.Op,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},d),r=r={children:(0,z.jsxs)("form",{onSubmit:O,children:[(0,z.jsxs)(eN.A.Content,{children:[(0,z.jsxs)("h2",{className:"inter-base-semibold mb-small",children:[u("edit-variants-modal-product-variants","Product variants")," ",(0,z.jsxs)("span",{className:"inter-base-regular text-grey-50",children:["(",a.variants.length,")"]})]}),(0,z.jsxs)("div",{className:"pr-base inter-small-semibold text-grey-50 mb-small grid grid-cols-[1fr_1fr_48px]",children:[(0,z.jsx)("p",{className:"col-start-1 col-end-1 text-left",children:u("edit-variants-modal-variant","Variant")}),(0,z.jsx)("p",{className:"col-start-2 col-end-2 text-right",children:u("edit-variants-modal-inventory","Inventory")})]}),(0,z.jsx)("div",{children:b.map(function(e,t){return x(e,t)})})]}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"gap-x-xsmall flex w-full items-center justify-end",children:[(0,z.jsx)(W.A,{variant:"secondary",size:"small",type:"button",onClick:w,children:u("edit-variants-modal-cancel","Cancel")}),(0,z.jsx)(W.A,{variant:"primary",size:"small",type:"submit",loading:c,disabled:c||!h,children:u("edit-variants-modal-save-and-close","Save and close")})]})})]})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))]})})})};var Sg=r(64384),Sx=function(e){return{options:e.options.map(function(e){return{title:e.title,id:e.id}})}};let Sj=function(e){var t=e.product,r=e.open,n=e.onClose,i=(0,J.useAdminUpdateProductOption)(t.id),a=i.mutate,o=i.isLoading,l=(0,J.useAdminCreateProductOption)(t.id),s=l.mutate,c=l.isLoading,u=(0,J.useAdminDeleteProductOption)(t.id),d=u.mutate,f=u.isLoading,p=(0,ei.Bd)().t,m=OA().refetch,h=(0,eR.mN)({defaultValues:Sx(t)}),y=h.control,b=h.register,v=h.reset,g=h.handleSubmit,x=h.formState,j=x.isDirty,w=x.errors,O=(0,eR.jz)({name:"options",control:y,shouldUnregister:!0}),S=O.fields,P=O.remove,C=O.append,A=(0,eC.A)();(0,U.useEffect)(function(){v(Sx(t))},[t]);var N=function(){v(Sx(t)),n()},k=(0,U.useMemo)(function(){return o||c||f},[o,c,f]),_=g(function(e){var r=[],n=[],i=[],o=t.options.filter(function(t){return void 0===e.options.find(function(e){return e.id===t.id})});if(e.options.forEach(function(e){e.id?i.push(e):n.push(e)}),n.forEach(function(e){s({title:e.title},{onError:function(){r.push("create ".concat(e.title))},onSuccess:function(){m()}})}),i.forEach(function(e){a({option_id:e.id,title:e.title},{onError:function(){r.push("update ".concat(e.title))},onSuccess:function(){m()}})}),o.forEach(function(e){d(e.id,{onError:function(){r.push("delete ".concat(e.title))},onSuccess:function(){m()}})}),r.length===n.length+i.length+o.length){A(p("product-variants-section-error","Error"),p("product-variants-section-failed-to-update-product-options","Failed to update product options"),"error");return}r.length>0&&A("Warning","Failed to; "+r.join(", ")+".","warning"),m(),A(p("product-variants-section-success","Success"),p("product-variants-section-successfully-updated-product-options","Successfully updated product options"),"success"),N()});return(0,z.jsx)(eN.A,{open:r,handleClose:N,children:(0,z.jsxs)(eN.A.Body,{children:[(0,z.jsx)(eN.A.Header,{handleClose:N,children:(0,z.jsx)("h1",{className:"inter-xlarge-semibold",children:p("product-variants-section-edit-options","Edit Options")})}),(0,z.jsxs)("form",{onSubmit:_,children:[(0,z.jsxs)(eN.A.Content,{children:[(0,z.jsx)("h2",{className:"inter-large-semibold mb-base",children:p("product-variants-section-product-options","Product options")}),(0,z.jsxs)("div",{className:"gap-y-small flex flex-col",children:[(0,z.jsx)("p",{className:"inter-small-semibold text-grey-50",children:p("product-variants-section-option-title","Option title")}),(0,z.jsx)("div",{className:"gap-y-xsmall flex flex-col",children:S.map(function(e,t){var r,n;return(0,z.jsxs)("div",{className:"gap-x-xsmall grid grid-cols-[1fr,40px]",children:[(0,z.jsx)(e1.A,(r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({placeholder:"Color"},b("options.".concat(t,".title"),{required:p("product-variants-section-option-title-is-required","Option title is required"),minLength:n8.A.minOneCharRule("Option title"),pattern:n8.A.whiteSpaceRule("Option title")})),n=n={errors:w},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))}),r),e.id),(0,z.jsx)(W.A,{variant:"secondary",className:"max-h-[40px] px-2.5 py-2.5",type:"button",onClick:function(){return P(t)},children:(0,z.jsx)(eu,{className:"text-grey-40",size:"20"})})]},e.id)})})]}),(0,z.jsxs)(W.A,{variant:"secondary",className:"mt-base h-10 w-full",type:"button",onClick:function(){C({title:"",id:null})},children:[(0,z.jsx)(n_.A,{size:"20"})," ",p("product-variants-section-add-an-option","Add an option")]})]}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"gap-xsmall flex w-full items-center justify-end",children:[(0,z.jsx)(W.A,{variant:"secondary",size:"small",type:"button",onClick:N,children:p("product-variants-section-cancel","Cancel")}),(0,z.jsx)(W.A,{variant:"primary",size:"small",type:"submit",disabled:!j,loading:k,children:p("product-variants-section-save-and-close","Save and close")})]})})]})]})})};function Sw(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function SO(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function SS(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function SP(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function SC(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function SA(e){return function(e){if(Array.isArray(e))return Sw(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||SN(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function SN(e,t){if(e){if("string"==typeof e)return Sw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Sw(e,t)}}var Sk=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,ei.Bd)().t;return(0,U.useMemo)(function(){var r=[];return e||r.push({Header:function(){return(0,z.jsx)("div",{className:"text-right",children:(0,z.jsx)("span",{children:t("product-variants-section-inventory","Inventory")})})},id:"inventory",accessor:"inventory_quantity",maxWidth:56,Cell:function(e){var t=e.cell;return(0,z.jsx)("div",{className:"text-right",children:(0,z.jsx)("span",{children:t.value})})}}),[{Header:t("product-variants-section-title","Title"),id:"title",accessor:"title"},{Header:t("product-variants-section-sku","SKU"),id:"sku",accessor:"sku",maxWidth:264,Cell:function(e){var t=e.cell;return t.value?t.value:(0,z.jsx)("span",{className:"text-grey-50",children:"-"})}},{Header:t("product-variants-section-ean","EAN"),id:"ean",accessor:"ean",maxWidth:264,Cell:function(e){var t=e.cell;return t.value?t.value:(0,z.jsx)("span",{className:"text-grey-50",children:"-"})}}].concat(SA(r))},[e])};let S_=function(e){var t,r=e.variants,n=e.actions,i=(0,ei.Bd)().t,a=(0,rz.u)().isFeatureEnabled,o=a("inventoryService"),l=Sk(o),s=function(e){if(Array.isArray(e))return e}(t=(0,U.useState)(null))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(t,2)||SN(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),c=s[0],u=s[1],d=(0,e4.useTable)({columns:l,data:r,defaultColumn:{width:"auto"}}),f=d.getTableProps,p=d.getTableBodyProps,m=d.headerGroups,h=d.rows,y=d.prepareRow,b=n.deleteVariant,v=n.updateVariant,g=n.duplicateVariant,x=n.updateVariantInventory,j=function(e){var t=[];return o&&t.push({label:i("product-variants-section-manage-inventory","Manage inventory"),icon:(0,z.jsx)(rE.A,{size:"20"}),onClick:function(){return x(e)}}),[{label:i("product-variants-section-edit-variant","Edit Variant"),icon:(0,z.jsx)(ec,{size:"20"}),onClick:function(){return v(e)}}].concat(SA(t),[{label:i("product-variants-section-duplicate-variant","Duplicate Variant"),onClick:function(){return g(SP(SS({},e),{title:e.title+" Copy"}))},icon:(0,z.jsx)(eB,{size:"20"})},{label:i("product-variants-section-delete-variant-label","Delete Variant"),onClick:function(){return u(e)},icon:(0,z.jsx)(eu,{size:"20"}),variant:"danger"}])};return(0,z.jsxs)(td,SP(SS({},f()),{className:"table-fixed",children:[(0,z.jsx)(td.Head,{children:null==m?void 0:m.map(function(e){var t=e.getHeaderGroupProps(),r=t.key,n=SC(t,["key"]);return(0,z.jsx)(td.HeadRow,SP(SS({},n),{children:e.headers.map(function(e){var t=e.getHeaderProps(),r=t.key,n=SC(t,["key"]);return(0,z.jsx)(td.HeadCell,SP(SS({},n),{children:e.render("Header")}),r)})}),r)})}),(0,z.jsx)(td.Body,SP(SS({},p()),{children:h.map(function(e){y(e);var t,r=j(e.original),n=e.getRowProps(),o=n.key,l=SC(n,["key"]);return(0,z.jsxs)(td.Row,SP(SS({color:"inherit"},l),{children:[e.cells.map(function(e){var t=e.getCellProps(),r=t.key,n=SC(t,["key"]);return(0,z.jsx)(td.Cell,SP(SS({},n),{children:e.render("Cell")}),r)}),(0,z.jsx)(td.Cell,{children:(0,z.jsxs)("div",{className:"float-right",children:[(0,z.jsx)(em,{forceDropdown:!0,actions:r}),c&&(0,z.jsx)(e_,{onDelete:(t=function(){return function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,function(e){return[2,b(c.id)]})},function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function o(e){SO(a,n,i,o,l,"next",e)}function l(e){SO(a,n,i,o,l,"throw",e)}o(void 0)})}),handleClose:function(){return u(null)},confirmText:i("product-variants-section-yes-delete","Yes, delete"),heading:i("product-variants-section-delete-variant-heading","Delete variant"),text:"".concat(i("product-variants-section-confirm-delete","Are you sure you want to delete this variant? ")).concat(a("inventoryService")?i("product-variants-section-note-deleting-the-variant-will-also-remove-inventory-items-and-levels"," Note: Deleting the variant will also remove inventory items and levels"):""),successText:!1})]})})]}),o)})}))]}))};function SE(e){return e.filter(function(e){return!e.price_list_id&&!e.region_id&&!e.min_quantity&&!e.max_quantity})}function SI(e){return e.filter(function(e){return!(e.price_list_id||e.min_quantity||e.max_quantity)})}var SD=r(79674),ST=r.n(SD),SM=r(44383),SR=r.n(SM),SL=r(71086),Sz=r.n(SL);let SF=function(e){var t=e.selectedCurrencies,r=e.selectedRegions,n=e.toggleCurrency,i=e.toggleRegion,a=(0,J.useAdminStore)().store,o=null==a?void 0:a.currencies,l=(0,J.useAdminRegions)({limit:1e3}).regions,s=(0,U.useMemo)(function(){return(o||[]).sort(function(e,t){return e.code.localeCompare(t.code)})},[o]),c=(0,U.useMemo)(function(){return(l||[]).sort(function(e,t){return e.name.localeCompare(t.name)})},[l]);return(0,z.jsx)("div",{style:{fontSize:13},className:"border-ui-border-base flex items-center gap-2 border-b border-t px-4 py-[12px]",children:(0,z.jsxs)(ed.bL,{children:[(0,z.jsx)(ed.l9,{asChild:!0,children:(0,z.jsxs)(W.A,{variant:"secondary",size:"small",className:"text-gray-700",children:["Currencies",(0,z.jsx)(pq,{size:20})]})}),(0,z.jsxs)(ed.UC,{align:"start",sideOffset:10,className:"bg-grey-0 border-grey-20 rounded-rounded shadow-dropdown z-30 max-h-[500px] min-w-[272px] overflow-y-scroll border",children:[(0,z.jsx)(ed.JU,{className:"text-small px-[12px] py-2 font-medium text-gray-400",children:"Currencies"}),null==s?void 0:s.map(function(e){return(0,z.jsx)(ed.q7,{onClick:function(t){t.preventDefault(),n(e.code)},className:"mb-1 cursor-pointer last:mb-0 hover:bg-gray-100",children:(0,z.jsxs)("div",{className:"flex justify-between gap-4 px-[12px] py-2 text-gray-800",children:[e.code.toUpperCase(),(0,z.jsxs)("label",{className:"flex  items-center justify-between gap-2  text-gray-400",children:[(0,z.jsx)("span",{className:"max-w-[180px] truncate",children:e.name}),t.includes(e.code)&&(0,z.jsx)(e7,{className:"text-gray-900",size:16})]})]})},e.code)}),(0,z.jsx)(ed.JU,{className:"text-small border-t border-gray-200 px-[12px] py-2 font-medium text-gray-400",children:"Regions"}),null==c?void 0:c.map(function(e){return(0,z.jsx)(ed.q7,{onClick:function(t){t.preventDefault(),i(e.id)},className:"mb-1 cursor-pointer last:mb-0 hover:bg-gray-100",children:(0,z.jsxs)("div",{className:"flex justify-between gap-4 px-[12px] py-2 text-gray-800",children:[e.name,r.includes(e.id)&&(0,z.jsx)(e7,{className:"text-gray-900",size:16})]})},e.id)})]})]})})};function SB(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}let Sq=function(e){var t,r,n=e.size,i=void 0===n?"20px":n,a=e.color,o=void 0===a?"currentColor":a,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["size","color"]);return(0,z.jsxs)("svg",(t=SB({width:i,height:i,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l),r=r={children:[(0,z.jsx)("path",SB({d:"M17.5 7.5H2.5V5.83333L10 2.5L17.5 5.83333V7.5Z",stroke:o,strokeWidth:"1",strokeLinejoin:"round"},l)),(0,z.jsx)("path",SB({d:"M8.33333 16.6666H2.5L3.22917 14.1666H8.33333",stroke:o,strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round"},l)),(0,z.jsx)("path",SB({d:"M4.16667 7.5V14.1667M7.50001 14.1667V7.5",stroke:o,strokeWidth:"1"},l)),(0,z.jsx)("path",SB({d:"M17.1354 11.1979L12.0312 16.302",stroke:o,strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round"},l)),(0,z.jsx)("path",SB({d:"M12.2917 12.0834C12.6368 12.0834 12.9167 11.8036 12.9167 11.4584C12.9167 11.1132 12.6368 10.8334 12.2917 10.8334C11.9465 10.8334 11.6667 11.1132 11.6667 11.4584C11.6667 11.8036 11.9465 12.0834 12.2917 12.0834Z",stroke:o,strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round"},l)),(0,z.jsx)("path",SB({d:"M16.875 16.6666C17.2202 16.6666 17.5 16.3868 17.5 16.0416C17.5 15.6964 17.2202 15.4166 16.875 15.4166C16.5298 15.4166 16.25 15.6964 16.25 16.0416C16.25 16.3868 16.5298 16.6666 16.875 16.6666Z",stroke:o,strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round"},l))]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))};function SH(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function SU(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function SV(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return SH(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return SH(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var SG=(0,U.forwardRef)(function(e,t){return(0,z.jsx)("input",SU({ref:t},e))}),SW=(0,U.forwardRef)(function(e,t){var r,n;return(0,z.jsx)("span",(r=SU({ref:t},e),n=n={children:e.value||e.placeholder},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))}),r))});let SY=function(e){var t=e.variant,r=e.currencyCode,n=e.region,i=e.editedAmount,a=e.isSelected,o=e.isAnchor,l=e.isInRange,s=e.isRangeStart,c=e.isRangeEnd,u=e.onColumnOver,d=(0,U.useRef)(),f=SV((0,U.useState)(!1),2),p=f[0],m=f[1],h=function(e,t){var r=(0,J.useAdminRegions)().regions;if(e)return sS.q[null==e?void 0:e.toUpperCase()];if(r){var n=r.find(function(e){return e.id===t});return sS.q[n.currency_code.toUpperCase()]}}(r,n),y=SV((0,U.useState)({value:i,float:i}),2),b=y[0],v=y[1];return(0,U.useEffect)(function(){v({value:(null==i?void 0:i.toFixed(null==h?void 0:h.decimal_digits))||"",float:i})},[i]),(0,U.useEffect)(function(){if(a||m(!1),a&&o){var e=function(e){var t;(null===(t=document.activeElement)||void 0===t?void 0:t.tagName)!=="INPUT"&&(isNaN(Number(e.key))||(v({float:Number(e.key),value:String(e.key)}),m(!0)))};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}},[a,o,d.current]),(0,U.useEffect)(function(){if(p){setTimeout(function(){return d.current.focus()});var i,a=function(e){"Enter"===e.key&&d.current.blur()};return document.addEventListener("keypress",a),function(){return document.removeEventListener("keypress",a)}}v({value:(null===(i=b.float)||void 0===i?void 0:i.toFixed(null==h?void 0:h.decimal_digits))||"",float:b.float}),e.onInputChange(b.float,t.id,r,n)},[p]),(0,z.jsx)("td",{onMouseOver:function(){return u(r||n)},onMouseDown:function(i){p||(i.stopPropagation(),i.preventDefault()),e.onMouseCellClick(i,t.id,r,n),2===i.detail&&(v({float:b.float,value:String(b.float||"")}),m(!0))},className:(0,en.default)("relative h-10 cursor-pointer border pl-4 pr-2",{"bg-blue-100":a&&!o}),style:{borderTop:s&&e.isInRangeCol?"1px double #3B82F6":"",borderBottom:c&&e.isInRangeCol?"1px double #3B82F6":"",borderLeft:e.isRangeStartCol&&l?"1px double #3B82F6":"",borderRight:e.isRangeEndCol&&l?"1px double #3B82F6":""},children:(0,z.jsxs)("div",{className:"flex",children:[(0,z.jsx)("span",{className:"text-gray-400",children:null==h?void 0:h.symbol_native}),(0,z.jsx)(sO.default,{ref:d,onBlurCapture:function(){m(!1)},style:{width:"100%",textAlign:"right",paddingRight:8},className:(0,en.default)("decoration-transparent focus:outline-0",{"bg-blue-100":a&&!o}),onValueChange:function(e,t,r){return v(r)},allowDecimals:(null==h?void 0:h.decimal_digits)>0,decimalScale:p?void 0:null==h?void 0:h.decimal_digits,customInput:p?SG:SW,allowNegativeValue:!1,value:b.value,placeholder:"-"}),c&&e.isRangeEndCol&&!p&&(0,z.jsx)("div",{style:{bottom:-4,right:-4,zIndex:9999},onMouseDown:function(i){document.body.style.userSelect="none",i.stopPropagation(),e.onDragFillStart(t.id,r,n)},className:"absolute h-2 w-2 cursor-ns-resize rounded-full bg-blue-400"})]})})};function S$(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function SQ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SK(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){SQ(e,t,r[t])})}return e}function SZ(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||SX(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function SJ(e){return function(e){if(Array.isArray(e))return S$(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||SX(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function SX(e,t){if(e){if("string"==typeof e)return S$(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S$(e,t)}}!function(e){e[e.UP=0]="UP",e[e.DOWN=1]="DOWN",e[e.LEFT=2]="LEFT",e[e.RIGHT=3]="RIGHT"}(C||(C={}));var S0=void 0,S1=[];function S2(e,t,r){return"".concat(e,"-").concat(t||r)}let S3=function(e){var t=(0,J.useAdminStore)().store,r=null==t?void 0:t.currencies,n=(0,J.useAdminRegions)({limit:1e3}).regions,i=(0,eC.A)(),a=(0,U.useRef)(!1),o=SJ(e.currencies).concat(SJ(e.regions)),l=SZ((0,U.useState)(!1),2),s=l[0],c=l[1],u=SZ((0,U.useState)(!1),2),d=u[0],f=u[1],p=SZ((0,U.useState)({}),2),m=p[0],h=p[1],y=SZ((0,U.useState)({}),2),b=y[0],v=y[1],g=function(e,t,r,n){if((t||r)===N){var i=S2(e,t,r);if(n){v(SQ({},i,!0));return}var a=SK({},b);a[i]=!0,v(a)}},x=function(e,t,r,n){var i=SK({},m);i[S2(t,r,n)]=e,h(i)},j=function(){E=void 0,k=void 0,_=void 0,T=void 0,I=void 0,D=void 0,A=void 0,N=void 0,v({})},w=function(e,t,r){if(E||v(SQ({},S2(S1[0],o[0]),!0)),1===e){if(t)r?(k=E,_=S1.length-1):E===k?_=Math.min(_+1,S1.length-1):k=Math.min(k+1,S1.length-1),P();else{var n,i=S1.findIndex(function(e){return e===A});i=((i+1)%(n=S1.length)+n)%n;var a=S1[i];A=a,E=i,k=i,_=i,I=T,D=T,v(SQ({},S2(a,N),!0))}}if(0===e){if(t)r?(_=E,k=0):E===k?k===_?k=Math.max(k-1,0):_=Math.max(_-1,0):k=Math.max(k-1,0),P();else{var l,s=S1.findIndex(function(e){return e===A});s=((s-1)%(l=S1.length)+l)%l;var c=S1[s];A=c,E=s,k=s,_=s,I=T,D=T,v(SQ({},S2(c,N),!0))}}if(2===e){if(t)r?(D=T,I=0):T===I?I===D?I=Math.max(I-1,0):D=Math.max(D-1,0):I=Math.max(I-1,0),P();else{var u,d=o.findIndex(function(e){return e===N});d=((d-1)%(u=o.length)+u)%u;var f=o[d];N=f,T=d,I=d,D=d,k=E,_=E,v(SQ({},S2(A,f),!0))}}if(3===e){if(t)r?(I=T,D=o.length-1):T===I?D=Math.min(D+1,o.length-1):I=Math.min(I+1,o.length-1),P();else{var p,m=o.findIndex(function(e){return e===N});m=((m+1)%(p=o.length)+p)%p;var h=o[m];N=h,T=m,I=m,D=m,k=E,_=E,v(SQ({},S2(A,h),!0))}}},O=function(e){if((s||d)&&A){var t=S1.findIndex(function(t){return t===e});t>E?(k=E,_=t):(k=t,_=E),P()}},S=function(e){if(s||d){var t=o.findIndex(function(t){return t===e});t>T?(D=t,I=T):(I=t,D=T),P()}},P=function(){var e=o.slice(I,D+1),t=S1.slice(k,_+1),r=[];t.forEach(function(t){return e.forEach(function(e){r.push(S2(t,e))})});var n=SK({},b),i=SK({},m);Object.keys(n).forEach(function(e){r.includes(e)||(delete n[e],i[e]=S0[e])}),r.forEach(function(e){n[e]=!0,s&&(i[e]=m[S2(A,N)])}),v(n),s&&h(i)},C=function(e,t,r,n){e.stopPropagation(),S0=m,A=t,_=k=E=S1.findIndex(function(e){return e===A}),N=r||n,I=T=o.findIndex(function(e){return e===N}),D=T,v(SQ({},S2(t,r||n),!0)),f(!0)},M=function(e,t,r,n){x(e,t,r,n)},R=function(e,t,r){g(e,t,r),c(!0)};(0,U.useEffect)(function(){if(j(),e.currencies&&e.regions&&e.product.variants){var t={};e.product.variants.forEach(function(r){e.currencies.forEach(function(e){var n=sS.q[e.toUpperCase()],i=SE(r.prices).find(function(t){return t.currency_code===e});i&&(t[S2(r.id,e)]=i.amount/Math.pow(10,n.decimal_digits))}),e.regions.forEach(function(e){var n=SI(r.prices).find(function(t){return t.region_id===e});if(n){var i=sS.q[n.currency_code.toUpperCase()];t[S2(r.id,void 0,e)]=n.amount/Math.pow(10,i.decimal_digits)}})}),S1=e.product.variants.map(function(e){return e.id}),a.current=!0,h(function(e){return SK({},t,e)})}},[e.currencies,e.regions,e.product.variants]),(0,U.useEffect)(function(){var e=function(){document.body.style.userSelect="none",j()},t=function(){document.body.style.userSelect="auto",c(!1),f(!1)},r=function(e){if("Backspace"===e.key&&"INPUT"!==document.activeElement.tagName){var t=SK({},m);Object.keys(b).forEach(function(e){var r=SZ(e.split("-"),2);t[S2(r[0],r[1])]=void 0}),h(t)}if("Tab"===e.key&&(e.stopPropagation(),e.preventDefault(),e.shiftKey?(0===T&&w(0,!1),w(2,!1)):(T===o.length-1&&w(1,!1),w(3,!1))),38===e.keyCode&&w(0,e.shiftKey,e.metaKey||e.ctrlKey),40===e.keyCode&&w(1,e.shiftKey,e.metaKey||e.ctrlKey),37===e.keyCode&&w(2,e.shiftKey,e.metaKey||e.ctrlKey),39===e.keyCode&&w(3,e.shiftKey,e.metaKey||e.ctrlKey),(e.ctrlKey||e.metaKey)&&67===e.keyCode){var r="",n={},a={};Object.keys(b).forEach(function(e){var t=SZ(e.split("-"),2),r=t[0],i=t[1];n[r]=!0,a[i]=!0}),Object.keys(n).sort(function(e,t){return S1.indexOf(e)-S1.indexOf(t)}).forEach(function(e){Object.keys(a).forEach(function(t){var n=m[S2(e,t)];r+=(isNaN(n)?"":n)+"	"}),r=r.slice(0,-1)+"\n"}),r=r.slice(0,-1),navigator.clipboard.writeText(r),i("Success","Copied to clipboard","success")}(e.ctrlKey||e.metaKey)&&90===e.keyCode&&(e.preventDefault(),Object.keys(b).length&&(e.stopPropagation(),h(S0||{}),j()))},n=function(e){var t=(e.clipboardData||window.clipboardData).getData("text").split("\n").map(function(e){return e.split("	")});if("number"==typeof E&&"number"==typeof T){for(var r=SK({},m),n=k!==_||I!==D,a=n?_-k:t.length-1,l=0;l<=a&&!(l>=S1.length);l++)for(var s=t[l%t.length],c=n?D-I:s.length-1,u=0;u<=c&&!(u>=o.length);u++){if(""!==(d=s[u%s.length])&&isNaN(Number(d))){i("Error","Invalid data - copied cells contain text","error");return}var d,f=parseFloat(s[u%s.length]);r[S2(S1[k+l],o[I+u])]=isNaN(f)?void 0:f}h(r)}};return document.addEventListener("mousedown",e),document.addEventListener("mouseup",t),document.addEventListener("keydown",r),document.addEventListener("paste",n),function(){document.removeEventListener("mousedown",e),document.removeEventListener("mouseup",t),document.removeEventListener("keydown",r),document.removeEventListener("paste",n)}},[b]),(0,U.useEffect)(function(){s||e.onPriceUpdate(m)},[s,m]);var L=(0,U.useMemo)(function(){var t=0;return e.product.variants.forEach(function(e){return t=Math.max(t,e.title.length+(e.sku?e.sku.length:0))}),e.product.title.length>t?e.product.title.substring(0,t)+"...":e.product.title},[e.product]);if(a.current)return(0,z.jsx)("div",{className:"h-[calc(100%-60px-64px)] overflow-auto",children:(0,z.jsxs)("table",{onMouseMove:function(e){return e.preventDefault()},style:{fontSize:13,borderCollapse:"collapse"},className:"w-full table-auto",children:[(0,z.jsx)("thead",{children:(0,z.jsxs)("tr",{style:{height:42},className:"tw-text-medusa-text-subtle h-10 text-left font-normal",children:[(0,z.jsx)("th",{className:"h-2 border border-t-0 pl-4 font-medium text-gray-400",children:"Product"}),e.currencies.map(function(e){var t=null==r?void 0:r.find(function(t){return t.code===e});return(0,z.jsx)("th",{className:"min-w-[220px] border border-t-0 px-4 font-medium text-gray-400",children:(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,z.jsxs)("span",{children:["Price ",e.toUpperCase()]}),(null==t?void 0:t.includes_tax)&&(0,z.jsx)(r9.A,{content:"Tax inclusive pricing",side:"bottom",children:(0,z.jsx)(Sq,{strokeWidth:1.3,size:20})})]})},e)}),e.regions.map(function(e){var t=null==n?void 0:n.find(function(t){return t.id===e});return t?(0,z.jsx)("th",{className:"min-w-[220px] max-w-[220px]  border border-t-0 px-4 font-medium text-gray-400",children:(0,z.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,z.jsxs)("span",{className:"flex overflow-hidden",children:[(0,z.jsxs)("span",{title:null==t?void 0:t.name,className:"truncate pr-1",children:["Price ",null==t?void 0:t.name]}),"(",null==t?void 0:t.currency_code.toUpperCase(),")"]}),t.includes_tax&&(0,z.jsx)(r9.A,{content:"Tax inclusive pricing",side:"bottom",children:(0,z.jsx)(Sq,{strokeWidth:1.3,size:20})})]})},e):null})]})}),(0,z.jsxs)("tbody",{children:[(0,z.jsxs)("tr",{style:{lineHeight:3,background:"#f9fafb"},className:"",children:[(0,z.jsx)("td",{className:"border pl-4 pr-4",children:(0,z.jsxs)("div",{className:"text-black-800 flex items-center gap-2 overflow-hidden",children:[e.product.thumbnail&&(0,z.jsx)("img",{src:e.product.thumbnail,alt:"Thumbnail",className:"h-[22px] w-[16px] rounded"}),(0,z.jsx)("span",{title:e.product.title,className:"truncate",children:L})]})}),e.currencies.map(function(e){return(0,z.jsx)("td",{className:"border pr-4 text-right",children:"-"},e)}),e.regions.map(function(e){return(0,z.jsx)("td",{className:"border pr-4 text-right",children:"-"},e)})]}),e.product.variants.map(function(t,r){return(0,z.jsxs)("tr",{onMouseEnter:function(){return O(t.id)},style:{lineHeight:3},children:[(0,z.jsxs)("td",{className:"h-10 whitespace-nowrap border pl-10 pr-4 text-gray-600",children:[t.title," ",t.sku&&"∙ ".concat(t.sku)]}),e.currencies.map(function(e,n){return(0,z.jsx)(SY,{currencyCode:e,variant:t,isSelected:b[S2(t.id,e)],editedAmount:m[S2(t.id,e)],onInputChange:M,onMouseCellClick:C,onDragFillStart:R,onColumnOver:S,isAnchor:E===r&&T===n,isRangeStart:k===r,isRangeEnd:r===_,isInRange:r>=k&&r<=_,isRangeStartCol:I===n,isRangeEndCol:n===D,isInRangeCol:n>=I&&n<=D},t.id+e)}),e.regions.map(function(n,i){return i=e.currencies.length+i,(0,z.jsx)(SY,{region:n,variant:t,isSelected:b[S2(t.id,void 0,n)],editedAmount:m[S2(t.id,void 0,n)],onInputChange:M,onMouseCellClick:C,onDragFillStart:R,onColumnOver:S,isAnchor:E===r&&T===i,isRangeStart:k===r,isRangeEnd:r===_,isInRange:r>=k&&r<=_,isRangeStartCol:I===i,isRangeEndCol:i===D,isInRangeCol:i>=I&&i<=D},t.id+n)})]},t.id)})]})]})})};function S5(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function S6(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return S5(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S5(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}!function(e){e.SAVE_VISIBLE_ONLY="SAVE_VISIBLE_ONLY",e.SAVE_ALL="SAVE_ALL"}(M||(M={}));let S4=function(e){var t=e.handleClose,r=e.onSaveOnlyVisible,n=e.onSaveAll,i=e.hiddenEditedColumns,a=S6((0,U.useState)(!1),2),o=a[0],l=a[1],s=!!i.length,c=S6((0,U.useState)("SAVE_VISIBLE_ONLY"),2),u=c[0],d=c[1];return(0,z.jsx)(eN.A,{isLargeModal:!1,handleClose:t,children:(0,z.jsxs)(eN.A.Body,{children:[(0,z.jsxs)(eN.A.Content,{children:[(0,z.jsxs)("div",{className:"flex flex-col",children:[(0,z.jsx)("span",{className:"inter-large-semibold",children:"Saving changes"}),(0,z.jsx)("span",{className:"inter-base-regular text-grey-50 mt-1 mb-4 w-[420px]",children:s?"You have edited prices in hidden columns: (".concat(i.join(", "),"). Do you wish to save these too?"):"Save edited variant prices"})]}),s&&(0,z.jsxs)(oy.Root,{className:"gap-base mt-2 flex-col",value:u,onValueChange:d,children:[(0,z.jsx)(oy.Item,{className:"flex-1",label:"Save all",description:"Save all price changes",value:"SAVE_ALL"}),(0,z.jsx)(oy.Item,{className:"flex-1",label:"Save only visible",description:"Save only visible price changes",value:"SAVE_VISIBLE_ONLY"})]})]}),(0,z.jsx)(eN.A.Footer,{className:"flex items-center border border-t",children:(0,z.jsxs)("div",{className:"mt-4 flex h-8 w-full justify-end gap-2",children:[(0,z.jsx)(W.A,{variant:"ghost",className:"text-small mr-2  justify-center",size:"small",onClick:t,children:"Cancel"}),(0,z.jsx)(W.A,{size:"small",color:"black",className:(0,en.default)("text-small justify-center bg-black text-white active:bg-black active:text-white",{"hover:bg-black":!o}),loading:o,onClick:function(){l(!0),(s&&"SAVE_ALL"===u?n:r)()},children:"Save changes"})]})})]})})};function S8(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function S7(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function S9(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function o(e){S7(a,n,i,o,l,"next",e)}function l(e){S7(a,n,i,o,l,"throw",e)}o(void 0)})}}function Pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function Pt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||Pr(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pr(e,t){if(e){if("string"==typeof e)return S8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S8(e,t)}}function Pn(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}let Pi=function(e){var t,r,n,i,a,o,l=(0,U.useRef)({}),s=(0,J.useAdminRegions)({limit:1e3}).regions,c=(0,J.useAdminStore)().store,u=(t={},null==(r=(0,J.useAdminRegions)({limit:1e3}).regions)||r.forEach(function(e){t[e.id]=e.currency_code}),(0,U.useMemo)(function(){return t},[r])),d=(n=e.product,i={},n.variants.forEach(function(e){e.prices.forEach(function(e){e.price_list_id||e.min_quantity||e.max_quantity||!e.region_id||(i[e.region_id]=!0)})}),Object.keys(i)).sort(),f=(a=e.product,o={},a.variants.forEach(function(e){e.prices.forEach(function(e){e.price_list_id||e.region_id||e.min_quantity||e.max_quantity||(o[e.currency_code]=!0)})}),Object.keys(o)).sort(),p=(0,eC.A)(),m=(0,J.useAdminUpdateVariant)(e.product.id),h=Pt((0,U.useState)(!1),2),y=h[0],b=h[1],v=Pt((0,U.useState)(!1),2),g=v[0],x=v[1],j=f.length||d.length?f:null==c?void 0:c.currencies.map(function(e){return e.code}),w=Pt((0,U.useState)(j),2),O=w[0],S=w[1],P=Pt((0,U.useState)(d),2),C=P[0],A=P[1],N=function(){var t,r={};e.product.variants.forEach(function(e){f.forEach(function(t){var n=sS.q[t.toUpperCase()],i=SE(e.prices).find(function(e){return e.currency_code===t});i&&(r["".concat(e.id,"-").concat(t)]=i.amount/Math.pow(10,n.decimal_digits))}),d.forEach(function(t){var n=SI(e.prices).find(function(e){return e.region_id===t});if(n){var i=sS.q[n.currency_code.toUpperCase()];r["".concat(e.id,"-").concat(t)]=n.amount/Math.pow(10,i.decimal_digits)}})});var n=Pe({},l.current);return Object.keys(r).forEach(function(e){r[e]===n[e]&&delete n[e]}),((function(e){if(Array.isArray(e))return S8(e)})(t=new Set(Object.keys(n).map(function(e){return e.split("-")[1]})))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||Pr(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).filter(function(e){return!O.includes(e)&&!C.includes(e)}).map(function(e){var t;return 3===e.length?e.toUpperCase():(null==s?void 0:null===(t=s.find(function(t){return t.id===e}))||void 0===t?void 0:t.name)||e})},k=function(t){var r=l.current;Promise.all(e.product.variants.map(function(e){var n=e.prices.filter(function(e){return!e.price_list_id}),i=ST()(Sz()(r,function(t,r){return r.includes(e.id)}),function(e,t){return t.split("-")[1]}),a=Sz()(i,function(e,r){return!r.startsWith("reg")&&(!t||O.includes(r))}),o=Sz()(i,function(e,r){return r.startsWith("reg")&&(!t||C.includes(r))}),l=[];return n.forEach(function(e){if(e.region_id){if(e.region_id in o){if("number"==typeof o[e.region_id]){var t=Pe({},e),r=o[e.region_id]*Math.pow(10,sS.q[e.currency_code.toUpperCase()].decimal_digits);t.amount=parseFloat(r.toFixed(0)),l.push(t)}}else l.push(e);delete o[e.region_id]}else{if(e.currency_code in a){if("number"==typeof a[e.currency_code]){var n=Pe({},e),i=a[e.currency_code]*Math.pow(10,sS.q[e.currency_code.toUpperCase()].decimal_digits);n.amount=parseFloat(i.toFixed(0)),l.push(n)}}else l.push(e);delete a[e.currency_code]}}),Object.entries(a).forEach(function(e){var t=Pt(e,2),r=t[0],n=t[1];"number"==typeof n&&(n=parseFloat((n*Math.pow(10,sS.q[r.toUpperCase()].decimal_digits)).toFixed(0)),l.push({currency_code:r,amount:n}))}),Object.entries(o).forEach(function(e){var t=Pt(e,2),r=t[0],n=t[1];if("number"==typeof n){var i=u[r];n=parseFloat((n*Math.pow(10,sS.q[i.toUpperCase()].decimal_digits)).toFixed(0)),l.push({region_id:r,amount:n})}}),m.mutateAsync({variant_id:e.id,prices:l.map(function(e){return SR()(e,["id","amount","region_id","currency_code"])})})})).then(function(){p("Success","Successfully updated variant prices","success"),e.close()}).catch(function(e){p("Error","Failed to update variant prices","error")})};return(0,U.useEffect)(function(){var e=function(e){"Escape"===e.key&&b(!0)};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}},[]),(0,z.jsxs)(ik.A,{isFullScreen:!0,isVisible:!0,children:[(0,z.jsx)(eN.A.Body,{className:"border bg-gray-200 p-2",children:(0,z.jsxs)("div",{className:"h-full overflow-hidden rounded-lg border border-gray-300 bg-white",children:[(0,z.jsxs)("div",{className:"flex h-[64px] items-center justify-between px-4",children:[(0,z.jsxs)("div",{className:"flex h-[20px] items-center gap-2",children:[(0,z.jsx)(W.A,{variant:"ghost",size:"small",onClick:function(){return b(!0)},className:"text-grey-50 cursor-pointer",children:(0,z.jsx)(ao.A,{size:20})}),(0,z.jsx)("span",{className:"text-small rounded-lg border border-2 border-gray-300 bg-gray-100 px-2 font-medium text-gray-500",children:"esc"})]}),(0,z.jsxs)("div",{className:"flex items-center gap-3",children:[(0,z.jsx)(W.A,{variant:"ghost",size:"small",onClick:e.close,className:"text-black-800  cursor-pointer border p-1.5 font-medium",children:"Discard"}),(0,z.jsx)(W.A,{variant:"ghost",size:"small",onClick:function(){N(),x(!0)},className:"cursor-pointer border bg-black p-1.5 font-medium text-white hover:bg-black",children:"Save and close"})]})]}),(0,z.jsx)(SF,{selectedCurrencies:O.sort(),selectedRegions:C.sort(),toggleCurrency:function(e){var t=new Set(O);t.has(e)?t.delete(e):t.add(e),S(Array.from(t))},toggleRegion:function(e){var t=new Set(C);t.has(e)?t.delete(e):t.add(e),A(Array.from(t))}}),(0,z.jsx)(S3,{product:e.product,currencies:O.sort(),regions:C.sort(),onPriceUpdate:function(e){l.current=e}})]})}),y&&(0,z.jsx)(e_,{handleClose:function(){return b(!1)},onDelete:S9(function(){return Pn(this,function(t){return[2,e.close()]})}),successText:"",confirmText:"Yes, close",heading:"Close",text:"Are you sure you want to close this editor without saving?"}),g&&(0,z.jsx)(S4,{onSaveAll:S9(function(){return Pn(this,function(e){return[2,k()]})}),onSaveOnlyVisible:S9(function(){return Pn(this,function(e){return[2,k(!0)]})}),hiddenEditedColumns:N(),handleClose:function(){return x(!1)}})]})};function Pa(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Po(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function Pl(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function o(e){Po(a,n,i,o,l,"next",e)}function l(e){Po(a,n,i,o,l,"throw",e)}o(void 0)})}}function Ps(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Pa(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Pa(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pc(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}var Pu=function(){var e=OA(),t=e.options,r=e.status;return"error"===r?null:"loading"!==r&&t?(0,z.jsx)("div",{className:"mt-base flex flex-wrap items-center gap-8",children:t.map(function(e){var t;return(0,z.jsxs)("div",{children:[(0,z.jsx)("h3",{className:"inter-base-semibold mb-xsmall",children:e.title}),(0,z.jsx)("ul",{className:"flex flex-wrap items-center gap-1",children:null===(t=e.values)||void 0===t?void 0:t.map(function(e){return e.value}).filter(function(e,t,r){return r.indexOf(e)===t}).map(function(e,t){return(0,z.jsx)("li",{children:(0,z.jsx)("div",{className:"inter-small-semibold rounded-rounded bg-grey-10 text-grey-50 whitespace-nowrap px-3 py-[6px]",children:e})},t)})})]},e.id)})}):(0,z.jsx)("div",{className:"mt-base grid grid-cols-3 gap-x-8",children:Array.from([,,]).map(function(e,t){return(0,z.jsxs)("div",{children:[(0,z.jsx)("div",{className:"mb-xsmall bg-grey-30 h-6 w-9 animate-pulse"}),(0,z.jsx)("ul",{className:"flex flex-wrap items-center gap-1",children:Array.from([,,,]).map(function(e,t){return(0,z.jsx)("li",{children:(0,z.jsx)("div",{className:"rounded-rounded bg-grey-10 text-grey-50 h-8 w-12 animate-pulse",children:t})},t)})})]},t)})})};let Pd=function(e){var t,r=e.product,n=(0,uc.useQueryClient)(),i=(0,J.useMedusa)().client,a=(0,ei.Bd)().t,o=(0,rz.u)().isFeatureEnabled,l=Ps((0,U.useState)(void 0),2),s=l[0],c=l[1],u=Ps((0,U.useState)(void 0),2),d=u[0],f=u[1],p=(0,n5.A)(),m=p.state,h=p.close,y=p.toggle,b=(0,n5.A)(),v=b.state,g=b.close,x=b.toggle,j=(0,n5.A)(),w=j.state,O=j.close,S=j.toggle,P=(0,n5.A)(),C=P.state,A=P.close,N=P.toggle,k=[{label:a("product-variants-section-add-variant","Add Variant"),onClick:x,icon:(0,z.jsx)(n_.A,{size:"20"})},{label:a("product-variants-section-edit-prices","Edit Prices"),onClick:N,icon:(0,z.jsx)(c5,{size:"20"})},{label:a("product-variants-section-edit-variants","Edit Variants"),onClick:S,icon:(0,z.jsx)(ec,{size:"20"})},{label:a("product-variants-section-edit-options","Edit Options"),onClick:y,icon:(0,z.jsx)(Sg.A,{size:"20"})}],_=uj(r.id).onDeleteVariant,E=(t=Pl(function(e){var t;return Pc(this,function(r){switch(r.label){case 0:if(!o("inventoryService"))return[3,2];return[4,i.admin.variants.getInventory(e)];case 1:t=r.sent().variant,r.label=2;case 2:return _(e,Pl(function(){var e;return Pc(this,function(r){switch(r.label){case 0:if(!(o("inventoryService")&&(null==t?void 0:null===(e=t.inventory[0])||void 0===e?void 0:e.id)))return[3,2];return[4,i.admin.inventoryItems.delete(t.inventory[0].id)];case 1:r.sent(),n.invalidateQueries(J.adminInventoryItemsKeys.lists()),r.label=2;case 2:return[2]}})})),[2]}})}),function(e){return t.apply(this,arguments)});return(0,z.jsxs)(ON,{product:r,children:[(0,z.jsxs)(eM,{title:"Variants",actions:k,children:[(0,z.jsx)(Pu,{}),(0,z.jsxs)("div",{className:"mt-xlarge",children:[(0,z.jsxs)("h2",{className:"inter-large-semibold mb-base",children:[a("product-variants-section-product-variants","Product variants")," ",(0,z.jsxs)("span",{className:"inter-large-regular text-grey-50",children:["(",r.variants.length,")"]})]}),(0,z.jsx)(S_,{variants:r.variants,actions:{deleteVariant:E,updateVariant:function(e){c({base:e,isDuplicate:!1})},duplicateVariant:function(e){var t,r;c({base:(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),r=r={options:[]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t),isDuplicate:!0})},updateVariantInventory:function(e){f({base:e})}}})]})]}),(0,z.jsx)(Sj,{open:m,onClose:h,product:r}),(0,z.jsx)(OX,{open:v,onClose:g,product:r}),(0,z.jsx)(Sv,{open:w,onClose:O,product:r}),C&&(0,z.jsx)(Pi,{close:A,product:r}),s&&(0,z.jsx)(Sc,{variant:s.base,isDuplicate:s.isDuplicate,product:r,onClose:function(){return c(void 0)}}),d&&(0,z.jsx)(O7,{variant:d.base,product:r,onClose:function(){return f(void 0)}})]})},Pf=function(){var e=(0,H.useParams)().id,t=(0,H.useNavigate)(),r=(0,tY.X)().getWidgets,n=(0,J.useAdminProduct)(e||""),i=n.product,a=n.status,o=n.error;if(o){var l=t$(o);if(l&&404===l.status)return t("/404"),null;throw o}return"loading"!==a&&i?(0,z.jsxs)("div",{className:"pb-5xlarge",children:[(0,z.jsx)(eo,{path:"/a/products",label:"Back to Products",className:"mb-xsmall"}),(0,z.jsxs)("div",{className:"gap-y-xsmall flex flex-col",children:[r("product.details.before").map(function(e,t){return(0,z.jsx)(es.A,{injectionZone:"product.details.before",widget:e,entity:i},t)}),(0,z.jsxs)("div",{className:"gap-x-base grid grid-cols-12",children:[(0,z.jsxs)("div",{className:"gap-y-xsmall col-span-8 flex flex-col",children:[(0,z.jsx)(dS,{product:i}),(0,z.jsx)(Pd,{product:i}),(0,z.jsx)(uD,{product:i}),r("product.details.after").map(function(e,t){return(0,z.jsx)(es.A,{injectionZone:"product.details.after",widget:e,entity:i},t)}),(0,z.jsx)(dq,{product:i})]}),(0,z.jsxs)("div",{className:"gap-y-xsmall col-span-4 flex flex-col",children:[(0,z.jsx)(dQ,{product:i}),(0,z.jsx)(dB,{product:i})]})]})]})]}):(0,z.jsx)("div",{className:"flex h-[calc(100vh-64px)] w-full items-center justify-center",children:(0,z.jsx)(X.A,{variant:"secondary"})})},Pp=function(e){var t,r,n=e.size,i=void 0===n?"20":n,a=e.color,o=void 0===a?"currentColor":a,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["size","color"]);return(0,z.jsxs)("svg",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({width:i,height:i,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l),r=r={children:[(0,z.jsx)("path",{d:"M16.0893 13.1868C16.6838 12.7754 17.1321 12.1858 17.3697 11.503C17.6072 10.8202 17.6216 10.0796 17.4107 9.38816C17.1999 8.69667 16.7748 8.09007 16.1968 7.65594C15.6187 7.2218 14.9177 6.9826 14.1948 6.97285H12.8308C12.6017 6.20011 12.1996 5.48973 11.6549 4.89565C11.1102 4.30157 10.4374 3.83943 9.68735 3.54431C8.93734 3.24918 8.12995 3.12885 7.32648 3.19244C6.52301 3.25603 5.7446 3.50187 5.05036 3.9113C4.35612 4.32072 3.7643 4.88297 3.31985 5.55533C2.8754 6.22769 2.59001 6.99248 2.48535 7.79164C2.38068 8.59079 2.4595 9.40329 2.71582 10.1674C2.97214 10.9316 3.39921 11.6272 3.96461 12.2016",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M10.0273 10.0039V16.8241",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M13.0585 13.0351L10.0273 10.0039L6.99609 13.0351",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))};function Pm(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}let Ph=function(e){var t,r,n=(0,ei.Bd)().t,i=(0,H.useNavigate)(),a=rL(),o=(0,J.useAdminDeleteCollection)(null==e?void 0:e.id),l=(t=function(){return function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,function(e){switch(e.label){case 0:return[4,a({heading:n("collections-table-delete-collection","Delete Collection"),text:n("collections-table-confirm-delete","Are you sure you want to delete this collection?")})];case 1:return e.sent()&&o.mutate(),[2]}})},r=function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function o(e){Pm(a,n,i,o,l,"next",e)}function l(e){Pm(a,n,i,o,l,"throw",e)}o(void 0)})},function(){return r.apply(this,arguments)});return{getActions:function(e){return[{label:n("collections-table-edit","Edit"),onClick:function(){return i("/a/collections/".concat(e.id))},icon:(0,z.jsx)(ec,{size:20})},{label:n("collections-table-delete","Delete"),variant:"danger",onClick:l,icon:(0,z.jsx)(eu,{size:20})}]}}},Py=function(){var e=(0,ei.Bd)().t;return[(0,U.useMemo)(function(){return[{Header:e("collections-table-title","Title"),accessor:"title",Cell:function(e){var t=e.row.original;return(0,z.jsx)("div",{className:"flex items-center",children:t.title})}},{Header:e("collections-table-handle","Handle"),accessor:"handle",Cell:function(e){var t=e.cell.value;return(0,z.jsxs)("div",{children:["/",t]})}},{Header:e("collections-table-created-at","Created At"),accessor:"created_at",Cell:function(e){var t=e.cell.value;return(0,z.jsx)(r9.A,{content:re()(t).format("DD MMM YYYY hh:mm A"),children:re()(t).format("DD MMM YYYY")})}},{Header:e("collections-table-updated-at","Updated At"),accessor:"updated_at",Cell:function(e){var t=e.cell.value;return(0,z.jsx)(r9.A,{content:re()(t).format("DD MMM YYYY hh:mm A"),children:re()(t).format("DD MMM YYYY")})}},{Header:e("collections-table-products","Products"),accessor:"products",Cell:function(e){var t=e.cell.value;return(0,z.jsx)("div",{children:(null==t?void 0:t.length)||"-"})}}]},[])]};function Pb(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Pv(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function Pg(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function Px(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Pb(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Pb(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Pj=function(e){var t=e.row,r=t.original,n=Ph(r).getActions;return(0,z.jsx)(td.Row,Pg(Pv({color:"inherit",linkTo:"/a/collections/".concat(r.id),actions:n(r)},t.getRowProps()),{children:t.cells.map(function(e,t){return(0,z.jsx)(td.Cell,Pg(Pv({},e.getCellProps()),{children:e.render("Cell",{index:t})}))})}))};let Pw=function(){var e=Px((0,U.useState)([]),2),t=e[0],r=e[1],n=Px((0,U.useState)(0),2),i=n[0],a=n[1],o=Px((0,U.useState)(""),2),l=o[0],s=o[1],c=Px((0,U.useState)(0),2),u=c[0],d=c[1],f=(0,e8.d)(l,300),p=(0,J.useAdminCollections)({q:f,offset:i,limit:15},{keepPreviousData:!0}),m=p.collections,h=p.isLoading,y=p.isRefetching,b=p.count;(0,U.useEffect)(function(){void 0!==b&&d(Math.ceil(b/15))},[b]);var v=Px(Py(),1)[0],g=(0,e4.useTable)({columns:v,data:m||[],manualPagination:!0,initialState:{pageIndex:Math.floor(i/15),pageSize:15},pageCount:u,autoResetPage:!1},e4.usePagination),x=g.getTableProps,j=g.getTableBodyProps,w=g.headerGroups,O=g.rows,S=g.prepareRow,P=g.canPreviousPage,C=g.canNextPage,A=g.pageCount,N=g.nextPage,k=g.previousPage,_=g.state.pageIndex;return(0,U.useEffect)(function(){r([{title:"Sort",options:[{title:"All",count:(null==m?void 0:m.length)||0,onClick:function(){return console.log("Not implemented yet")}}]}])},[m]),(0,z.jsx)(tb,{isLoading:h||y,hasPagination:!0,numberOfRows:15,pagingState:{count:b,offset:i,pageSize:i+O.length,title:"Collections",currentPage:_+1,pageCount:A,nextPage:function(){C&&(a(i+15),N())},prevPage:function(){P&&(a(i-15),k())},hasNext:C,hasPrev:P},children:(0,z.jsxs)(td,Pg(Pv({enableSearch:!0,handleSearch:function(e){a(0),s(e)},searchValue:l,searchPlaceholder:"Search Collections",filteringOptions:t},x()),{children:[(0,z.jsx)(td.Head,{children:null==w?void 0:w.map(function(e){return(0,z.jsx)(td.HeadRow,Pg(Pv({},e.getHeaderGroupProps()),{children:e.headers.map(function(e,t){return(0,U.createElement)(td.HeadCell,Pg(Pv({className:"min-w-[100px]"},e.getHeaderProps()),{key:t}),e.render("Header"))})}))})}),h||y||!m?(0,z.jsx)(td.Body,Pg(Pv({},j()),{children:(0,z.jsx)(td.Row,{children:(0,z.jsx)(td.Cell,{colSpan:v.length,children:(0,z.jsx)("div",{className:"pt-2xlarge flex w-full items-center justify-center",children:(0,z.jsx)(X.A,{size:"large",variant:"secondary"})})})})})):(0,z.jsx)(td.Body,Pg(Pv({},j()),{children:O.map(function(e,t){return S(e),(0,z.jsx)(Pj,{row:e},t)})}))]}))})};function PO(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function PS(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PP(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){PS(e,t,r[t])})}return e}function PC(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function PA(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return PO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return PO(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var PN=["proposed","draft","published","rejected"];let Pk=function(e){var t=e.filters,r=e.submitFilters,n=e.clearFilters,i=e.tabs,a=e.onTabClick,o=e.activeTab,l=e.onRemoveTab,s=e.onSaveTab,c=(0,ei.Bd)().t,u=PA((0,U.useState)(t),2),d=u[0],f=u[1],p=PA((0,U.useState)(""),2),m=p[0],h=p[1],y=function(e){l&&l(e)},b=function(e){a&&a(e)};(0,U.useEffect)(function(){f(t)},[t]);var v=(0,U.useMemo)(function(){return Object.entries(t||{}).reduce(function(e,t){var r=PA(t,2)[1];return(null==r?void 0:r.open)&&(e+=1),e},0)},[t]),g=function(e,t){f(function(r){return PC(PP({},r),PS({},e,t))})},x=PA((0,U.useState)({offset:0,limit:10}),2),j=x[0],w=x[1],O=(0,J.useAdminCollections)(j),S=O.collections,P=O.count,C=O.isLoading,A=(0,J.useAdminProductTags)().product_tags,N=function(e){e>0?w(function(e){return PC(PP({},e),{offset:e.offset+e.limit})}):e<0&&w(function(e){return PC(PP({},e),{offset:Math.max(e.offset-e.limit,0)})})};return(0,z.jsxs)("div",{className:"flex space-x-1",children:[(0,z.jsxs)(iM,{submitFilters:function(){r(d)},clearFilters:function(){n()},triggerElement:(0,z.jsxs)("button",{className:(0,en.default)("rounded-rounded focus-visible:shadow-input focus-visible:border-violet-60 flex items-center space-x-1 focus-visible:outline-none"),children:[(0,z.jsxs)("div",{className:"rounded-rounded bg-grey-5 border-grey-20 inter-small-semibold flex h-6 items-center border px-2",children:[c("products-filters","Filters"),(0,z.jsx)("div",{className:"text-grey-40 ml-1 flex items-center rounded",children:(0,z.jsx)("span",{className:"text-violet-60 inter-small-semibold",children:v||"0"})})]}),(0,z.jsx)("div",{className:"rounded-rounded bg-grey-5 border-grey-20 inter-small-semibold flex items-center border p-1",children:(0,z.jsx)(n_.A,{size:14})})]}),children:[(0,z.jsx)(ae,{filterTitle:c("products-status","Status"),options:PN,filters:d.status.filter,open:d.status.open,setFilter:function(e){return g("status",e)}}),(0,z.jsx)(ae,{filterTitle:"Collection",options:(null==S?void 0:S.map(function(e){return{value:e.id,label:e.title}}))||[],isLoading:C,hasPrev:j.offset>0,hasMore:j.offset+j.limit<(null!=P?P:0),onShowPrev:function(){return N(-1)},onShowNext:function(){return N(1)},filters:d.collection.filter,open:d.collection.open,setFilter:function(e){return g("collection",e)}}),(0,z.jsxs)("div",{className:"flex w-full flex-col pb-2",children:[(0,z.jsxs)("div",{className:"hover:bg-grey-5 mb-1 flex w-full cursor-pointer items-center rounded px-3 py-1.5",onClick:function(){g("tags",{open:!d.tags.open,filter:d.tags.filter})},children:[(0,z.jsxs)("div",{className:"border-grey-30 text-grey-0 rounded-base flex h-5 w-5 justify-center border ".concat(d.tags.open&&"bg-violet-60"),children:[(0,z.jsx)("span",{className:"self-center",children:d.tags.open&&(0,z.jsx)(e7,{size:16})}),(0,z.jsx)("input",{type:"checkbox",className:"hidden",id:"Tags",name:"Tags",value:"Tags",checked:d.tags.open})]}),(0,z.jsx)("span",{className:(0,en.default)("text-grey-90 ml-2",{"inter-small-semibold":d.tags.open,"inter-small-regular":!d.tags.open}),children:c("products-tags","Tags")})]}),d.tags.open&&(0,z.jsx)("div",{"data-tip":d.tags.invalidTagsMessage||"",className:"pl-6",children:(0,z.jsx)(dm,{className:"pt-0 pb-1",showLabel:!1,placeholder:c("products-spring-summer","Spring, summer..."),values:(d.tags.filter||[]).map(function(e){var t=(A||[]).find(function(t){return t.id===e});return t&&t.value}).filter(Boolean),onValidate:function(e){var t=(A||[]).find(function(t){return t.value.toLowerCase()===e.toLowerCase()});return t&&t.id},onChange:function(e){g("tags",{open:d.tags.open,filter:e})}})})]}),(0,z.jsx)(aa,{saveFilter:function(){s&&s(m,d)},name:m,setName:h})]}),i&&i.map(function(e){return(0,z.jsx)(al,{onClick:function(){return b(e.value)},label:e.label,isActive:o===e.value,removable:!!e.removable,onRemove:function(){return y(e.value)}},e.value)})]})};var P_=function(e){switch(e){case"proposed":return"warning";case"published":return"success";case"rejected":return"danger";default:return"default"}};let PE=function(e){var t,r,n=e.size,i=void 0===n?"20px":n,a=e.color,o=void 0===a?"currentColor":a,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["size","color"]);return(0,z.jsxs)("svg",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({width:i,height:i,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l),r=r={children:[(0,z.jsx)("path",{d:"M6.66669 5H17.5",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M6.66669 10H17.5",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M6.66669 15H17.5",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M2.5 5H2.50875",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M2.5 10H2.50875",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M2.5 15H2.50875",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},PI=function(e){var t,r,n=e.size,i=void 0===n?"20px":n,a=e.color,o=void 0===a?"currentColor":a,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["size","color"]);return(0,z.jsxs)("svg",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({width:i,height:i,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l),r=r={children:[(0,z.jsx)("path",{d:"M8.5 3.5H3.5V8.5H8.5V3.5Z",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M16.5 3.5H11.5V8.5H16.5V3.5Z",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M16.5 11.5H11.5V16.5H16.5V11.5Z",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M8.5 11.5H3.5V16.5H8.5V11.5Z",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))};function PD(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function PT(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function PM(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return PD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return PD(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var PR=function(e,t){var r=new Date().toLocaleTimeString(void 0,{hour:"numeric",minute:"numeric",second:"numeric"});return{newTitle:"".concat(e.replace(/ \(\d{1,}:\d{1,}:\d{1,}\)$/,"")," (").concat(r,")"),newHandle:"".concat(t.replace(/-copy(-\d{1,}){3}(-am|pm])*/g,""),"-copy-").concat(r.replace(/:/g,"-").toLowerCase())}};let PL=function(){var e=(0,H.useNavigate)(),t=(0,eC.A)(),r=(0,J.useAdminCreateProduct)().mutate,n=(0,ei.Bd)().t;return function(i){var a=(0,t6.omit)(i,["id","created_at","updated_at","deleted_at","external_id","profile_id","profile","type_id","status"]),o=a.variants,l=a.options,s=a.type,c=a.tags,u=a.images,d=a.collection_id,f=a.collection,m=a.sales_channels,h=a.title,y=a.handle,b=Object.entries(PT(a,["variants","options","type","tags","images","collection_id","collection","sales_channels","title","handle"])).reduce(function(e,t){var r=PM(t,2),n=r[0],i=r[1];return i&&(e[n]=i),e},{}),v={};if(l&&l.length&&l.forEach(function(e,t){b.options||(b.options=[]),v[e.id]=t,b.options.push({title:e.title})}),o&&o.length){var g=[];o.forEach(function(e){var t=(0,t6.omit)(e,["id","sku","created_at","updated_at","deleted_at","product","product_id","variant_rank","purchasable"]),r=t.prices,n=t.options,i=Object.entries(PT(t,["prices","options"])).reduce(function(e,t){var r=PM(t,2),n=r[0],i=r[1];return i&&(e[n]=i),e},{});if(i.prices=[],r&&r.length&&(i.prices=r.map(function(e){return{amount:e.amount,currency_code:e.region_id?void 0:e.currency_code,region_id:e.region_id}})),n&&n.length){var a=n.sort(function(e,t){return v[e.option_id]-v[t.option_id]});i.options=a.map(function(e){return{value:e.value}})}g.push(i)}),b.variants=g}u&&u.length&&(b.images=u.map(function(e){return e.url})),f?b.collection_id=f.id:d&&(b.collection_id=d),m&&m.length&&(b.sales_channels=m.map(function(e){return{id:e.id}})),c&&c.length&&(b.tags=c.map(function(e){return{id:e.id,value:e.value}})),s&&(b.type={id:i.type.id,value:i.type.value}),b.status=p.DRAFT;var x=PR(h,y||""),j=x.newTitle,w=x.newHandle;b.title=j,b.handle=w,r(b,{onSuccess:function(r){var i=r.product;e("/a/products/".concat(i.id)),t(n("product-table-copy-success","Success"),n("product-table-copy-created-a-new-product","Created a new product"),"success")},onError:function(e){t(n("product-table-copy-error","Error"),(0,eA.u)(e),"error")}})}};function Pz(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}let PF=function(e){var t,r,n=(0,ei.Bd)().t,i=(0,H.useNavigate)(),a=(0,eC.A)(),o=rL(),l=PL(),s=(0,J.useAdminDeleteProduct)(null==e?void 0:e.id),c=(0,J.useAdminUpdateProduct)(null==e?void 0:e.id),u=(0,uc.useQueryClient)(),d=(0,rz.u)().isFeatureEnabled,f=(0,J.useMedusa)().client,p=(t=function(){return function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,function(t){switch(t.label){case 0:return[4,o({heading:n("product-table-delete-product","Delete Product"),text:n("product-table-confirm-delete","Are you sure you want to delete this product?")})];case 1:if(!t.sent())return[3,4];if(!d("inventoryService"))return[3,3];return[4,f.admin.variants.list({id:e.variants.map(function(e){return e.id}),expand:"inventory_items"})];case 2:t.sent().variants.filter(function(e){var t=e.inventory_items;return!!(null==t?void 0:t.length)}).map(function(e){var t=e.inventory_items;return f.admin.inventoryItems.delete(t[0].inventory_item_id)}),u.invalidateQueries(J.adminInventoryItemsKeys.lists()),t.label=3;case 3:s.mutate(),t.label=4;case 4:return[2]}})},r=function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function o(e){Pz(a,n,i,o,l,"next",e)}function l(e){Pz(a,n,i,o,l,"throw",e)}o(void 0)})},function(){return r.apply(this,arguments)});return{getActions:function(){return[{label:n("product-table-edit","Edit"),onClick:function(){return i("/a/products/".concat(e.id))},icon:(0,z.jsx)(ec,{size:20})},{label:"published"===e.status?n("product-table-unpublish","Unpublish"):n("product-table-publish","Publish"),onClick:function(){var t="published"===e.status?"draft":"published";c.mutate({status:t},{onSuccess:function(){a(n("product-table-success","Success"),"published"===e.status?n("product-table-successfully-unpublished-product","Successfully unpublished product"):n("product-table-successfully-published-product","Successfully published product"),"success")},onError:function(e){return a(n("product-table-error","Error"),(0,eA.u)(e),"error")}})},icon:"published"===e.status?(0,z.jsx)(aM,{size:20}):(0,z.jsx)(aT,{size:20})},{label:n("product-table-duplicate","Duplicate"),onClick:function(){return l(e)},icon:(0,z.jsx)(eB,{size:20})},{label:n("product-table-delete","Delete"),variant:"danger",onClick:p,icon:(0,z.jsx)(eu,{size:20})}]}}};var PB=function(e){var t,r=e.product,n=PF(r).getActions;return(0,z.jsx)("div",{className:"p-base rounded-rounded hover:bg-grey-5 group flex-col",children:(0,z.jsxs)("div",{className:"relative",children:[(0,z.jsx)("div",{className:(0,en.default)("rounded-base absolute top-2 right-2 inline-block"),children:(0,z.jsx)(em,{actions:n(),customTrigger:(0,z.jsx)(W.A,{variant:"ghost",size:"small",className:"w-xlarge h-xlarge hidden-actions bg-grey-0 opacity-0 focus-within:opacity-100 group-hover:opacity-100",children:(0,z.jsx)(ef,{size:20})})})}),(0,z.jsxs)(H.Link,{to:"".concat(r.id),children:[r.thumbnail?(0,z.jsx)("img",{className:"rounded-rounded block min-h-[230px] object-cover",src:r.thumbnail}):(0,z.jsx)("div",{className:"bg-grey-5 rounded-rounded flex min-h-[230px] items-center justify-center",children:(0,z.jsx)(nm,{})}),(0,z.jsxs)("div",{children:[(0,z.jsxs)("div",{className:"mt-base flex items-center justify-between",children:[(0,z.jsx)("p",{className:"inter-small-regular text-grey-90 line-clamp-1 mr-3",children:r.title}),(0,z.jsx)(tv.A,{variant:P_(r.status),className:"shrink-0"})]}),(0,z.jsx)("span",{className:"inter-small-regular text-grey-50 line-clamp-1",children:null===(t=r.collection)||void 0===t?void 0:t.title})]})]})]})})};let Pq=function(e){var t=e.products,r=e.toggleListView;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{className:"border-grey-20 pr-xlarge flex justify-end border-t border-b py-2.5",children:(0,z.jsxs)("div",{className:"inter-small-semibold text-grey-50 flex justify-self-end",children:[(0,z.jsx)("span",{onClick:r,className:(0,en.default)("hover:bg-grey-5 text-grey-40 cursor-pointer rounded p-0.5"),children:(0,z.jsx)(PE,{size:20})}),(0,z.jsx)("span",{className:(0,en.default)("hover:bg-grey-5 text-grey-90 cursor-pointer rounded p-0.5"),children:(0,z.jsx)(PI,{size:20})})]})}),(0,z.jsx)("div",{className:"grid grid-cols-6",children:null==t?void 0:t.map(function(e){return(0,z.jsx)(PB,{product:e})})})]})},PH=function(e){var t=e.setTileView,r=e.setListView,n=e.showList,i=(0,ei.Bd)().t,a=function(e){switch(e){case"proposed":return(0,z.jsx)(tv.A,{title:i("product-table-proposed","Proposed"),variant:"warning"});case"published":return(0,z.jsx)(tv.A,{title:i("product-table-published-title","Published"),variant:"success"});case"rejected":return(0,z.jsx)(tv.A,{title:i("product-table-rejected","Rejected"),variant:"danger"});case"draft":return(0,z.jsx)(tv.A,{title:i("product-table-draft-title","Draft"),variant:"default"});default:return(0,z.jsx)(tv.A,{title:e,variant:"default"})}},o=(0,J.useAdminStore)().store,l=function(e){var t,r=(e||[]).sort((t=(null==o?void 0:o.default_sales_channel_id)||"",function(e,r){return e.id===t?-1:r.id===t?1:e.name.localeCompare(r.name)})).map(function(e){return e.name});return(0,z.jsx)(uR,{list:r})};return[(0,U.useMemo)(function(){return[{Header:i("product-table-name","Name"),accessor:"title",Cell:function(e){var t=e.row.original;return(0,z.jsxs)("div",{className:"flex items-center",children:[(0,z.jsx)("div",{className:"my-1.5 mr-4 flex h-[40px] w-[30px] items-center",children:t.thumbnail?(0,z.jsx)("img",{src:t.thumbnail,className:"rounded-soft h-full object-cover"}):(0,z.jsx)(nm,{})}),t.title]})}},{Header:i("product-table-collection","Collection"),accessor:"collection",Cell:function(e){var t=e.cell.value;return(0,z.jsx)("div",{children:(null==t?void 0:t.title)||"-"})}},{Header:i("product-table-status","Status"),accessor:"status",Cell:function(e){return a(e.cell.value)}},{Header:i("product-table-availability","Availability"),accessor:"sales_channels",Cell:function(e){return l(e.cell.value)}},{Header:i("product-table-inventory","Inventory"),accessor:"variants",Cell:function(e){var t=e.cell.value;return(0,z.jsxs)("div",{children:[t.reduce(function(e,t){return e+t.inventory_quantity},0),i("product-table-inventory-in-stock-count"," in stock for {{count}} variant(s)",{count:t.length})]})}},{accessor:"col-3",Header:(0,z.jsxs)("div",{className:"flex justify-end text-right",children:[(0,z.jsx)("span",{onClick:r,className:(0,en.default)("hover:bg-grey-5 cursor-pointer rounded p-0.5",{"text-grey-90":n,"text-grey-40":!n}),children:(0,z.jsx)(PE,{size:20})}),(0,z.jsx)("span",{onClick:t,className:(0,en.default)("hover:bg-grey-5 cursor-pointer rounded p-0.5",{"text-grey-90":!n,"text-grey-40":n}),children:(0,z.jsx)(PI,{size:20})})]})}]},[n])]};function PU(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function PV(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function PG(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function PW(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||P$(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function PY(e){return function(e){if(Array.isArray(e))return PU(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||P$(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P$(e,t){if(e){if("string"==typeof e)return PU(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return PU(e,t)}}var PQ=["status","collection_id","payment_status","created_at","q","offset","limit"],PK={drafts:{status:["draft"]},proposed:{status:["proposed"]}},PZ=function(e,t){switch(t.type){case"setFilters":var r;return PG(PV({},e),{status:t.payload.status,collection:t.payload.collection,tags:t.payload.tags,date:t.payload.date,query:null==t?void 0:null===(r=t.payload)||void 0===r?void 0:r.query});case"setQuery":return PG(PV({},e),{offset:0,query:t.payload});case"setDate":var n=e.date;return PG(PV({},e),{date:n});case"setLimit":return PG(PV({},e),{limit:t.payload});case"setOffset":return PG(PV({},e),{offset:t.payload});case"reset":return t.payload;default:return e}},PJ=function(e,t){if(e.size!==t.size)return!1;var r=!0,n=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var l=a.value;if(!t.has(l))return!1}}catch(e){n=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(n)throw i}}return!0},PX=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e&&"?"===e[0]&&(e=e.substring(1));var r=(0,U.useMemo)(function(){return P2(e,t)},[e,t]),n=(0,U.useMemo)(function(){var e=localStorage.getItem("products::filters");if(e){var t=JSON.parse(e);if(t)return Object.entries(t).map(function(e){var t=PW(e,2),r=t[0];return{label:r,value:r,removable:!0,representationString:t[1]}})}return[]},[]),i=PW((0,U.useReducer)(PZ,r),2),a=i[0],o=i[1],l=PW((0,U.useState)(n),2),s=l[0],c=l[1],u=function(){var e=PV({},a.additionalFilters),t=!0,r=!1,n=void 0;try{for(var i,o=Object.entries(a)[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var l,s=PW(i.value,2),c=s[0],u=s[1];"query"===c?u&&"string"==typeof u&&(e.q=u):"offset"===c||"limit"===c?e[c]=u:u.open&&("date"===c?e[P1[c]]=(l=u.filter,null===l?l:Object.entries(l).reduce(function(e,t){var r=PW(t,2),n=r[0],i=r[1];return i.includes("|")?e[n]=iB(i):e[n]=i,e},{})):e[P1[c]]=u.filter)}}catch(e){r=!0,n=e}finally{try{t||null==o.return||o.return()}finally{if(r)throw n}}return e},d=function(e){var t=null!=e?e:a,r={},n=!0,i=!1,o=void 0;try{for(var l,s=Object.entries(t)[Symbol.iterator]();!(n=(l=s.next()).done);n=!0){var c=PW(l.value,2),u=c[0],d=c[1];"query"===u?d&&"string"==typeof d&&(r.q=d):"offset"===u||"limit"===u?r[u]=d:d.open&&(r[P1[u]]=d.filter)}}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r},f=function(){var e=d();return t8().stringify(e,{skipNulls:!0})},p=(0,U.useMemo)(function(){return u()},[a]),m=(0,U.useMemo)(function(){return d()},[a]),h=(0,U.useMemo)(function(){return f()},[a]),y=(0,U.useMemo)(function(){var e=(0,t6.omit)(m,["limit","offset"]),t=t8().stringify(e),r=s.find(function(e){return e.representationString===t});if(r)return r.value;var n=!0,i=!1,a=void 0;try{for(var o,l=Object.entries(PK)[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var c=PW(o.value,2),u=c[0],d=c[1],f=!0;if(Object.keys(e).length===Object.keys(d).length){var p=!0,h=!1,y=void 0;try{for(var b,v=Object.entries(d)[Symbol.iterator]();!(p=(b=v.next()).done);p=!0){var g=PW(b.value,2),x=g[0],j=g[1];if(!(f=x in e&&(Array.isArray(j)?Array.isArray(e[x])&&PJ(new Set(e[x]),new Set(j)):e[x]===j)))break}}catch(e){h=!0,y=e}finally{try{p||null==v.return||v.return()}finally{if(h)throw y}}if(f)return u}}}catch(e){i=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(i)throw a}}return null},[m,s]),b=(0,U.useMemo)(function(){return[{label:"Unpublished",value:"drafts"}].concat(PY(s))},[s]);return PG(PV({},a),{filters:PV({},a),removeTab:function(e){var t=localStorage.getItem("products::filters"),r=null;t&&(r=JSON.parse(t)),r&&(delete r[e],localStorage.setItem("products::filters",JSON.stringify(r))),c(function(t){return t.filter(function(t){return t.value!==e})})},saveTab:function(e,t){var r=d(PV({},t)),n=(0,t6.omit)(r,["limit","offset"]),i=t8().stringify(n,{skipNulls:!0}),a=localStorage.getItem("products::filters"),l=null;if(a&&(l=JSON.parse(a)),l)l[e]=i,localStorage.setItem("products::filters",JSON.stringify(l));else{var s={};s[e]=i,localStorage.setItem("products::filters",JSON.stringify(s))}c(function(t){var r=t.findIndex(function(t){var r;return(null===(r=t.label)||void 0===r?void 0:r.toLowerCase())===e.toLowerCase()});return -1!==r&&t.splice(r,1),PY(t).concat([{label:e,value:e,representationString:i,removable:!0}])}),o({type:"setFilters",payload:t})},setTab:function(e){var t=null;if(e in PK)t=PK[e];else{var r=s.find(function(t){return t.value===e});r&&(t=t8().parse(r.representationString))}if(t){var n=PG(PV({},a),{date:{open:!1,filter:null},status:{open:!1,filter:null},tags:{open:!1,filter:null},collection:{open:!1,filter:null}}),i=!0,l=!1,c=void 0;try{for(var u,d=Object.entries(t)[Symbol.iterator]();!(i=(u=d.next()).done);i=!0){var f=PW(u.value,2),p=f[0],m=f[1];n[P0[p]]={open:!0,filter:m}}}catch(e){l=!0,c=e}finally{try{i||null==d.return||d.return()}finally{if(l)throw c}}o({type:"setFilters",payload:n})}},availableTabs:b,activeFilterTab:y,representationObject:m,representationString:h,queryObject:p,paginate:function(e){e>0?o({type:"setOffset",payload:a.offset+a.limit}):o({type:"setOffset",payload:Math.max(a.offset-a.limit,0)})},getQueryObject:u,getQueryString:function(){var e=u();return t8().stringify(e,{skipNulls:!0})},setQuery:function(e){o({type:"setQuery",payload:e})},setFilters:function(e){o({type:"setFilters",payload:e})},setDefaultFilters:function(e){o({type:"setDefaults",payload:e})},setDateFilter:function(e){o({type:"setDate",payload:e})},setLimit:function(e){o({type:"setLimit",payload:e})},setFulfillmentFilter:function(e){o({type:"setFulfillment",payload:e})},setPaymentFilter:function(e){o({type:"setPayment",payload:e})},setStatusFilter:function(e){o({type:"setStatus",payload:e})},reset:function(){o({type:"setFilters",payload:PG(PV({},a),{offset:0,status:{open:!1,filter:null},collection:{open:!1,filter:null},tags:{open:!1,filter:null},date:{open:!1,filter:null},query:null})})}})},P0={status:"status",collection_id:"collection",tags:"tags",created_at:"date"},P1={status:"status",collection:"collection_id",tags:"tags",date:"created_at"},P2=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r={status:{open:!1,filter:null},collection:{open:!1,filter:null},tags:{open:!1,filter:null},date:{open:!1,filter:null},offset:0,limit:15,additionalFilters:t};if(e){var n=t8().parse(e),i=!0,a=!1,o=void 0;try{for(var l,s=Object.entries(n)[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=PW(l.value,2),u=c[0],d=c[1];if(PQ.includes(u))switch(u){case"offset":"string"==typeof d&&(r.offset=parseInt(d));break;case"limit":"string"==typeof d&&(r.limit=parseInt(d));break;case"q":"string"==typeof d&&(r.query=d);break;case"status":("string"==typeof d||Array.isArray(d))&&(r.status={open:!0,filter:d});break;case"collection_id":("string"==typeof d||Array.isArray(d))&&(r.collection={open:!0,filter:d});break;case"payment_status":("string"==typeof d||Array.isArray(d))&&(r.payment={open:!0,filter:d});break;case"created_at":r.date={open:!0,filter:d}}}}catch(e){a=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}}return r};function P3(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function P5(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function P6(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function P4(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return P3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return P3(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var P8={fields:"id,title,thumbnail,status,handle,collection_id",expand:"variants,options,variants.prices,variants.options,collection,tags,type,images",is_giftcard:!1},P7=function(e){var t=e.row,r=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["row"]),n=t.original,i=PF(n).getActions;return(0,z.jsx)(td.Row,P6(P5({color:"inherit",linkTo:"/a/products/".concat(n.id),actions:i()},r),{children:t.cells.map(function(e,t){return(0,z.jsx)(td.Cell,P6(P5({},e.getCellProps()),{children:e.render("Cell",{index:t})}))})}))};let P9=function(){var e=(0,H.useLocation)(),t=(0,ei.Bd)().t,r=(0,rz.u)().isFeatureEnabled,n=(0,i_.s)().trackNumberOfProducts,i=["sales_channel"];r("sales_channels")&&(P8.expand="variants,options,variants.prices,variants.options,collection,tags,type,images,sales_channels",i=[]);var a=PX(e.search,P8),o=a.removeTab,l=a.setTab,s=a.saveTab,c=a.availableTabs,u=a.activeFilterTab,d=a.reset,f=a.paginate,p=a.setFilters,m=a.setLimit,h=a.filters,y=a.setQuery,b=a.queryObject,v=a.representationObject,g=parseInt(b.offset)||0,x=parseInt(b.limit),j=P4((0,U.useState)(b.query),2),w=j[0],O=j[1],S=P4((0,U.useState)(0),2),P=S[0],C=S[1],A=(0,J.useAdminProducts)(P5({},b),{keepPreviousData:!0,onSuccess:function(e){return n({count:e.count})}}),N=A.products,k=A.isLoading,_=A.count;(0,U.useEffect)(function(){void 0!==_&&C(Math.ceil(_/x))},[_]);var E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=t8().stringify(e);window.history.replaceState("/a/products","","".concat("?".concat(t)))},I=function(){(0,t6.isEmpty)(v)?E({offset:0,limit:15}):E(v)};(0,U.useEffect)(function(){I()},[v]);var D=function(){m(15),R(!0)},T=P4(U.useState(!0),2),M=T[0],R=T[1],L=P4(PH({setTileView:function(){m(18),R(!1)},setListView:D,showList:M}),1)[0],F=(0,e4.useTable)({columns:L,data:N||[],manualPagination:!0,initialState:{pageIndex:Math.floor(g/x),pageSize:x,hiddenColumns:i},pageCount:P,autoResetPage:!1},e4.usePagination),B=F.getTableProps,q=F.getTableBodyProps,V=F.headerGroups,G=F.rows,W=F.prepareRow,Y=F.gotoPage,$=F.canPreviousPage,Q=F.canNextPage,K=F.pageCount,Z=F.nextPage,X=F.previousPage,ee=F.state.pageIndex;return(0,U.useEffect)(function(){var e=setTimeout(function(){w?(y(w),Y(0)):void 0!==w&&d()},400);return function(){return clearTimeout(e)}},[w]),(0,z.jsx)(tb,{numberOfRows:15,hasPagination:!0,pagingState:{count:_,offset:g,pageSize:g+G.length,title:t("product-table-products","Products"),currentPage:ee+1,pageCount:K,nextPage:function(){Q&&(f(1),Z())},prevPage:function(){$&&(f(-1),X())},hasNext:Q,hasPrev:$},isLoading:k,children:(0,z.jsx)(td,P6(P5({filteringOptions:(0,z.jsx)(Pk,{filters:h,submitFilters:p,clearFilters:function(){d(),O("")},tabs:c,onTabClick:l,activeTab:u,onRemoveTab:o,onSaveTab:s}),enableSearch:!0,searchValue:w,handleSearch:O},B()),{children:M?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(td.Head,{children:null==V?void 0:V.map(function(e){return(0,z.jsx)(td.HeadRow,P6(P5({},e.getHeaderGroupProps()),{children:e.headers.map(function(e){return(0,z.jsx)(td.HeadCell,P6(P5({className:"min-w-[100px]"},e.getHeaderProps()),{children:e.render("Header")}))})}))})}),(0,z.jsx)(td.Body,P6(P5({},q()),{children:G.map(function(e){return W(e),(0,z.jsx)(P7,P5({row:e},e.getRowProps()))})}))]}):(0,z.jsx)(Pq,{products:N,toggleListView:D})}))})},Ce=function(e){var t,r,n=e.fill,i=e.size,a=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["fill","size"]),o=n||"#111827";return(0,z.jsxs)("svg",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({width:i||20,height:i||20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a),r=r={children:[(0,z.jsx)("path",{d:"M17.5 12.5V15.8333C17.5 16.2754 17.3244 16.6993 17.0118 17.0118C16.6993 17.3244 16.2754 17.5 15.8333 17.5H4.16667C3.72464 17.5 3.30072 17.3244 2.98816 17.0118C2.67559 16.6993 2.5 16.2754 2.5 15.8333V12.5",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M5.83203 8.33301L9.9987 12.4997L14.1654 8.33301",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M10 12.5V2.5",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))};var Ct=r(16956);function Cr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Cn(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function Ci(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Cr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Cr(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ca(e){var t=e.action,r=e.name,n=e.progress,i=e.size,a=e.status,o=e.hasError,l=e.errorMessage,s=i/1024<10?"".concat((i/1024).toFixed(2)," KiB"):"".concat((i/1048576).toFixed(2)," MiB");return(0,z.jsx)("div",{className:"relative",children:(0,z.jsxs)(r9.A,{side:"top",maxWidth:320,open:!!o&&void 0,content:o&&l?(0,z.jsx)("span",{className:"font-normal text-rose-500",children:l}):null,children:[(0,z.jsx)("div",{style:{width:"".concat(n,"%")},className:"bg-grey-5 transition-width absolute h-full duration-150 ease-in-out"}),(0,z.jsxs)("div",{className:"border-1 relative mt-6 flex items-center rounded-xl border",children:[(0,z.jsx)("div",{className:"m-4",children:(0,z.jsx)(Ct.A,{size:30,fill:n?"#9CA3AF":"#2DD4BF"})}),(0,z.jsxs)("div",{className:"my-6 flex-1",children:[(0,z.jsx)("div",{className:"text-small text-grey-90 leading-5",children:r}),(0,z.jsx)("div",{className:(0,en.default)("text-xsmall text-grey-50 leading-4",{"text-rose-500":o}),children:a||s})]}),(0,z.jsx)("div",{className:"m-6",children:t})]})]})})}function Co(e){var t=e.creations,r=e.updates,n=e.type,i=(0,ei.Bd)().t;return(0,z.jsxs)("div",{className:"flex gap-6",children:[(0,z.jsxs)("div",{className:"text-small text-grey-90 flex items-center",children:[(0,z.jsx)(b6.A,{color:"#9CA3AF",className:"mr-2"}),(0,z.jsxs)("span",{className:"font-semibold",children:[" ",t||0,"\xa0"]})," ",i("upload-modal-new","new")," ",n]}),(0,z.jsxs)("div",{className:"text-small text-grey-90 flex items-center",children:[(0,z.jsx)($.A,{fill:"#9CA3AF",className:"mr-2"}),(0,z.jsxs)("span",{className:"font-semibold",children:[r||0,"\xa0"]})," ",i("upload-modal-updates","updates")]})]})}function Cl(e){var t=(0,ei.Bd)().t,r=Ci((0,U.useState)(!1),2),n=r[0],i=r[1];return(0,z.jsxs)("div",{onDragEnter:function(){return i(!0)},onDragLeave:function(){return i(!1)},onDragOver:function(e){e.stopPropagation(),e.preventDefault()},onDrop:function(t){var r;t.preventDefault(),t.stopPropagation(),i(!1),(null===(r=t.dataTransfer.items)||void 0===r?void 0:r.length)&&e.onUpload(t.dataTransfer.items[0].getAsFile())},className:(0,en.default)("mt-3 flex flex-col items-center justify-center rounded-xl border border-dashed p-6",{"opacity-50":n}),children:[(0,z.jsxs)("span",{className:"text-grey-50 text-small",children:[t("upload-modal-drop-your-file-here-or","Drop your file here, or"),(0,z.jsxs)("a",{className:"text-violet-60",children:[(0,z.jsxs)("label",{className:"cursor-pointer",htmlFor:"upload-form-file",children:[" ",t("upload-modal-click-to-browse","click to browse.")]}),(0,z.jsx)("input",{type:"file",id:"upload-form-file",className:"hidden",accept:"text/csv",onChange:function(t){e.onUpload(t.target.files[0])}})]})]}),(0,z.jsx)("span",{className:"text-grey-40 text-small",children:t("upload-modal-only-csv-files-are-supported","Only .csv files are supported.")})]})}let Cs=function(e){var t,r,n=e.description1Text,i=e.description2Text,a=e.description2Title,o=e.fileTitle,l=e.canImport,s=e.processUpload,c=e.onClose,u=e.onSubmit,d=e.onFileRemove,f=e.onDownloadTemplate,p=e.summary,m=e.hasError,h=e.errorMessage,y=e.status,b=e.type,v=Ci((0,U.useState)(),2),g=v[0],x=v[1],j=(0,ei.Bd)().t,w=g||{},O=w.name,S=w.size,P=(t=function(e){return function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,function(t){switch(t.label){case 0:return x(e),[4,s(e)];case 1:return t.sent(),[2]}})},r=function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function o(e){Cn(a,n,i,o,l,"next",e)}function l(e){Cn(a,n,i,o,l,"throw",e)}o(void 0)})},function(e){return r.apply(this,arguments)});return(0,z.jsx)(eN.A,{open:!0,handleClose:c,children:(0,z.jsxs)(eN.A.Body,{children:[(0,z.jsxs)(eN.A.Content,{children:[(0,z.jsxs)("div",{className:"flex justify-between",children:[(0,z.jsxs)("span",{className:"text-grey-90 inter-large-semibold py-4 text-2xl",children:["Import ",o]}),(0,z.jsx)("button",{onClick:c,className:"text-grey-50 cursor-pointer",children:(0,z.jsx)(ao.A,{size:20})})]}),(0,z.jsx)("div",{className:"text-grey-90 inter-large-semibold mb-1 text-base",children:j("upload-modal-import-file-title","Import {{fileTitle}}",{fileTitle:o})}),(0,z.jsx)("p",{className:"text-grey-50 mb-4 text-base",children:n}),p&&(0,z.jsx)(Co,{creations:p.toCreate,updates:p.toUpdate,type:b}),g?(0,z.jsx)(Ca,{size:S,name:O,status:y,hasError:m,errorMessage:h,progress:100,action:(0,z.jsx)("a",{className:"h-6 w-6 cursor-pointer",onClick:function(){x(void 0),d()},children:(0,z.jsx)(eu,{stroke:"#9CA3AF"})})}):(0,z.jsx)(Cl,{onUpload:P}),(0,z.jsx)("div",{className:"text-grey-90 inter-large-semibold mt-8 text-base",children:a}),(0,z.jsx)("p",{className:"text-grey-50 mb-2 text-base",children:i}),(0,z.jsx)(Ca,{name:"medusa-template.csv",size:2967,action:(0,z.jsx)("a",{className:"h-6 w-6 cursor-pointer",onClick:f,children:(0,z.jsx)(Ce,{stroke:"#9CA3AF"})})}),(0,z.jsx)("div",{className:"h-2"})]}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsx)("div",{className:"flex h-8 w-full justify-end",children:(0,z.jsxs)("div",{className:"flex gap-2",children:[(0,z.jsx)(W.A,{variant:"secondary",className:"text-small mr-2 justify-center",size:"small",onClick:c,children:j("upload-modal-cancel","Cancel")}),(0,z.jsx)(W.A,{size:"small",disabled:!l||m,variant:"primary",className:"text-small",onClick:u,children:j("upload-modal-import-list","Import List")})]})})})]})})};function Cc(){var e=encodeURI("data:text/csv;charset=utf-8,Product Id;Product Handle;Product Title;Product Subtitle;Product Description;Product Status;Product Thumbnail;Product Weight;Product Length;Product Width;Product Height;Product HS Code;Product Origin Country;Product MID Code;Product Material;Product Collection Title;Product Collection Handle;Product Type;Product Tags;Product Discountable;Product External Id;Product Profile Name;Product Profile Type;Variant Id;Variant Title;Variant SKU;Variant Barcode;Variant Inventory Quantity;Variant Allow Backorder;Variant Manage Inventory;Variant Weight;Variant Length;Variant Width;Variant Height;Variant HS Code;Variant Origin Country;Variant MID Code;Variant Material;Price EUR;Price USD;Option 1 Name;Option 1 Value;Image 1 Url;Image 2 Url\n;coffee-mug-v2;Medusa Coffee Mug;;Every programmer's best friend.;published;https://medusa-public-images.s3.eu-west-1.amazonaws.com/coffee-mug.png;400;;;;;;;;;;;;true;;;;;One Size;;;100;false;true;;;;;;;;;1000;1200;Size;One Size;https://medusa-public-images.s3.eu-west-1.amazonaws.com/coffee-mug.png;\n;sweatpants-v2;Medusa Sweatpants;;Reimagine the feeling of classic sweatpants. With our cotton sweatpants, everyday essentials no longer have to be ordinary.;published;https://medusa-public-images.s3.eu-west-1.amazonaws.com/sweatpants-gray-front.png;400;;;;;;;;;;;;true;;;;;S;;;100;false;true;;;;;;;;;2950;3350;Size;S;https://medusa-public-images.s3.eu-west-1.amazonaws.com/sweatpants-gray-front.png;https://medusa-public-images.s3.eu-west-1.amazonaws.com/sweatpants-gray-back.png\n;sweatpants-v2;Medusa Sweatpants;;Reimagine the feeling of classic sweatpants. With our cotton sweatpants, everyday essentials no longer have to be ordinary.;published;https://medusa-public-images.s3.eu-west-1.amazonaws.com/sweatpants-gray-front.png;400;;;;;;;;;;;;true;;;;;M;;;100;false;true;;;;;;;;;2950;3350;Size;M;https://medusa-public-images.s3.eu-west-1.amazonaws.com/sweatpants-gray-front.png;https://medusa-public-images.s3.eu-west-1.amazonaws.com/sweatpants-gray-back.png\n;sweatpants-v2;Medusa Sweatpants;;Reimagine the feeling of classic sweatpants. With our cotton sweatpants, everyday essentials no longer have to be ordinary.;published;https://medusa-public-images.s3.eu-west-1.amazonaws.com/sweatpants-gray-front.png;400;;;;;;;;;;;;true;;;;;L;;;100;false;true;;;;;;;;;2950;3350;Size;L;https://medusa-public-images.s3.eu-west-1.amazonaws.com/sweatpants-gray-front.png;https://medusa-public-images.s3.eu-west-1.amazonaws.com/sweatpants-gray-back.png\n;sweatpants-v2;Medusa Sweatpants;;Reimagine the feeling of classic sweatpants. With our cotton sweatpants, everyday essentials no longer have to be ordinary.;published;https://medusa-public-images.s3.eu-west-1.amazonaws.com/sweatpants-gray-front.png;400;;;;;;;;;;;;true;;;;;XL;;;100;false;true;;;;;;;;;2950;3350;Size;XL;https://medusa-public-images.s3.eu-west-1.amazonaws.com/sweatpants-gray-front.png;https://medusa-public-images.s3.eu-west-1.amazonaws.com/sweatpants-gray-back.png\n"),t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("download","product-import-template.csv"),document.body.appendChild(t),t.click()}function Cu(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Cd(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function Cf(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function o(e){Cd(a,n,i,o,l,"next",e)}function l(e){Cd(a,n,i,o,l,"throw",e)}o(void 0)})}}function Cp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Cu(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Cu(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cm(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}let Ch=function(e){var t,r,n,i,a,o,l,s,c,u,d=Cp((0,U.useState)(),2),f=d[0],p=d[1],m=Cp((0,U.useState)(),2),h=m[0],y=m[1],b=(0,ei.Bd)().t,v=(0,eC.A)(),g=(0,m4.nm)().resetInterval,x=(0,J.useAdminDeleteFile)().mutateAsync,j=(0,J.useAdminUploadProtectedFile)().mutateAsync,w=(0,J.useAdminCreateBatchJob)().mutateAsync,O=(0,J.useAdminCancelBatchJob)(h).mutateAsync,S=(0,J.useAdminConfirmBatchJob)(h).mutateAsync,P=(r=(t=Cp((0,U.useState)(),2))[0],n=t[1],i=(null==r?void 0:r.status)==="created"||(null==r?void 0:r.status)==="confirmed",a=(0,J.useAdminBatchJob)(h,{enabled:!!h,refetchInterval:!!i&&2e3}).batch_job,(0,U.useEffect)(function(){n(a)},[a]),r),C=!!f,A=!!(null==P?void 0:P.result),N=(null==P?void 0:P.status)==="failed",k=A?P.result.advancement_count/P.result.count:void 0,_=(o=Cf(function(){return Cm(this,function(t){switch(t.label){case 0:return[4,S()];case 1:return t.sent(),v(b("batch-job-success","Success"),b("batch-job-import-confirmed-for-processing-progress-info-is-available-in-the-activity-drawer","Import confirmed for processing. Progress info is available in the activity drawer."),"success"),e.handleClose(),[2]}})}),function(){return o.apply(this,arguments)}),E=(l=Cf(function(e){var t,r;return Cm(this,function(n){switch(n.label){case 0:return n.trys.push([0,3,,6]),[4,j(e)];case 1:return p(t=n.sent().uploads[0].key),[4,w({dry_run:!0,context:{fileKey:t},type:"product-import"})];case 2:return r=n.sent(),g(),y(r.batch_job.id),[3,6];case 3:if(n.sent(),v(b("batch-job-error","Error"),b("batch-job-import-failed","Import failed."),"error"),!f)return[3,5];return[4,x({file_key:f})];case 4:n.sent(),n.label=5;case 5:return[3,6];case 6:return[2]}})}),function(e){return l.apply(this,arguments)}),I=(s=Cf(function(){return Cm(this,function(e){if(f)try{x({file_key:f})}catch(e){v(b("batch-job-error","Error"),b("batch-job-failed-to-delete-the-csv-file","Failed to delete the CSV file"),"error")}try{O()}catch(e){v(b("batch-job-error","Error"),b("batch-job-failed-to-cancel-the-batch-job","Failed to cancel the batch job"),"error")}return y(void 0),[2]})}),function(){return s.apply(this,arguments)});return(0,z.jsx)(Cs,{type:"products",status:N?"Error occurred while processing":A?void 0:C?"Preprocessing...":"Uploading...",progress:k,hasError:N,canImport:A,onSubmit:_,onClose:function(){e.handleClose(),!["confirmed","completed","canceled","failed"].includes(null==P?void 0:P.status)&&(f&&x({file_key:f}),h&&O())},summary:function(){if(P){var e,t,r=null===(t=P.result)||void 0===t?void 0:null===(e=t.stat_descriptors)||void 0===e?void 0:e[0].message.match(/\d+/g);if(r)return{toCreate:Number(r[0]),toUpdate:Number(r[1])}}}(),onFileRemove:I,processUpload:E,fileTitle:b("batch-job-products-list","products list"),onDownloadTemplate:Cc,errorMessage:null==P?void 0:null===(u=P.result)||void 0===u?void 0:null===(c=u.errors)||void 0===c?void 0:c.join(" \n"),description2Title:b("batch-job-unsure-about-how-to-arrange-your-list","Unsure about how to arrange your list?"),description2Text:b("batch-job-download-template","Download the template below to ensure you are following the correct format."),description1Text:b("batch-job-imports-description","Through imports you can add or update products. To update existing products/variants you must set an existing id in the Product/Variant id columns. If the value is unset a new record will be created. You will be asked for confirmation before we import products.")})};function Cy(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}let Cb=function(e){var t,r=e.form,n=r.control,i=r.path,a=function(e){if(Array.isArray(e))return e}(t=(0,U.useState)(!1))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(t,2)||function(e,t){if(e){if("string"==typeof e)return Cy(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Cy(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),o=a[0],l=a[1],s=(0,eR.jz)({control:n,name:i("channels"),keyName:"fieldId"}),c=s.fields,u=s.replace,d=s.append,f=(0,ei.Bd)().t,p=(0,n5.A)(),m=p.state,h=p.toggle,y=(0,n5.A)(),b=y.state,v=y.toggle,g=y.close,x=(0,J.useAdminStore)().store;return(0,U.useEffect)(function(){if((null==x?void 0:x.default_sales_channel)&&c){c.find(function(e){return e.id===x.default_sales_channel.id})||o||d(x.default_sales_channel);var e=c.filter(function(e,t){return c.findIndex(function(t){return t.id===e.id})!==t});e.length>0&&u(c.filter(function(t){return!e.includes(t)}))}},[x,d,c,u,o]),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("div",{children:[(0,z.jsxs)("div",{children:[(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,z.jsx)("h2",{className:"inter-base-semibold",children:f("new-sales-channels","Sales channels")}),(0,z.jsx)(so.A,{checked:m,onCheckedChange:h})]}),(0,z.jsx)("p",{className:"inter-base-regular text-grey-50 mt-2xsmall",children:f("new-this-product-will-only-be-available-in-the-default-sales-channel-if-left-untouched","This product will only be available in the default sales channel if left untouched.")})]}),(0,z.jsxs)("div",{className:(0,en.default)({hidden:!m}),children:[(0,z.jsx)("div",{className:"mt-base",children:(0,z.jsx)(uz,{channels:c})}),(0,z.jsxs)(W.A,{variant:"secondary",className:"mt-large h-[40px] w-full",type:"button",onClick:v,children:[(0,z.jsx)(uM,{size:20}),(0,z.jsx)("span",{children:f("new-change-availablity","Change availablity")})]})]})]}),(0,z.jsx)(u0,{source:c,open:b,onClose:g,onSave:function(e){(null==x?void 0:x.default_sales_channel)&&!e.find(function(e){return e.id===x.default_sales_channel.id})&&l(!0),u(e)}})]})};var Cv=r(33829);let Cg=function(e){var t=e.form,r=e.options,n=e.onCreateOption,i=t.control,a=t.path,o=(0,eR.jz)({control:t.control,name:a(),keyName:"fieldId"}).fields;return(0,z.jsx)("div",{className:"gap-large pb-2xsmall grid grid-cols-2",children:o.map(function(e,t){return(0,z.jsx)(eR.xI,{control:i,name:a("".concat(t,".option")),render:function(t){var i=t.field,a=i.value,o=i.onChange,l=i.onBlur,s=i.ref;return(0,z.jsx)(sj,{ref:s,value:a,onChange:o,onBlur:l,label:e.title,placeholder:"Choose an option",required:!0,options:r.filter(function(t){return t.option_id===e.option_id})||[],onCreateOption:function(t){var r={option_id:e.option_id,value:t,label:t};n(e.option_id,t),o(r)}})}},e.fieldId)})})},Cx=function(e){var t=e.form,r=e.options,n=e.onCreateOption;return(0,z.jsxs)(sV,{type:"multiple",defaultValue:["general"],children:[(0,z.jsx)(sV.Item,{title:"General",value:"general",required:!0,children:(0,z.jsxs)("div",{children:[(0,z.jsx)(OE,{form:(0,eL.m)(t,"general")}),(0,z.jsxs)("div",{className:"mt-xlarge",children:[(0,z.jsxs)("div",{className:"gap-x-2xsmall mb-base flex items-center",children:[(0,z.jsx)("h3",{className:"inter-base-semibold",children:"Options"}),(0,z.jsx)(e0.A,{type:"info",content:"Options are used to define the color, size, etc. of the variant."})]}),(0,z.jsx)(Cg,{form:(0,eL.m)(t,"options"),options:r,onCreateOption:n}),(0,z.jsx)(rH.A,{errors:t.formState.errors,name:"options"})]})]})}),(0,z.jsx)(sV.Item,{title:"Stock & Inventory",value:"stock",children:(0,z.jsx)(OV,{form:(0,eL.m)(t,"stock")})}),(0,z.jsxs)(sV.Item,{title:"Shipping",value:"shipping",children:[(0,z.jsx)("p",{className:"inter-base-regular text-grey-50",children:"Shipping information can be required depending on your shipping provider, and whether or not you are shipping internationally."}),(0,z.jsxs)("div",{className:"mt-large",children:[(0,z.jsx)("h3",{className:"inter-base-semibold mb-2xsmall",children:"Dimensions"}),(0,z.jsx)("p",{className:"inter-base-regular text-grey-50 mb-large",children:"Configure to calculate the most accurate shipping rates."}),(0,z.jsx)(uk,{form:(0,eL.m)(t,"dimensions")})]}),(0,z.jsxs)("div",{className:"mt-xlarge",children:[(0,z.jsx)("h3",{className:"inter-base-semibold mb-2xsmall",children:"Customs"}),(0,z.jsx)("p",{className:"inter-base-regular text-grey-50 mb-large",children:"Configure if you are shipping internationally."}),(0,z.jsx)(uC,{form:(0,eL.m)(t,"customs")})]})]})]})},Cj=function(e){var t=e.control,r=e.path,n=(0,eR.FH)({control:t,name:r("entries")}),i=(0,eR.FH)({control:t,name:r("options")}),a=(0,U.useMemo)(function(){var e=null==n?void 0:n.filter(function(e){return e.options.every(function(e){return null!==e.option})});return null==e?void 0:e.map(function(e){return{id:e._internal_id,value_combo:e.options.map(function(e){return e.option})}})},[n]);return{checkForDuplicate:function(e){var t=e.id,r=e.options;return null!=a&&!!a.length&&a.filter(function(e){return e.id!==t}).some(function(e){return(0,t6.isEqual)(e.value_combo.map(function(e){return null==e?void 0:e.value}),r.map(function(e){return null==e?void 0:e.value}))})},getOptions:function(){return null==i?void 0:i.map(function(e){return e.values.map(function(t){return{option_id:e.id,value:t,label:t}})}).flat()}}};function Cw(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function CO(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function CS(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Cw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Cw(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var CP={CARD:"card"},CC=function(e){var t=e.source,r=e.productCustoms,n=e.productDimensions,i=t.options,a=t.dimensions,o=t.customs,l=t.stock,s=l.barcode,c=l.upc,u=l.ean,d=l.sku,f=l.inventory_quantity,p=t.general.title;if(!i||!i.length)return(0,z.jsx)(e0.A,{type:"error",content:(0,z.jsx)("div",{className:"gap-y-2xsmall flex flex-col text-rose-50",children:(0,z.jsx)("p",{children:"This variant has no options."})})});var m=i.filter(function(e){var t;return!(null===(t=e.option)||void 0===t?void 0:t.value)});if(null==m?void 0:m.length)return(0,z.jsx)(e0.A,{type:"error",content:(0,z.jsxs)("div",{className:"gap-y-2xsmall flex flex-col text-rose-50",children:[(0,z.jsx)("p",{children:"You are missing options values for the following options:"}),(0,z.jsx)("ul",{className:"list-inside list-disc",children:m.map(function(e,t){return(0,z.jsx)("li",{children:e.title||"Option ".concat(t+1)},t)})})]})});var h=Object.values(n).every(function(e){return!!e})||Object.values(a).every(function(e){return!!e}),y=Object.values(r).every(function(e){return!!e})||Object.values(o).every(function(e){return!!e}),b=!!s||!!c||!!u;return d&&y&&h&&b?(0,z.jsx)(r9.A,{content:p?"".concat(p," is valid"):"Variant is valid",side:"top",children:(0,z.jsx)(dD.A,{size:20,className:"text-emerald-40"})}):(0,z.jsx)(e0.A,{type:"warning",side:"right",content:(0,z.jsxs)("div",{className:"gap-y-2xsmall flex flex-col text-orange-50",children:[(0,z.jsx)("p",{children:"Your variant is createable, but it's missing some important fields:"}),(0,z.jsxs)("ul",{className:"list-inside list-disc",children:[!h&&(0,z.jsx)("li",{children:"Dimensions"}),!y&&(0,z.jsx)("li",{children:"Customs"}),!f&&(0,z.jsx)("li",{children:"Inventory quantity"}),!d&&(0,z.jsx)("li",{children:"SKU"}),!b&&(0,z.jsx)("li",{children:"Barcode"})]})]})})};let CA=function(e){var t,r,n=e.id,i=e.source,a=e.index,o=e.save,l=e.remove,s=e.move,c=e.options,u=e.onCreateOption,d=e.productDimensions,f=e.productCustoms,p=(0,ei.Bd)().t,m=(0,n5.A)(),h=m.state,y=m.toggle,b=m.close,v=(0,eR.mN)({defaultValues:i}),g=v.handleSubmit,x=v.reset;(0,U.useEffect)(function(){x(i)},[i]);var j=function(){x(i),b()},w=g(function(e){var t,r;if(!o(a,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),r=r={title:e.general.title?e.general.title:e.options.map(function(e){var t;return null===(t=e.option)||void 0===t?void 0:t.value}).join(" / ")},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))){v.setError("options",{type:"deps",message:p("new-variant-a-variant-with-these-options-already-exists","A variant with these options already exists.")});return}j()}),O=rL(),S=(t=function(){return function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,function(e){switch(e.label){case 0:return[4,O({text:p("new-variant-are-you-sure-you-want-to-delete-this-variant","Are you sure you want to delete this variant?"),heading:p("new-variant-delete-variant","Delete Variant")})];case 1:return e.sent()&&l(a),[2]}})},r=function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function o(e){CO(a,n,i,o,l,"next",e)}function l(e){CO(a,n,i,o,l,"throw",e)}o(void 0)})},function(){return r.apply(this,arguments)}),P=(0,U.useRef)(null),C=CS((0,Su.H)({accept:CP.CARD,collect:function(e){return{handlerId:e.getHandlerId()}},hover:function(e,t){if(P.current){var r,n=e.index;if(n!==a){var i=null===(r=P.current)||void 0===r?void 0:r.getBoundingClientRect(),o=(i.bottom-i.top)/2,l=t.getClientOffset().y-i.top;n<a&&l<o||n>a&&l>o||(s(n,a),e.index=a)}}}}),2),A=C[0].handlerId,N=C[1],k=CS((0,Sd.i)({type:CP.CARD,item:function(){return{id:n,index:a}},collect:function(e){return{isDragging:e.isDragging()}}}),3),_=k[0].isDragging,E=k[1],I=k[2];E(N(P));var D=(0,U.useContext)(a7.H8);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("div",{ref:I,"data-handler-id":A,className:(0,en.default)("rounded-rounded py-xsmall pl-xsmall pr-base focus-within:bg-grey-5 hover:bg-grey-5 grid h-16 translate-x-0 translate-y-0 grid-cols-[32px_1fr_90px_100px_48px] transition-all",{"opacity-50":_}),children:[(0,z.jsx)("div",{ref:P,className:"text-grey-40 flex cursor-move items-center justify-center",children:(0,z.jsx)(Sf,{size:20})}),(0,z.jsxs)("div",{className:"ml-base flex flex-col justify-center",children:[(0,z.jsxs)("p",{className:"inter-base-semibold",children:[i.general.title,i.stock.sku&&(0,z.jsxs)("span",{className:"inter-base-regular ml-2xsmall text-grey-50",children:["(",i.stock.sku,")"]})]}),i.stock.ean&&(0,z.jsx)("span",{className:"inter-base-regular text-grey-50",children:i.stock.ean})]}),(0,z.jsx)("div",{className:"mr-xlarge flex items-center justify-end",children:(0,z.jsx)("p",{children:i.stock.inventory_quantity||"-"})}),(0,z.jsx)("div",{className:"flex items-center justify-center",children:(0,z.jsx)(CC,{source:i,productCustoms:f,productDimensions:d})}),(0,z.jsx)("div",{className:"ml-xlarge pr-base flex items-center justify-center",children:(0,z.jsx)(em,{forceDropdown:!0,actions:[{label:p("new-variant-edit","Edit"),icon:(0,z.jsx)(ec,{size:20}),onClick:y},{label:p("new-variant-delete","Delete"),icon:(0,z.jsx)(eu,{size:20}),onClick:S,variant:"danger"}],customTrigger:(0,z.jsx)(W.A,{variant:"ghost",className:"h-xlarge w-xlarge text-grey-50 flex items-center justify-center p-0",children:(0,z.jsx)(ef,{size:20})})})})]}),(0,z.jsx)(a7.Ay,{context:D,open:h,handleClose:j,children:(0,z.jsxs)(eN.A.Body,{children:[(0,z.jsx)(eN.A.Header,{handleClose:j,children:(0,z.jsxs)("h1",{className:"inter-xlarge-semibold",children:[p("new-variant-edit-variant","Edit Variant"),i.general.title&&(0,z.jsxs)("span",{className:"inter-xlarge-regular ml-xsmall text-grey-50",children:["(",i.general.title,")"]})]})}),(0,z.jsx)(eN.A.Content,{children:(0,z.jsx)(Cx,{form:v,options:c,onCreateOption:u})}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"gap-x-xsmall flex w-full items-center justify-end",children:[(0,z.jsx)(W.A,{variant:"secondary",size:"small",type:"button",onClick:j,children:p("new-variant-cancel","Cancel")}),(0,z.jsx)(W.A,{variant:"primary",size:"small",type:"button",onClick:w,children:p("new-variant-save-and-close","Save and close")})]})})]})})]})};function CN(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Ck(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function C_(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}let CE=function(e){var t=e.form,r=e.productCustoms,n=e.productDimensions,i=(0,ei.Bd)().t,a=(0,U.useContext)(a7.H8),o=t.control,l=t.path,s=t.register,c=Cj(t),u=c.checkForDuplicate,d=c.getOptions,f=(0,eR.jz)({control:o,name:l("options"),keyName:"fieldId",shouldUnregister:!0}),p=f.fields,m=f.append,h=f.remove,y=f.update,b=(0,eR.jz)({control:o,name:l("entries"),shouldUnregister:!0}),v=b.fields,g=b.append,x=b.remove,j=b.update,w=b.move,O=(0,eR.FH)({control:o,name:l("options")}),S=(0,eR.FH)({control:o,name:l("entries")}),P=(0,e8.d)(O,500);(0,U.useEffect)(function(){if(null==P?void 0:P.length){var e=P.reduce(function(e,t){return e[t.id]=t,e},{}),t=null==S?void 0:S.map(function(e,t){return{variant:e,index:t}});t&&t.forEach(function(t){var r=t.variant,n=t.index,i=r.options,a=[];i.forEach(function(t){var r,n=e[t.option_id];n&&(t.title=n.title,(null===(r=t.option)||void 0===r?void 0:r.value)&&n.values.includes(t.option.value)||(t.option=null),a.push(t))});var o=a.map(function(e){return e.option_id});Object.keys(e).filter(function(e){return!o.includes(e)}).forEach(function(t){var r=e[t];a.push({option_id:t,title:r.title,option:null})}),j(n,C_(Ck({},r),{options:a.map(function(e){return{id:(0,Cv.A)(),option_id:e.option_id,title:e.title,value:e,option:e.option}})}))})}},[P]);var C=function(e){var t=O[e];h(e),t&&(null==S||S.forEach(function(e,r){var n=e.options.filter(function(e){return e.option_id!==t.id});j(r,C_(Ck({},e),{options:n}))}))},A=function(e,t){return!u({id:t._internal_id,options:t.options.map(function(e){return e.option})})&&(j(e,t),!0)},N=(0,U.useMemo)(function(){return(null==O?void 0:O.length)>0&&O.some(function(e){return e.values.length>0})},[O]),k=(0,eR.mN)(),_=k.reset,E=k.handleSubmit,I=(0,n5.A)(),D=I.state,T=I.toggle,M=function(){_({_internal_id:(0,Cv.A)(),general:{title:null,material:null},prices:{prices:[]},stock:{manage_inventory:!0,allow_backorder:!1,sku:null,barcode:null,ean:null,upc:null,inventory_quantity:null},dimensions:{weight:null,length:null,width:null,height:null},customs:{hs_code:null,mid_code:null,origin_country:null},options:(null==O?void 0:O.map(function(e){return{title:e.title,option_id:e.id,option:null}}))||[]}),T()},R=E(function(e){if(u({id:e._internal_id,options:e.options.map(function(e){return e.option}).filter(function(e){return!!e})})){k.setError("options",{type:"deps",message:i("add-variants-a-variant-with-these-options-already-exists","A variant with these options already exists.")});return}g(C_(Ck({},e),{options:e.options,general:C_(Ck({},e.general),{title:e.general.title?e.general.title:e.options.map(function(e){var t;return null===(t=e.option)||void 0===t?void 0:t.value}).join(" / ")})})),M()}),L=(0,U.useCallback)(function(e,t){w(e,t)},[]),F=function(e,t){var r,n=null==O?void 0:O.find(function(t){return t.id===e});n&&y(null==O?void 0:O.findIndex(function(t){return t.id===e}),C_(Ck({},n),{values:((function(e){if(Array.isArray(e))return CN(e)})(r=n.values)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return CN(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return CN(e,void 0)}}(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([t])}))};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("div",{children:[(0,z.jsxs)("div",{className:"gap-x-2xsmall flex items-center",children:[(0,z.jsx)("h3",{className:"inter-base-semibold",children:i("add-variants-product-options","Product options")}),(0,z.jsx)(e0.A,{type:"info",content:i("add-variants-options-are-used-to-define-the-color-size-etc-of-the-product","Options are used to define the color, size, etc. of the product.")})]}),(0,z.jsxs)("div",{children:[p.length>0&&(0,z.jsxs)("div",{className:"mt-small",children:[(0,z.jsxs)("div",{className:"inter-small-semibold mb-small gap-x-xsmall text-grey-50 grid grid-cols-[230px_1fr_40px]",children:[(0,z.jsx)("span",{children:i("add-variants-option-title","Option title")}),(0,z.jsx)("span",{children:i("add-variants-variations-comma-separated","Variations (comma separated)")})]}),(0,z.jsx)("div",{className:"gap-y-xsmall grid grid-cols-1",children:p.map(function(e,t){return(0,z.jsxs)("div",{className:"gap-x-xsmall grid grid-cols-[230px_1fr_40px]",children:[(0,z.jsx)(e1.A,Ck({placeholder:i("add-variants-color","Color...")},s(l("options.".concat(t,".title"))))),(0,z.jsx)(eR.xI,{control:o,name:l("options.".concat(t,".values")),render:function(e){var t=e.field,r=t.value,n=t.onChange;return(0,z.jsx)(dm,{onValidate:function(e){return r.includes(e)?null:e},invalidMessage:i("add-variants-already-exists","already exists"),showLabel:!1,values:r,onChange:n,placeholder:i("add-variants-blue-red-black","Blue, Red, Black...")})}}),(0,z.jsx)(W.A,{variant:"secondary",size:"small",type:"button",className:"h-10",onClick:function(){return C(t)},children:(0,z.jsx)(eu,{size:20,className:"text-grey-40"})})]},e.fieldId)})})]}),(0,z.jsxs)(W.A,{variant:"secondary",size:"small",className:"mt-base h-10 w-full",type:"button",onClick:function(){m({id:(0,Cv.A)(),title:"",values:[]})},children:[(0,z.jsx)(n_.A,{size:20}),(0,z.jsx)("span",{children:i("add-variants-add-an-option","Add an option")})]}),(0,z.jsxs)("div",{className:"mt-xlarge",children:[(0,z.jsxs)("div",{className:"gap-x-2xsmall flex items-center",children:[(0,z.jsxs)("h3",{className:(0,en.default)("inter-base-semibold",{"opacity-50":!p.length}),children:[i("add-variants-product-variants","Product variants")," ",(0,z.jsxs)("span",{className:"inter-base-regular text-grey-50",children:["(",(null==v?void 0:v.length)||0,")"]})]}),!N&&(0,z.jsx)(e0.A,{type:"info",content:i("add-variants-you-must-add-at-least-one-product-option-before-you-can-begin-adding-product-variants","You must add at least one product option before you can begin adding product variants.")})]}),(null==v?void 0:v.length)>0&&(0,z.jsxs)("div",{className:"mt-small",children:[(0,z.jsxs)("div",{className:"inter-small-semibold pr-base text-grey-50 grid grid-cols-[1fr_90px_100px_48px]",children:[(0,z.jsx)("p",{children:i("add-variants-variant","Variant")}),(0,z.jsx)("div",{className:"mr-xlarge flex justify-end",children:(0,z.jsx)("p",{children:i("add-variants-inventory","Inventory")})})]}),(0,z.jsx)("div",{children:null==v?void 0:v.map(function(e,t){return(0,z.jsx)(CA,{id:e.id,source:e,index:t,save:A,remove:x,move:L,options:d(),onCreateOption:F,productDimensions:n,productCustoms:r},e.id)})})]}),(0,z.jsxs)(W.A,{variant:"secondary",size:"small",className:"mt-base h-10 w-full",type:"button",disabled:!N,onClick:M,children:[(0,z.jsx)(n_.A,{size:20}),(0,z.jsx)("span",{children:i("add-variants-add-a-variant","Add a variant")})]})]})]})]}),(0,z.jsx)(a7.Ay,{context:a,open:D,handleClose:M,children:(0,z.jsxs)(eN.A.Body,{children:[(0,z.jsx)(eN.A.Header,{handleClose:M,children:(0,z.jsx)("h1",{className:"inter-xlarge-semibold",children:i("add-variants-create-variant","Create Variant")})}),(0,z.jsx)(eN.A.Content,{children:(0,z.jsx)(Cx,{form:k,options:d(),onCreateOption:F})}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"gap-x-xsmall flex w-full items-center justify-end",children:[(0,z.jsx)(W.A,{variant:"secondary",size:"small",type:"button",onClick:M,children:i("add-variants-cancel","Cancel")}),(0,z.jsx)(W.A,{variant:"primary",size:"small",type:"button",onClick:R,children:i("add-variants-save-and-close","Save and close")})]})})]})})]})};function CI(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function CD(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function o(e){CI(a,n,i,o,l,"next",e)}function l(e){CI(a,n,i,o,l,"throw",e)}o(void 0)})}}function CT(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}var CM=function(e){var t,r,n,i=!(arguments.length>1)||void 0===arguments[1]||arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o={title:e.general.title,subtitle:e.general.subtitle||void 0,material:e.general.material||void 0,handle:e.general.handle,discountable:e.discounted.value,is_giftcard:!1,collection_id:null===(t=e.organize.collection)||void 0===t?void 0:t.value,description:e.general.description||void 0,height:e.dimensions.height||void 0,length:e.dimensions.length||void 0,weight:e.dimensions.weight||void 0,width:e.dimensions.width||void 0,hs_code:e.customs.hs_code||void 0,mid_code:e.customs.mid_code||void 0,type:e.organize.type?{value:e.organize.type.label,id:e.organize.type.value}:void 0,tags:e.organize.tags?e.organize.tags.map(function(e){return{value:e}}):void 0,categories:(null===(r=e.organize.categories)||void 0===r?void 0:r.length)?e.organize.categories.map(function(e){return{id:e}}):void 0,origin_country:(null===(n=e.customs.origin_country)||void 0===n?void 0:n.value)||void 0,options:e.variants.options.map(function(e){return{title:e.title}}),variants:e.variants.entries.map(function(e){var t;return{title:e.general.title,material:e.general.material||void 0,inventory_quantity:e.stock.inventory_quantity||0,prices:CL(e.prices),allow_backorder:e.stock.allow_backorder,sku:e.stock.sku||void 0,barcode:e.stock.barcode||void 0,options:e.options.map(function(e){var t;return{value:null===(t=e.option)||void 0===t?void 0:t.value}}),ean:e.stock.ean||void 0,upc:e.stock.upc||void 0,height:e.dimensions.height||void 0,length:e.dimensions.length||void 0,weight:e.dimensions.weight||void 0,width:e.dimensions.width||void 0,hs_code:e.customs.hs_code||void 0,mid_code:e.customs.mid_code||void 0,origin_country:(null===(t=e.customs.origin_country)||void 0===t?void 0:t.value)||void 0,manage_inventory:e.stock.manage_inventory}}),status:i?p.PUBLISHED:p.DRAFT};return a&&(o.sales_channels=e.salesChannels.channels.map(function(e){return{id:e.id}})),o},CR=function(){return{general:{title:"",material:null,subtitle:null,description:null,handle:""},customs:{hs_code:null,mid_code:null,origin_country:null},dimensions:{height:null,length:null,weight:null,width:null},discounted:{value:!0},media:{images:[]},organize:{categories:null,collection:null,tags:null,type:null},salesChannels:{channels:[]},thumbnail:{images:[]},variants:{entries:[],options:[]}}},CL=function(e){return e.prices.filter(function(e){return"number"==typeof e.amount}).map(function(e){return{amount:e.amount,currency_code:e.region_id?void 0:e.currency_code,region_id:e.region_id||void 0}})};let Cz=function(e){var t,r=e.onClose,n=(0,ei.Bd)().t,i=(0,eR.mN)({defaultValues:CR()}),a=(0,J.useAdminCreateProduct)().mutate,o=(0,H.useNavigate)(),l=(0,eC.A)(),s=(0,eR.FH)({control:i.control,name:"customs"}),c=(0,eR.FH)({control:i.control,name:"dimensions"}),u=i.handleSubmit,d=i.formState.isDirty,f=i.reset,p=function(){f(CR()),r()};(0,U.useEffect)(function(){f(CR())},[]);var m=(0,rz.u)().isFeatureEnabled,h=function(){var e,t=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return u((e=CD(function(e){var r,i,s,c,u,d,f,h,y,v,g,x,j,w;return CT(this,function(O){switch(O.label){case 0:if(u=new Map(e.variants.entries.map(function(e){return[e.options.map(function(e){var t=e.option;return(null==t?void 0:t.value)||""}).sort().join(","),e.stock.stock_location]})),d=CM(e,t,m("sales_channels")),!(null===(i=e.media)||void 0===i?void 0:null===(r=i.images)||void 0===r?void 0:r.length))return[3,5];f=[],O.label=1;case 1:return O.trys.push([1,3,,4]),[4,dk(e.media.images)];case 2:return f=O.sent(),[3,4];case 3:return h=O.sent(),y=n("new-something-went-wrong-while-trying-to-upload-images","Something went wrong while trying to upload images."),500===h.response.status&&(y=y+" "+n("new-no-file-service-configured","You might not have a file service configured. Please contact your administrator")),l(n("new-error","Error"),y,"error"),[2];case 4:v=f.map(function(e){return e.url}),d.images=v,O.label=5;case 5:if(!(null===(c=e.thumbnail)||void 0===c?void 0:null===(s=c.images)||void 0===s?void 0:s.length))return[3,10];g=[],O.label=6;case 6:return O.trys.push([6,8,,9]),[4,dk(e.thumbnail.images)];case 7:return g=O.sent(),[3,9];case 8:return x=O.sent(),j=n("new-upload-thumbnail-error","Something went wrong while trying to upload the thumbnail."),500===x.response.status&&(j=j+" "+n("new-no-file-service-configured","You might not have a file service configured. Please contact your administrator")),l(n("new-error","Error"),j,"error"),[2];case 9:w=g.map(function(e){return e.url}),d.thumbnail=w[0],O.label=10;case 10:return a(d,{onSuccess:function(e){var t=e.product;b(t.variants,u).then(function(){p(),o("/a/products/".concat(t.id))})},onError:function(e){l(n("new-error","Error"),(0,eA.u)(e),"error")}}),[2]}})}),function(t){return e.apply(this,arguments)}))},y=(0,J.useMedusa)().client,b=(t=CD(function(e,t){return CT(this,function(r){switch(r.label){case 0:var n;return[4,Promise.all(e.map((n=CD(function(e){var r,n;return CT(this,function(i){switch(i.label){case 0:if(r=e.options.map(function(e){return(null==e?void 0:e.value)||""}).sort().join(","),!(null==(n=t.get(r))?void 0:n.length))return[2];return[4,y.admin.variants.getInventory(e.id)];case 1:var a;return[4,Promise.all(i.sent().variant.inventory.map((a=CD(function(e){return CT(this,function(t){var r;return[2,Promise.all(n.map((r=CD(function(t){return CT(this,function(r){return y.admin.inventoryItems.createLocationLevel(e.id,{location_id:t.location_id,stocked_quantity:t.stocked_quantity}),[2]})}),function(e){return r.apply(this,arguments)})))]})}),function(e){return a.apply(this,arguments)})).flat())];case 2:return[2,i.sent()]}})}),function(e){return n.apply(this,arguments)})).flat())];case 1:return r.sent(),[2]}})}),function(e,r){return t.apply(this,arguments)});return(0,z.jsx)("form",{className:"w-full",children:(0,z.jsxs)(sF.A,{children:[(0,z.jsx)(sF.A.Header,{children:(0,z.jsxs)("div",{className:"medium:w-8/12 flex w-full justify-between px-8",children:[(0,z.jsx)(W.A,{size:"small",variant:"ghost",type:"button",onClick:p,children:(0,z.jsx)(ao.A,{size:20})}),(0,z.jsxs)("div",{className:"gap-x-small flex",children:[(0,z.jsx)(W.A,{size:"small",variant:"secondary",type:"button",disabled:!d,onClick:h(!1),children:n("new-save-as-draft","Save as draft")}),(0,z.jsx)(W.A,{size:"small",variant:"primary",type:"button",disabled:!d,onClick:h(!0),children:n("new-publish-product","Publish product")})]})]})}),(0,z.jsx)(sF.A.Main,{className:"no-scrollbar flex w-full justify-center py-16",children:(0,z.jsx)("div",{className:"small:w-4/5 medium:w-7/12 large:w-6/12 max-w-[700px]",children:(0,z.jsxs)(sV,{defaultValue:["general"],type:"multiple",children:[(0,z.jsxs)(sV.Item,{value:"general",title:n("new-general-information-title","General information"),required:!0,children:[(0,z.jsx)("p",{className:"inter-base-regular text-grey-50",children:n("new-to-start-selling-all-you-need-is-a-name-and-a-price","To start selling, all you need is a name and a price.")}),(0,z.jsxs)("div",{className:"mt-xlarge gap-y-xlarge flex flex-col",children:[(0,z.jsx)(u4,{form:(0,eL.m)(i,"general"),requireHandle:!1}),(0,z.jsx)(u3,{form:(0,eL.m)(i,"discounted")})]})]}),(0,z.jsxs)(sV.Item,{title:"Organize",value:"organize",children:[(0,z.jsx)("p",{className:"inter-base-regular text-grey-50",children:n("new-to-start-selling-all-you-need-is-a-name-and-a-price","To start selling, all you need is a name and a price.")}),(0,z.jsx)("div",{className:"mt-xlarge gap-y-xlarge pb-xsmall flex flex-col",children:(0,z.jsxs)("div",{children:[(0,z.jsx)("h3",{className:"inter-base-semibold mb-base",children:n("new-organize-product","Organize Product")}),(0,z.jsx)(db,{form:(0,eL.m)(i,"organize")}),(0,z.jsx)(uT,{featureFlag:"sales_channels",children:(0,z.jsx)("div",{className:"mt-xlarge",children:(0,z.jsx)(Cb,{form:(0,eL.m)(i,"salesChannels")})})})]})})]}),(0,z.jsxs)(sV.Item,{title:"Variants",value:"variants",children:[(0,z.jsxs)("p",{className:"inter-base-regular text-grey-50",children:[n("new-add-variations-of-this-product","Add variations of this product."),(0,z.jsx)("br",{}),n("new-offer-your-customers-different-options-for-color-format-size-shape-etc","Offer your customers different options for color, format, size, shape, etc.")]}),(0,z.jsx)("div",{className:"mt-large",children:(0,z.jsx)(CE,{form:(0,eL.m)(i,"variants"),productCustoms:s,productDimensions:c})})]}),(0,z.jsxs)(sV.Item,{title:"Attributes",value:"attributes",children:[(0,z.jsx)("p",{className:"inter-base-regular text-grey-50",children:n("new-used-for-shipping-and-customs-purposes","Used for shipping and customs purposes.")}),(0,z.jsxs)("div",{className:"my-xlarge",children:[(0,z.jsx)("h3",{className:"inter-base-semibold mb-base",children:n("new-dimensions","Dimensions")}),(0,z.jsx)(uk,{form:(0,eL.m)(i,"dimensions")})]}),(0,z.jsxs)("div",{children:[(0,z.jsx)("h3",{className:"inter-base-semibold mb-base",children:n("new-customs","Customs")}),(0,z.jsx)(uC,{form:(0,eL.m)(i,"customs")})]})]}),(0,z.jsxs)(sV.Item,{title:"Thumbnail",value:"thumbnail",children:[(0,z.jsx)("p",{className:"inter-base-regular mb-large text-grey-50",children:n("new-used-to-represent-your-product-during-checkout-social-sharing-and-more","Used to represent your product during checkout, social sharing and more.")}),(0,z.jsx)(dG,{form:(0,eL.m)(i,"thumbnail")})]}),(0,z.jsxs)(sV.Item,{title:n("new-media","Media"),value:"media",children:[(0,z.jsx)("p",{className:"inter-base-regular mb-large text-grey-50",children:n("new-add-images-to-your-product","Add images to your product.")}),(0,z.jsx)(dR,{form:(0,eL.m)(i,"media")})]})]})})})]})})};function CF(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function CB(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function Cq(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CH(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Cq(e,t,r[t])})}return e}function CU(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function CV(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return CF(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return CF(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var CG=["products","collections"];let CW=function(){var e,t,r=(0,ei.Bd)().t,n=(0,H.useNavigate)(),i=(0,H.useLocation)(),a=CV((0,U.useState)("products"),2),o=a[0],l=a[1],s=(0,n5.A)(!i.search.includes("view=collections")&&i.search.includes("modal=new")),c=s.state,u=s.close,d=s.open,f=(0,m4.nm)().resetInterval,p=(0,J.useAdminCreateBatchJob)(),m=(0,eC.A)(),h=(0,J.useAdminCreateCollection)(),y=(0,tY.X)().getWidgets;(0,U.useEffect)(function(){i.search.includes("?view=collections")&&l("collections")},[i]),(0,U.useEffect)(function(){i.search=""},[o]);var b=CV((0,U.useState)(!1),2),v=b[0],g=b[1],x=(0,n5.A)(!i.search.includes("view=collections")&&i.search.includes("modal=export")),j=x.open,w=x.close,O=x.state,S=(0,n5.A)(!i.search.includes("view=collections")&&i.search.includes("modal=import")),P=S.open,C=S.close,A=S.state,N=(e=function(e,t){var i;return function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,function(a){switch(a.label){case 0:return i=t.filter(function(e){return e.key&&e.value}).reduce(function(e,t){return CU(CH({},e),Cq({},t.key,t.value))},{}),[4,h.mutateAsync(CU(CH({},e),{metadata:i}),{onSuccess:function(e){var t=e.collection;m(r("overview-success","Success"),r("overview-successfully-created-collection","Successfully created collection"),"success"),n("/a/collections/".concat(t.id)),g(!1)},onError:function(e){return m(r("overview-error","Error"),(0,eA.u)(e),"error")}})];case 1:return a.sent(),[2]}})},t=function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function o(e){CB(a,n,i,o,l,"next",e)}function l(e){CB(a,n,i,o,l,"throw",e)}o(void 0)})},function(e,r){return t.apply(this,arguments)});return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("div",{className:"gap-y-xsmall flex h-full grow flex-col",children:[y("product.list.before").map(function(e,t){return(0,z.jsx)(es.A,{injectionZone:"product.list.before",widget:e,entity:void 0},t)}),(0,z.jsxs)("div",{className:"flex w-full grow flex-col",children:[(0,z.jsx)(eD,{forceDropdown:!1,customActionable:"products"===o?(0,z.jsxs)("div",{className:"flex space-x-2",children:[(0,z.jsxs)(W.A,{variant:"secondary",size:"small",onClick:function(){return P()},children:[(0,z.jsx)(Pp,{size:20}),r("overview-import-products","Import Products")]}),(0,z.jsxs)(W.A,{variant:"secondary",size:"small",onClick:function(){return j()},children:[(0,z.jsx)(mP,{size:20}),r("overview-export-products","Export Products")]}),(0,z.jsxs)(W.A,{variant:"secondary",size:"small",onClick:d,children:[(0,z.jsx)(n_.A,{size:20}),r("overview-new-product","New Product")]})]}):(0,z.jsx)("div",{className:"flex space-x-2",children:(0,z.jsxs)(W.A,{variant:"secondary",size:"small",onClick:function(){return g(!v)},children:[(0,z.jsx)(n_.A,{size:20}),r("overview-new-collection","New Collection")]})}),customHeader:(0,z.jsx)(n6,{views:CG,setActiveView:l,activeView:o}),className:"h-fit",children:(0,z.jsx)(function(){return"products"===o?(0,z.jsx)(P9,{}):(0,z.jsx)(Pw,{})},{})}),(0,z.jsx)(el,{})]}),y("product.list.after").map(function(e,t){return(0,z.jsx)(es.A,{injectionZone:"product.list.after",widget:e,entity:void 0},t)})]}),v&&(0,z.jsx)(e6,{onClose:function(){return g(!v)},onSubmit:N}),O&&(0,z.jsx)(mC,{title:"Export Products",handleClose:function(){return w()},onSubmit:function(){p.mutate({type:"product-export",context:{},dry_run:!1},{onSuccess:function(){f(),m(r("overview-success","Success"),r("overview-successfully-initiated-export","Successfully initiated export"),"success")},onError:function(e){m(r("overview-error","Error"),(0,eA.u)(e),"error")}}),w()},loading:p.isLoading}),A&&(0,z.jsx)(Ch,{handleClose:function(){return C()}}),(0,z.jsx)(ik.A,{isVisible:c,isFullScreen:!0,children:(0,z.jsx)(Cz,{onClose:u})})]})},CY=function(){var e=(0,(0,V.Y)().getNestedRoutes)("/products");return(0,z.jsxs)(H.Routes,{children:[(0,z.jsx)(H.Route,{index:!0,element:(0,z.jsx)(CW,{})}),(0,z.jsx)(H.Route,{path:"/:id",element:(0,z.jsx)(Pf,{})}),e.map(function(e,t){return(0,z.jsx)(H.Route,{path:e.path,element:(0,z.jsx)(Z,{route:e,previousPath:"/products"})},t)})]})},C$=function(e){var t=(0,t6.sortBy)(e.channels,"name");if(!t.length)return null;var r=t.map(function(e){return e.name}).join(", "),n=t.slice(0,e.showCount).map(function(e){return e.name}).join(", "),i=t.length-e.showCount;return(0,z.jsxs)("div",{title:r,className:"text-small",children:[(0,z.jsx)("span",{children:n}),i>0&&(0,z.jsxs)("span",{className:"text-grey-50",children:[" + ",i," more"]})]})};function CQ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function CK(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var CZ=[{width:30,id:"selection",Header:function(e){var t=e.getToggleAllPageRowsSelectedProps;return(0,z.jsx)("span",{className:"flex w-[30px] justify-center",children:(0,z.jsx)(tt,CQ({},t()))})},Cell:function(e){var t=e.row;return(0,z.jsx)("span",{onClick:function(e){return e.stopPropagation()},className:"flex w-[30px] justify-center",children:(0,z.jsx)(tt,CQ({},t.getToggleRowSelectedProps()))})}},{Header:(0,z.jsx)(ei.wD,{children:function(e){return e("tables-title","Title")}}),accessor:"name",maxWidth:160,width:160,Cell:function(e){var t=e.row;return(0,z.jsx)("span",{title:t.original.name,className:"block max-w-[160px] truncate",children:t.original.name})}},{Header:(0,z.jsx)(ei.wD,{children:function(e){return e("tables-description","Description")}}),accessor:"description",Cell:function(e){var t=e.row;return(0,z.jsx)("span",{title:t.original.description,className:"block max-w-[200px] truncate",children:t.original.description})}}],CJ=(0,U.forwardRef)(function(e,t){var r,n=(0,ei.Bd)().t,i=e.query,a=e.offset,o=e.data,l=e.isLoading,s=e.count,c=e.setOffset,u=e.selectedChannels,d=e.setSelectedChannels,f={data:o,columns:CZ,autoResetPage:!1,manualPagination:!0,autoResetSelectedRows:!1,initialState:{pageIndex:Math.floor(a/12),pageSize:12,selectedRowIds:Object.keys(u).reduce(function(e,t){return e[t]=!0,e},{})},pageCount:Math.ceil(s/12),getRowId:function(e){return e.id}},p=(0,e4.useTable)(f,e4.usePagination,e4.useRowSelect);return(0,U.useEffect)(function(){d(function(e){var t={};return Object.keys(p.state.selectedRowIds).forEach(function(r){t[r]=e[r]||o.find(function(e){return e.id===r})}),t})},[p.state.selectedRowIds,o]),(0,U.useEffect)(function(){c(0),p.gotoPage(0)},[i]),(0,U.useImperativeHandle)(t,function(){return{toggleAllRowsSelected:p.toggleAllRowsSelected,toggleRowSelected:p.toggleRowSelected}}),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(tb,{hasPagination:!0,numberOfRows:12,isLoading:l,children:[(0,z.jsxs)(td,CK(CQ({},p.getTableProps()),{children:[(0,z.jsx)(td.Head,{children:null===(r=p.headerGroups)||void 0===r?void 0:r.map(function(e){return(0,z.jsx)(td.HeadRow,CK(CQ({},e.getHeaderGroupProps()),{children:e.headers.map(function(e){return(0,z.jsx)(td.HeadCell,CK(CQ({},e.getHeaderProps({style:{width:e.width,maxWidth:e.maxWidth}})),{children:e.render("Header")}))})}))})}),(0,z.jsx)(td.Body,CK(CQ({},p.getTableBodyProps()),{children:p.rows.map(function(e){return p.prepareRow(e),(0,z.jsx)(td.Row,CK(CQ({color:"inherit",onClick:function(){return p.toggleRowSelected(e.id)},className:(0,en.default)("cursor-pointer",{"bg-grey-5":e.isSelected})},e.getRowProps()),{children:e.cells.map(function(e){return(0,z.jsx)(td.Cell,CK(CQ({},e.getCellProps({style:{width:e.column.width,maxWidth:e.column.maxWidth}})),{children:e.render("Cell")}))})}))})}))]})),!l&&!(null==o?void 0:o.length)&&(0,z.jsx)("div",{className:"absolute flex h-full w-full items-center justify-center",children:(0,z.jsx)("span",{className:"text-sma text-grey-40",children:n("tables-no-added-sales-channels","No added sales channels")})})]}),(0,z.jsx)("div",{className:"absolute w-[506px]",style:{bottom:100},children:(0,z.jsx)(ty,{pagingState:{count:s,offset:a,title:n("tables-sales-channels","Sales Channels"),pageSize:a+p.rows.length,currentPage:p.state.pageIndex+1,pageCount:p.pageCount,nextPage:function(){p.canNextPage&&(c(a+12),p.nextPage())},prevPage:function(){p.canPreviousPage&&(c(Math.max(a-12,0)),p.previousPage())},hasNext:p.canNextPage,hasPrev:p.canPreviousPage},isLoading:l})})]})});function CX(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function C0(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return CX(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return CX(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}let C1=function(e){var t,r,n=(0,U.useRef)(),i=e.isVisible,a=e.close,o=e.selectedChannels,l=e.setSelectedChannels,s=C0((0,U.useState)({}),2),c=s[0],u=s[1],d=C0((0,U.useState)(0),2),f=d[0],p=d[1],m=C0((0,U.useState)(""),2),h=m[0],y=m[1],b=(0,ei.Bd)().t,v=(0,J.useAdminSalesChannels)({q:h,limit:12,offset:f},{keepPreviousData:!0}),g=v.sales_channels,x=v.isLoading,j=v.count,w=function(){p(0),y(""),u(o),Object.values(o).map(function(e){var t;return null===(t=n.current)||void 0===t?void 0:t.toggleRowSelected(e.id,!0)}),a()};return(0,z.jsx)(pv,{close:w,isVisible:!!i,children:(0,z.jsxs)("div",{className:"flex h-full flex-col justify-between p-6",children:[(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,z.jsx)("h3",{className:"inter-large-semibold flex items-center gap-2 text-xl text-gray-900",children:b("modals-add-sales-channels","Add sales channels")}),(0,z.jsx)(W.A,{variant:"secondary",className:"h-8 w-8 p-2",onClick:e.close,children:(0,z.jsx)(ao.A,{size:20,className:"text-grey-50"})})]}),(0,z.jsxs)("div",{className:"flex-grow",children:[(0,z.jsx)("div",{className:"my-6",children:(0,z.jsx)(e1.A,{small:!0,name:"name",type:"string",value:h,className:"h-[32px]",placeholder:b("modals-find-channels","Find channels"),prefix:(0,z.jsx)(to.A,{size:16}),onChange:function(e){return y(e.target.value)}})}),(0,z.jsx)(CJ,{ref:n,query:h,data:void 0===g?[]:g,offset:f,count:j||0,setOffset:p,isLoading:x,selectedChannels:c,setSelectedChannels:u})]}),(0,z.jsx)("div",{className:"block h-[1px] bg-gray-200",style:{margin:"24px -24px"}}),(0,z.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,z.jsx)(W.A,{size:"small",variant:"ghost",onClick:w,children:b("modals-cancel","Cancel")}),(0,z.jsx)(W.A,{size:"small",variant:"primary",onClick:function(){l(c),p(0),y(""),a()},disabled:(t=c,r=o,t=Object.keys(t),r=Object.keys(r),t.length===r.length&&t.every(function(e){return r.includes(e)})),children:b("modals-save-and-close","Save and close")})]})]})})};function C2(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function C3(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}let C5=function(e){var t,r,n,i,a=e.close,o=e.selectedKey,l=(0,eC.A)(),s=(0,ei.Bd)().t,c=function(e){if(Array.isArray(e))return e}(t=(0,U.useState)(null==o?void 0:o.title))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(t,2)||function(e,t){if(e){if("string"==typeof e)return C2(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return C2(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),u=c[0],d=c[1],f=(0,J.useAdminUpdatePublishableApiKey)(null==o?void 0:o.id).mutateAsync;(0,U.useEffect)(function(){o&&d(o.title)},[o]);var p=(r=function(){return function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,f({title:u})];case 1:return e.sent(),a(),l(s("modals-success","Success"),s("modals-updated-the-api-key","Updated the API key"),"success"),[3,3];case 2:return e.sent(),l(s("modals-error","Error"),s("modals-failed-to-update-the-api-key","Failed to update the API key"),"error"),[3,3];case 3:return[2]}})},n=function(){var e=this,t=arguments;return new Promise(function(n,i){var a=r.apply(e,t);function o(e){C3(a,n,i,o,l,"next",e)}function l(e){C3(a,n,i,o,l,"throw",e)}o(void 0)})},function(){return n.apply(this,arguments)});return(0,z.jsx)(pv,{close:a,isVisible:!!o,children:(0,z.jsxs)("div",{className:"flex h-full flex-col justify-between p-6",children:[(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,z.jsx)("h3",{className:"inter-large-semibold text-xl text-gray-900",children:s("modals-edit-api-key-details","Edit API key details")}),(0,z.jsx)(W.A,{variant:"ghost",onClick:a,children:(0,z.jsx)(ao.A,{size:20,className:"text-grey-40"})})]}),(0,z.jsx)("div",{className:"block h-[1px] bg-gray-200",style:{margin:"24px -24px"}}),(0,z.jsx)("div",{className:"flex-grow",children:(0,z.jsx)(e1.A,{label:s("modals-title","Title"),type:"string",name:"name",value:u,placeholder:s("modals-name-your-key","Name your key"),onChange:function(e){return d(e.target.value)}})}),(0,z.jsx)("div",{className:"block h-[1px] bg-gray-200",style:{margin:"24px -24px"}}),(0,z.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,z.jsx)(W.A,{size:"small",variant:"ghost",onClick:a,children:s("modals-cancel","Cancel")}),(0,z.jsx)(W.A,{size:"small",variant:"primary",onClick:p,disabled:u===(null===(i=e.selectedKey)||void 0===i?void 0:i.title),children:s("modals-save-and-close","Save and close")})]})]})})};function C6(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function C4(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return C6(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return C6(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C8(e){var t=(0,U.useRef)(),r=(0,ei.Bd)().t,n=C4((0,U.useState)({}),2),i=n[0],a=n[1],o=(0,eC.A)(),l=C4((0,U.useState)(0),2),s=l[0],c=l[1],u=C4((0,U.useState)(""),2),d=u[0],f=u[1],p=(0,J.useAdminSalesChannels)({q:d,limit:12,offset:s},{keepPreviousData:!0,enabled:!!e.keyId}),m=p.sales_channels,h=p.isLoading,y=p.count,b=(0,J.useAdminAddPublishableKeySalesChannelsBatch)(e.keyId).mutateAsync;(0,U.useEffect)(function(){if(!e.isVisible){var r;c(0),f(""),a({}),null===(r=t.current)||void 0===r||r.toggleAllRowsSelected(!1)}},[e.isVisible]);var v=function(e){return function(){b({sales_channel_ids:Object.keys(i).map(function(e){return{id:e}})}).then(function(){o(r("modals-success","Success"),r("modals-sales-channels-added-to-the-scope","Sales channels added to the scope"),"success")}).catch(function(){o(r("modals-error","Error"),r("modals-error-occurred-while-adding-sales-channels-to-the-scope-of-the-key","Error occurred while adding sales channels to the scope of the key"),"success")}).finally(e)}};return(0,z.jsxs)("div",{className:"flex h-full flex-col justify-between p-6",children:[(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,z.jsxs)("h3",{className:"inter-large-semibold flex items-center gap-2 text-xl text-gray-900",children:[(0,z.jsx)(W.A,{variant:"secondary",className:"text-grey-50 h-8 w-8 p-2",onClick:e.goBack,children:(0,z.jsx)(u8.A,{size:18})}),r("modals-add-sales-channels","Add sales channels")]}),(0,z.jsx)(W.A,{variant:"secondary",className:"h-8 w-8 p-2",onClick:e.close,children:(0,z.jsx)(ao.A,{size:20,className:"text-grey-50"})})]}),(0,z.jsxs)("div",{className:"flex-grow",children:[(0,z.jsx)("div",{className:"my-6",children:(0,z.jsx)(e1.A,{small:!0,name:"name",type:"string",value:d,className:"h-[32px]",placeholder:r("modals-find-channels","Find channels"),prefix:(0,z.jsx)(to.A,{size:16}),onChange:function(e){return f(e.target.value)}})}),(0,z.jsx)(CJ,{ref:t,query:d,data:void 0===m?[]:m,offset:s,count:y||0,setOffset:c,isLoading:h,selectedChannels:i,setSelectedChannels:a})]}),(0,z.jsx)("div",{className:"block h-[1px] bg-gray-200",style:{margin:"24px -24px"}}),(0,z.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,z.jsx)(W.A,{size:"small",variant:"ghost",onClick:e.close,children:r("modals-cancel","Cancel")}),(0,z.jsx)(W.A,{size:"small",variant:"primary",onClick:v(e.goBack),disabled:!Object.keys(i).length,children:r("modals-add-and-go-back","Add and go back")}),(0,z.jsx)(W.A,{size:"small",variant:"primary",onClick:v(e.close),disabled:!Object.keys(i).length,children:r("modals-add-and-close","Add and close")})]})]})}function C7(e){var t=e.close,r=(0,U.useRef)(),n=C4((0,U.useState)({}),2),i=n[0],a=n[1],o=Object.keys(i).length,l=(0,ei.Bd)().t,s=(0,eC.A)(),c=C4((0,U.useState)(0),2),u=c[0],d=c[1],f=C4((0,U.useState)(""),2),p=f[0],m=f[1],h=(0,J.useAdminPublishableApiKeySalesChannels)(e.keyId,{q:p},{keepPreviousData:!0,enabled:!!e.keyId}),y=h.sales_channels,b=void 0===y?[]:y,v=h.isLoading,g=(0,J.useAdminRemovePublishableKeySalesChannelsBatch)(e.keyId).mutateAsync;(0,U.useEffect)(function(){if(!e.isVisible){var t;d(0),m(""),a({}),null===(t=r.current)||void 0===t||t.toggleAllRowsSelected(!1)}},[e.isVisible]);var x=(0,U.useMemo)(function(){return null==b?void 0:b.slice(u,u+12)},[b,u]);return(0,z.jsxs)("div",{className:"flex h-full flex-col justify-between p-6",children:[(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,z.jsx)("h3",{className:"inter-large-semibold flex items-center gap-2 text-xl text-gray-900",children:l("modals-edit-sales-channels","Edit sales channels")}),(0,z.jsx)(W.A,{variant:"secondary",className:"h-8 w-8 p-2",onClick:e.close,children:(0,z.jsx)(ao.A,{size:20,className:"text-grey-50"})})]}),(0,z.jsxs)("div",{className:"flex-grow",children:[(0,z.jsxs)("div",{className:"my-6 flex items-center justify-between gap-2",children:[(0,z.jsx)(e1.A,{small:!0,name:"name",type:"string",value:p,className:"h-[32px]",placeholder:l("modals-find-channels","Find channels"),prefix:(0,z.jsx)(to.A,{size:14}),onChange:function(e){return m(e.target.value)}}),o?(0,z.jsxs)("div",{className:"flex h-[32px] items-center justify-between gap-2",children:[(0,z.jsx)("span",{className:"text-small text-grey-50 whitespace-nowrap px-2",children:l("publishable-api-keys-modals-manage-sales-channels-selected-with-counts","{{count}}",{count:o})}),(0,z.jsx)(W.A,{size:"small",className:"h-[32px] flex-shrink-0",variant:"secondary",onClick:function(){var e;a({}),null===(e=r.current)||void 0===e||e.toggleAllRowsSelected(!1)},children:l("modals-deselect","Deselect")}),(0,z.jsx)(W.A,{size:"small",className:"h-[32px] flex-shrink-0 text-rose-500",variant:"secondary",onClick:function(){g({sales_channel_ids:Object.keys(i).map(function(e){return{id:e}})}).then(function(){var e;s(l("modals-success","Success"),l("modals-sales-channels-removed-from-the-scope","Sales channels removed from the scope"),"success"),a({}),null===(e=r.current)||void 0===e||e.toggleAllRowsSelected(!1)}).catch(function(){s(l("modals-error","Error"),l("modals-error-occurred-while-removing-sales-channels-from-the-scope-of-the-key","Error occurred while removing sales channels from the scope of the key"),"success")})},children:l("modals-remove","Remove")})]}):(0,z.jsx)(W.A,{size:"small",className:"h-[32px] flex-shrink-0",variant:"secondary",onClick:e.goAdd,children:l("modals-add-channels","Add channels")})]}),(0,z.jsx)(CJ,{ref:r,query:p,data:x,offset:u,count:b.length||0,setOffset:d,isLoading:v,selectedChannels:i,setSelectedChannels:a})]}),(0,z.jsx)("div",{className:"block h-[1px] bg-gray-200",style:{margin:"24px -24px"}}),(0,z.jsx)("div",{className:"flex justify-end gap-2",children:(0,z.jsx)(W.A,{size:"small",variant:"secondary",onClick:t,children:l("modals-close","Close")})})]})}let C9=function(e){var t=e.keyId,r=e.close,n=!!t,i=C4((0,U.useState)(!1),2),a=i[0],o=i[1];return(0,U.useEffect)(function(){n||o(!1)},[n]),(0,z.jsx)(pv,{close:r,isVisible:!!n,children:(0,z.jsxs)(py.P.div,{style:{width:1120,display:"flex",height:"100%"},animate:{x:a?-560:0},transition:{ease:"easeInOut"},children:[(0,z.jsx)(py.P.div,{style:{height:"100%",width:560},animate:{opacity:a?0:1},children:(0,z.jsx)(C7,{close:r,keyId:t,isVisible:n&&!a,goAdd:function(){return o(!0)}})}),(0,z.jsx)(py.P.div,{style:{height:"100%",width:560},animate:{opacity:a?1:0},children:(0,z.jsx)(C8,{close:r,keyId:t,isVisible:n&&a,goBack:function(){return o(!1)}})})]})})},Ae=function(e){var t,r,n=e.size,i=void 0===n?"20px":n,a=(e.color,function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["size","color"]));return(0,z.jsxs)("svg",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({width:i,height:i,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a),r=r={children:[(0,z.jsx)("path",{d:"M10 17.5C14.1421 17.5 17.5 14.1421 17.5 10C17.5 5.85786 14.1421 2.5 10 2.5C5.85786 2.5 2.5 5.85786 2.5 10C2.5 14.1421 5.85786 17.5 10 17.5Z",stroke:"#6B7280",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M5 5L15 15",stroke:"#6B7280",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))};function At(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Ar(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function An(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function o(e){Ar(a,n,i,o,l,"next",e)}function l(e){Ar(a,n,i,o,l,"throw",e)}o(void 0)})}}function Ai(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function Aa(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function Ao(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return At(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return At(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Al(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}var As=[{accessor:"title",Header:(0,z.jsx)("div",{className:"text-small font-semibold text-gray-500",children:(0,z.jsx)(ei.wD,{children:function(e){return e("tables-name","Name")}})}),Cell:function(e){var t=e.row.original;return(0,z.jsx)("span",{className:"text-gray-900",children:t.title})}},{accessor:"id",Header:(0,z.jsxs)("div",{className:"text-small font-semibold text-gray-500",children:[" ",(0,z.jsx)(ei.wD,{children:function(e){return e("tables-token","Token")}})]}),Cell:function(e){var t=e.row.original,r=Ao((0,U.useState)(!1),2),n=r[0],i=r[1];return(0,z.jsx)(r9.A,{delayDuration:300,onMouseLeave:(0,t6.debounce)(function(){return i(!1)},1e3),content:n?(0,z.jsxs)("span",{className:"flex flex-row items-center justify-between gap-1",children:[(0,z.jsx)(e7,{size:16,className:"text-green-700"})," ",(0,z.jsx)(ei.wD,{children:function(e){return e("tables-done","done")}})]}):(0,z.jsx)("span",{onClick:function(){i(!0),navigator.clipboard.writeText(t.id)},className:"cursor-pointer",children:(0,z.jsx)(ei.wD,{children:function(e){return e("tables-copy-to-clipboard","Copy to clipboard")}})}),children:(0,z.jsx)("span",{className:"text-gray-500",children:t.id})})}},{accessor:"created_at",Header:(0,z.jsxs)("div",{className:"text-small font-semibold text-gray-500",children:[" ",(0,z.jsx)(ei.wD,{children:function(e){return e("tables-created","Created")}})]}),Cell:function(e){var t=e.row.original;return(0,z.jsx)("span",{className:"text-gray-900",children:re()(t.created_at).format("MMM Do YYYY, h:mm:ss")})}},{accessor:"revoked_at",Header:(0,z.jsxs)("div",{className:"text-small font-semibold text-gray-500",children:[" ",(0,z.jsx)(ei.wD,{children:function(e){return e("tables-status","Status")}})]}),Cell:function(e){var t=e.row.original,r=(0,ei.Bd)().t;return(0,z.jsx)("span",{className:"min-w-[50px] text-gray-900",children:t.revoked_at?(0,z.jsx)(tv.A,{title:r("tables-revoked","Revoked"),variant:"danger"}):(0,z.jsx)(tv.A,{title:r("tables-live","Live"),variant:"success"})})}}];function Ac(e){var t=e.row,r=e.isRevoked,n=e.showChannelsModal,i=e.showDetails,a=t.original.id,o=Ao((0,U.useState)(!1),2),l=o[0],s=o[1],c=Ao((0,U.useState)(!1),2),u=c[0],d=c[1],f=(0,ei.Bd)().t,p=(0,J.useAdminRevokePublishableApiKey)(a).mutateAsync,m=(0,J.useAdminDeletePublishableApiKey)(a).mutateAsync,h=[{label:f("tables-edit-api-key-details","Edit API key details"),onClick:i,icon:(0,z.jsx)(ec,{size:16})},{label:f("tables-edit-sales-channels","Edit sales channels"),onClick:n,icon:(0,z.jsx)(ec,{size:16})},{label:f("tables-copy-token","Copy token"),onClick:function(){return navigator.clipboard.writeText(a)},icon:(0,z.jsx)(ew,{size:16})},{label:f("tables-revoke-token","Revoke token"),onClick:function(){return d(!0)},icon:(0,z.jsx)(Ae,{size:16}),disabled:r},{label:f("tables-delete-api-key","Delete API key"),onClick:function(){return s(!0)},icon:(0,z.jsx)(eu,{size:16}),variant:"danger"}];return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(td.Row,Aa(Ai({},e.row.getRowProps()),{actions:h,children:e.row.cells.map(function(e){return(0,z.jsx)(td.Cell,Aa(Ai({},e.getCellProps()),{children:e.render("Cell")}))})})),l&&(0,z.jsx)(e_,{handleClose:function(){return s(!1)},onDelete:An(function(){return Al(this,function(e){return[2,m()]})}),confirmText:f("tables-yes-delete","Yes, delete"),successText:f("tables-api-key-deleted","API key deleted"),text:f("tables-are-you-sure-you-want-to-delete-this-public-key","Are you sure you want to delete this public key?"),heading:f("tables-delete-key","Delete key")}),u&&(0,z.jsx)(e_,{handleClose:function(){return d(!1)},onDelete:An(function(){return Al(this,function(e){return[2,p()]})}),confirmText:f("tables-yes-revoke","Yes, revoke"),successText:f("tables-api-key-revoked","API key revoked"),text:f("tables-are-you-sure-you-want-to-revoke-this-public-key","Are you sure you want to revoke this public key?"),heading:f("tables-revoke-key","Revoke key")})]})}let Au=function(e){var t=Ao((0,U.useState)(0),2),r=t[0],n=t[1],i=Ao((0,U.useState)(0),2),a=i[0],o=i[1],l=Ao((0,U.useState)(0),2),s=l[0],c=l[1],u=(0,ei.Bd)().t,d=(0,J.useAdminPublishableApiKeys)({offset:r,limit:12}),f=d.publishable_api_keys,p=d.count,m=d.isLoading,h=(0,e4.useTable)({columns:As,data:f||[],manualPagination:!0,initialState:{pageIndex:s,pageSize:12,selectedRowIds:{}},pageCount:a,autoResetSelectedRows:!1,autoResetPage:!1,getRowId:function(e){return e.id}},e4.usePagination);return(0,U.useEffect)(function(){void 0!==p&&o(Math.ceil(p/12))},[p]),(0,z.jsxs)(tb,{hasPagination:!0,isLoading:m,numberOfRows:12,pagingState:{count:p,offset:r,title:u("tables-api-keys","API Keys"),pageCount:h.pageCount,pageSize:r+h.rows.length,currentPage:h.state.pageIndex+1,nextPage:function(){h.canNextPage&&(n(function(e){return e+h.state.pageSize}),c(function(e){return e+1}),h.nextPage())},prevPage:function(){h.canPreviousPage&&(n(function(e){return Math.max(e-h.state.pageSize,0)}),c(function(e){return e-1}),h.previousPage())},hasNext:h.canNextPage,hasPrev:h.canPreviousPage},children:[(0,z.jsxs)(td,Aa(Ai({},h.getTableProps()),{children:[h.headerGroups.map(function(e){return(0,z.jsx)(td.HeadRow,Aa(Ai({},e.getHeaderGroupProps()),{children:e.headers.map(function(e){return(0,z.jsx)(td.HeadCell,Aa(Ai({},e.getHeaderProps()),{children:e.render("Header")}))})}))}),(0,z.jsx)(td.Body,Aa(Ai({},h.getTableBodyProps()),{children:h.rows.map(function(t){return h.prepareRow(t),(0,z.jsx)(Ac,{row:t,showDetails:function(){return e.showDetailsModal(t.original)},showChannelsModal:function(){return e.showChannelsModal(t.original)},isRevoked:!!t.original.revoked_at},t.id)})}))]})),!(null==f?void 0:f.length)&&!m&&(0,z.jsx)("div",{className:"flex h-[480px] w-[100%] items-center justify-center",children:(0,z.jsx)("span",{className:"text-gray-400",children:u("tables-no-keys-yet-use-the-above-button-to-create-your-first-publishable-key","No keys yet, use the above button to create your first publishable key")})})]})};function Ad(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Af(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function Ap(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ad(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ad(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Am(e){var t=e.setSelectedChannels,r=e.selectedChannels,n=(0,ei.Bd)().t,i=Ap((0,n5.A)(!1),3),a=i[0],o=i[1],l=i[2],s=!!Object.keys(r).length;return(0,z.jsxs)("div",{children:[(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,z.jsxs)("div",{children:[(0,z.jsx)("h5",{className:"inter-base-semibold text-grey-90 pb-1",children:n("pages-sales-channels","Sales channels")}),(0,z.jsx)("p",{className:"text-grey-50",children:n("pages-connect-as-many-sales-channels-to-your-api-key-as-you-need","Connect as many sales channels to your API key as you need.")})]}),!s&&(0,z.jsx)(W.A,{size:"small",variant:"secondary",className:"h-[40px]",onClick:o,children:n("pages-add-sales-channels","Add sales channels")})]}),s&&(0,z.jsxs)("div",{className:"mt-10 flex items-center justify-between",children:[(0,z.jsxs)("div",{className:"flex items-center gap-4",children:[(0,z.jsx)("div",{className:"rounded border p-1",children:(0,z.jsx)("div",{className:"rounded bg-gray-100 p-2",children:(0,z.jsx)(uM,{})})}),(0,z.jsx)(C$,{channels:Object.values(r),showCount:2})]}),(0,z.jsx)(W.A,{size:"small",variant:"secondary",className:"h-[40px]",onClick:o,children:n("pages-edit-sales-channels","Edit sales channels")})]}),(0,z.jsx)(C1,{close:l,isVisible:a,selectedChannels:r,setSelectedChannels:t})]})}function Ah(e){var t,r,n=e.closeModal,i=(0,eC.A)(),a=(0,ei.Bd)().t,o=Ap((0,U.useState)(""),2),l=o[0],s=o[1],c=Ap((0,U.useState)(""),2),u=c[0],d=c[1],f=Ap((0,U.useState)({}),2),p=f[0],m=f[1],h=(0,J.useAdminCreatePublishableApiKey)().mutateAsync,y=(0,J.useAdminAddPublishableKeySalesChannelsBatch)(u).mutateAsync,b=(t=function(){return function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,h({title:l})];case 1:return d(e.sent().publishable_api_key.id),i(a("pages-success","Success"),a("pages-created-a-new-api-key","Created a new API key"),"success"),[3,3];case 2:return e.sent(),i(a("pages-error","Error"),a("pages-failed-to-create-a-new-api-key","Failed to create a new API key"),"error"),[3,3];case 3:return[2]}})},r=function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function o(e){Af(a,n,i,o,l,"next",e)}function l(e){Af(a,n,i,o,l,"throw",e)}o(void 0)})},function(){return r.apply(this,arguments)});return(0,U.useEffect)(function(){u&&y({sales_channel_ids:Object.keys(p).map(function(e){return{id:e}})}).then(function(){i(a("pages-success","Success"),a("pages-sales-channels-added-to-the-scope","Sales channels added to the scope"),"success")}).catch(function(){i(a("pages-error","Error"),a("pages-error-occurred-while-adding-sales-channels-to-the-scope-of-the-key","Error occurred while adding sales channels to the scope of the key"),"success")}).finally(n)},[u,p]),(0,z.jsxs)(sF.A,{children:[(0,z.jsx)(sF.A.Header,{children:(0,z.jsxs)("div",{className:"medium:w-8/12 flex w-full justify-between px-8",children:[(0,z.jsx)(W.A,{size:"small",variant:"ghost",onClick:n,children:(0,z.jsx)(ao.A,{size:20})}),(0,z.jsx)("div",{className:"gap-x-small flex",children:(0,z.jsx)(W.A,{size:"small",variant:"primary",onClick:b,disabled:!l,className:"rounded-rounded",children:a("pages-publish-api-key","Publish API key")})})]})}),(0,z.jsx)(sF.A.Main,{className:"no-scrollbar flex w-full justify-center",children:(0,z.jsxs)("div",{className:"medium:w-7/12 large:w-6/12 small:w-4/5 my-16 max-w-[700px]",children:[(0,z.jsx)("h1",{className:"inter-xlarge-semibold text-grey-90 pb-8",children:a("pages-create-api-key","Create API Key")}),(0,z.jsx)("h5",{className:"inter-base-semibold text-grey-90 pb-1",children:"General Information"}),(0,z.jsx)("p",{className:"text-grey-50 pb-8",children:a("pages-create-and-manage-api-keys-right-now-this-is-only-related-to-sales-channels","Create and manage API keys. Right now this is only related to sales channels.")}),(0,z.jsx)(e1.A,{label:"Title",type:"string",name:"name",value:l,className:"w-[338px]",placeholder:"Name your key",onChange:function(e){return s(e.target.value)}}),(0,z.jsx)("div",{className:"mt-16 mb-8 h-[1px] w-[100%] bg-gray-200"}),(0,z.jsx)(Am,{selectedChannels:p,setSelectedChannels:m})]})})]})}let Ay=function(){var e=(0,ei.Bd)().t,t=Ap((0,U.useState)(),2),r=t[0],n=t[1],i=Ap((0,U.useState)(),2),a=i[0],o=i[1],l=Ap((0,n5.A)(!1),3),s=l[0],c=l[1],u=l[2],d=[{label:e("pages-create-api-key-label","Create API key"),onClick:c}];return(0,z.jsxs)("div",{children:[(0,z.jsx)(eo,{label:e("pages-back-to-settings","Back to settings"),path:"/a/settings",className:"mb-xsmall"}),(0,z.jsxs)(eD,{title:e("pages-publishable-api-keys","Publishable API keys"),subtitle:e("pages-these-publishable-keys-will-allow-you-to-authenticate-api-requests","These publishable keys will allow you to authenticate API requests."),actionables:d,children:[(0,z.jsx)(Au,{showDetailsModal:n,showChannelsModal:function(e){o(e)}}),(0,z.jsx)(C5,{selectedKey:r,close:function(){return n(void 0)}}),(0,z.jsx)(ik.A,{isVisible:s,isFullScreen:!0,children:(0,z.jsx)(Ah,{closeModal:u})}),(0,z.jsx)(C9,{keyId:null==a?void 0:a.id,close:function(){o(null)}})]}),(0,z.jsx)(el,{})]})},Ab=function(){var e=(0,(0,V.Y)().getNestedRoutes)("/publishable-api-keys");return(0,z.jsxs)(H.Routes,{children:[(0,z.jsx)(H.Route,{index:!0,element:(0,z.jsx)(Ay,{})}),e.map(function(e,t){return(0,z.jsx)(H.Route,{path:e.path,element:(0,z.jsx)(Z,{route:e,previousPath:"/publishable-api-keys"})},t)})]})};function Av(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Ag(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function Ax(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function o(e){Ag(a,n,i,o,l,"next",e)}function l(e){Ag(a,n,i,o,l,"throw",e)}o(void 0)})}}function Aj(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Av(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Av(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Aw(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}function AO(e){var t=e.name,r=e.description,n=e.setName,i=e.setDescription,a=(0,ei.Bd)().t;return(0,z.jsxs)("div",{className:"gap-y-base my-base flex flex-col",children:[(0,z.jsx)("div",{className:"flex-1",children:(0,z.jsx)(e1.A,{label:a("form-title","Title"),type:"string",name:"name",placeholder:a("form-website-app-amazon-physical-store-pos-facebook-product-feed","Website, app, Amazon, physical store POS, facebook product feed..."),value:t,onChange:function(e){return n(e.target.value)}})}),(0,z.jsx)("div",{className:"flex-1",children:(0,z.jsx)(e1.A,{label:a("form-description","Description"),type:"string",name:"description",placeholder:a("form-available-products-at-our-website-app","Available products at our website, app..."),value:r,onChange:function(e){return i(e.target.value)}})})]})}let AS=function(e){var t=e.onClose,r=(0,J.useAdminCreateSalesChannel)().mutate,n=(0,eC.A)(),i=Aj((0,U.useState)(),2),a=i[0],o=i[1],l=Aj((0,U.useState)(),2),s=l[0],c=l[1];function u(){return(u=Ax(function(){return Aw(this,function(e){switch(e.label){case 0:return[4,r({name:a,description:s},{onSuccess:function(e){var r=e.sales_channel;n("Success","The sales channel is successfully created","success"),t(r.id)},onError:function(){return n("Error","Failed to create the sales channel","error")}})];case 1:return e.sent(),[2]}})})).apply(this,arguments)}function d(){return(d=Ax(function(){return Aw(this,function(e){switch(e.label){case 0:return[4,r({name:a,description:s,is_disabled:!0},{onSuccess:function(e){var r=e.sales_channel;n("Success","The sales channel is successfully created","success"),t(r.id)},onError:function(){return n("Error","Failed to create the sales channel","error")}})];case 1:return e.sent(),[2]}})})).apply(this,arguments)}return(0,z.jsxs)(sF.A,{children:[(0,z.jsx)(sF.A.Header,{children:(0,z.jsxs)("div",{className:"medium:w-8/12 flex w-full justify-between px-8",children:[(0,z.jsx)(W.A,{size:"small",variant:"ghost",onClick:t,className:"rounded-rounded h-8 w-8 border",children:(0,z.jsx)(ao.A,{size:20})}),(0,z.jsxs)("div",{className:"gap-x-small flex",children:[(0,z.jsx)(W.A,{size:"small",variant:"secondary",onClick:function(){return function(){return d.apply(this,arguments)}()},disabled:!a,className:"rounded-rounded",children:"Save as draft"}),(0,z.jsx)(W.A,{size:"small",variant:"primary",onClick:function(){return function(){return u.apply(this,arguments)}()},disabled:!a,className:"rounded-rounded",children:"Publish channel"})]})]})}),(0,z.jsx)(sF.A.Main,{children:(0,z.jsx)("div",{className:"mb-[25%] flex justify-center",children:(0,z.jsxs)("div",{className:"medium:w-7/12 large:w-6/12 small:w-4/5 w-full pt-16",children:[(0,z.jsx)("h1",{className:"inter-xlarge-semibold",children:"Create new sales channel"}),(0,z.jsx)(sV,{className:"text-grey-90 pt-7",defaultValue:["general"],type:"multiple",children:(0,z.jsx)(sV.Item,{title:"General info",value:"general",forceMountContent:!0,children:(0,z.jsx)(AO,{name:a,description:s,setName:o,setDescription:c})})})]})})})]})};function AP(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function AC(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return AP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return AP(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}let AA=function(e){var t=e.handleClose,r=e.salesChannel,n=(0,eC.A)(),i=(0,ei.Bd)().t,a=(0,J.useAdminUpdateSalesChannel)(r.id),o=a.mutate,l=a.isLoading,s=AC((0,U.useState)(r.name),2),c=s[0],u=s[1],d=AC((0,U.useState)(r.description),2),f=d[0],p=d[1];return(0,z.jsx)(eN.A,{handleClose:t,children:(0,z.jsxs)(eN.A.Body,{children:[(0,z.jsx)(eN.A.Header,{handleClose:t,children:(0,z.jsx)("span",{className:"inter-xlarge-semibold",children:i("form-sales-channel-details","Sales channel details")})}),(0,z.jsxs)(eN.A.Content,{children:[(0,z.jsx)("div",{className:"inter-base-semibold text-grey-90 mb-4",children:i("form-general-info","General info")}),(0,z.jsxs)("div",{className:"flex w-full flex-col gap-3",children:[(0,z.jsx)(e1.A,{label:i("form-name","Name"),name:"name",value:c,onChange:function(e){return u(e.target.value)}}),(0,z.jsx)(e1.A,{label:i("form-description","Description"),name:"description",value:f,onChange:function(e){return p(e.target.value)}})]})]}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"flex w-full justify-end",children:[(0,z.jsx)(W.A,{variant:"ghost",size:"small",onClick:t,className:"mr-2",children:i("form-close","Close")}),(0,z.jsx)(W.A,{disabled:!c.length||l,variant:"primary",className:"min-w-[100px]",size:"small",onClick:function(){o({name:c,description:f},{onSuccess:function(){n(i("form-success","Success"),i("form-the-sales-channel-is-successfully-updated","The sales channel is successfully updated"),"success"),t()},onError:function(){return n(i("form-error","Error"),i("form-failed-to-update-the-sales-channel","Failed to update the sales channel"),"error")}})},loading:l,children:i("form-save","Save")})]})})]})})};function AN(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Ak(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function A_(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function AE(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||AD(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function AI(e){return function(e){if(Array.isArray(e))return AN(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||AD(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function AD(e,t){if(e){if("string"==typeof e)return AN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return AN(e,t)}}var AT=["status","collection_id","payment_status","created_at"],AM={drafts:{status:["draft"]},proposed:{status:["proposed"]}},AR=function(e,t){switch(t.type){case"setFilters":return A_(Ak({},e),{status:t.payload.status,collection:t.payload.collection,tags:t.payload.tags,date:t.payload.date});case"reset":return t.payload;default:return e}},AL=function(e,t){if(e.size!==t.size)return!1;var r=!0,n=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var l=a.value;if(!t.has(l))return!1}}catch(e){n=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(n)throw i}}return!0},Az=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e&&"?"===e[0]&&(e=e.substring(1));var r=(0,U.useMemo)(function(){return Aq(e,t)},[e,t]),n=(0,U.useMemo)(function(){var e=localStorage.getItem("products::filters");if(e){var t=JSON.parse(e);if(t)return Object.entries(t).map(function(e){var t=AE(e,2),r=t[0];return{label:r,value:r,removable:!0,representationString:t[1]}})}return[]},[]),i=AE((0,U.useReducer)(AR,r),2),a=i[0],o=i[1],l=AE((0,U.useState)(n),2),s=l[0],c=l[1],u=function(){var e=Ak({},a.additionalFilters),t=!0,r=!1,n=void 0;try{for(var i,o=Object.entries(a)[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var l=AE(i.value,2),s=l[0],c=l[1];(null==c?void 0:c.open)&&(e[AB[s]]=c.filter)}}catch(e){r=!0,n=e}finally{try{t||null==o.return||o.return()}finally{if(r)throw n}}return e},d=function(e){var t=null!=e?e:a,r={},n=!0,i=!1,o=void 0;try{for(var l,s=Object.entries(t)[Symbol.iterator]();!(n=(l=s.next()).done);n=!0){var c=AE(l.value,2),u=c[0],d=c[1];"query"===u?d&&"string"==typeof d&&(r.q=d):"offset"===u||"limit"===u?r[u]=d:(null==d?void 0:d.open)&&(r[AB[u]]=d.filter)}}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r},f=function(){var e=d();return t8().stringify(e,{skipNulls:!0})},p=(0,U.useMemo)(function(){return u()},[a]),m=(0,U.useMemo)(function(){return d()},[a]),h=(0,U.useMemo)(function(){return f()},[a]),y=(0,U.useMemo)(function(){var e=(0,t6.omit)(m,["limit","offset"]),t=t8().stringify(e),r=s.find(function(e){return e.representationString===t});if(r)return r.value;var n=!0,i=!1,a=void 0;try{for(var o,l=Object.entries(AM)[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var c=AE(o.value,2),u=c[0],d=c[1],f=!0;if(Object.keys(e).length===Object.keys(d).length){var p=!0,h=!1,y=void 0;try{for(var b,v=Object.entries(d)[Symbol.iterator]();!(p=(b=v.next()).done);p=!0){var g=AE(b.value,2),x=g[0],j=g[1];if(!(f=x in e&&(Array.isArray(j)?Array.isArray(e[x])&&AL(new Set(e[x]),new Set(j)):e[x]===j)))break}}catch(e){h=!0,y=e}finally{try{p||null==v.return||v.return()}finally{if(h)throw y}}if(f)return u}}}catch(e){i=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(i)throw a}}return null},[m,s]),b=(0,U.useMemo)(function(){return[{label:"Unpublished",value:"drafts"}].concat(AI(s))},[s]);return A_(Ak({},a),{filters:Ak({},a),removeTab:function(e){var t=localStorage.getItem("products::filters"),r=null;t&&(r=JSON.parse(t)),r&&(delete r[e],localStorage.setItem("products::filters",JSON.stringify(r))),c(function(t){return t.filter(function(t){return t.value!==e})})},saveTab:function(e,t){var r=d(Ak({},t)),n=(0,t6.omit)(r,["limit","offset"]),i=t8().stringify(n,{skipNulls:!0}),a=localStorage.getItem("products::filters"),l=null;if(a&&(l=JSON.parse(a)),l)l[e]=i,localStorage.setItem("products::filters",JSON.stringify(l));else{var s={};s[e]=i,localStorage.setItem("products::filters",JSON.stringify(s))}c(function(t){var r=t.findIndex(function(t){var r;return(null===(r=t.label)||void 0===r?void 0:r.toLowerCase())===e.toLowerCase()});return -1!==r&&t.splice(r,1),AI(t).concat([{label:e,value:e,representationString:i,removable:!0}])}),o({type:"setFilters",payload:t})},setTab:function(e){var t=null;if(e in AM)t=AM[e];else{var r=s.find(function(t){return t.value===e});r&&(t=t8().parse(r.representationString))}if(t){var n=A_(Ak({},a),{date:{open:!1,filter:null},status:{open:!1,filter:null},tags:{open:!1,filter:null},collection:{open:!1,filter:null}}),i=!0,l=!1,c=void 0;try{for(var u,d=Object.entries(t)[Symbol.iterator]();!(i=(u=d.next()).done);i=!0){var f=AE(u.value,2),p=f[0],m=f[1];n[AF[p]]={open:!0,filter:m}}}catch(e){l=!0,c=e}finally{try{i||null==d.return||d.return()}finally{if(l)throw c}}o({type:"setFilters",payload:n})}},availableTabs:b,activeFilterTab:y,representationObject:m,representationString:h,queryObject:p,setFilters:function(e){o({type:"setFilters",payload:e})},setDefaultFilters:function(e){o({type:"setDefaults",payload:e})},setDateFilter:function(e){o({type:"setDate",payload:e})},setFulfillmentFilter:function(e){o({type:"setFulfillment",payload:e})},setPaymentFilter:function(e){o({type:"setPayment",payload:e})},setStatusFilter:function(e){o({type:"setStatus",payload:e})},reset:function(){o({type:"setFilters",payload:A_(Ak({},a),{status:{open:!1,filter:null},collection:{open:!1,filter:null},tags:{open:!1,filter:null},date:{open:!1,filter:null}})})}})},AF={status:"status",collection_id:"collection",tags:"tags",created_at:"date"},AB={status:"status",collection:"collection_id",tags:"tags",date:"created_at"},Aq=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r={status:{open:!1,filter:null},collection:{open:!1,filter:null},tags:{open:!1,filter:null},date:{open:!1,filter:null},additionalFilters:t};if(e){var n=t8().parse(e),i=!0,a=!1,o=void 0;try{for(var l,s=Object.entries(n)[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=AE(l.value,2),u=c[0],d=c[1];if(AT.includes(u))switch(u){case"status":("string"==typeof d||Array.isArray(d))&&(r.status={open:!0,filter:d});break;case"collection_id":("string"==typeof d||Array.isArray(d))&&(r.collection={open:!0,filter:d});break;case"payment_status":("string"==typeof d||Array.isArray(d))&&(r.payment={open:!0,filter:d});break;case"created_at":r.date={open:!0,filter:d}}}}catch(e){a=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}}return r};function AH(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var AU=[{width:30,id:"selection",Header:function(e){var t=e.getToggleAllPageRowsSelectedProps;return(0,z.jsx)("span",{className:"flex justify-center",children:(0,z.jsx)(tt,AH({},t()))})},Cell:function(e){var t=e.row;return(0,z.jsx)("span",{onClick:function(e){return e.stopPropagation()},className:"flex justify-center",children:(0,z.jsx)(tt,AH({},t.getToggleRowSelectedProps()))})}},{Header:(0,z.jsx)(ei.wD,{children:function(e){return e("tables-name","Name")}}),accessor:"title",Cell:function(e){var t=e.row.original;return(0,z.jsxs)("div",{className:"flex items-center",children:[(0,z.jsx)("div",{className:"my-1.5 mr-4 flex h-[40px] w-[30px] items-center",children:t.thumbnail?(0,z.jsx)("img",{src:t.thumbnail,className:"rounded-soft h-full object-cover"}):(0,z.jsx)("div",{className:"rounded-soft bg-grey-10 flex h-full w-full items-center justify-center",children:(0,z.jsx)(nm,{size:16})})}),t.title]})}},{Header:(0,z.jsx)(ei.wD,{children:function(e){return e("tables-collection","Collection")}}),accessor:"collection",Cell:function(e){var t=e.cell.value;return(0,z.jsx)("div",{children:(null==t?void 0:t.title)||"-"})}}],AV=r(32166);let AG=function(e){var t=e.showAddModal,r=(0,ei.Bd)().t;return(0,z.jsxs)("div",{className:"flex h-full flex-col items-center justify-center",children:[(0,z.jsx)("span",{className:"text-grey-50",children:(0,z.jsx)(AV.A,{width:"48",height:"48"})}),(0,z.jsx)("h3",{className:"text-large text-gray-90 mt-6 font-semibold",children:r("tables-start-building-your-channels-setup","Start building your channels setup...")}),(0,z.jsx)("p",{className:"text-grey-50 mt-2 mb-8 w-[358px] text-center",children:r("tables-no-products-in-channels","You haven’t added any products to this channels yet, but once you do they will live here.")}),(0,z.jsx)(W.A,{onClick:t,variant:"primary",size:"small",children:r("tables-add-products","Add products")})]})};function AW(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function AY(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function A$(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function AQ(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function AK(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return AW(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return AW(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var AZ={additionalFilters:{expand:"collection,type,sales_channels",fields:"id,title,thumbnail,status"},limit:7,offset:0},AJ=(0,U.forwardRef)(function(e,t){var r=e.tableActions,n=e.currentSalesChannelId,i=e.productFilters,a=i.setTab,o=i.saveTab,l=i.removeTab,s=i.availableTabs,c=i.activeFilterTab,u=i.setFilters,d=i.filters,f=i.reset,p=e.paginate,m=e.setQuery,h=e.queryObject,y=e.isLoading,b=e.isAddTable,v=e.count,g=e.products,x=e.setSelectedRowIds,j=e.removeProductFromSalesChannel,w=parseInt(h.offset)||0,O=parseInt(h.limit),S=(0,H.useNavigate)(),P=(0,ei.Bd)().t,C=AK((0,U.useState)(h.query),2),A=C[0],N=C[1],k=AK((0,U.useState)(0),2),_=k[0],E=k[1];(0,U.useEffect)(function(){void 0!==v&&E(Math.ceil(v/O))},[v]);var I=(0,e4.useTable)({columns:AU,data:g||[],manualPagination:!0,initialState:{pageIndex:Math.floor(w/O),pageSize:O},pageCount:_,autoResetPage:!1,autoResetSelectedRows:!1,getRowId:function(e){return e.id},stateReducer:function(e,t){return"toggleAllRowsSelected"===t.type?AQ(A$({},e),{selectedRowIds:{}}):e}},e4.usePagination,e4.useRowSelect),D=I.getTableProps,T=I.getTableBodyProps,M=I.headerGroups,R=I.rows,L=I.prepareRow,F=I.gotoPage,B=I.canPreviousPage,q=I.canNextPage,V=I.pageCount,G=I.nextPage,W=I.previousPage,Y=I.toggleAllRowsSelected,$=I.toggleRowSelected,Q=I.state,K=Q.pageIndex,Z=(Q.pageSize,function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(I.state,["pageIndex","pageSize"]));return(0,U.useImperativeHandle)(t,function(){return{toggleAllRowsSelected:Y}}),(0,U.useEffect)(function(){x(Object.keys(Z.selectedRowIds))},[Z.selectedRowIds]),(0,U.useEffect)(function(){var e=setTimeout(function(){A?(m(A),F(0)):void 0!==A&&m("")},400);return function(){return clearTimeout(e)}},[A]),(0,z.jsx)(tb,{isLoading:y,numberOfRows:7,hasPagination:!0,pagingState:{count:v,offset:w,pageSize:w+R.length,title:P("tables-products","Products"),currentPage:K+1,pageCount:V,nextPage:function(){q&&(p(1),G())},prevPage:function(){B&&(p(-1),W())},hasNext:q,hasPrev:B},children:(0,z.jsxs)(td,AQ(A$({tableActions:r,containerClassName:"flex-1",filteringOptions:d&&(0,z.jsx)(Pk,{filters:d,submitFilters:u,clearFilters:function(){f(),N("")},tabs:s,onTabClick:a,activeTab:c,onRemoveTab:l,onSaveTab:o}),enableSearch:b,handleSearch:N},D()),{children:[(0,z.jsx)(td.Head,{children:null==M?void 0:M.map(function(e){return(0,z.jsx)(td.HeadRow,AQ(A$({},e.getHeaderGroupProps()),{children:e.headers.map(function(e){return(0,z.jsx)(td.HeadCell,AQ(A$({},e.getHeaderProps()),{children:e.render("Header")}))})}))})}),(0,z.jsx)(td.Body,AQ(A$({},T()),{children:R.map(function(e){var t;return L(e),(0,z.jsx)(AX,{onClick:function(){return $(e.id)},disabled:!!e.original.sales_channels.find(function(e){return e.id===n}),row:e,actions:b?void 0:(t=e.original.id,[{label:P("tables-details","Details"),onClick:function(){return S("/a/products/".concat(t))},icon:(0,z.jsx)(t7,{size:20})},{label:P("tables-remove-from-the-channel","Remove from the channel"),variant:"danger",onClick:function(){return j(t)},icon:(0,z.jsx)(eu,{size:20})}])})})}))]}))})}),AX=function(e){var t=e.row,r=e.actions,n=e.onClick,i=e.disabled;return(0,z.jsx)(td.Row,AQ(A$({onClick:!i&&n,color:"inherit",className:(0,en.default)("cursor-pointer",{"bg-grey-5":t.isSelected,"pointer-events-none cursor-not-allowed opacity-40":i}),actions:r},t.getRowProps()),{children:t.cells.map(function(e,t){return(0,z.jsx)(td.Cell,AQ(A$({},e.getCellProps()),{children:e.render("Cell",{index:t})}))})}))};function A0(e){var t=e.onClose,r=e.onRemove,n=e.total,i=(0,ei.Bd)().t;return(0,z.jsx)("div",{className:(0,en.default)("pointer-events-none absolute bottom-1 flex w-full justify-center transition-all duration-200",{"translate-y-1 opacity-0":!n,"translate-y-0 opacity-100":n}),children:(0,z.jsxs)("div",{className:"shadow-toaster pointer-events-auto flex h-[48px] min-w-[224px] items-center justify-around gap-3 rounded-lg border px-4 py-3",children:[(0,z.jsx)("span",{className:"text-small text-grey-50",children:i("sales-channels-table-placeholder-selected-with-counts","{{count}}",{count:n})}),(0,z.jsx)("div",{className:"bg-grey-20 h-[20px] w-[1px]"}),(0,z.jsx)(W.A,{variant:"danger",size:"small",onClick:r,children:i("tables-remove","Remove")}),(0,z.jsx)("button",{onClick:t,className:"text-grey-50 cursor-pointer",children:(0,z.jsx)(ao.A,{size:20})})]})})}function A1(e){var t,r,n=(0,U.useRef)(),i=e.salesChannelId,a=e.showAddModal,o=AK((0,U.useState)([]),2),l=o[0],s=o[1],c=(0,eC.A)(),u=nH(AZ),d=Az(),f=(0,J.useAdminDeleteProductsFromSalesChannel)(i).mutate,p=(0,J.useAdminProducts)(AQ(A$({},u.queryObject,d.queryObject),{sales_channel_id:[e.salesChannelId]})),m=p.products,h=p.count,y=p.isLoading,b=function(){var e;s([]),null===(e=n.current)||void 0===e||e.toggleAllRowsSelected(!1)};(0,U.useEffect)(function(){b()},[m,i]);var v=(t=function(){return function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,function(e){switch(e.label){case 0:return[4,f({product_ids:l.map(function(e){return{id:e}})})];case 1:return e.sent(),c("Success","Products successfully removed from the sales channel","success"),b(),[2]}})},r=function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function o(e){AY(a,n,i,o,l,"next",e)}function l(e){AY(a,n,i,o,l,"throw",e)}o(void 0)})},function(){return r.apply(this,arguments)}),g=Object.keys(d.queryObject).length,x=u.queryObject.q;if(!(null==m?void 0:m.length)&&!y&&!g&&!x)return(0,z.jsx)(AG,{showAddModal:a});var j=l.length;return(0,z.jsxs)("div",{className:"relative",children:[(0,z.jsx)(AJ,A$({ref:n,count:h||0,isLoading:y,products:m||[],removeProductFromSalesChannel:function(e){f({product_ids:[{id:e}]}),c("Success","Product successfully removed","success")},setSelectedRowIds:s,productFilters:d},u)),(0,z.jsx)(A0,{total:j,onRemove:v,onClose:b})]})}function A2(e){var t=e.handleClose,r=e.salesChannel,n=AK((0,U.useState)([]),2),i=n[0],a=n[1],o=(0,eC.A)(),l=nH(AZ),s=Az(),c=(0,J.useAdminProducts)(AQ(A$({},l.queryObject,s.queryObject),{expand:"sales_channels"})),u=c.products,d=c.count,f=c.isLoading,p=(0,J.useAdminAddProductsToSalesChannel)(r.id),m=p.mutate,h=p.isLoading;return(0,z.jsx)(eN.A,{handleClose:t,children:(0,z.jsxs)(eN.A.Body,{children:[(0,z.jsx)(eN.A.Header,{handleClose:t,children:(0,z.jsx)("span",{className:"inter-xlarge-semibold",children:"Add products"})}),(0,z.jsx)(eN.A.Content,{children:(0,z.jsx)(AJ,A$({isAddTable:!0,isLoading:f,products:u||[],count:d||0,setSelectedRowIds:a,productFilters:s,currentSalesChannelId:r.id},l))}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"flex w-full justify-end",children:[(0,z.jsx)(W.A,{variant:"ghost",size:"small",onClick:t,className:"mr-2",children:"Close"}),(0,z.jsx)(W.A,{variant:"primary",className:"min-w-[100px]",size:"small",onClick:function(){m({product_ids:i.map(function(e){return{id:e}})}),t(),o("Success","Products successfully added to the sales channel","success")},loading:h,disabled:h,children:"Save"})]})})]})})}function A3(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function A5(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function A6(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return A3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return A3(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A4(e){var t=e.isActive;return(0,z.jsx)("div",{className:(0,en.default)("rounded-circle flex h-[18px] w-[18px] flex-shrink-0 items-center justify-center border bg-white",{"border-violet-60 border-2":t}),children:t&&(0,z.jsx)("div",{className:"bg-violet-60 rounded-circle h-[10px] w-[10px]"})})}function A8(){var e=(0,ei.Bd)().t;return(0,z.jsx)("div",{className:" bg-grey-10 text-grey-50 text-small flex h-[28px] w-[54px] items-center justify-center rounded-xl font-semibold",children:e("pages-draft","Draft")})}function A7(e){var t=e.salesChannel,r=e.isSelected,n=e.onClick,i=e.isDisabled;return(0,z.jsxs)("div",{onClick:n,className:(0,en.default)("mb-2 flex h-[83px] cursor-pointer justify-between rounded-lg border p-4",{"border-violet-60 border-2":r}),children:[(0,z.jsxs)("div",{className:"flex gap-2 overflow-hidden",children:[(0,z.jsx)(A4,{isActive:r}),(0,z.jsxs)("div",{className:"block overflow-hidden truncate",children:[(0,z.jsx)("h3",{className:"text-grey-90 mb-1 font-semibold leading-5",children:t.name}),(0,z.jsx)("span",{className:"text-small text-grey-50 ",children:t.description})]})]}),i&&(0,z.jsx)("div",{className:"flex flex-shrink-0 flex-col justify-center",children:(0,z.jsx)(A8,{})})]})}function A9(e){var t=e.openCreateModal,r=e.filterText,n=e.setFilterText,i=A6((0,U.useState)(!1),2),a=i[0],o=i[1],l=(0,U.useRef)(),s=(0,ei.Bd)().t;return(0,z.jsx)("div",{className:"mb-6 h-[55px] overflow-hidden",children:(0,z.jsxs)("div",{className:(0,en.default)("transition-all duration-200",{"translate-y-[-50px]":a,"translate-y-[0px]":!a}),children:[(0,z.jsxs)("div",{className:"h-[55px]",children:[(0,z.jsxs)("div",{className:"mb-1 flex items-center justify-between",children:[(0,z.jsx)("h2",{className:"text-xlarge text-grey-90 font-semibold",children:s("pages-sales-channels","Sales channels")}),(0,z.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,z.jsx)(to.A,{size:15,onClick:function(){return o(!0)},className:"cursor-pointer"}),(0,z.jsx)(n_.A,{size:15,onClick:t,className:"cursor-pointer"})]})]}),(0,z.jsx)("div",{className:"text-grey-50 text-small mb-6 block max-w-[100%] overflow-hidden truncate",children:s("pages-control-which-products-are-available-in-which-channels","Control which products are available in which channels")})]}),(0,z.jsxs)("div",{className:"text-grey-40 bg-grey-5 my-[5px] flex h-[40px] w-full items-center justify-around gap-2 rounded-xl border px-4",children:[(0,z.jsx)(to.A,{size:20}),(0,z.jsx)("input",{ref:l,value:r,onChange:function(e){return n(e.target.value)},placeholder:s("pages-search-by-title-or-description","Search by title or description"),className:"remove-number-spinner leading-base text-grey-90 caret-violet-60 placeholder-grey-40 w-full bg-inherit font-normal outline-none outline-0",onBlur:function(){return o(!!r)},autoComplete:"off"}),(0,z.jsx)(ao.A,{onClick:function(){o(!1),n("")},className:"cursor-pointer"})]})]})})}function Ne(e){var t=e.activeChannelId,r=e.openCreateModal,n=e.setActiveSalesChannelId,i=e.salesChannels,a=e.filterText,o=e.setFilterText;return(0,z.jsxs)("div",{className:"bg-grey-0 border-grey-20  col-span-1 grow rounded-lg border px-8 py-6",children:[(0,z.jsx)(A9,{filterText:a,setFilterText:o,openCreateModal:r}),(0,z.jsx)("div",{children:null==i?void 0:i.map(function(e){return(0,z.jsx)(A7,{salesChannel:e,isDisabled:e.is_disabled,isSelected:t===e.id,onClick:function(){return n(e.id)}})})})]})}function Nt(e){var t,r,n=e.isDefault,i=e.salesChannel,a=e.openUpdateModal,o=e.resetDetails,l=e.showProductsAdd,s=(0,ei.Bd)().t,c=(0,J.useAdminDeleteSalesChannel)(i.id).mutate,u=(0,J.useAdminUpdateSalesChannel)(i.id).mutate,d=rL(),f=(t=function(){return function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,function(e){switch(e.label){case 0:return[4,d({text:s("pages-confirm-delete-sales-channel","Are you sure you want to delete this sales channel? The setup you made will be gone forever."),heading:s("pages-delete-channel-heading","Delete Channel"),extraConfirmation:!0,entityName:i.name})];case 1:return e.sent()&&(c(),o()),[2]}})},r=function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function o(e){A5(a,n,i,o,l,"next",e)}function l(e){A5(a,n,i,o,l,"throw",e)}o(void 0)})},function(){return r.apply(this,arguments)}),p=(0,U.useMemo)(function(){var e=[{label:s("pages-edit-general-info","Edit general info"),icon:(0,z.jsx)(ec,{size:"20"}),onClick:a},{label:s("pages-add-products","Add products"),icon:(0,z.jsx)(n_.A,{}),onClick:function(){return l()}}];return n||e.push({label:s("pages-delete-channel","Delete channel"),icon:(0,z.jsx)(eu,{size:20}),variant:"danger",onClick:f}),e},[a]);return(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,z.jsx)("h2",{className:"text-xlarge text-grey-90 mb-4 font-semibold",children:i.name}),(0,z.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,z.jsx)(sg,{onChange:function(){return u({is_disabled:!i.is_disabled})},isDraft:i.is_disabled,draftState:s("pages-disabled","Disabled"),activeState:s("pages-enabled","Enabled")}),(0,z.jsx)(em,{forceDropdown:!0,actions:p})]})]})}function Nr(e){var t=e.resetDetails,r=e.salesChannel,n=e.isDefault,i=A6((0,n5.A)(!1),3),a=i[0],o=i[1],l=i[2],s=A6((0,n5.A)(!1),3),c=s[0],u=s[1],d=s[2];return(0,z.jsxs)("div",{className:"rounded-rounded bg-grey-0 border-grey-20 col-span-2 col-span-2 h-fit border px-8 py-6",children:[(0,z.jsx)(Nt,{isDefault:n,resetDetails:t,salesChannel:r,openUpdateModal:o,showProductsAdd:u}),(0,z.jsx)(A1,{salesChannelId:r.id,showAddModal:u}),a&&(0,z.jsx)(AA,{handleClose:l,salesChannel:r}),c&&(0,z.jsx)(A2,{salesChannel:r,handleClose:d})]})}let Nn=function(){var e=(0,H.useParams)().id,t=(0,ei.Bd)().t,r=A6((0,U.useState)(),2),n=r[0],i=r[1],a=A6((0,U.useState)(!1),2),o=a[0],l=a[1],s=A6((0,U.useState)(),2),c=s[0],u=s[1],d=(0,H.useNavigate)(),f=(0,J.useAdminStore)().store,p=(0,J.useAdminSalesChannels)().sales_channels,m=function(e){d("/a/sales-channels/".concat(e))};return((0,U.useEffect)(function(){p&&f&&(c?m(c.id):m(f.default_sales_channel_id))},[p,f,null==c?void 0:c.id]),(0,U.useEffect)(function(){e!==(null==c?void 0:c.id)&&u(null==p?void 0:p.find(function(t){return t.id===e}))},[e,c,p]),p&&c)?(0,z.jsxs)("div",{children:[(0,z.jsx)(eo,{path:"/a/settings",label:t("pages-back-to-settings","Back to settings"),className:"mb-xsmall"}),(0,z.jsxs)("div",{className:"gap-x-xsmall grid grid-cols-3",children:[(0,z.jsx)(Ne,{filterText:n,setFilterText:i,openCreateModal:function(){return l(!0)},activeChannelId:c.id,setActiveSalesChannelId:m,salesChannels:(n?p.filter(function(e){var t,r=n.toLowerCase();return!!e.name.toLowerCase().match(r)||!!(null===(t=e.description)||void 0===t?void 0:t.toLowerCase().match(r))}):p).sort(function(e,t){return e.id===(null==f?void 0:f.default_sales_channel_id)?-1:t.id===(null==f?void 0:f.default_sales_channel_id)?1:e.name.localeCompare(t.name)})}),c&&(0,z.jsx)(Nr,{isDefault:c.id===(null==f?void 0:f.default_sales_channel_id),salesChannel:p.find(function(e){return e.id===c.id}),resetDetails:function(){m(f.default_sales_channel_id)}})]}),(0,z.jsx)(el,{}),(0,z.jsx)(ik.A,{isVisible:o,isFullScreen:!0,children:(0,z.jsx)(AS,{onClose:function(e){m(e),l(!1)}})})]}):null},Ni=function(){var e=(0,(0,V.Y)().getNestedRoutes)("/sales-channels");return(0,z.jsxs)(H.Routes,{children:[(0,z.jsx)(H.Route,{index:!0,element:(0,z.jsx)(Nn,{})}),(0,z.jsx)(H.Route,{path:"/:id",element:(0,z.jsx)(Nn,{})}),e.map(function(e,t){return(0,z.jsx)(H.Route,{path:e.path,element:(0,z.jsx)(Z,{route:e,previousPath:"/sales-channels"})},t)})]})},Na=function(e){var t=e.icon,r=e.heading,n=e.description,i=e.to,a=void 0===i?null:i,o=e.externalLink,l=void 0===o?null:o,s=e.disabled,c=void 0!==s&&s;return c&&(a=null),(0,z.jsx)(H.Link,{to:null!=a?a:"",className:"flex flex-1 items-center",children:(0,z.jsxs)("button",{className:"bg-grey-0 rounded-rounded p-base border-grey-20 group flex h-full flex-1 items-center border",disabled:c,onClick:function(){l&&(window.location.href=l)},children:[(0,z.jsx)("div",{className:"h-2xlarge w-2xlarge bg-grey-0 rounded-rounded border-grey-20 text-grey-60 group-disabled:bg-grey-10 group-disabled:text-grey-40 flex items-center justify-center border",children:(0,z.jsx)("div",{className:"bg-grey-10 h-xlarge w-xlarge flex items-center justify-center overflow-hidden rounded-md",children:t})}),(0,z.jsxs)("div",{className:"mx-large flex-1 text-left",children:[(0,z.jsx)("h3",{className:"inter-large-semibold text-grey-90 group-disabled:text-grey-40 m-0",children:r}),(0,z.jsx)("p",{className:"inter-base-regular text-grey-50 group-disabled:text-grey-40 m-0",children:n})]}),(0,z.jsx)("div",{className:"text-grey-40 group-disabled:text-grey-30",children:(0,z.jsx)(a8,{})})]})})},No=function(e){var t=e.Page,r=(0,K.I)();return U.createElement(t,r)},Nl=function(e){var t=e.origin,r=(0,H.useRouteError)();return(0,U.useEffect)(function(){},[r,t]),(0,z.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,z.jsxs)("div",{className:"rounded-rounded p-base bg-rose-10 border-rose-40 gap-x-small flex justify-start border",children:[(0,z.jsx)("div",{children:(0,z.jsx)($.A,{size:20,fillType:"solid",className:"text-rose-40"})}),(0,z.jsxs)("div",{className:"text-rose-40 inter-small-regular w-full pr-[20px]",children:[(0,z.jsx)("h1",{className:"inter-base-semibold mb-2xsmall",children:"Uncaught error"}),(0,z.jsx)("p",{className:"mb-small",children:"An error unknown error occurred, and the page could not be loaded."}),(0,z.jsxs)("p",{className:"mb-large",children:[(0,z.jsx)("strong",{children:"What should I do?"}),(0,z.jsx)("br",{}),"If you are the developer of this setting page, you should fix the error and reload the page. If you are not the developer, you should contact the maintainer and report the error."]}),(0,z.jsx)("div",{className:"gap-x-base flex items-center",children:(0,z.jsx)(W.A,{variant:"nuclear",size:"small",type:"button",onClick:function(){window.location.reload()},className:"w-full",children:(0,z.jsxs)("div",{className:"flex items-center",children:[(0,z.jsx)(Y.A,{size:"20"}),(0,z.jsx)("span",{className:"ml-xsmall",children:"Reload"})]})})})]})]})})};var Ns=r(25851),Nc=r(81485),Nu=r(12770);let Nd=function(e){var t=e.currency,r=e.isDefault,n=(0,ei.Bd)().t,i=(0,uc.useQueryClient)(),a=(0,J.useAdminUpdateCurrency)(t.code).mutate,o=(0,eR.mN)({defaultValues:{includes_tax:t.includes_tax}}),l=o.handleSubmit,s=o.control,c=o.reset,u=(0,eC.A)();(0,U.useEffect)(function(){c({includes_tax:t.includes_tax})},[t]);var d=l(function(e){a(e,{onSuccess:function(){u(n("components-success","Success"),n("components-successfully-updated-currency","Successfully updated currency"),"success"),i.invalidateQueries(J.adminStoreKeys.all)},onError:function(e){u(n("components-error","Error"),(0,eA.u)(e),"error"),c({includes_tax:t.includes_tax})}})});return(0,z.jsx)("form",{children:(0,z.jsxs)("div",{className:"inter-base-regular flex items-center justify-between",children:[(0,z.jsxs)("div",{className:"gap-x-base flex items-center",children:[(0,z.jsx)("div",{className:"bg-grey-10 rounded-rounded w-xlarge h-xlarge flex items-center justify-center",children:(0,z.jsx)(ua,{size:20,className:"text-grey-50"})}),(0,z.jsxs)("div",{className:"gap-x-xsmall flex items-center",children:[(0,z.jsx)("p",{className:"inter-base-semibold text-grey-90",children:t.code.toUpperCase()}),(0,z.jsx)("p",{className:"text-grey-50 inter-small-regular",children:t.name})]}),r&&(0,z.jsx)("div",{className:"bg-grey-10 rounded-rounded px-xsmall py-[2px]",children:(0,z.jsx)("p",{className:"inter-small-semibold text-grey-50",children:n("components-default","Default")})})]}),(0,z.jsx)(uT,{featureFlag:"tax_inclusive_pricing",children:(0,z.jsx)(eR.xI,{control:s,name:"includes_tax",render:function(e){var t=e.field,r=t.value,n=t.onChange;return(0,z.jsx)(so.A,{checked:r,onCheckedChange:function(e){n(e),d()}})}})})]})})};var Nf=function(e){return{default_currency_code:{value:e.default_currency_code,label:e.default_currency.name,prefix:e.default_currency.code.toUpperCase()}}};let Np=function(e){var t=e.store,r=(0,eR.mN)({defaultValues:Nf(t)}),n=r.reset,i=r.control,a=r.handleSubmit,o=(0,ei.Bd)().t,l=(0,J.useAdminUpdateStore)().mutate,s=(0,eC.A)();(0,U.useEffect)(function(){n(Nf(t))},[t]);var c=a(function(e){l({default_currency_code:e.default_currency_code.value},{onSuccess:function(){s(o("default-store-currency-success","Success"),o("default-store-currency-successfully-updated-default-currency","Successfully updated default currency"),"success")},onError:function(e){s(o("default-store-currency-error","Error"),(0,eA.u)(e),"error")}})}),u=(0,U.useMemo)(function(){return t.currencies.map(function(e){return{value:e.code,label:e.name,prefix:e.code.toUpperCase()}})},[t]);return(0,z.jsx)("div",{children:(0,z.jsx)(eR.xI,{control:i,name:"default_currency_code",render:function(e){var t=e.field,r=t.value,n=t.onChange,i=t.onBlur;return(0,z.jsx)(no,{placeholder:"Choose default currency",options:u,value:r,onChange:function(e){n(e),c()},onBlur:i})}})})},Nm=function(e){var t=e.store,r=(0,ei.Bd)().t;return(0,z.jsxs)("div",{className:"gap-y-large flex flex-col",children:[(0,z.jsxs)("div",{children:[(0,z.jsx)("h3",{className:"inter-large-semibold mb-2xsmall",children:r("default-store-currency-default-store-currency","Default store currency")}),(0,z.jsx)("p",{className:"inter-base-regular text-grey-50",children:r("default-store-currency-this-is-the-currency-your-prices-are-shown-in","This is the currency your prices are shown in.")})]}),(0,z.jsx)(Np,{store:t})]})};function Nh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function Ny(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}let Nb=function(e){var t=e.isLoading,r=e.offset,n=e.setOffset,i=e.setSelectedRowIds,a=e.tableState,o=e.tableAction,l=e.count,s=a.rows,c=a.headerGroups,u=a.getTableProps,d=a.getTableBodyProps,f=a.canNextPage,p=a.canPreviousPage,m=a.previousPage,h=a.nextPage,y=a.prepareRow,b=a.state,v=b.pageSize,g=b.pageIndex,x=b.selectedRowIds,j=a.pageCount;return(0,U.useEffect)(function(){i&&i(Object.keys(x))},[x]),(0,z.jsx)(tb,{isLoading:t,hasPagination:!0,numberOfRows:v,pagingState:{count:l,offset:r,pageSize:r+s.length,title:"Currencies",currentPage:g+1,pageCount:j,nextPage:function(){f&&(n(r+v),h())},prevPage:function(){p&&(n(r-v),m())},hasNext:f,hasPrev:p},children:(0,z.jsxs)(td,Ny(Nh({},u()),{className:"table-fixed",tableActions:o,children:[(0,z.jsx)(td.Head,{children:null==c?void 0:c.map(function(e){return(0,z.jsx)(td.HeadRow,Ny(Nh({},e.getHeaderGroupProps()),{children:e.headers.map(function(e){return(0,z.jsx)(td.HeadCell,Ny(Nh({},e.getHeaderProps(e.getSortByToggleProps())),{className:void 0!==e.className?e.className:void 0,children:e.render("Header")}))})}))})}),(0,z.jsx)(td.Body,Ny(Nh({},d()),{children:s.map(function(e){return y(e),(0,z.jsx)(td.Row,Ny(Nh({},e.getRowProps()),{children:e.cells.map(function(e){return(0,z.jsx)(td.Cell,Ny(Nh({},e.getCellProps()),{children:e.render("Cell")}))})}))})}))]}))})};function Nv(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var Ng=function(){return(0,U.useMemo)(function(){return[{id:"selection",className:"w-[52px] px-base",disableSortBy:!0,Header:function(e){var t=e.getToggleAllPageRowsSelectedProps;return(0,z.jsx)("span",{className:"flex justify-center",children:(0,z.jsx)(tt,Nv({},t()))})},Cell:function(e){var t=e.row;return(0,z.jsx)("span",{onClick:function(e){return e.stopPropagation()},className:"flex justify-center",children:(0,z.jsx)(tt,Nv({},t.getToggleRowSelectedProps()))})}},{Header:function(e){var t=e.column,r=t.isSorted,n=t.isSortedDesc;return(0,z.jsxs)("div",{className:"gap-x-2xsmall flex items-center",children:[(0,z.jsx)("span",{children:"Name"}),(0,z.jsx)(ta,{className:"text-grey-40",ascendingColor:r&&!n?"#111827":void 0,descendingColor:n?"#111827":void 0,size:16})]})},accessor:"name",Cell:function(e){var t=e.row,r=e.value;return(0,z.jsxs)("div",{className:"gap-x-xsmall inter-small-regular flex items-center",children:[(0,z.jsx)("span",{className:"inter-small-semibold",children:t.original.code.toUpperCase()}),(0,z.jsx)("p",{children:r})]})}}]},[])};function Nx(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Nj(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||NO(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nw(e){return function(e){if(Array.isArray(e))return Nx(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||NO(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function NO(e,t){if(e){if("string"==typeof e)return Nx(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Nx(e,t)}}var NS=function(){var e=Nj((0,U.useState)(0),2),t=e[0],r=e[1],n=Nj((0,U.useState)([]),2),i=n[0],a=n[1],o=(0,ei.Bd)().t,l=NE(),s=l.onClose,c=l.store,u=(0,U.useContext)(a7.H8),d=u.reset,f=u.pop,p=(0,J.useAdminCurrencies)({limit:15,offset:t},{keepPreviousData:!0}),m=p.currencies,h=p.count,y=p.isLoading,b=(0,J.useAdminUpdateStore)(),v=b.mutate,g=b.isLoading,x=(0,eC.A)(),j=function(e){v({currencies:Nw(c.currencies.map(function(e){return e.code})).concat(Nw(i))},{onSuccess:function(){x(o("store-currencies-success","Success"),o("store-currencies-successfully-updated-currencies","Successfully updated currencies"),"success"),e()},onError:function(e){x(o("store-currencies-error","Error"),(0,eA.u)(e),"error")}})},w=U.useMemo(function(){return m||[]},[m]),O=Ng(),S=(0,e4.useTable)({data:w,columns:O,manualPagination:!0,initialState:{pageIndex:Math.floor(t/15),pageSize:15},autoResetPage:!1,autoResetSelectedRows:!1,getRowId:function(e){return e.code},pageCount:Math.ceil((h||0)/15),defaultColumn:{width:"auto"}},e4.useSortBy,e4.usePagination,e4.useRowSelect);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(eN.A.Content,{children:(0,z.jsx)(Nb,{isLoading:y,setQuery:function(){},setSelectedRowIds:a,count:h||0,tableState:S,setOffset:r,offset:t})}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"gap-x-xsmall flex w-full items-center justify-end",children:[(0,z.jsx)(W.A,{variant:"secondary",size:"small",onClick:f,children:o("store-currencies-cancel","Cancel")}),(0,z.jsx)(W.A,{variant:"primary",size:"small",onClick:function(){return j(function(){f()})},children:o("store-currencies-save-and-go-back","Save and go back")}),(0,z.jsx)(W.A,{variant:"primary",size:"small",loading:g,disabled:g,onClick:function(){return j(function(){d(),s()})},children:o("store-currencies-save-and-close","Save and close")})]})})]})},NP=function(){var e=(0,U.useContext)(a7.H8),t=e.pop,r=e.push;return{screen:{title:(0,(0,ei.Bd)().t)("store-currencies-add-store-currencies","Add Store Currencies"),onBack:t,view:(0,z.jsx)(NS,{})},push:r}};function NC(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function NA(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return NC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return NC(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var NN=function(e){var t=e.numberOfSelectedRows,r=e.onDeselect,n=e.onRemove,i=!!t,a=(0,ei.Bd)().t,o=NP(),l=o.screen,s=o.push;return(0,z.jsx)("div",{className:"space-x-xsmall flex h-[34px] overflow-hidden",children:(0,z.jsxs)("div",{className:(0,en.default)("transition-all duration-200",{"translate-y-[-42px]":!i,"translate-y-[0px]":i}),children:[(0,z.jsxs)("div",{className:"mb-2 flex h-[34px] items-center divide-x",children:[(0,z.jsx)("span",{className:"inter-small-regular text-grey-50 mr-3",children:a("current-currencies-screen-selected-with-count","{{count}}",{count:t})}),(0,z.jsxs)("div",{className:"space-x-xsmall flex pl-3",children:[(0,z.jsx)(W.A,{onClick:r,size:"small",variant:"ghost",className:"border-grey-20 border",children:a("store-currencies-deselect","Deselect")}),(0,z.jsx)(W.A,{onClick:n,size:"small",variant:"ghost",className:"border-grey-20 border text-rose-50",children:a("store-currencies-remove","Remove")})]})]}),(0,z.jsx)("div",{className:"flex h-[34px] justify-end",children:(0,z.jsxs)(W.A,{size:"small",variant:"ghost",className:"border-grey-20 border",onClick:function(){return s(l)},children:[(0,z.jsx)(n_.A,{size:20})," ",a("store-currencies-add-currencies","Add Currencies")]})})]})})};let Nk=function(){var e,t=NA((0,U.useState)(0),2),r=t[0],n=t[1],i=NA((0,U.useState)([]),2),a=i[0],o=i[1],l=NE(),s=l.onClose,c=l.store,u=(0,ei.Bd)().t,d=(0,J.useAdminUpdateStore)().mutate,f=(0,eC.A)(),p=function(e){d({currencies:e},{onSuccess:function(){f(u("store-currencies-success","Success"),u("store-currencies-successfully-updated-currencies","Successfully updated currencies"),"success")},onError:function(e){f(u("store-currencies-error","Error"),(0,eA.u)(e),"error")}})},m=Ng(),h=(0,U.useMemo)(function(){return c.currencies.slice(r,r+15)},[c,r]),y=(0,e4.useTable)({data:h||[],columns:m,manualPagination:!0,initialState:{pageIndex:Math.floor(r/15),pageSize:15},autoResetPage:!1,autoResetSelectedRows:!1,getRowId:function(e){return e.code},pageCount:Math.ceil((c.currencies.length||0)/15)},e4.useSortBy,e4.usePagination,e4.useRowSelect),b=function(){o([]),y.toggleAllRowsSelected(!1)};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(eN.A.Header,{handleClose:s,children:(0,z.jsx)("h1",{className:"inter-xlarge-semibold",children:u("store-currencies-current-store-currencies","Current Store Currencies")})}),(0,z.jsx)(eN.A.Content,{children:(0,z.jsx)(Nb,{isLoading:!1,setQuery:function(){},setSelectedRowIds:o,count:(null===(e=c.currencies)||void 0===e?void 0:e.length)||0,tableState:y,setOffset:n,offset:r,tableAction:(0,z.jsx)(NN,{numberOfSelectedRows:a.length,onDeselect:b,onRemove:function(){p(c.currencies.filter(function(e){return!a.includes(e.code)}).map(function(e){return e.code})),b()}})})}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsx)("div",{className:"flex w-full items-center justify-end",children:(0,z.jsx)(W.A,{variant:"primary",size:"small",onClick:s,children:u("store-currencies-close","Close")})})})]})};var N_=(0,U.createContext)(null),NE=function(){var e=(0,U.useContext)(N_);if(!e)throw Error("useEditCurrenciesModal must be used within EditCurrenciesModal");return e};let NI=function(e){var t=e.store,r=e.open,n=e.onClose,i=(0,U.useContext)(a7.H8);return(0,z.jsx)(N_.Provider,{value:{onClose:n,store:t},children:(0,z.jsx)(a7.Ay,{context:i,open:r,handleClose:n,children:(0,z.jsx)(Nk,{})})})},ND=function(e){var t=e.store,r=(0,ei.Bd)().t,n=(0,n5.A)(),i=n.state,a=n.close,o=n.toggle;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("div",{className:"flex items-start justify-between",children:[(0,z.jsxs)("div",{children:[(0,z.jsx)("h3",{className:"inter-large-semibold mb-2xsmall",children:r("store-currencies-store-currencies","Store currencies")}),(0,z.jsx)("p",{className:"inter-base-regular text-grey-50",children:r("store-currencies-all-the-currencies-available-in-your-store","All the currencies available in your store.")})]}),(0,z.jsx)(W.A,{variant:"secondary",size:"small",onClick:o,children:r("store-currencies-edit-currencies","Edit currencies")})]}),(0,z.jsx)(NI,{store:t,open:i,onClose:a})]})},NT=function(){var e=(0,H.useNavigate)(),t=(0,ei.Bd)().t,r=(0,i_.s)().trackCurrencies,n=(0,J.useAdminStore)({onSuccess:function(e){r({used_currencies:e.store.currencies.map(function(e){return e.code})})}}),i=n.store,a=n.status,o=n.error;if(o){var l=t("currencies-an-unknown-error-occurred","An unknown error occurred"),s=t$(o);return s&&(l=s.message,404===s.status)?(e("/404"),null):(0,z.jsxs)(eM,{title:t("currencies-error","Error"),children:[(0,z.jsx)("p",{className:"inter-base-regular",children:l}),(0,z.jsx)("div",{className:"mt-base px-base py-xsmall",children:(0,z.jsx)(eP,{data:JSON.parse(JSON.stringify(o))})})]})}return"loading"!==a&&i?(0,z.jsxs)("div",{className:"pb-xlarge",children:[(0,z.jsx)(eo,{label:t("currencies-back-to-settings","Back to Settings"),path:"/a/settings",className:"mb-xsmall"}),(0,z.jsxs)("div",{className:"gap-base grid grid-cols-3",children:[(0,z.jsxs)("div",{className:"gap-y-xsmall col-span-2 flex flex-col ",children:[(0,z.jsx)(eM,{title:"Currencies",children:(0,z.jsx)("p",{className:"text-grey-50 inter-base-regular mt-2xsmall",children:t("currencies-manage-the-markets-that-you-will-operate-within","Manage the markets that you will operate within.")})}),(0,z.jsxs)(eM,{children:[(0,z.jsx)("div",{className:"mb-large",children:(0,z.jsx)(ND,{store:i})}),(0,z.jsxs)("div",{className:"cursor-default",children:[(0,z.jsxs)("div",{className:"inter-small-semibold text-grey-50 mb-base flex items-center justify-between",children:[(0,z.jsx)("p",{children:"Currency"}),(0,z.jsx)(uT,{featureFlag:"tax_inclusive_pricing",children:(0,z.jsx)(r9.A,{side:"top",content:t("currencies-include-or-exclude-taxes","Decide if you want to include or exclude taxes whenever you define a price in this currency"),children:(0,z.jsx)("p",{children:t("currencies-tax-incl-prices","Tax Incl. Prices")})})})]}),(0,z.jsx)("div",{className:"gap-base grid grid-cols-1",children:i.currencies.sort(function(e,t){return e.code>t.code?1:-1}).map(function(e,t){return(0,z.jsx)(Nd,{currency:e,isDefault:i.default_currency_code===e.code},t)})})]})]})]}),(0,z.jsx)("div",{children:(0,z.jsx)(eM,{children:(0,z.jsx)(Nm,{store:i})})})]})]}):(0,z.jsx)("div",{className:"flex h-[calc(100vh-64px)] w-full items-center justify-center",children:(0,z.jsx)(X.A,{variant:"secondary"})})};function NM(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function NR(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var NL=function(e){if(!e||""===e)return!0;try{var t=new URL(e);return"http:"===t.protocol||"https:"===t.protocol}catch(e){return!1}};let Nz=function(){var e=(0,eR.mN)(),t=e.register,r=e.reset,n=e.handleSubmit,i=(0,J.useAdminStore)().store,a=(0,J.useAdminUpdateStore)().mutate,o=(0,eC.A)(),l=(0,ei.Bd)().t,s=function(){i&&r({name:i.name,swap_link_template:i.swap_link_template,payment_link_template:i.payment_link_template,invite_link_template:i.invite_link_template})};return(0,U.useEffect)(function(){s()},[i]),(0,z.jsx)("form",{className:"flex-col py-5",children:(0,z.jsxs)("div",{className:"max-w-[632px]",children:[(0,z.jsx)(eo,{path:"/a/settings/",label:l("settings-back-to-settings","Back to settings"),className:"mb-xsmall"}),(0,z.jsx)(eD,{events:[{label:l("settings-save","Save"),type:"button",onClick:n(function(e){var t=NL(e.swap_link_template),r=NL(e.payment_link_template),n=NL(e.invite_link_template);if(!t){o(l("settings-error","Error"),l("settings-malformed-swap-url","Malformed swap url"),"error");return}if(!r){o(l("settings-error","Error"),l("settings-malformed-payment-url","Malformed payment url"),"error");return}if(!n){o(l("settings-error","Error"),l("settings-malformed-invite-url","Malformed invite url"),"error");return}a(e,{onSuccess:function(){o(l("settings-success","Success"),l("settings-successfully-updated-store","Successfully updated store"),"success")},onError:function(e){o(l("settings-error","Error"),(0,eA.u)(e),"error")}})})},{label:l("settings-cancel","Cancel"),type:"button",onClick:s}],title:l("settings-store-details","Store Details"),subtitle:l("settings-manage-your-business-details","Manage your business details"),children:(0,z.jsxs)("div",{className:"gap-y-xlarge mb-large flex flex-col",children:[(0,z.jsxs)("div",{children:[(0,z.jsx)("h2",{className:"inter-base-semibold mb-base",children:l("settings-general","General")}),(0,z.jsx)(e1.A,NR(NM({label:l("settings-store-name","Store name")},t("name")),{placeholder:l("settings-medusa-store","Medusa Store")}))]}),(0,z.jsxs)("div",{children:[(0,z.jsx)("h2",{className:"inter-base-semibold mb-base",children:l("settings-advanced-settings","Advanced settings")}),(0,z.jsx)(e1.A,NR(NM({label:l("settings-swap-link-template","Swap link template")},t("swap_link_template")),{placeholder:"https://acme.inc/swap={swap_id}"})),(0,z.jsx)(e1.A,NR(NM({className:"mt-base",label:l("settings-draft-order-link-template","Draft order link template")},t("payment_link_template")),{placeholder:"https://acme.inc/payment={payment_id}"})),(0,z.jsx)(e1.A,NR(NM({className:"mt-base",label:l("settings-invite-link-template","Invite link template")},t("invite_link_template")),{placeholder:"https://acme-admin.inc/invite?token={invite_token}"}))]})]})})]})})};function NF(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function NB(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var Nq=function(e){return{first_name:e.first_name,last_name:e.last_name}};let NH=function(e){var t=e.user,r=e.open,n=e.onClose,i=(0,J.useAdminUpdateUser)(t.id),a=i.mutate,o=i.isLoading,l=(0,J.useAdminGetSession)().refetch,s=(0,ei.Bd)().t,c=(0,eR.mN)({defaultValues:Nq(t)}),u=c.register,d=c.handleSubmit,f=c.formState.errors,p=c.reset;(0,U.useEffect)(function(){p(Nq(t))},[r,t]);var m=(0,eC.A)(),h=d(function(e){a(e,{onSuccess:function(){m(s("edit-user-information-success","Success"),s("edit-user-information-your-information-was-successfully-updated","Your information was successfully updated"),"success"),l(),n()},onError:function(){}})});return(0,z.jsxs)(eN.A,{handleClose:n,open:r,isLargeModal:!1,children:[(0,z.jsx)(eN.A.Header,{handleClose:n,children:(0,z.jsx)("h1",{className:"inter-xlarge-semibold",children:s("edit-user-information-edit-information","Edit information")})}),(0,z.jsxs)(eN.A.Body,{children:[(0,z.jsx)(eN.A.Content,{children:(0,z.jsx)("div",{className:"gap-y-base flex flex-col",children:(0,z.jsxs)("div",{className:"gap-x-base grid grid-cols-2",children:[(0,z.jsx)(e1.A,NB(NF({},u("first_name")),{errors:f,label:"First name"})),(0,z.jsx)(e1.A,NB(NF({},u("last_name")),{errors:f,label:"Last name"}))]})})}),(0,z.jsx)(eN.A.Footer,{className:"border-grey-20 pt-base border-t",children:(0,z.jsxs)("div",{className:"gap-x-xsmall flex w-full items-center justify-end",children:[(0,z.jsx)(W.A,{variant:"secondary",size:"small",onClick:n,children:s("edit-user-information-cancel","Cancel")}),(0,z.jsx)(W.A,{variant:"primary",size:"small",loading:o,disabled:o,onClick:h,children:s("edit-user-information-submit-and-close","Submit and close")})]})})]})]})},NU=function(e){var t=e.user,r=(0,n5.A)(),n=r.state,i=r.toggle,a=r.close,o=(0,ei.Bd)().t,l=(0,U.useMemo)(function(){return[null==t?void 0:t.first_name,null==t?void 0:t.last_name].filter(function(e){return e}).join(" ")},[t]);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,z.jsxs)("div",{className:"gap-x-base flex items-center",children:[(0,z.jsx)("div",{className:"w-18 border-grey-20 box-border flex aspect-square items-center justify-center rounded-full border",children:t?(0,z.jsx)("div",{className:"aspect-square w-16",children:(0,z.jsx)(rr.A,{user:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},t),color:"bg-teal-40",font:"inter-2xlarge-semibold"})}):(0,z.jsx)("div",{className:"bg-teal-40 aspect-square w-16 animate-pulse rounded-full"})}),(0,z.jsx)("div",{className:"flex flex-col",children:l?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("p",{className:"inter-base-semibold",children:l}),(0,z.jsx)("p",{className:"inter-base-regular text-grey-50",children:null==t?void 0:t.email})]}):(0,z.jsx)("p",{className:"inter-base-semibold",children:null==t?void 0:t.email})})]}),(0,z.jsx)(W.A,{variant:"secondary",size:"small",disabled:!t,onClick:i,children:o("edit-user-information-edit-information","Edit information")})]}),t&&(0,z.jsx)(NH,{open:n,onClose:a,user:t})]})};var NV=r(3044),NG=r(41833);let NW=function(e){var t=e.config,r=e.open,n=e.onClose,i=(0,ei.Bd)().t,a=(0,NV.Yd)(),o=a.mutate,l=a.isLoading,s=(0,eR.mN)({defaultValues:{opt_out:t.opt_out,anonymize:t.anonymize}}),c=s.handleSubmit,u=s.reset;(0,U.useEffect)(function(){u({opt_out:t.opt_out,anonymize:t.anonymize})},[r,t]);var d=(0,eC.A)(),f=c(function(e){o(e,{onSuccess:function(){d(i("usage-insights-success","Success"),i("usage-insights-your-information-was-successfully-updated","Your information was successfully updated"),"success"),n()},onError:function(e){d(i("usage-insights-error","Error"),(0,eA.u)(e),"error")}})});return(0,z.jsxs)(eN.A,{handleClose:n,open:r,isLargeModal:!0,children:[(0,z.jsx)(eN.A.Header,{handleClose:n,children:(0,z.jsx)("h1",{className:"inter-xlarge-semibold",children:i("usage-insights-edit-preferences","Edit preferences")})}),(0,z.jsxs)(eN.A.Body,{children:[(0,z.jsx)(eN.A.Content,{children:(0,z.jsx)(NG.A,{form:(0,eL.m)(s)})}),(0,z.jsx)(eN.A.Footer,{className:"border-grey-20 pt-base border-t",children:(0,z.jsxs)("div",{className:"gap-x-xsmall flex w-full items-center justify-end",children:[(0,z.jsx)(W.A,{variant:"secondary",size:"small",onClick:n,children:i("usage-insights-cancel","Cancel")}),(0,z.jsx)(W.A,{variant:"primary",size:"small",loading:l,disabled:l,onClick:f,children:i("usage-insights-submit-and-close","Submit and close")})]})})]})]})},NY=function(e){var t=e.user,r=(0,NV.pR)(),n=r.analytics_config,i=r.isLoading,a=(0,n5.A)(),o=a.state,l=a.toggle,s=a.close,c=(0,ei.Bd)().t;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,z.jsxs)("div",{className:"gap-y-2xsmall flex flex-col",children:[(0,z.jsxs)("div",{className:"gap-x-xsmall flex items-center",children:[(0,z.jsx)("h2",{className:"inter-base-semibold",children:c("personal-information-usage-insights-title","Usage insights")}),i?(0,z.jsx)("div",{className:"badge bg-grey-10 h-large w-16 animate-pulse"}):!n||(null==n?void 0:n.opt_out)?(0,z.jsx)(rk.A,{variant:"disabled",children:c("usage-insights-disabled","Disabled")}):(0,z.jsx)(rk.A,{variant:"success",children:c("usage-insights-active","Active")})]}),(0,z.jsx)("p",{className:"inter-base-regular text-grey-50",children:c("usage-insights-share-usage-insights-and-help-us-improve-medusa","Share usage insights and help us improve Medusa")})]}),(0,z.jsx)(W.A,{variant:"secondary",size:"small",onClick:l,disabled:!n,children:c("usage-insights-edit-preferences","Edit preferences")})]}),n&&t&&(0,z.jsx)(NW,{open:o,onClose:s,config:n})]})};var N$=r(81361);let NQ=function(){var e=(0,ei.Bd)().i18n;return(0,z.jsx)("div",{className:"w-[200px]",children:(0,z.jsxs)(xc.Select,{value:e.language,onValueChange:function(t){e.changeLanguage(t)},children:[(0,z.jsx)(xc.Select.Trigger,{children:(0,z.jsx)(xc.Select.Value,{})}),(0,z.jsx)(xc.Select.Content,{children:N$.U.map(function(e){return(0,z.jsx)(xc.Select.Item,{value:e.locale,children:e.name},e.locale)})})]})})},NK=function(){var e=(0,ei.Bd)().t;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,z.jsxs)("div",{className:"gap-y-2xsmall flex flex-col",children:[(0,z.jsx)("div",{className:"gap-x-xsmall flex items-center",children:(0,z.jsx)("h2",{className:"inter-base-semibold",children:e("personal-information-language-settings-title","Language")})}),(0,z.jsx)("p",{className:"inter-base-regular text-grey-50",children:e("personal-information-language-settings-description","Adjust the language of Medusa Admin")})]}),(0,z.jsx)(NQ,{})]}),(0,z.jsx)("div",{className:"mt-small",children:(0,z.jsx)("a",{href:"/",target:"_blank",className:"text-blue-500",rel:"noopener noreferrer",children:e("personal-information-language-settings-help-us-translate","Help us translate")})})]})},NZ=function(){var e=(0,rz.u)().isFeatureEnabled,t=(0,J.useAdminGetSession)().user,r=(0,ei.Bd)().t;return(0,z.jsxs)("div",{children:[(0,z.jsx)(eo,{label:r("personal-information-back-to-settings","Back to Settings"),path:"/a/settings",className:"mb-xsmall"}),(0,z.jsxs)("div",{className:"rounded-rounded border-grey-20 pt-large pb-xlarge px-xlarge gap-y-xlarge large:max-w-[50%] flex flex-col border bg-white",children:[(0,z.jsxs)("div",{className:"gap-y-2xsmall flex flex-col",children:[(0,z.jsx)("h1",{className:"inter-xlarge-semibold",children:r("personal-information-personal-information","Personal information")}),(0,z.jsx)("p",{className:"inter-base-regular text-grey-50",children:r("personal-information-manage-your-medusa-profile","Manage your Medusa profile")})]}),(0,z.jsxs)("div",{className:"flex flex-col",children:[(0,z.jsx)("div",{className:"border-grey-20 py-xlarge border-t",children:(0,z.jsx)(NU,{user:t})}),(0,z.jsx)("div",{className:"border-grey-20 py-xlarge border-t",children:(0,z.jsx)(NK,{})}),e("analytics")&&(0,z.jsx)("div",{className:"border-grey-20 py-xlarge border-t",children:(0,z.jsx)(NY,{user:t})})]})]})]})};function NJ(e){switch(e){case"primecargo":return{label:"Prime Cargo",value:"primecargo"};case"manual":return{label:"Manual",value:"manual"};case"webshipper":return{label:"Webshipper",value:"webshipper"};default:return{label:e,value:e}}}var NX={stripe:{label:"Stripe",value:"stripe"},"stripe-ideal":{label:"Stripe Ideal",value:"stripe-ideal"},"stripe-giropay":{label:"Stripe Giropay",value:"stripe-giropay"},"stripe-bancontact":{label:"Stripe Bancontact",value:"stripe-bancontact"},"stripe-przelewy24":{label:"Stripe Przelewy24",value:"stripe-przelewy24"},"stripe-blik":{label:"Stripe Blik",value:"stripe-blik"},"mobilepay-adyen":{label:"MobilePay via Adyen",value:"mobilepay-adyen"},"scheme-adyen":{label:"Cards via Adyen",value:"scheme-adyen"},"klarna-adyen":{label:"Klarna via Adyen",value:"klarna-adyen"},klarna:{label:"Klarna",value:"klarna"},"paywithgoogle-adyen":{label:"GooglePay via Adyen",value:"paywithgoogle-adyen"},"applepay-adyen":{label:"ApplePay via Adyen",value:"applepay-adyen"},"paypal-adyen":{label:"PayPal via Adyen",value:"paypal-adyen"},"ideal-adyen":{label:"iDEAL via Adyen",value:"ideal-adyen"},manual:{label:"Manual",value:"manual"}};function N0(e){var t;return null!==(t=NX[e])&&void 0!==t?t:{label:e,value:e}}var N1=function(){var e=(0,J.useAdminStore)(),t=e.store,r=e.isLoading,n=t.fulfillment_providers,i=t.payment_providers;return{paymentProviderOptions:(0,U.useMemo)(function(){return r?[]:(null==i?void 0:i.map(function(e){return N0(e.id)}))||[]},[i,r]),fulfillmentProviderOptions:(0,U.useMemo)(function(){return r?[]:(null==n?void 0:n.map(function(e){return NJ(e.id)}))||[]},[n,r]),currencyOptions:(0,U.useMemo)(function(){return r?[]:(null==t?void 0:t.currencies.map(function(e){return{label:e.name,value:e.code}}))||[]},[t,r]),countryOptions:uO.map(function(e){return{label:e.name,value:e.alpha2.toLowerCase()}})}};function N2(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function N3(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}let N5=function(e){var t=e.form,r=e.isCreate,n=void 0!==r&&r,i=t.control,a=t.register,o=t.path,l=t.formState.errors,s=N1(),c=s.currencyOptions,u=s.countryOptions,d=(0,ei.Bd)().t;return(0,z.jsxs)("div",{children:[(0,z.jsxs)("div",{className:"gap-large grid grid-cols-2",children:[(0,z.jsx)(e1.A,N3(N2({label:d("region-form-title","Title"),placeholder:d("region-form-europe","Europe"),required:!0},a(o("name"),{required:"Title is required",minLength:n8.A.minOneCharRule("Title"),pattern:n8.A.whiteSpaceRule("Title")})),{errors:l})),(0,z.jsx)(eR.xI,{control:i,name:o("currency_code"),rules:{required:d("region-form-currency-code-is-required","Currency code is required")},render:function(e){var t=e.field;return(0,z.jsx)(no,N3(N2({label:d("region-form-currency","Currency"),placeholder:d("region-form-choose-currency","Choose currency"),required:!0},t),{options:c,name:o("currency_code"),errors:l}))}}),n&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(e1.A,N3(N2({label:d("region-form-default-tax-rate","Default Tax Rate"),required:!0,placeholder:"25",prefix:"%",step:1,type:"number"},a(o("tax_rate"),{required:n?d("region-form-tax-rate-is-required","Tax rate is required"):void 0,max:{value:100,message:d("region-form-tax-rate-must-be-equal-to-or-less-than-100","Tax rate must be equal to or less than 100")},min:n8.A.nonNegativeNumberRule("Tax rate"),valueAsNumber:!0})),{errors:l})),(0,z.jsx)(e1.A,N3(N2({label:d("region-form-default-tax-code","Default Tax Code"),placeholder:"1000"},a(o("tax_code"))),{errors:l}))]}),(0,z.jsx)(eR.xI,{control:i,name:o("countries"),render:function(e){var t=e.field;return(0,z.jsx)(no,N3(N2({label:d("region-form-countries","Countries"),placeholder:d("region-form-choose-countries","Choose countries"),isMulti:!0,selectAll:!0},t),{name:o("countries"),errors:l,options:u}))}})]}),(0,z.jsx)(uT,{featureFlag:"tax_inclusive_pricing",children:(0,z.jsxs)("div",{className:"mt-xlarge flex items-start justify-between",children:[(0,z.jsxs)("div",{className:"gap-y-2xsmall flex flex-col",children:[(0,z.jsx)("h3",{className:"inter-base-semibold",children:d("region-form-tax-inclusive-prices","Tax inclusive prices")}),(0,z.jsx)("p",{className:"inter-base-regular text-grey-50",children:d("region-form-when-enabled-region-prices-will-be-tax-inclusive","When enabled region prices will be tax inclusive.")})]}),(0,z.jsx)(eR.xI,{control:i,name:o("includes_tax"),render:function(e){var t=e.field,r=t.value,n=t.onChange;return(0,z.jsx)(so.A,{checked:r,onCheckedChange:n})}})]})})]})},N6=function(e){var t=e.form,r=t.control,n=t.path,i=t.formState.errors,a=(0,ei.Bd)().t,o=N1(),l=o.fulfillmentProviderOptions,s=o.paymentProviderOptions;return(0,z.jsxs)("div",{className:"gap-large grid grid-cols-2",children:[(0,z.jsx)(eR.xI,{control:r,name:n("payment_providers"),rules:{required:a("region-form-payment-providers-are-required","Payment providers are required"),minLength:{value:1,message:a("region-form-payment-providers-are-required","Payment providers are required")}},render:function(e){var t=e.field,r=t.value,o=t.onBlur,l=t.onChange;return(0,z.jsx)(no,{label:a("region-form-payment-providers","Payment Providers"),placeholder:a("region-form-choose-payment-providers","Choose payment providers..."),options:s,isMulti:!0,isClearable:!0,required:!0,selectAll:!0,value:r,onChange:l,onBlur:o,name:n("payment_providers"),errors:i})}}),(0,z.jsx)(eR.xI,{control:r,name:n("fulfillment_providers"),rules:{required:a("region-form-fulfillment-providers-are-required","Fulfillment providers are required"),minLength:{value:1,message:a("region-form-fulfillment-providers-are-required","Fulfillment providers are required")}},render:function(e){var t=e.field,r=t.onBlur,o=t.onChange,s=t.value;return(0,z.jsx)(no,{label:a("region-form-fulfillment-providers","Fulfillment Providers"),placeholder:a("region-form-choose-fulfillment-providers","Choose fulfillment providers..."),options:l,required:!0,isMulti:!0,isClearable:!0,selectAll:!0,value:s,onChange:o,onBlur:r,name:n("fulfillment_providers"),errors:i})}})]})};var N4=function(e){return{details:{countries:e.countries?e.countries.map(function(e){return{value:e.iso_2,label:e.display_name}}):[],currency_code:{value:e.currency_code,label:sS.q[e.currency_code.toUpperCase()].name},name:e.name,tax_code:null,tax_rate:null,includes_tax:e.includes_tax},providers:{fulfillment_providers:e.fulfillment_providers?e.fulfillment_providers.map(function(e){return NJ(e.id)}):[],payment_providers:e.payment_providers?e.payment_providers.map(function(e){return N0(e.id)}):[]},metadata:eJ(e.metadata)}};let N8=function(e){var t=e.region,r=e.onClose,n=e.open,i=(0,ei.Bd)().t,a=(0,eR.mN)({defaultValues:N4(t)}),o=(0,rz.u)().isFeatureEnabled,l=a.reset,s=a.handleSubmit,c=a.formState.isDirty,u=function(){l(N4(t)),r()};(0,U.useEffect)(function(){l(N4(t))},[t,l]);var d=(0,J.useAdminUpdateRegion)(t.id),f=d.mutate,p=d.isLoading,m=(0,eC.A)(),h=s(function(e){var t,r={name:e.details.name,currency_code:null===(t=e.details.currency_code)||void 0===t?void 0:t.value,payment_providers:e.providers.payment_providers.map(function(e){return e.value}),fulfillment_providers:e.providers.fulfillment_providers.map(function(e){return e.value}),countries:e.details.countries.map(function(e){return e.value}),metadata:eZ(e.metadata)};o("tax_inclusive_pricing")&&(r.includes_tax=e.details.includes_tax),f(r,{onSuccess:function(){m(i("general-section-success","Success"),i("general-section-region-was-successfully-updated","Region was successfully updated"),"success"),u()},onError:function(e){m(i("general-section-error","Error"),(0,eA.u)(e),"error")}})});return(0,z.jsx)(eN.A,{handleClose:u,open:n,children:(0,z.jsxs)(eN.A.Body,{children:[(0,z.jsx)(eN.A.Header,{handleClose:u,children:(0,z.jsx)("h1",{className:"inter-xlarge-semibold",children:i("general-section-edit-region-details","Edit Region Details")})}),(0,z.jsxs)("form",{onSubmit:h,children:[(0,z.jsxs)(eN.A.Content,{children:[(0,z.jsxs)("div",{children:[(0,z.jsx)("h3",{className:"inter-base-semibold mb-base",children:i("general-section-details","Details")}),(0,z.jsx)(N5,{form:(0,eL.m)(a,"details")})]}),(0,z.jsx)("div",{className:"bg-grey-20 my-xlarge h-px w-full"}),(0,z.jsxs)("div",{children:[(0,z.jsx)("h3",{className:"inter-base-semibold mb-base",children:i("general-section-providers","Providers")}),(0,z.jsx)(N6,{form:(0,eL.m)(a,"providers")})]}),(0,z.jsx)("div",{className:"bg-grey-20 my-xlarge h-px w-full"}),(0,z.jsxs)("div",{children:[(0,z.jsx)("h3",{className:"inter-base-semibold mb-base",children:i("general-section-metadata","Metadata")}),(0,z.jsx)(e$,{form:(0,eL.m)(a,"metadata")})]})]}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"gap-x-xsmall flex w-full items-center justify-end",children:[(0,z.jsx)(W.A,{variant:"secondary",size:"small",type:"button",onClick:u,children:i("general-section-cancel","Cancel")}),(0,z.jsx)(W.A,{variant:"primary",size:"small",type:"submit",loading:p,disabled:p||!c,children:i("general-section-save-and-close","Save and close")})]})})]})]})})};function N7(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}var N9=function(e){var t=e.title,r=e.children;return(0,z.jsxs)("div",{className:"inter-base-regular text-grey-50 flex items-center justify-between",children:[(0,z.jsx)("p",{children:t}),r]})};let ke=function(e){var t,r,n=e.region,i=(0,n5.A)(),a=i.state,o=i.toggle,l=i.close,s=(0,J.useAdminDeleteRegion)(n.id).mutate,c=(0,H.useNavigate)(),u=(0,eC.A)(),d=rL(),f=(t=function(){return function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,function(e){switch(e.label){case 0:return[4,d({heading:"Delete Region",text:"Are you sure you want to delete this region?",extraConfirmation:!0,entityName:n.name})];case 1:return e.sent()&&s(void 0,{onSuccess:function(){c("/a/settings/regions",{replace:!0}),u("Success","Region has been deleted","success"),c("/a/settings/regions",{replace:!0})},onError:function(e){u("Error",(0,eA.u)(e),"error")}}),[2]}})},r=function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function o(e){N7(a,n,i,o,l,"next",e)}function l(e){N7(a,n,i,o,l,"throw",e)}o(void 0)})},function(){return r.apply(this,arguments)});return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(eM,{title:n.name,actions:[{label:"Edit Region Details",onClick:o,icon:(0,z.jsx)(ec,{size:20,className:"text-grey-50"})},{label:"Delete Region",onClick:f,icon:(0,z.jsx)(eu,{size:20}),variant:"danger"}],children:(0,z.jsxs)("div",{className:"gap-y-xsmall mt-large flex flex-col",children:[(0,z.jsx)("h2",{className:"inter-large-semibold",children:"Details"}),(0,z.jsxs)("div",{className:"gap-y-xsmall flex flex-col",children:[(0,z.jsx)(N9,{title:"Currency",children:(0,z.jsxs)("div",{className:"gap-x-xsmall flex items-center",children:[(0,z.jsx)("span",{className:"inter-base-semibold text-grey-90",children:n.currency_code.toUpperCase()}),(0,z.jsx)("span",{children:sS.q[n.currency_code.toUpperCase()].name})]})}),(0,z.jsx)(N9,{title:"Countries",children:(0,z.jsx)("div",{children:n.countries&&n.countries.length?(0,z.jsxs)("div",{className:"gap-x-xsmall flex items-center",children:[(0,z.jsx)("p",{children:n.countries.slice(0,4).map(function(e){return e.display_name}).join(", ")}),n.countries.length>4&&(0,z.jsx)(r9.A,{side:"right",content:(0,z.jsx)("ul",{children:n.countries.slice(4).map(function(e){return(0,z.jsx)("li",{children:e.display_name},e.id)})}),children:(0,z.jsxs)("span",{className:"cursor-default",children:["+ ",n.countries.length-4," more"]})})]}):(0,z.jsx)("p",{children:"No countries configured"})})}),(0,z.jsx)(N9,{title:"Payment providers",children:(0,z.jsx)("div",{children:n.payment_providers&&n.payment_providers.length?(0,z.jsxs)("div",{className:"gap-x-xsmall flex items-center",children:[(0,z.jsx)("p",{children:n.payment_providers.slice(0,4).map(function(e){return N0(e.id).label}).join(", ")}),n.payment_providers.length>4&&(0,z.jsx)(r9.A,{side:"right",content:(0,z.jsx)("ul",{children:n.payment_providers.slice(4).map(function(e){return(0,z.jsx)("li",{children:N0(e.id)},e.id)})}),children:(0,z.jsxs)("span",{className:"cursor-default",children:["+ ",n.payment_providers.length-4," more"]})})]}):(0,z.jsx)("p",{children:"No payment providers configured"})})}),(0,z.jsx)(N9,{title:"Fulfillment providers",children:(0,z.jsx)("div",{children:n.payment_providers&&n.payment_providers.length?(0,z.jsxs)("div",{className:"gap-x-xsmall flex items-center",children:[(0,z.jsx)("p",{children:n.fulfillment_providers.slice(0,4).map(function(e){return NJ(e.id).label}).join(", ")}),n.fulfillment_providers.length>4&&(0,z.jsx)(r9.A,{side:"right",content:(0,z.jsx)("ul",{children:n.fulfillment_providers.slice(4).map(function(e){return(0,z.jsx)("li",{children:NJ(e.id)},e.id)})}),children:(0,z.jsxs)("span",{className:"cursor-default",children:["+ ",n.fulfillment_providers.length-4," more"]})})]}):(0,z.jsx)("p",{children:"No fulfillment providers configured"})})})]})]})}),(0,z.jsx)(N8,{region:n,onClose:l,open:a})]})};function kt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function kr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return kt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kt(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var kn=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=(0,J.useAdminShippingProfiles)().shipping_profiles,n=(0,J.useAdminRegionFulfillmentOptions)(e).fulfillment_options,i=(0,U.useMemo)(function(){return n?n.reduce(function(e,r,n){var i=r.options.filter(function(e){return!!e.is_return==!!t});return e.concat(i.map(function(e,t){return{label:"".concat(e.name||e.id," via ").concat(NJ(r.provider_id).label),value:"".concat(n,".").concat(t)}}))},[]):[]},[n]),a=(0,U.useMemo)(function(){return(null==r?void 0:r.map(function(e){return{value:e.id,label:e.name}}))||[]},[r]),o=function(e){var r=null==n?void 0:n.map(function(e){var r,n,i=e.options.filter(function(e){return!!e.is_return==!!t});return r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),n=n={options:i},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))}),r}),i=kr(e.split("."),2),a=i[0],o=i[1],l=(null==r?void 0:r[a])||{},s=l.provider_id,c=l.options;return{provider_id:s,data:(null==c?void 0:c[o])||{}}},l=function(e){return Object.entries(e.requirements).reduce(function(e,t){var r=kr(t,2),n=r[0],i=r[1];return"number"==typeof(null==i?void 0:i.amount)&&i.amount>=0&&e.push({type:n,amount:i.amount,id:i.id||void 0}),e},[])};return{shippingProfileOptions:a,fulfillmentOptions:i,getFulfillmentData:o,getRequirementsData:l,getShippingOptionData:function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=o(e.fulfillment_provider.value),a=i.provider_id,s=i.data,c={is_return:!1,region_id:t.id,profile_id:null===(r=e.shipping_profile)||void 0===r?void 0:r.value,name:e.name,data:s,price_type:e.price_type.value,provider_id:a,admin_only:!e.store_option,amount:e.amount,requirements:l(e),metadata:eZ(e.metadata)};return n&&(c.is_return=!0,c.price_type="flat_rate"),{payload:c}}}};function ki(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function ka(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}let ko=function(e){var t,r=e.form,n=e.region,i=e.isEdit,a=r.register,o=r.watch,l=r.control,s=r.formState.errors,c=(0,ei.Bd)().t,u=kn(n.id),d=u.shippingProfileOptions,f=u.fulfillmentOptions;return(0,z.jsxs)("div",{children:[(0,z.jsx)("div",{children:(0,z.jsxs)("div",{className:"gap-y-2xsmall flex flex-col",children:[(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,z.jsx)("h3",{className:"inter-base-semibold mb-2xsmall",children:c("shipping-option-form-visible-in-store","Visible in store")}),(0,z.jsx)(eR.xI,{control:l,name:"store_option",render:function(e){var t=e.field,r=t.value,n=t.onChange;return(0,z.jsx)(so.A,{checked:r,onCheckedChange:n})}})]}),(0,z.jsx)("p",{className:"inter-base-regular text-grey-50",children:c("shipping-option-form-enable-or-disable-the-shipping-option-visiblity-in-store","Enable or disable the shipping option visiblity in store.")})]})}),(0,z.jsx)("div",{className:"bg-grey-20 my-xlarge h-px w-full"}),(0,z.jsxs)("div",{children:[(0,z.jsx)("h3",{className:"inter-base-semibold mb-base",children:c("shipping-option-form-details","Details")}),(0,z.jsxs)("div",{className:"gap-large grid grid-cols-2",children:[(0,z.jsx)(e1.A,ka(ki({label:c("shipping-option-form-title","Title"),required:!0},a("name",{required:c("shipping-option-form-title-is-required","Title is required"),pattern:n8.A.whiteSpaceRule("Title"),minLength:n8.A.minOneCharRule("Title")})),{errors:s})),(0,z.jsxs)("div",{className:"gap-large flex items-center",children:[(0,z.jsx)(eR.xI,{control:l,name:"price_type",render:function(e){var t=e.field,r=t.onChange,n=t.value,i=t.onBlur;return(0,z.jsx)(no,{label:c("shipping-option-form-price-type","Price Type"),required:!0,value:n,onChange:r,onBlur:i,options:[{label:c("shipping-option-form-flat-rate","Flat Rate"),value:"flat_rate"},{label:c("shipping-option-form-calculated","Calculated"),value:"calculated"}],placeholder:c("shipping-option-form-choose-a-price-type","Choose a price type"),errors:s})}}),(null===(t=o("price_type"))||void 0===t?void 0:t.value)==="flat_rate"&&(0,z.jsx)(eR.xI,{control:l,name:"amount",rules:{min:n8.A.nonNegativeNumberRule("Price"),max:n8.A.maxInteger("Price",n.currency_code)},render:function(e){var t=e.field,r=t.value,i=t.onChange;return(0,z.jsxs)("div",{children:[(0,z.jsx)(iX.A,{label:c("shipping-option-form-price","Price"),className:"mb-2xsmall",tooltip:(0,z.jsx)(ui,{includesTax:n.includes_tax})}),(0,z.jsx)(sC,{amount:r||void 0,onChange:i,name:"amount",currencyCode:n.currency_code,errors:s})]})}})]}),!(void 0!==i&&i)&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(eR.xI,{control:l,name:"shipping_profile",render:function(e){var t=e.field;return(0,z.jsx)(no,ka(ki({label:c("shipping-option-form-shipping-profile","Shipping Profile"),required:!0,options:d,placeholder:c("shipping-option-form-choose-a-shipping-profile","Choose a shipping profile")},t),{errors:s}))}}),(0,z.jsx)(eR.xI,{control:l,name:"fulfillment_provider",render:function(e){var t=e.field;return(0,z.jsx)(no,ka(ki({label:c("shipping-option-form-fulfillment-method","Fulfillment Method"),required:!0,placeholder:c("shipping-option-form-choose-a-fulfillment-method","Choose a fulfillment method"),options:f},t),{errors:s}))}})]})]})]}),(0,z.jsx)("div",{className:"bg-grey-20 my-xlarge h-px w-full"}),(0,z.jsxs)("div",{children:[(0,z.jsx)("h3",{className:"inter-base-semibold mb-base",children:c("shipping-option-form-requirements","Requirements")}),(0,z.jsxs)("div",{className:"gap-large grid grid-cols-2",children:[(0,z.jsx)(eR.xI,{control:l,name:"requirements.min_subtotal.amount",rules:{min:n8.A.nonNegativeNumberRule("Min. subtotal"),max:n8.A.maxInteger("Min. subtotal",n.currency_code),validate:function(e){if(null===e)return!0;var t=r.getValues("requirements.max_subtotal.amount");return!t||!(e>t)||c("shipping-option-form-min-subtotal-must-be-less-than-max-subtotal","Min. subtotal must be less than max. subtotal")}},render:function(e){var t=e.field,r=t.value,i=t.onChange;return(0,z.jsxs)("div",{children:[(0,z.jsx)(iX.A,{label:c("shipping-option-form-min-subtotal","Min. subtotal"),className:"mb-xsmall",tooltip:(0,z.jsx)(ui,{includesTax:n.includes_tax})}),(0,z.jsx)(sC,{amount:"number"==typeof r?r:void 0,onChange:i,name:"requirements.min_subtotal.amount",currencyCode:n.currency_code,errors:s})]})}}),(0,z.jsx)(eR.xI,{control:l,name:"requirements.max_subtotal.amount",rules:{min:n8.A.nonNegativeNumberRule("Max. subtotal"),max:n8.A.maxInteger("Max. subtotal",n.currency_code),validate:function(e){if(null===e)return!0;var t=r.getValues("requirements.min_subtotal.amount");return!t||!(e<t)||"Max. subtotal must be greater than min. subtotal"}},render:function(e){var t=e.field,r=t.value,i=t.onChange,a=t.ref;return(0,z.jsxs)("div",{ref:a,children:[(0,z.jsx)(iX.A,{label:c("shipping-option-form-max-subtotal","Max. subtotal"),className:"mb-xsmall",tooltip:(0,z.jsx)(ui,{includesTax:n.includes_tax})}),(0,z.jsx)(sC,{amount:"number"==typeof r?r:void 0,onChange:i,name:"requirements.max_subtotal.amount",currencyCode:n.currency_code,errors:s})]})}})]})]}),(0,z.jsx)("div",{className:"bg-grey-20 my-xlarge h-px w-full"}),(0,z.jsxs)("div",{children:[(0,z.jsx)("h3",{className:"inter-base-semibold mb-base",children:c("shipping-option-form-metadata","Metadata")}),(0,z.jsx)(e$,{form:(0,eL.m)(r,"metadata")})]})]})};var kl=function(e){var t=e.requirements.find(function(e){return"min_subtotal"===e.type}),r=e.requirements.find(function(e){return"max_subtotal"===e.type});return{store_option:!e.admin_only,name:e.name,price_type:{label:"flat_rate"===e.price_type?"Flat rate":"Calculated Price",value:e.price_type},fulfillment_provider:null,shipping_profile:null,requirements:{min_subtotal:t?{amount:t.amount,id:t.id}:null,max_subtotal:r?{amount:r.amount,id:r.id}:null},amount:e.amount,metadata:eJ(e.metadata)}};let ks=function(e){var t=e.open,r=e.onClose,n=e.option,i=(0,ei.Bd)().t,a=(0,eR.mN)({defaultValues:kl(n)}),o=(0,J.useAdminUpdateShippingOption)(n.id),l=o.mutate,s=o.isLoading,c=kn(n.region_id).getRequirementsData,u=(0,eC.A)(),d=a.reset,f=a.handleSubmit,p=a.formState.isDirty;(0,U.useEffect)(function(){t&&d(kl(n))},[n,d,t]);var m=function(){d(kl(n)),r()},h=f(function(e){l({name:e.name,requirements:c(e),admin_only:!e.store_option,amount:e.amount,metadata:eZ(e.metadata)},{onSuccess:function(){u(i("shipping-option-card-success","Success"),i("shipping-option-card-shipping-option-updated","Shipping option updated"),"success"),m()},onError:function(e){u(i("shipping-option-card-error","Error"),(0,eA.u)(e),"error")}})});return(0,z.jsx)(eN.A,{open:t,handleClose:m,children:(0,z.jsxs)(eN.A.Body,{children:[(0,z.jsx)(eN.A.Header,{handleClose:m,children:(0,z.jsx)("h1",{className:"inter-xlarge-semibold",children:i("shipping-option-card-edit-shipping-option","Edit Shipping Option")})}),(0,z.jsxs)("form",{onSubmit:h,children:[(0,z.jsxs)(eN.A.Content,{children:[(0,z.jsxs)("div",{children:[(0,z.jsx)("p",{className:"inter-base-semibold",children:i("shipping-option-card-fulfillment-method","Fulfillment Method")}),(0,z.jsxs)("p",{className:"inter-base-regular text-grey-50",children:[n.data.id," via ",n.provider_id]})]}),(0,z.jsx)("div",{className:"bg-grey-20 my-xlarge h-px w-full"}),(0,z.jsx)(ko,{form:a,region:n.region,isEdit:!0})]}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"gap-x-xsmall flex w-full items-center justify-end",children:[(0,z.jsx)(W.A,{variant:"secondary",size:"small",onClick:m,children:i("shipping-option-card-cancel","Cancel")}),(0,z.jsx)(W.A,{variant:"primary",size:"small",type:"submit",loading:s,disabled:s||!p,children:i("shipping-option-card-save-and-close","Save and close")})]})})]})]})})};!function(e){e.FLAT_RATE="flat_rate",e.CALCULATED="calculated"}(R||(R={}));let kc=function(e){var t,r,n,i,a=e.option,o=(0,ei.Bd)().t,l=(0,n5.A)(),s=l.state,c=l.toggle,u=l.close,d=(0,J.useAdminDeleteShippingOption)(a.id).mutate,f=(0,eC.A)();return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("div",{className:"bg-grey-0 rounded-rounded border-grey-20 p-base flex items-center justify-between border",children:[(0,z.jsxs)("div",{className:"gap-x-base flex items-center",children:[(0,z.jsx)("div",{className:"bg-grey-10 rounded-rounded flex h-10 w-10 items-center justify-center p-2.5",children:(0,z.jsx)(bV,{size:20,className:"text-grey-50"})}),(0,z.jsxs)("div",{children:[(0,z.jsx)("p",{className:"inter-base-semibold",children:a.name}),(0,z.jsx)("div",{children:(0,z.jsxs)("p",{className:"inter-small-regular text-grey-50",children:["flat_rate"===a.price_type?o("shipping-option-card-flat-rate","Flat Rate"):o("shipping-option-card-calcualted","Calcualted"),":"," ",(0,rg.PA)({amount:a.amount,currencyCode:a.region.currency_code})," ","- ",o("shipping-option-card-min-subtotal","Min. subtotal:")," ",(0,rg.PA)({amount:null===(r=a.requirements)||void 0===r?void 0:null===(t=r.find(function(e){return"min_subtotal"===e.type}))||void 0===t?void 0:t.amount,currencyCode:a.region.currency_code})," ","- ",o("shipping-option-card-max-subtotal","Max. subtotal:")," ",(0,rg.PA)({amount:null===(i=a.requirements)||void 0===i?void 0:null===(n=i.find(function(e){return"max_subtotal"===e.type}))||void 0===n?void 0:n.amount,currencyCode:a.region.currency_code})]})})]})]}),(0,z.jsxs)("div",{className:"gap-x-base flex items-center",children:[(0,z.jsx)("div",{className:(0,en.default)("px-xsmall rounded-rounded py-0.5",{"bg-grey-10 text-grey-50":a.admin_only,"bg-emerald-10 text-emerald-50":!a.admin_only}),children:(0,z.jsx)("span",{className:"inter-small-semibold",children:a.admin_only?o("shipping-option-card-admin","Admin"):o("shipping-option-card-store","Store")})}),(0,z.jsx)("div",{children:(0,z.jsx)(em,{actions:[{label:o("shipping-option-card-edit","Edit"),onClick:c,icon:(0,z.jsx)(ec,{size:20})},{label:o("shipping-option-card-delete","Delete"),onClick:function(){d(void 0,{onSuccess:function(){f(o("shipping-option-card-success","Success"),o("shipping-option-card-shipping-option-has-been-deleted","Shipping option has been deleted"),"success")},onError:function(e){f(o("shipping-option-card-error","Error"),(0,eA.u)(e),"error")}})},icon:(0,z.jsx)(eu,{size:20}),variant:"danger"}]})})]})]}),(0,z.jsx)(ks,{option:a,open:s,onClose:u})]})},ku=function(e){var t=e.open,r=e.onClose,n=e.region,i=(0,ei.Bd)().t,a=(0,eR.mN)(),o=a.formState.isDirty,l=a.handleSubmit,s=a.reset,c=(0,J.useAdminCreateShippingOption)(),u=c.mutate,d=c.isLoading,f=kn(n.id).getShippingOptionData,p=(0,eC.A)(),m=(0,rz.u)().isFeatureEnabled,h=function(){s(),r()},y=l(function(e){var t=f(e,n,!0).payload;m("tax_inclusive_pricing")&&(t.includes_tax=n.includes_tax),u(t,{onSuccess:function(){p(i("return-shipping-options-success","Success"),i("return-shipping-options-shipping-option-created","Shipping option created"),"success"),h()},onError:function(e){p(i("return-shipping-options-error","Error"),(0,eA.u)(e),"error")}})});return(0,z.jsx)(eN.A,{open:t,handleClose:h,children:(0,z.jsxs)(eN.A.Body,{children:[(0,z.jsx)(eN.A.Header,{handleClose:h,children:(0,z.jsx)("h1",{className:"inter-xlarge-semibold",children:i("return-shipping-options-add-return-shipping-option","Add Return Shipping Option")})}),(0,z.jsxs)("form",{onSubmit:y,children:[(0,z.jsx)(eN.A.Content,{children:(0,z.jsx)(ko,{form:a,region:n})}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"gap-x-xsmall flex w-full items-center justify-end",children:[(0,z.jsx)(W.A,{variant:"secondary",size:"small",type:"button",onClick:h,children:i("return-shipping-options-cancel","Cancel")}),(0,z.jsx)(W.A,{variant:"primary",size:"small",type:"submit",loading:d,disabled:d||!o,children:i("return-shipping-options-save-and-close","Save and close")})]})})]})]})})},kd=function(e){var t=e.region,r=(0,ei.Bd)().t,n=(0,J.useAdminShippingOptions)({region_id:t.id,is_return:!0}).shipping_options,i=(0,n5.A)(),a=i.state,o=i.toggle,l=i.close;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(eM,{title:r("return-shipping-options-return-shipping-options","Return Shipping Options"),actions:[{label:r("return-shipping-options-add-option","Add Option"),onClick:o}],children:(0,z.jsxs)("div",{className:"gap-y-large flex flex-col",children:[(0,z.jsx)("p",{className:"inter-base-regular text-grey-50",children:r("return-shipping-options-enter-specifics-about-available-regional-return-shipment-methods","Enter specifics about available regional return shipment methods.")}),(0,z.jsx)("div",{className:"gap-y-small flex flex-col",children:null==n?void 0:n.map(function(e){return(0,z.jsx)(kc,{option:e},e.id)})})]})}),(0,z.jsx)(ku,{onClose:l,open:a,region:t})]})},kf=function(e){var t=e.open,r=e.onClose,n=e.region,i=(0,ei.Bd)().t,a=(0,eR.mN)(),o=(0,rz.u)().isFeatureEnabled,l=a.formState.isDirty,s=a.handleSubmit,c=a.reset,u=(0,J.useAdminCreateShippingOption)(),d=u.mutate,f=u.isLoading,p=kn(n.id).getShippingOptionData,m=(0,eC.A)(),h=function(){c(),r()},y=s(function(e){var t=p(e,n).payload;o("tax_inclusive_pricing")&&(t.includes_tax=n.includes_tax),d(t,{onSuccess:function(){m(i("shipping-options-success","Success"),i("shipping-options-shipping-option-created","Shipping option created"),"success"),h()},onError:function(e){m(i("shipping-options-error","Error"),(0,eA.u)(e),"error")}})});return(0,z.jsx)(eN.A,{open:t,handleClose:h,children:(0,z.jsxs)(eN.A.Body,{children:[(0,z.jsx)(eN.A.Header,{handleClose:h,children:(0,z.jsx)("h1",{className:"inter-xlarge-semibold",children:i("shipping-options-add-shipping-option","Add Shipping Option")})}),(0,z.jsxs)("form",{onSubmit:y,children:[(0,z.jsx)(eN.A.Content,{children:(0,z.jsx)(ko,{form:a,region:n})}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"gap-x-xsmall flex w-full items-center justify-end",children:[(0,z.jsx)(W.A,{variant:"secondary",size:"small",type:"button",onClick:h,children:i("shipping-options-cancel","Cancel")}),(0,z.jsx)(W.A,{variant:"primary",size:"small",type:"submit",loading:f,disabled:f||!l,children:i("shipping-options-save-and-close","Save and close")})]})})]})]})})},kp=function(e){var t=e.region,r=(0,ei.Bd)().t,n=(0,J.useAdminShippingOptions)({region_id:t.id,is_return:!1}).shipping_options,i=(0,n5.A)(),a=i.state,o=i.toggle,l=i.close;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(eM,{title:r("shipping-options-shipping-options","Shipping Options"),actions:[{label:r("shipping-options-add-option","Add Option"),onClick:o}],children:(0,z.jsxs)("div",{className:"gap-y-large flex flex-col",children:[(0,z.jsx)("p",{className:"inter-base-regular text-grey-50",children:r("shipping-options-enter-specifics-about-available-regional-shipment-methods","Enter specifics about available regional shipment methods.")}),(0,z.jsx)("div",{className:"gap-y-small flex flex-col",children:null==n?void 0:n.map(function(e){return(0,z.jsx)(kc,{option:e},e.id)})})]})}),(0,z.jsx)(kf,{open:a,onClose:l,region:t})]})},km=function(e){var t=e.id,r=(0,ei.Bd)().t,n=(0,J.useAdminRegion)(t,{enabled:!!t}),i=n.region,a=n.isLoading,o=n.isError;return a?(0,z.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,z.jsx)(X.A,{variant:"secondary"})}):o?(0,z.jsxs)("div",{className:"bg-grey-0 rounded-rounded border-grey-20 gap-y-xsmall flex h-full w-full flex-col items-center justify-center border text-center ",children:[(0,z.jsx)("h1",{className:"inter-large-semibold",children:r("edit-something-went-wrong","Something went wrong...")}),(0,z.jsx)("p",{className:"inter-base-regular text-grey-50",children:r("edit-no-region-found","We can't find a region with that ID, use the menu to the left to select a region.")})]}):i?(0,z.jsxs)("div",{className:"gap-y-xsmall flex flex-col",children:[(0,z.jsx)(ke,{region:i}),(0,z.jsx)(kp,{region:i}),(0,z.jsx)(kd,{region:i})]}):null};function kh(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ky(e,t){if(e){if("string"==typeof e)return kh(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kh(e,t)}}let kb=function(e){var t,r=e.onClose,n=(0,ei.Bd)().t,i=function(e){if(Array.isArray(e))return e}(t=(0,U.useState)(["details"]))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(t,2)||ky(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),a=i[0],o=i[1],l=(0,eR.mN)({defaultValues:kv()}),s=l.formState.isDirty,c=l.handleSubmit,u=l.reset,d=(0,J.useAdminCreateRegion)(),f=d.mutate,p=d.isLoading,m=(0,H.useNavigate)(),h=(0,eC.A)(),y=(0,rz.u)().isFeatureEnabled,b=function(){u(kv()),r()},v=c(function(e){var t,r={name:e.details.name,countries:e.details.countries.map(function(e){return e.value}),currency_code:null===(t=e.details.currency_code)||void 0===t?void 0:t.value,fulfillment_providers:e.providers.fulfillment_providers.map(function(e){return e.value}),payment_providers:e.providers.payment_providers.map(function(e){return e.value}),tax_rate:e.details.tax_rate,tax_code:e.details.tax_code||void 0};y("tax_inclusive_pricing")&&(r.includes_tax=e.details.includes_tax),f(r,{onSuccess:function(e){var t=e.region;h(n("new-success","Success"),n("new-region-created","Region created"),"success"),m("/a/settings/regions/".concat(t.id)),b()},onError:function(e){h(n("new-error","Error"),(0,eA.u)(e),"error")}})},function(e){e.providers&&!a.includes("providers")&&o(function(e){return((function(e){if(Array.isArray(e))return kh(e)})(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ky(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat(["providers"])})});return(0,z.jsx)("form",{className:"w-full",onSubmit:v,noValidate:!0,children:(0,z.jsxs)(sF.A,{children:[(0,z.jsx)(sF.A.Header,{children:(0,z.jsxs)("div",{className:"medium:w-8/12 flex w-full justify-between px-8",children:[(0,z.jsx)(W.A,{size:"small",variant:"ghost",type:"button",onClick:b,children:(0,z.jsx)(ao.A,{size:20})}),(0,z.jsx)("div",{className:"gap-x-small flex",children:(0,z.jsx)(W.A,{size:"small",variant:"primary",loading:p,disabled:!s||p,type:"submit",children:n("new-create-region","Create region")})})]})}),(0,z.jsx)(sF.A.Main,{className:"no-scrollbar flex w-full justify-center",children:(0,z.jsx)("div",{className:"small:w-4/5 medium:w-7/12 large:w-6/12 my-16 max-w-[700px]",children:(0,z.jsxs)(sV,{value:a,onValueChange:o,type:"multiple",children:[(0,z.jsxs)(sV.Item,{title:n("new-details","Details"),value:"details",forceMountContent:!0,required:!0,children:[(0,z.jsx)("p",{className:"inter-base-regular mb-xlarge text-grey-50",children:n("new-add-the-region-details","Add the region details.")}),(0,z.jsx)(N5,{form:(0,eL.m)(l,"details"),isCreate:!0})]}),(0,z.jsxs)(sV.Item,{title:n("new-providers","Providers"),value:"providers",forceMountContent:!0,required:!0,children:[(0,z.jsx)("p",{className:"inter-base-regular mb-xlarge text-grey-50",children:n("new-add-which-fulfillment-and-payment-providers-should-be-available-in-this-region","Add which fulfillment and payment providers should be available in this region.")}),(0,z.jsx)(N6,{form:(0,eL.m)(l,"providers")})]})]})})})]})})};var kv=function(){return{details:{countries:[]},providers:{payment_providers:void 0,fulfillment_providers:void 0}}};let kg=function(e){var t,r,n=e.region,i=(0,ei.Bd)().t;return(0,z.jsx)(oy.Item,{value:n.id,label:n.name,sublabel:n.countries&&n.countries.length?"(".concat(n.countries.map(function(e){return e.display_name}).join(", "),")"):void 0,children:(0,z.jsxs)("div",{className:"gap-y-2xsmall inter-small-regular text-grey-50 flex flex-col",children:[(0,z.jsxs)("p",{children:["Payment providers:"," ",(0,z.jsx)("span",{className:"truncate",children:(null===(t=n.payment_providers)||void 0===t?void 0:t.length)?n.payment_providers.map(function(e){return N0(e.id).label}).join(", "):i("region-overview-not-configured","Not configured")})]}),(0,z.jsxs)("p",{children:[i("region-overview-fulfillment-providers","Fulfillment providers:")," ",(0,z.jsx)("span",{className:"truncate",children:(null===(r=n.fulfillment_providers)||void 0===r?void 0:r.length)?n.fulfillment_providers.map(function(e){return NJ(e.id).label}).join(", "):i("region-overview-not-configured","Not configured")})]})]})})};function kx(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}let kj=function(e){var t,r=e.id,n=(0,ei.Bd)().t,i=(0,H.useNavigate)(),a=(0,i_.s)().trackRegions,o=(0,J.useAdminRegions)(void 0,{onSuccess:function(e){var t=e.regions,r=e.count;a({regions:t.map(function(e){return e.name}),count:r})}}).regions,l=function(e){if(Array.isArray(e))return e}(t=U.useState(r))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(t,2)||function(e,t){if(e){if("string"==typeof e)return kx(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kx(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),s=l[0],c=l[1],u=(0,U.useCallback)(function(e){e!==s&&(c(e),i("/a/settings/regions/".concat(e),{replace:!0}))},[i,s]);(0,U.useEffect)(function(){r&&u(r),!r&&o&&o.length>0&&u(o[0].id)},[u,r,o]);var d=(0,n5.A)(),f=d.state,p=d.toggle,m=d.close;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(eM,{title:n("region-overview-regions","Regions"),customActions:(0,z.jsx)("div",{children:(0,z.jsx)(W.A,{variant:"ghost",size:"small",className:"h-xlarge w-xlarge",onClick:p,children:(0,z.jsx)(n_.A,{})})}),className:"h-full",children:[(0,z.jsx)("p",{className:"text-base-regular text-grey-50 mt-2xsmall",children:n("region-overview-manage-the-markets-that-you-will-operate-within","Manage the markets that you will operate within.")}),(0,z.jsx)("div",{className:"mt-large",children:(0,z.jsx)(oy.Root,{value:s,onValueChange:u,children:null==o?void 0:o.map(function(e){return(0,z.jsx)(kg,{region:e},e.id)})})})]}),(0,z.jsx)(ik.A,{isVisible:f,isFullScreen:!0,children:(0,z.jsx)(kb,{onClose:m})})]})},kw=function(){var e=(0,H.useParams)()["*"];return(0,z.jsxs)("div",{className:"gap-y-xsmall flex h-full flex-col",children:[(0,z.jsx)(eo,{label:"Back to settings",path:"/a/settings"}),(0,z.jsxs)("div",{className:"medium:grid-cols-3 gap-xsmall pb-xlarge grid grid-cols-1",children:[(0,z.jsx)("div",{className:"h-full w-full",children:(0,z.jsx)(kj,{id:e})}),(0,z.jsx)("div",{className:"col-span-2",children:(0,z.jsx)(km,{id:e})})]})]})};var kO=function(e){var t=(0,U.useRef)(null),r=(0,U.useRef)(0),n=(0,iI.v)().height;return(0,U.useLayoutEffect)(function(){if(t.current){var i=t.current.getBoundingClientRect().top;r.current=n-e-i}},[e,n]),{ref:t,height:r.current}};let kS=function(e){var t=e.threeCols,r=e.className,n=e.children,i=U.Children.count(n),a=kO(32),o=a.ref,l=a.height;if(i>2)throw Error("TwoSplitPane can only have two or less children");return(0,z.jsx)("div",{className:(0,en.default)("gap-xsmall grid grid-cols-1",r,{"medium:grid-cols-2":!t,"medium:grid-cols-3":t}),style:l?{gridTemplateRows:"".concat(l,"px")}:void 0,ref:o,children:U.Children.map(n,function(e,r){return(0,z.jsx)("div",{className:(0,en.default)("w-full",{"col-span-2":t&&1===r}),children:e},r)})})};function kP(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function kC(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function kA(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}let kN=function(e){var t,r,n=e.handleClose,i=e.initialReason,a=(0,eR.mN)({defaultValues:{value:null==i?void 0:i.value,label:null==i?void 0:i.label,description:null==i?void 0:i.description}}),o=a.register,l=a.handleSubmit,s=a.formState.errors,c=(0,eC.A)(),u=(0,J.useAdminCreateReturnReason)(),d=u.mutateAsync,f=u.isLoading,p=(0,ei.Bd)().t,m=(t=function(e){return function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,d(kA(kC({},e),{description:e.description||void 0}))];case 1:return t.sent(),c(p("return-reasons-notification-success","Success"),p("return-reasons-created-a-new-return-reason","Created a new return reason"),p("return-reasons-success","success")),[3,3];case 2:return t.sent(),c(p("return-reasons-error","Error"),p("return-reasons-cannot-create-a-return-reason-with-an-existing-value","Cannot create a return reason with an existing value"),"error"),[3,3];case 3:return n(),[2]}})},r=function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function o(e){kP(a,n,i,o,l,"next",e)}function l(e){kP(a,n,i,o,l,"throw",e)}o(void 0)})},function(e){return r.apply(this,arguments)});return(0,z.jsx)(eN.A,{handleClose:n,children:(0,z.jsxs)(eN.A.Body,{children:[(0,z.jsx)(eN.A.Header,{handleClose:n,children:(0,z.jsx)("span",{className:"inter-xlarge-semibold",children:p("return-reasons-add-reason","Add Reason")})}),(0,z.jsxs)("form",{onSubmit:l(m),children:[(0,z.jsxs)(eN.A.Content,{children:[(0,z.jsxs)("div",{className:"gap-large mb-large grid grid-cols-2",children:[(0,z.jsx)(e1.A,kA(kC({},o("value",{required:p("return-reasons-value-is-required","Value is required"),pattern:n8.A.whiteSpaceRule("Value"),minLength:n8.A.minOneCharRule("Value")})),{label:p("return-reasons-value","Value"),required:!0,placeholder:"wrong_size",errors:s})),(0,z.jsx)(e1.A,kA(kC({},o("label",{required:p("return-reasons-label-is-required","Label is required"),pattern:n8.A.whiteSpaceRule("Label"),minLength:n8.A.minOneCharRule("Label")})),{label:p("return-reasons-label","Label"),required:!0,placeholder:"Wrong size",errors:s}))]}),(0,z.jsx)(sw.A,kA(kC({className:"mt-large",rows:3},o("description")),{label:p("return-reasons-description","Description"),placeholder:p("return-reasons-customer-received-the-wrong-size","Customer received the wrong size"),errors:s}))]}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"flex h-8 w-full justify-end",children:[(0,z.jsx)(W.A,{variant:"ghost",className:"text-small mr-2 w-32 justify-center",size:"large",onClick:n,type:"button",children:p("return-reasons-cancel","Cancel")}),(0,z.jsx)(W.A,{loading:f,disabled:f,size:"large",className:"text-small w-32 justify-center",variant:"primary",children:p("return-reasons-create","Create")})]})})]})]})})};function kk(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function k_(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function kE(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}let kI=function(e){var t,r,n=e.reason,i=(0,n5.A)(),a=i.state,o=i.open,l=i.close,s=(0,n5.A)(),c=s.state,u=s.open,d=s.close,f=(0,eR.mN)(),p=f.register,m=f.reset,h=f.handleSubmit,y=(0,eC.A)(),b=(0,ei.Bd)().t,v=(0,J.useAdminDeleteReturnReason)(null==n?void 0:n.id).mutate,g=(0,J.useAdminUpdateReturnReason)(null==n?void 0:n.id).mutate,x=(t=function(){return function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,function(e){return v(void 0),[2]})},r=function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function o(e){kk(a,n,i,o,l,"next",e)}function l(e){kk(a,n,i,o,l,"throw",e)}o(void 0)})},function(){return r.apply(this,arguments)}),j=function(e){g({label:e.label,description:e.description||void 0},{onSuccess:function(){y(b("return-reasons-success-title","Success"),b("return-reasons-successfully-updated-return-reason","Successfully updated return reason"),"success")},onError:function(e){y(b("return-reasons-error","Error"),(0,eA.u)(e),"error")}})};return(0,U.useEffect)(function(){n&&m({label:n.label,description:n.description})},[n]),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(eD,{actionables:[{label:b("return-reasons-duplicate-reason","Duplicate reason"),icon:(0,z.jsx)(eB,{size:20}),onClick:function(){return o()}},{label:b("return-reasons-delete-reason","Delete reason"),variant:"danger",icon:(0,z.jsx)(eu,{size:20}),onClick:function(){return u()}}],events:[{label:b("return-reasons-save","Save"),onClick:h(j)},{label:b("return-reasons-cancel","Cancel"),onClick:function(){m({label:n.label,description:n.description})}}],title:b("return-reasons-details","Details"),subtitle:null==n?void 0:n.value,children:(0,z.jsxs)("form",{onSubmit:h(j),children:[(0,z.jsx)(e1.A,kE(k_({},p("label")),{label:b("return-reasons-label","Label")})),(0,z.jsx)(e1.A,kE(k_({},p("description")),{label:b("return-reasons-description","Description"),className:"mt-base",placeholder:b("return-reasons-customer-received-the-wrong-size","Customer received the wrong size")}))]})}),a&&(0,z.jsx)(kN,{initialReason:n,handleClose:l}),c&&(0,z.jsx)(e_,{heading:b("return-reasons-delete-return-reason","Delete Return Reason"),text:b("return-reasons-are-you-sure-you-want-to-delete-this-return-reason","Are you sure you want to delete this return reason?"),handleClose:d,onDelete:x})]})};function kD(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}let kT=function(){var e,t=(0,n5.A)(),r=t.state,n=t.open,i=t.close,a=function(e){if(Array.isArray(e))return e}(e=(0,U.useState)(null))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,2)||function(e,t){if(e){if("string"==typeof e)return kD(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kD(e,2)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),o=a[0],l=a[1],s=(0,ei.Bd)().t,c=(0,J.useAdminReturnReasons)({onSuccess:function(e){null==(t=e.return_reasons)||t.sort(function(e,t){return e.created_at<t.created_at?-1:1});var t,r=e.return_reasons;(!o||d&&(null==d?void 0:d.length)>(null==r?void 0:r.length))&&l(r[0])}}),u=c.isLoading,d=c.return_reasons;return(0,z.jsxs)("div",{children:[(0,z.jsx)(eo,{path:"/a/settings",label:s("return-reasons-back-to-settings","Back to settings"),className:"mb-xsmall"}),(0,z.jsxs)(kS,{children:[(0,z.jsx)(eD,{title:s("return-reasons-return-reasons","Return Reasons"),actionables:[{label:s("return-reasons-add-reason-label","Add reason"),icon:(0,z.jsx)("span",{className:"text-grey-90",children:(0,z.jsx)(n_.A,{size:20})}),onClick:n}],subtitle:s("return-reasons-manage-reasons-for-returned-items","Manage reasons for returned items"),children:(0,z.jsx)("div",{className:"mt-large",children:u?(0,z.jsx)("div",{className:"flex items-center justify-center",children:(0,z.jsx)(X.A,{variant:"secondary"})}):(0,z.jsx)(oy.Root,{onValueChange:function(e){return l(d.find(function(t){return t.value===e}))},value:null==o?void 0:o.value,children:null==d?void 0:d.map(function(e){return(0,z.jsx)(oy.Item,{label:e.label,description:e.description,className:"mt-xsmall",value:e.value},e.id)})})})}),o&&(0,z.jsx)(kI,{reason:o})]}),r&&(0,z.jsx)(kN,{handleClose:i})]})};function kM(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function kR(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var kL=function(e){var t=e.lockName,r=void 0!==t&&t,n=e.form,i=(0,ei.Bd)().t,a=n.register,o=n.path,l=n.formState.errors;return(0,z.jsxs)("div",{children:[(0,z.jsx)("p",{className:"inter-base-semibold mb-base",children:i("taxes-details","Details")}),(0,z.jsx)(e1.A,kR(kM({disabled:r,label:i("taxes-name","Name"),prefix:r?(0,z.jsx)(nO.A,{size:16,className:"text-grey-40"}):void 0,placeholder:r?i("taxes-default","Default"):i("taxes-rate-name","Rate name")},a(o("name"),{required:r?void 0:n8.A.required("Name")})),{required:!r,className:"mb-base w-full min-w-[335px]",errors:l})),(0,z.jsx)(e1.A,kR(kM({type:"number",min:0,max:100,step:.01,formNoValidate:!0,label:i("taxes-tax-rate","Tax Rate"),prefix:"%",placeholder:"12"},a(o("rate"),{min:n8.A.min("Tax Rate",0),max:n8.A.max("Tax Rate",100),required:n8.A.required("Tax Rate"),valueAsNumber:!0})),{required:!0,className:"mb-base w-full min-w-[335px]",errors:l})),(0,z.jsx)(e1.A,kR(kM({placeholder:"1000",label:i("taxes-tax-code","Tax Code")},a(o("code"),{required:n8.A.required("Tax Code")})),{required:!0,className:"mb-base w-full min-w-[335px]",errors:l}))]})},kz=function(e){var t=e.onEdit,r=e.onDelete,n=e.index,i=e.name,a=e.description,o=(0,ei.Bd)().t;return(0,z.jsxs)("div",{className:"p-base rounded-rounded gap-base flex items-center border",children:[(0,z.jsx)("div",{children:(0,z.jsxs)(rk.A,{className:"inter-base-semibold flex h-[40px] w-[40px] items-center justify-center",variant:"default",children:["\xa7",n]})}),(0,z.jsxs)("div",{className:"flex-1",children:[(0,z.jsx)("div",{className:"inter-small-semibold",children:i}),(0,z.jsx)("div",{className:"inter-small-regular text-grey-50",children:a})]}),(0,z.jsx)("div",{children:(0,z.jsx)(em,{forceDropdown:!0,actions:[{label:o("taxes-edit","Edit"),onClick:function(){return t()},icon:(0,z.jsx)(ec,{size:20})},{label:o("taxes-delete-rule","Delete rule"),variant:"danger",onClick:function(){return r()},icon:(0,z.jsx)(eu,{size:20})}]})})]})};function kF(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function kB(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function kq(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var kH=function(e){var t=e.showSearch,r=void 0===t||t,n=e.label,i=e.objectName,a=e.selectedIds,o=e.isLoading,l=e.pagination,s=e.totalCount,c=e.data,u=e.columns,d=e.searchValue,f=e.onPaginationChange,p=e.onChange,m=e.onSearch,h=function(e){f(e)},y=(0,U.useMemo)(function(){return Math.floor(l.offset/l.limit)},[l]),b=(0,U.useMemo)(function(){return s&&l.limit?Math.ceil(s/l.limit):0},[s,l]),v=(0,ei.Bd)().t,g=(0,e4.useTable)({columns:u,data:c||[],manualPagination:!0,initialState:{pageIndex:y,pageSize:l.limit,selectedRowIds:(void 0===a?[]:a).reduce(function(e,t){return e[t]=!0,e},{})},pageCount:b,autoResetSelectedRows:!1,autoResetPage:!1,getRowId:function(e){return e.id}},e4.usePagination,e4.useRowSelect,function(e){e.visibleColumns.push(function(e){return[{id:"selection",Header:function(e){var t=e.getToggleAllRowsSelectedProps;return(0,z.jsx)("div",{children:(0,z.jsx)(tt,kB({},t()))})},Cell:function(e){var t=e.row;return(0,z.jsx)("div",{children:(0,z.jsx)(tt,kB({},t.getToggleRowSelectedProps()))})}}].concat(function(e){if(Array.isArray(e))return kF(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return kF(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kF(e,void 0)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())})}),x=g.getTableProps,j=g.getTableBodyProps,w=g.rows,O=g.prepareRow,S=g.canPreviousPage,P=g.canNextPage,C=g.pageCount,A=g.nextPage,N=g.previousPage,k=g.state,_=k.pageIndex,E=k.pageSize,I=k.selectedRowIds;return(0,U.useEffect)(function(){p(Object.keys(I))},[I]),(0,z.jsxs)("div",{children:[(0,z.jsx)("div",{className:"inter-base-semibold my-large",children:n}),(0,z.jsx)(tb,{isLoading:o,hasPagination:!0,pagingState:{count:s,offset:l.offset,pageSize:l.offset+w.length,title:i,currentPage:_+1,pageCount:C,nextPage:function(){P&&(h(kq(kB({},l),{offset:l.offset+l.limit})),A())},prevPage:function(){S&&(h(kq(kB({},l),{offset:Math.max(l.offset-l.limit,0)})),N())},hasNext:P,hasPrev:S},numberOfRows:E,children:(0,z.jsx)(td,kq(kB({immediateSearchFocus:r,enableSearch:r,searchPlaceholder:v("taxes-search-products","Search Products.."),handleSearch:m,searchValue:d},x()),{children:(0,z.jsx)(td.Body,kq(kB({},j()),{children:w.map(function(e){return O(e),(0,z.jsx)(td.Row,kq(kB({},e.getRowProps()),{children:e.cells.map(function(e){return(0,z.jsx)(td.Cell,kq(kB({},e.getCellProps()),{children:e.render("Cell")}))})}))})}))}))})]})};function kU(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function kV(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function kG(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return kU(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kU(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var kW=function(e){var t=e.items,r=e.onChange,n=(0,ei.Bd)().t,i=kG((0,U.useState)({limit:12,offset:0}),2),a=i[0],o=i[1],l=kG((0,U.useState)(""),2),s=l[0],c=l[1],u=(0,e8.d)(s,500),d=(0,J.useAdminProducts)(kV({q:u},a)),f=d.isLoading,p=d.count,m=d.products,h=(0,U.useMemo)(function(){return[{Header:n("taxes-name","Name"),accessor:"title",Cell:function(e){var t=e.row.original;return(0,z.jsxs)("div",{className:"flex items-center",children:[(0,z.jsx)("div",{className:"my-1.5 mr-4 flex h-[40px] w-[30px] items-center overflow-hidden rounded-sm",children:t.thumbnail?(0,z.jsx)("img",{src:t.thumbnail,className:"rounded-soft h-full object-cover"}):(0,z.jsx)(nm,{})}),(0,z.jsx)("div",{className:"flex flex-col",children:(0,z.jsx)("span",{children:t.title})})]})}}]},[]);return(0,z.jsx)(kH,{label:n("taxes-select-products","Select Products"),objectName:"Product",totalCount:p,pagination:a,onPaginationChange:o,selectedIds:t,data:m,columns:h,isLoading:f,onSearch:function(e){o(function(e){var t,r;return t=kV({},e),r=r={offset:0},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t}),c(e)},searchValue:s,onChange:r})};function kY(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var k$=function(e){var t,r=e.items,n=e.onChange,i=(0,ei.Bd)().t,a=function(e){if(Array.isArray(e))return e}(t=(0,U.useState)({limit:12,offset:0}))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(t,2)||function(e,t){if(e){if("string"==typeof e)return kY(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kY(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),o=a[0],l=a[1],s=(0,J.useAdminProductTypes)(o),c=s.isLoading,u=s.count,d=s.product_types,f=(0,U.useMemo)(function(){return[{Header:i("taxes-name","Name"),accessor:"value",Cell:function(e){var t=e.row.original;return(0,z.jsx)("div",{className:"w-[200px]",children:t.value})}}]},[]);return(0,z.jsx)(kH,{showSearch:!1,label:i("taxes-select-product-types-label","Select Product Types"),objectName:i("taxes-product-types","Product Types"),totalCount:u,pagination:o,onPaginationChange:l,selectedIds:r,data:d,columns:f,isLoading:c,onChange:n})};function kQ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var kK=function(e){var t,r=e.regionId,n=e.items,i=e.onChange,a=(0,ei.Bd)().t,o=function(e){if(Array.isArray(e))return e}(t=(0,U.useState)({limit:12,offset:0}))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),2!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(t,2)||function(e,t){if(e){if("string"==typeof e)return kQ(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kQ(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),l=o[0],s=o[1],c=(0,J.useAdminShippingOptions)({region_id:r}),u=c.isLoading,d=c.count,f=c.shipping_options,p=(0,U.useMemo)(function(){return[{Header:a("taxes-name","Name"),accessor:"name",Cell:function(e){var t=e.row.original;return(0,z.jsx)("div",{className:"w-[200px]",children:t.name})}}]},[]);return(0,z.jsx)(kH,{showSearch:!1,label:a("taxes-select-shipping-option","Select Shipping Option"),objectName:a("taxes-shipping-options","Shipping Options"),totalCount:d,pagination:l,onPaginationChange:s,selectedIds:n,data:f,columns:p,isLoading:u,onChange:i})};function kZ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function kJ(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return kZ(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kZ(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}!function(e){e.PRODUCTS="products",e.PRODUCT_TYPES="product_types",e.SHIPPING_OPTIONS="shipping_options"}(L||(L={}));let kX=function(e){var t=e.regionId,r=e.type,n=e.items,i=e.onSubmit,a=r&&n,o=(0,ei.Bd)().t,l=(0,U.useContext)(a7.H8).pop,s=kJ((0,U.useState)(null!=r?r:"products"),2),c=s[0],u=s[1],d=kJ((0,U.useState)({type:null!=r?r:"products",items:null!=n?n:[]}),2),f=d[0],p=d[1],m=function(e){p(function(t){var r,n;return r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},t),n=n={items:e},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))}),r})};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(eN.A.Content,{children:(0,z.jsxs)("div",{className:"min-h-[680px]",children:[!a&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{className:"inter-base-semibold mb-large",children:o("taxes-type","Type")}),(0,z.jsxs)(oy.Root,{className:"gap-base flex",value:c,onValueChange:function(e){e!==c&&(u(e),p({type:e,items:[]}))},children:[(0,z.jsx)(oy.Item,{className:"flex-1",label:o("taxes-products","Products"),description:o("taxes-select-individual-products","Select individual products"),value:"products"}),(0,z.jsx)(oy.Item,{className:"flex-1",label:o("taxes-product-types","Product Types"),description:o("taxes-select-product-types","Select product types"),value:"product_types"}),(0,z.jsx)(oy.Item,{className:"flex-1",label:o("taxes-shipping-options","Shipping Options"),description:o("taxes-select-shipping-options","Select shipping options"),value:"shipping_options"})]})]}),"products"===c&&(0,z.jsx)(kW,{items:f.items,onChange:m}),"product_types"===c&&(0,z.jsx)(k$,{items:f.items,onChange:m}),"shipping_options"===c&&(0,z.jsx)(kK,{regionId:t,items:f.items,onChange:m})]})}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"gap-x-xsmall flex w-full justify-end",children:[(0,z.jsx)(W.A,{variant:"ghost",size:"small",className:"w-[112px]",onClick:function(){return l()},children:o("taxes-back","Back")}),(0,z.jsx)(W.A,{variant:"primary",className:"w-[112px]",size:"small",onClick:function(){i(f),l()},children:o("taxes-add","Add")})]})})]})};function k0(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function k1(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return k0(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k0(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var k2=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return{title:"Add override",onBack:function(){return e()},view:(0,z.jsx)(kX,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({regionId:t,onSubmit:r},n))}},k3=function(e){var t=e.onDismiss,r=e.taxRate,n=(0,J.useAdminUpdateRegion)(r.id),i=n.mutate,a=n.isLoading,o=(0,eR.mN)({defaultValues:{details:{name:r.name,rate:r.rate||void 0,code:r.code||void 0}}}),l=o.handleSubmit,s=(0,eC.A)();return(0,z.jsxs)("form",{onSubmit:l(function(e){i({tax_rate:e.details.rate,tax_code:e.details.code},{onSuccess:function(){s("Success","Successfully updated default rate.","success"),t()},onError:function(e){s("Error",(0,eA.u)(e),"error")}})}),children:[(0,z.jsx)(eN.A.Content,{children:(0,z.jsx)(kL,{form:(0,eL.m)(o,"details"),lockName:!0})}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"flex w-full items-center justify-end",children:[(0,z.jsx)(W.A,{type:"button",onClick:t,variant:"ghost",size:"small",className:"w-eventButton justify-center",children:"Cancel"}),(0,z.jsx)(W.A,{type:"submit",variant:"primary",size:"small",className:"w-eventButton justify-center",loading:a,children:"Save"})]})})]})};let k5=function(e){var t=e.modalContext,r=e.regionId,n=e.taxRate,i=e.onDismiss,a=(0,ei.Bd)().t,o=(0,J.useAdminUpdateTaxRate)(n.id),l=o.mutate,s=o.isLoading,c=k1((0,U.useState)({}),2),u=c[0],d=c[1],f=(0,eR.mN)({defaultValues:{details:{name:n.name,code:n.code||void 0,rate:n.rate||void 0},products:n.products.map(function(e){return e.id}),product_types:n.product_types.map(function(e){return e.id}),shipping_options:n.shipping_options.map(function(e){return e.id})}}),p=f.register,m=f.setValue,h=f.handleSubmit,y=f.watch,b=(0,eC.A)(),v=h(function(e){var t={name:e.details.name,code:e.details.code,rate:e.details.rate,product_types:e.product_types,products:e.products,shipping_options:e.shipping_options},r=["products","product_types","shipping_options"],n=!0,o=!1,s=void 0;try{for(var c,d=Object.entries(u)[Symbol.iterator]();!(n=(c=d.next()).done);n=!0){var f=k1(c.value,2),p=f[0];!f[1]&&p in t&&r.includes(p)&&delete t[p]}}catch(e){o=!0,s=e}finally{try{n||null==d.return||d.return()}finally{if(o)throw s}}l(t,{onSuccess:function(){b(a("taxes-success","Success"),a("taxes-successfully-updated-tax-rate","Successfully updated Tax Rate."),"success"),i()},onError:function(e){b(a("taxes-error","Error"),(0,eA.u)(e),"error")}})});(0,U.useEffect)(function(){p("products"),p("product_types"),p("shipping_options")},[]);var g=k1(y(["products","product_types","shipping_options"]),3),x=g[0],j=g[1],w=g[2],O=function(e){switch(d(function(t){return t[e.type]=!0,t}),e.type){case"products":m("products",e.items);break;case"product_types":m("product_types",e.items);break;case"shipping_options":m("shipping_options",e.items)}};return(0,z.jsxs)("form",{onSubmit:v,children:[(0,z.jsxs)(eN.A.Content,{children:[(0,z.jsx)("div",{className:"mb-xlarge",children:(0,z.jsx)(kL,{form:(0,eL.m)(f,"details")})}),(0,z.jsxs)("div",{children:[(0,z.jsx)("p",{className:"inter-base-semibold mb-base",children:a("taxes-overrides","Overrides")}),(j.length>0||x.length>0||w.length>0)&&(0,z.jsxs)("div",{className:"gap-base flex flex-col",children:[x.length>0&&(0,z.jsx)(kz,{onDelete:function(){return O({type:"products",items:[]})},onEdit:function(){t.push(k2(t.pop,r,O,{items:x,type:"products"}))},index:1,name:a("taxes-product-rules","Product Rules"),description:a("taxes-product-rules-description","Applies to {{count}} productWithCount",{count:x.length})}),j.length>0&&(0,z.jsx)(kz,{onDelete:function(){return O({type:"product_types",items:[]})},onEdit:function(){t.push(k2(t.pop,r,O,{items:j,type:"product_types"}))},index:2,name:a("taxes-product-type-rules","Product Type Rules"),description:a("taxes-product-type-rules-description","Applies to {{count}} product typeWithCount",{count:j.length})}),w.length>0&&(0,z.jsx)(kz,{onDelete:function(){return O({type:"shipping_options",items:[]})},onEdit:function(){t.push(k2(t.pop,r,O,{items:w,type:"shipping_options"}))},index:3,name:a("taxes-shipping-option-rules","Shipping Option Rules"),description:a("taxes-applies-to-shipping-option-with-count","Applies to {{count}} shipping optionWithCount",{count:w.length})})]}),!(j.length&&x.length&&w.length)&&(0,z.jsxs)(W.A,{type:"button",onClick:function(){t.push(k2(t.pop,r,O))},className:"mt-base w-full",size:"medium",variant:"secondary",children:[(0,z.jsx)(n_.A,{})," ",a("taxes-add-overrides","Add Overrides")]})]})]}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"flex w-full items-center justify-end",children:[(0,z.jsx)(W.A,{type:"button",onClick:i,variant:"ghost",size:"small",className:"w-eventButton justify-center",children:a("taxes-cancel","Cancel")}),(0,z.jsx)(W.A,{type:"submit",variant:"primary",size:"small",className:"w-eventButton justify-center",loading:s,disabled:s,children:a("taxes-save","Save")})]})})]})},k6=function(e){var t=e.taxRate,r=e.taxRateId,n=e.regionId,i=e.onDismiss,a=(0,ei.Bd)().t,o=(0,J.useAdminTaxRate)(r,{expand:["products","product_types","shipping_options"]},{enabled:"rate"===t.type}),l=o.isLoading,s=o.tax_rate,c=(0,U.useContext)(a7.H8);return(0,z.jsx)(a7.Ay,{isLargeModal:!0,context:c,handleClose:i,children:(0,z.jsxs)(eN.A.Body,{children:[(0,z.jsx)(eN.A.Header,{handleClose:i,children:(0,z.jsx)("div",{children:(0,z.jsx)("h1",{className:"inter-xlarge-semibold",children:a("taxes-edit-tax-rate","Edit Tax Rate")})})}),"region"===t.type?(0,z.jsx)(k3,{taxRate:t,onDismiss:i}):l||!s?(0,z.jsx)(X.A,{}):(0,z.jsx)(k5,{regionId:n,modalContext:c,taxRate:s,onDismiss:i})]})})};function k4(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var k8=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return{title:"Add override",onBack:function(){return e()},view:(0,z.jsx)(kX,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({regionId:t,onSubmit:r},n))}};let k7=function(e){var t,r=e.regionId,n=e.onDismiss,i=(0,ei.Bd)().t,a=(0,J.useAdminCreateTaxRate)(),o=a.mutate,l=a.isLoading,s=(0,eR.mN)({defaultValues:{products:[],product_types:[],shipping_options:[]}}),c=s.setValue,u=s.handleSubmit,d=s.watch,f=(0,eC.A)(),p=(0,U.useContext)(a7.H8),m=u(function(e){o({product_types:e.product_types,products:e.products,shipping_options:e.shipping_options,name:e.details.name,code:e.details.code,rate:e.details.rate,region_id:r},{onSuccess:function(){f(i("taxes-success","Success"),i("taxes-successfully-created-tax-rate","Successfully created tax rate."),"success"),n()},onError:function(e){f(i("taxes-error","Error"),(0,eA.u)(e),"error")}})}),h=function(e){if(Array.isArray(e))return e}(t=d(["products","product_types","shipping_options"]))||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),3!==a.length);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(t,3)||function(e,t){if(e){if("string"==typeof e)return k4(e,3);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k4(e,3)}}(t,3)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),y=h[0],b=h[1],v=h[2],g=function(e){switch(e.type){case"products":c("products",e.items);break;case"product_types":c("product_types",e.items);break;case"shipping_options":c("shipping_options",e.items)}};return(0,z.jsx)(a7.Ay,{isLargeModal:!0,context:p,handleClose:n,children:(0,z.jsx)("form",{onSubmit:m,children:(0,z.jsxs)(eN.A.Body,{children:[(0,z.jsx)(eN.A.Header,{handleClose:n,children:(0,z.jsx)("div",{children:(0,z.jsx)("h1",{className:"inter-xlarge-semibold",children:i("taxes-add-tax-rate","Add Tax Rate")})})}),(0,z.jsxs)(eN.A.Content,{children:[(0,z.jsx)(kL,{form:(0,eL.m)(s,"details")}),(0,z.jsxs)("div",{children:[(0,z.jsx)("p",{className:"inter-base-semibold mb-base",children:i("taxes-overrides","Overrides")}),(b.length>0||y.length>0||v.length>0)&&(0,z.jsxs)("div",{className:"gap-base flex flex-col",children:[y.length>0&&(0,z.jsx)(kz,{onDelete:function(){return g({type:"products",items:[]})},onEdit:function(){p.push(k8(p.pop,r,g,{items:y,type:"products"}))},index:1,name:i("taxes-product-rules","Product Rules"),description:i("taxes-product-rules-description","Applies to {{count}} productWithCount",{count:y.length})}),b.length>0&&(0,z.jsx)(kz,{onDelete:function(){return g({type:"product_types",items:[]})},onEdit:function(){p.push(k8(p.pop,r,g,{items:b,type:"product_types"}))},index:2,name:i("taxes-product-type-rules","Product Type Rules"),description:i("taxes-applies-to-product-type-with-count","Applies to {{count}} product typeWithCount",{count:b.length})}),v.length>0&&(0,z.jsx)(kz,{onDelete:function(){return g({type:"shipping_options",items:[]})},onEdit:function(){p.push(k8(p.pop,r,g,{items:v,type:"shipping_options"}))},index:3,name:i("taxes-shipping-option-rules","Shipping Option Rules"),description:i("taxes-applies-to-shipping-option-with-count","Applies to {{count}} shipping optionWithCount",{count:v.length})})]}),!(b.length>0&&y.length>0&&v.length>0)&&(0,z.jsxs)(W.A,{type:"button",onClick:function(){p.push(k8(p.pop,r,g))},className:"mt-base w-full",size:"medium",variant:"secondary",children:[(0,z.jsx)(n_.A,{})," ",i("taxes-add-overrides","Add Overrides")]})]})]}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"flex w-full items-center justify-end",children:[(0,z.jsx)(W.A,{type:"button",onClick:n,variant:"ghost",size:"small",className:"w-eventButton justify-center",children:i("taxes-cancel","Cancel")}),(0,z.jsx)(W.A,{type:"submit",variant:"primary",size:"small",className:"w-eventButton justify-center",loading:l,disabled:l,children:i("taxes-create","Create")})]})})]})})})};function k9(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function _e(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function _t(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var _r=function(e){var t=e.region,r=(0,eR.mN)({defaultValues:{automatic_taxes:t.automatic_taxes,gift_cards_taxable:t.gift_cards_taxable,tax_provider_id:{label:null===t.tax_provider_id?"System Tax Provider":t.tax_provider_id,value:t.tax_provider_id}}}),n=r.register,i=r.handleSubmit,a=r.control,o=r.reset,l=r.formState.isDirty,s=(0,eC.A)(),c=(0,ei.Bd)().t;(0,U.useEffect)(function(){o({automatic_taxes:t.automatic_taxes,gift_cards_taxable:t.gift_cards_taxable,tax_provider_id:{label:null===t.tax_provider_id?c("taxes-system-tax-provider","System Tax Provider"):t.tax_provider_id,value:t.tax_provider_id}})},[t]);var u=(0,J.useAdminStoreTaxProviders)(),d=u.isLoading,f=u.tax_providers,p=(0,J.useAdminUpdateRegion)(t.id),m=(0,U.useMemo)(function(){if(f){var e;return[{label:c("taxes-system-tax-provider","System Tax Provider"),value:null}].concat(function(e){if(Array.isArray(e))return k9(e)}(e=f.map(function(e){return{label:e.id,value:e.id}}))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return k9(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k9(e,void 0)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}return[{label:c("taxes-system-tax-provider","System Tax Provider"),value:null}]},[f]);return(0,z.jsxs)("form",{className:"flex flex-1 flex-col",onSubmit:i(function(e){var t=_t(_e({},e),{tax_provider_id:e.tax_provider_id.value});p.mutate(t,{onSuccess:function(){s(c("taxes-success","Success"),c("taxes-region-tax-settings-were-successfully-updated","Region tax settings were successfully updated."),"success")},onError:function(e){s(c("taxes-error","Error"),(0,eA.u)(e),"error")}})}),children:[(0,z.jsxs)("div",{className:"gap-base flex flex-1 flex-col",children:[(0,z.jsx)(eR.xI,{name:"tax_provider_id",control:a,rules:{required:!0},render:function(e){var t=e.field,r=t.value,n=t.onChange;return(0,z.jsx)(cB,{disabled:d,label:c("taxes-tax-provider","Tax Provider"),options:m,value:r,onChange:n,className:"mb-base"})}}),(0,z.jsxs)("div",{className:"item-center flex gap-x-1.5",children:[(0,z.jsx)(cA,_t(_e({className:"inter-base-regular"},n("automatic_taxes")),{label:c("taxes-calculate-taxes-automatically","Calculate taxes automatically?")})),(0,z.jsx)(e0.A,{content:c("taxes-automatically-apply-tax-calculations-to-carts","When checked Medusa will automatically apply tax calculations to Carts in this Region. When unchecked you will have to manually compute taxes at checkout. Manual taxes are recommended if using a 3rd party tax provider to avoid performing too many requests")})]}),(0,z.jsxs)("div",{className:"item-center flex gap-x-1.5",children:[(0,z.jsx)(cA,_t(_e({className:"inter-base-regular"},n("gift_cards_taxable")),{label:c("taxes-apply-tax-to-gift-cards","Apply tax to gift cards?")})),(0,z.jsx)(e0.A,{content:c("taxes-apply-taxes-to-gift-cards","When checked taxes will be applied to gift cards on checkout. In some contries tax regulations require that taxes are applied to gift cards on purchase.")})]})]}),(0,z.jsx)("div",{className:"flex justify-end",children:l&&(0,z.jsx)(W.A,{loading:p.isLoading,variant:"primary",size:"medium",type:"submit",children:c("taxes-save","Save")})})]})};function _n(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}var _i=function(e){var t,r,n,i,a=e.row,o=e.onEdit,l=rL(),s=(0,eC.A)(),c=(0,J.useAdminDeleteTaxRate)(a.original.id),u=(0,ei.Bd)().t,d=(t=function(e){return function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,function(t){switch(t.label){case 0:if(!e||e.type!==m.RATE)return[2,Promise.resolve()];return[4,l({heading:u("taxes-delete-tax-rate-heading","Delete tax rate"),text:u("taxes-confirm-delete","Are you sure you want to delete this tax rate?")})];case 1:if(!t.sent())return[2];return[2,c.mutateAsync().then(function(){s(u("taxes-success","Success"),u("taxes-tax-rate-was-deleted","Tax rate was deleted."),"success")}).catch(function(e){s(u("taxes-error","Error"),(0,eA.u)(e),"error")})]}})},r=function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function o(e){_n(a,n,i,o,l,"next",e)}function l(e){_n(a,n,i,o,l,"throw",e)}o(void 0)})},function(e){return r.apply(this,arguments)}),f=[{label:u("taxes-edit","Edit"),onClick:function(){return o(a.original)},icon:(0,z.jsx)(ec,{size:20})}];return a.original.type===m.RATE&&f.push({label:u("taxes-delete-tax-rate","Delete Tax Rate"),variant:"danger",onClick:function(){return d(a.original)},icon:(0,z.jsx)(eu,{size:20})}),(0,z.jsx)(td.Row,(n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({color:"inherit",forceDropdown:!0,actions:f},a.getRowProps()),i=i={className:"group",children:a.cells.map(function(e){return(0,z.jsx)(td.Cell,{children:e.render("Cell")})})},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))}),n))};let _a=function(){var e=(0,ei.Bd)().t;return[(0,U.useMemo)(function(){return[{Header:(0,z.jsx)("div",{className:"pl-2",children:e("taxes-name","Name")}),accessor:"name",Cell:function(e){var t=e.row,r=e.cell.value;return(0,z.jsx)("div",{className:"text-grey-90 group-hover:text-violet-60 pl-2",children:"region"===t.original.type?(0,z.jsxs)("div",{className:"gap-x-xsmall text-grey-40 flex items-center",children:[(0,z.jsx)(nO.A,{size:"12"})," ",r]}):r})}},{Header:e("taxes-code","Code"),accessor:"code",Cell:function(e){var t=e.cell.value;return(0,z.jsx)("div",{children:(0,z.jsx)(rk.A,{variant:"default",children:t})})}},{Header:e("taxes-tax-rate","Tax Rate"),accessor:"rate",Cell:function(e){var t=e.cell.value;return(0,z.jsxs)("div",{children:[t," %"]})}}]},[])]};function _o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function _l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){_l(e,t,r[t])})}return e}function _c(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function _u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||_d(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _d(e,t){if(e){if("string"==typeof e)return _o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _o(e,t)}}let _f=function(e){var t=e.id,r=(0,ei.Bd)().t,n=_u((0,U.useState)({limit:10,offset:0}),2),i=n[0];n[1];var a=_u((0,U.useState)(!1),2),o=a[0],l=a[1],s=_u((0,U.useState)(null),2),c=s[0],u=s[1],d=_u((0,U.useState)([]),2),f=d[0],p=d[1],h=(0,J.useAdminTaxRates)(_s({region_id:t},i),{enabled:!!t}),y=h.tax_rates,b=h.isLoading,v=(0,J.useAdminRegion)(t,{enabled:!!t}),g=v.region,x=v.isLoading;(0,U.useEffect)(function(){if(!b&&!x&&g&&y){var e,t,r;p([{id:g.id,name:"Default",code:null!==(e=g.tax_code)&&void 0!==e?e:null,rate:null!==(t=g.tax_rate)&&void 0!==t?t:null,type:m.REGION}].concat(function(e){if(Array.isArray(e))return _o(e)}(r=y.map(function(e){return{id:e.id,name:e.name,code:e.code,rate:e.rate,type:m.RATE}}))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||_d(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))}},[b,x,g,y]);var j=_u(_a(),1)[0],w=(0,e4.useTable)({columns:j,data:f||[],manualPagination:!0,autoResetPage:!1}),O=w.getTableProps,S=w.getTableBodyProps,P=w.headerGroups,C=w.rows,A=w.prepareRow;return t?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(eD,{title:r("taxes-details","Details"),actionables:[{label:r("taxes-new-tax-rate","New Tax Rate"),onClick:function(){return l(!0)},icon:(0,z.jsx)(n_.A,{})}],children:[(0,z.jsxs)(td,_c(_s({},O()),{className:(0,en.default)(_l({},"relative",x)),children:[(0,z.jsx)(td.Head,{children:null==P?void 0:P.map(function(e){return(0,z.jsx)(td.HeadRow,_c(_s({},e.getHeaderGroupProps()),{children:e.headers.map(function(e){return(0,z.jsx)(td.HeadCell,_c(_s({},e.getHeaderProps()),{children:e.render("Header")}))})}))})}),x||b?(0,z.jsx)("div",{className:"absolute mt-10 flex h-full w-full items-center justify-center",children:(0,z.jsx)("div",{className:"",children:(0,z.jsx)(X.A,{size:"large",variant:"secondary"})})}):(0,z.jsx)(td.Body,_c(_s({},S()),{children:C.map(function(e){return A(e),(0,z.jsx)(_i,{onEdit:u,row:e},e.original.id)})}))]})),(0,z.jsx)("h3",{className:"inter-large-semibold mt-2xlarge mb-base",children:r("taxes-tax-calculation-settings","Tax Calculation Settings")}),(0,z.jsx)("div",{className:"flex flex-1",children:!x&&g&&(0,z.jsx)(_r,{region:g})})]}),o&&(0,z.jsx)(k7,{regionId:t,onDismiss:function(){return l(!1)}}),c&&(0,z.jsx)(k6,{regionId:t,taxRate:c,taxRateId:c.id,onDismiss:function(){return u(null)}})]}):null};function _p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function _m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||_y(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _h(e){return function(e){if(Array.isArray(e))return _p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_y(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _y(e,t){if(e){if("string"==typeof e)return _p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _p(e,t)}}let _b=function(){var e=(0,H.useParams)()["*"],t=_m((0,U.useState)(0),2),r=t[0],n=t[1],i=(0,U.useRef)(null),a=(0,H.useNavigate)(),o=(0,ei.Bd)().t,l=_m((0,U.useState)([]),2),s=l[0],c=l[1],u=(0,J.useAdminRegions)({offset:r,limit:20}),d=u.regions,f=u.count,p=u.isLoading;(0,U.useEffect)(function(){d&&!p&&c(function(e){var t=e.map(function(e){return e.id}),r=d.filter(function(e){return!t.includes(e.id)});return _h(e).concat(_h(r))})},[d,p]),(0,U.useEffect)(function(){var e=i.current,t=new IntersectionObserver(function(e){e[0].isIntersecting&&s&&s.length<(f||0)&&n(s.length)},{root:null,threshold:1});return e&&t.observe(e),function(){e&&t.unobserve(e)}},[f,s]);var m=_m((0,U.useState)(e),2),h=m[0],y=m[1],b=(0,U.useCallback)(function(e){e!==h&&(y(e),a("/a/settings/taxes/".concat(e),{replace:!0}))},[a,h]);return(0,U.useEffect)(function(){e&&b(e),!e&&d&&d.length>0&&b(d[0].id)},[b,e,d]),(0,z.jsx)(z.Fragment,{children:(0,z.jsxs)("div",{children:[(0,z.jsx)(eo,{path:"/a/settings",label:o("taxes-back-to-settings","Back to settings"),className:"mb-xsmall"}),(0,z.jsxs)(kS,{threeCols:!0,children:[(0,z.jsx)(eD,{forceDropdown:!0,title:o("taxes-regions","Regions"),subtitle:o("taxes-select-the-region-you-wish-to-manage-taxes-for","Select the region you wish to manage taxes for"),actionables:[{icon:(0,z.jsx)(Sg.A,{}),label:o("taxes-go-to-region-settings","Go to Region settings"),onClick:function(){return a("/a/settings/regions")}}],className:"no-scrollbar overflow-y-auto",children:(0,z.jsx)("div",{children:(0,z.jsx)(oy.Root,{value:h,onValueChange:b,children:s.map(function(e,t){return(0,z.jsx)("div",{ref:t===s.length-1?i:void 0,children:(0,z.jsx)(oy.Item,{label:e.name,description:e.countries.length?"".concat(e.countries.map(function(e){return e.display_name}).join(", ")):void 0,value:e.id},e.id)},e.id)})})})}),(0,z.jsx)(_f,{id:h})]})]})})},_v=function(e){var t=e.handleClose,r=(0,eC.A)(),n=(0,ei.Bd)().t,i=(0,J.useAdminCreateInvite)(),a=i.mutate,o=i.isLoading,l=(0,eR.mN)(),s=l.control,c=l.register,u=l.handleSubmit,d=[{value:"member",label:n("invite-modal-member","Member")},{value:"admin",label:n("invite-modal-admin","Admin")},{value:"developer",label:n("invite-modal-developer","Developer")}];return(0,z.jsx)(eN.A,{handleClose:t,children:(0,z.jsx)("form",{onSubmit:u(function(e){a({user:e.user,role:e.role.value},{onSuccess:function(){r(n("invite-modal-success","Success"),n("invite-modal-invitation-sent-to","Invitation sent to {{user}}",{user:e.user}),"success"),t()},onError:function(e){r(n("invite-modal-error","Error"),(0,eA.u)(e),"error")}})}),children:(0,z.jsxs)(eN.A.Body,{children:[(0,z.jsx)(eN.A.Header,{handleClose:t,children:(0,z.jsx)("span",{className:"inter-xlarge-semibold",children:n("invite-modal-invite-users","Invite Users")})}),(0,z.jsx)(eN.A.Content,{children:(0,z.jsxs)("div",{className:"gap-y-base flex flex-col",children:[(0,z.jsx)(e1.A,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({label:n("invite-modal-email","Email"),placeholder:"lebron@james.com",required:!0},c("user",{required:!0}))),(0,z.jsx)(eR.xI,{name:"role",control:s,defaultValue:{label:n("invite-modal-member","Member"),value:"member"},render:function(e){var t=e.field,r=t.value,i=t.onChange,a=t.onBlur,o=t.ref;return(0,z.jsx)(no,{label:n("invite-modal-role","Role"),placeholder:n("invite-modal-select-role","Select role"),onBlur:a,ref:o,onChange:i,options:d,value:r})}})]})}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"flex h-8 w-full justify-end",children:[(0,z.jsx)(W.A,{variant:"ghost",className:"text-small mr-2 w-32 justify-center",size:"large",type:"button",onClick:t,children:n("invite-modal-cancel","Cancel")}),(0,z.jsx)(W.A,{loading:o,disabled:o,size:"large",className:"text-small w-32 justify-center",variant:"primary",children:n("invite-modal-invite","Invite")})]})})]})})})},_g=function(e){var t=e.color,r=e.user,n=r.first_name||r.last_name?"".concat(r.first_name," ").concat(r.last_name):r.email;return(0,z.jsxs)("div",{className:"flex w-full items-center bg-inherit px-2.5 py-1.5",children:[(0,z.jsx)("div",{className:"h-[24px] w-[24px]",children:(0,z.jsx)(rr.A,{user:r,color:void 0===t?"bg-grey-80":t})}),(0,z.jsx)("span",{className:"w-40 truncate pl-2.5",children:n})]})};function _x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function _j(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}let _w=function(e){var t=e.handleClose,r=e.user,n=e.onSuccess,i=(0,J.useAdminUpdateUser)(r.id),a=i.mutate,o=i.isLoading,l=(0,eR.mN)(),s=l.register,c=l.handleSubmit,u=l.reset,d=l.formState.errors,f=(0,eC.A)(),p=(0,ei.Bd)().t;return(0,U.useEffect)(function(){u({first_name:r.first_name,last_name:r.last_name})},[r]),(0,z.jsx)(eN.A,{handleClose:t,children:(0,z.jsx)("form",{onSubmit:c(function(e){a(e,{onSuccess:function(){f(p("edit-user-modal-success","Success"),p("edit-user-modal-user-was-updated","User was updated"),"success"),n()},onError:function(e){f(p("edit-user-modal-error","Error"),(0,eA.u)(e),"error")},onSettled:function(){t()}})}),children:(0,z.jsxs)(eN.A.Body,{children:[(0,z.jsx)(eN.A.Header,{handleClose:t,children:(0,z.jsx)("span",{className:"inter-xlarge-semibold",children:p("edit-user-modal-edit-user","Edit User")})}),(0,z.jsxs)(eN.A.Content,{children:[(0,z.jsxs)("div",{className:"gap-large mb-base grid w-full grid-cols-2",children:[(0,z.jsx)(e1.A,_j(_x({label:p("edit-user-modal-first-name-label","First Name"),placeholder:p("edit-user-modal-first-name-placeholder","First name..."),required:!0},s("first_name",{required:n8.A.required("First name"),pattern:n8.A.whiteSpaceRule("First name"),minLength:n8.A.minOneCharRule("First name")})),{errors:d})),(0,z.jsx)(e1.A,_j(_x({label:p("edit-user-modal-last-name-label","Last Name"),placeholder:p("edit-user-modal-last-name-placeholder","Last name..."),required:!0},s("last_name",{required:n8.A.required("Last name"),pattern:n8.A.whiteSpaceRule("Last name"),minLength:n8.A.minOneCharRule("last name")})),{errors:d}))]}),(0,z.jsx)(e1.A,{label:p("edit-user-modal-email","Email"),disabled:!0,value:r.email})]}),(0,z.jsx)(eN.A.Footer,{children:(0,z.jsxs)("div",{className:"flex w-full justify-end",children:[(0,z.jsx)(W.A,{variant:"ghost",size:"small",onClick:t,className:"mr-2",children:p("edit-user-modal-cancel","Cancel")}),(0,z.jsx)(W.A,{loading:o,disabled:o,variant:"primary",size:"small",children:p("edit-user-modal-save","Save")})]})})]})})})};var _O=r(97075);function _S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function _P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||_A(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _C(e){return function(e){if(Array.isArray(e))return _S(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_A(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _A(e,t){if(e){if("string"==typeof e)return _S(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _S(e,t)}}var _N=function(e){return new Date(e.expires_at)<new Date?"expired":"pending"};let _k=function(e){var t=e.users,r=e.invites,n=e.triggerRefetch,i=_P((0,U.useState)([]),2),a=i[0],o=i[1],l=_P((0,U.useState)([]),2),s=l[0],c=l[1],u=_P((0,U.useState)(null),2),d=u[0],f=u[1],p=_P((0,U.useState)(!1),2),m=p[0],h=p[1],y=_P((0,U.useState)(null),2),b=y[0],v=y[1],g=(0,eC.A)(),x=(0,J.useAdminStore)(),j=x.store,w=x.isLoading,O=(0,ei.Bd)().t;(0,U.useEffect)(function(){o(_C(t.map(function(e,t){return{entity:e,entityType:"user",tableElement:P(e,t)}})).concat(_C(r.map(function(e,t){return{entity:e,entityType:"invite",tableElement:A(e,t)}}))))},[t,r]),(0,U.useEffect)(function(){c(a)},[a]);var S=function(){h(!1),f(null),v(null)},P=function(e,t){return(0,z.jsxs)(td.Row,{color:"inherit",actions:[{label:O("templates-edit-user","Edit User"),onClick:function(){return f(e)},icon:(0,z.jsx)(ec,{size:20})},{label:O("templates-remove-user","Remove User"),variant:"danger",onClick:function(){h(!0),f(e)},icon:(0,z.jsx)(eu,{size:20})}],children:[(0,z.jsx)(td.Cell,{children:(0,z.jsx)(_g,{user:e})}),(0,z.jsx)(td.Cell,{className:"w-80",children:e.email}),(0,z.jsxs)(td.Cell,{className:"inter-small-semibold text-violet-60",children:[e.role.charAt(0).toUpperCase(),e.role.slice(1)]}),(0,z.jsx)(td.Cell,{})]},"user-".concat(t))},C=(0,U.useMemo)(function(){if(null==j?void 0:j.invite_link_template)return j.invite_link_template;var e=(0,_O._)();return"".concat(e,"invite?token={invite_token}")},[j]),A=function(e,t){return(0,z.jsxs)(td.Row,{actions:[{label:O("templates-resend-invitation","Resend Invitation"),onClick:function(){tF.invites.resend(e.id).then(function(){g(O("templates-success","Success"),O("templates-invitiation-link-has-been-resent","Invitiation link has been resent"),"success")}).then(function(){return n()})},icon:(0,z.jsx)(Y.A,{size:20})},{label:O("templates-copy-invite-link","Copy invite link"),disabled:w,onClick:function(){ev()(C.replace("{invite_token}",e.token)),g(O("templates-success","Success"),O("templates-invite-link-copied-to-clipboard","Invite link copied to clipboard"),"success")},icon:(0,z.jsx)(ew,{size:20})},{label:O("templates-remove-invitation","Remove Invitation"),variant:"danger",onClick:function(){v(e)},icon:(0,z.jsx)(eu,{size:20})}],children:[(0,z.jsx)(td.Cell,{className:"text-grey-40",children:(0,z.jsx)(_g,{user:{email:e.user_email}})}),(0,z.jsx)(td.Cell,{className:"text-grey-40 w-80",children:e.user_email}),(0,z.jsx)(td.Cell,{}),(0,z.jsx)(td.Cell,{children:new Date(null==e?void 0:e.expires_at)<new Date?(0,z.jsx)(tv.A,{title:O("templates-expired","Expired"),variant:"danger"}):(0,z.jsx)(tv.A,{title:O("templates-pending","Pending"),variant:"success"})})]},"invite-".concat(t))},N=[{title:"Team permissions",options:[{title:O("templates-all","All"),count:a.length,onClick:function(){return c(a)}},{title:O("templates-member","Member"),count:a.filter(function(e){return"user"===e.entityType&&"member"===e.entity.role}).length,onClick:function(){return c(a.filter(function(e){return"user"===e.entityType&&"member"===e.entity.role}))}},{title:O("templates-admin","Admin"),count:a.filter(function(e){return"user"===e.entityType&&"admin"===e.entity.role}).length,onClick:function(){return c(a.filter(function(e){return"user"===e.entityType&&"admin"===e.entity.role}))}},{title:O("templates-no-team-permissions","No team permissions"),count:a.filter(function(e){return"invite"===e.entityType}).length,onClick:function(){return c(a.filter(function(e){return"invite"===e.entityType}))}}]},{title:O("templates-status","Status"),options:[{title:O("templates-all","All"),count:a.length,onClick:function(){return c(a)}},{title:O("templates-active","Active"),count:a.filter(function(e){return"user"===e.entityType}).length,onClick:function(){return c(a.filter(function(e){return"user"===e.entityType}))}},{title:O("templates-pending","Pending"),count:a.filter(function(e){return"invite"===e.entityType&&"pending"===_N(e.entity)}).length,onClick:function(){return c(a.filter(function(e){return"invite"===e.entityType&&"pending"===_N(e.entity)}))}},{title:O("templates-expired","Expired"),count:a.filter(function(e){return"invite"===e.entityType&&"expired"===_N(e.entity)}).length,onClick:function(){return c(a.filter(function(e){return"invite"===e.entityType&&"expired"===_N(e.entity)}))}}]}];return(0,z.jsxs)("div",{className:"h-full w-full overflow-y-auto",children:[(0,z.jsxs)(td,{filteringOptions:N,enableSearch:!0,handleSearch:function(e){c(a.filter(function(t){var r,n,i,a,o,l,s,c;return(null===(n=t.entity)||void 0===n?void 0:null===(r=n.first_name)||void 0===r?void 0:r.includes(e))||(null===(a=t.entity)||void 0===a?void 0:null===(i=a.last_name)||void 0===i?void 0:i.includes(e))||(null===(l=t.entity)||void 0===l?void 0:null===(o=l.email)||void 0===o?void 0:o.includes(e))||(null===(c=t.entity)||void 0===c?void 0:null===(s=c.user_email)||void 0===s?void 0:s.includes(e))}))},children:[(0,z.jsx)(td.Head,{children:(0,z.jsxs)(td.HeadRow,{children:[(0,z.jsx)(td.HeadCell,{className:"w-72",children:O("templates-name","Name")}),(0,z.jsx)(td.HeadCell,{className:"w-80",children:O("templates-email","Email")}),(0,z.jsx)(td.HeadCell,{className:"w-72",children:O("templates-team-permissions","Team permissions")}),(0,z.jsx)(td.HeadCell,{children:"Status"})]})}),(0,z.jsx)(td.Body,{children:s.map(function(e){return e.tableElement})})]}),d&&(m?(0,z.jsx)(e_,{text:O("templates-confirm-remove","Are you sure you want to remove this user?"),heading:O("templates-remove-user-heading","Remove user"),onDelete:function(){return tF.users.delete(d.id).then(function(){g(O("templates-success","Success"),O("templates-user-has-been-removed","User has been removed"),"success"),n()})},handleClose:S}):(0,z.jsx)(_w,{handleClose:S,user:d,onSuccess:function(){return n()}})),b&&(0,z.jsx)(e_,{text:O("templates-confirm-remove-invite","Are you sure you want to remove this invite?"),heading:O("templates-remove-invite","Remove invite"),onDelete:function(){return tF.invites.delete(b.id).then(function(){g(O("templates-success","Success"),O("templates-invitiation-has-been-removed","Invitiation has been removed"),"success"),n()})},handleClose:S})]})};function __(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function _E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return __(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return __(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}let _I=function(){var e=(0,ei.Bd)().t,t=_E((0,U.useState)([]),2),r=t[0],n=t[1],i=_E((0,U.useState)([]),2),a=i[0],o=i[1],l=_E((0,U.useState)(0),2),s=l[0],c=l[1],u=_E((0,U.useState)(!1),2),d=u[0],f=u[1],p=function(){c(function(e){return e+1})};(0,U.useEffect)(function(){tF.users.list().then(function(e){return e.data}).then(function(e){tF.invites.list().then(function(e){return e.data}).then(function(t){n(e.users),o(t.invites)})})},[s]);var m=[{label:e("users-invite-users","Invite Users"),onClick:function(){return f(!0)},icon:(0,z.jsx)("span",{className:"text-grey-90",children:(0,z.jsx)(n_.A,{size:20})})}];return(0,z.jsx)("div",{className:"flex h-full flex-col",children:(0,z.jsxs)("div",{className:"flex w-full grow flex-col",children:[(0,z.jsx)(eo,{path:"/a/settings",label:e("users-back-to-settings","Back to settings"),className:"mb-xsmall"}),(0,z.jsxs)(eD,{title:e("users-the-team","The Team"),subtitle:e("users-manage-users-of-your-medusa-store","Manage users of your Medusa Store"),actionables:m,children:[(0,z.jsxs)("div",{className:"flex grow flex-col justify-between",children:[(0,z.jsx)(_k,{users:r,invites:a,triggerRefetch:p}),(0,z.jsx)("p",{className:"inter-small-regular text-grey-50",children:e("users-count","{{count}}",{count:r.length})})]}),d&&(0,z.jsx)(_v,{handleClose:function(){p(),f(!1)}})]})]})})};var _D=[{heading:"API Key Management",description:"Create and manage API keys",icon:function(e){var t,r,n=e.size,i=void 0===n?"32px":n,a=e.color,o=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["size","color"]);return(0,z.jsx)("svg",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({width:i,height:i,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),r=r={children:(0,z.jsx)("path",{d:"M18.9095 10.761C19.5268 10.761 20.1188 11.0063 20.5553 11.4427C20.9918 11.8792 21.237 12.4713 21.237 13.0886M23.5646 13.0886C23.5647 13.7675 23.4162 14.4383 23.1297 15.0538C22.8432 15.6693 22.4255 16.2147 21.9059 16.6518C21.3863 17.0888 20.7773 17.4069 20.1218 17.5837C19.4663 17.7605 18.78 17.7918 18.1111 17.6754C17.6743 17.6001 17.2119 17.6955 16.8985 18.009L14.8363 20.0712H13.0906V21.8168H11.345V23.5625H8.43555V21.3762C8.43555 20.913 8.61942 20.4684 8.94683 20.1418L13.9891 15.0996C14.3025 14.7861 14.3979 14.3237 14.3227 13.8869C14.2127 13.2516 14.2358 12.6004 14.3907 11.9745C14.5455 11.3487 14.8287 10.7618 15.2222 10.2511C15.6158 9.74039 16.1112 9.31702 16.6769 9.0078C17.2427 8.69858 17.8665 8.51026 18.5088 8.45477C19.1512 8.39928 19.7981 8.47784 20.4085 8.68545C21.0189 8.89307 21.5795 9.22523 22.0548 9.66087C22.5301 10.0965 22.9097 10.6261 23.1696 11.2162C23.4295 11.8062 23.564 12.4438 23.5646 13.0886V13.0886Z",stroke:void 0===a?"currentColor":a,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},to:"/a/publishable-api-keys",feature_flag:"publishable_api_keys"},{heading:"Currencies",description:"Manage the currencies of your store",icon:ua,to:"/a/settings/currencies"},{heading:"Personal Information",description:"Manage your Medusa profile",icon:Ns.A,to:"/a/settings/personal-information"},{heading:"Regions",description:"Manage shipping, payment, and fulfillment across regions",icon:function(e){var t,r,n=e.size,i=void 0===n?"24":n,a=e.color,o=void 0===a?"currentColor":a,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["size","color"]);return(0,z.jsxs)("svg",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({width:i,height:i,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l),r=r={children:[(0,z.jsx)("path",{d:"M19 10.3636C19 16.0909 12 21 12 21C12 21 5 16.0909 5 10.3636C5 8.41068 5.7375 6.53771 7.05025 5.15676C8.36301 3.77581 10.1435 3 12 3C13.8565 3 15.637 3.77581 16.9497 5.15676C18.2625 6.53771 19 8.41068 19 10.3636Z",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M12 12C13.1046 12 14 11.1046 14 10C14 8.89543 13.1046 8 12 8C10.8954 8 10 8.89543 10 10C10 11.1046 10.8954 12 12 12Z",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},to:"/a/settings/regions"},{heading:"Return Reasons",description:"Manage reasons for returned items",icon:function(e){var t,r,n=e.size,i=void 0===n?"20":n,a=e.color,o=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["size","color"]);return(0,z.jsx)("svg",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({xmlns:"http://www.w3.org/2000/svg",width:i,height:i,viewBox:"0 0 20 20",fill:"none"},o),r=r={children:(0,z.jsx)("path",{stroke:void 0===a?"currentColor":a,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7.667 12.333 3.001 7.667m0 0 4.666-4.666M3.001 7.667h9.332a4.666 4.666 0 1 1 0 9.332H10"})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},to:"/a/settings/return-reasons"},{heading:"Sales Channels",description:"Control which product are available in which channels",icon:uM,feature_flag:"sales_channels",to:"/a/sales-channels"},{heading:"Store Details",description:"Manage your business details",icon:function(e){var t,r,n=e.size,i=void 0===n?"24":n,a=e.color,o=void 0===a?"currentColor":a,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["size","color"]);return(0,z.jsxs)("svg",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({width:i,height:i,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l),r=r={children:[(0,z.jsx)("path",{d:"M12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12C3 16.9706 7.02944 21 12 21Z",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M21 12H17",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M7 12H3",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M12 7V3",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,z.jsx)("path",{d:"M12 21V17",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},to:"/a/settings/details"},{heading:"Taxes",description:"Manage taxes across regions and products",icon:un,to:"/a/settings/taxes"},{heading:"The Team",description:"Manage users of your Medusa Store",icon:Nc.A,to:"/a/settings/team"}],_T=function(e){var t=e.heading,r=e.description,n=e.icon,i=e.to,a=e.feature_flag,o=n||Sg.A,l=(0,z.jsx)(Na,{heading:t,description:r,icon:(0,z.jsx)(o,{}),to:i});return a?(0,z.jsx)(uT,{featureFlag:a,children:l}):l},_M=function(){var e=(0,Nu.t)().getCards,t=e(),r=(0,ei.Bd)().t;return(0,z.jsxs)("div",{className:"gap-y-xlarge flex flex-col",children:[(0,z.jsxs)("div",{className:"gap-y-large flex flex-col",children:[(0,z.jsxs)("div",{className:"gap-y-2xsmall flex flex-col",children:[(0,z.jsx)("h2",{className:"inter-xlarge-semibold",children:"General"}),(0,z.jsx)("p",{className:"inter-base-regular text-grey-50",children:r("settings-manage-the-general-settings-for-your-store","Manage the general settings for your store")})]}),(0,z.jsx)("div",{className:"medium:grid-cols-2 gap-y-xsmall grid grid-cols-1 gap-x-4",children:_D.map(function(e){return _T(e)})})]}),t.length>0&&(0,z.jsxs)("div",{className:"gap-y-large flex flex-col",children:[(0,z.jsxs)("div",{className:"gap-y-2xsmall flex flex-col",children:[(0,z.jsx)("h2",{className:"inter-xlarge-semibold",children:"Extensions"}),(0,z.jsx)("p",{className:"inter-base-regular text-grey-50",children:r("settings-manage-the-settings-for-your-store-apos-s-extensions","Manage the settings for your store&apos;s extensions")})]}),(0,z.jsx)("div",{className:"medium:grid-cols-2 gap-y-xsmall grid grid-cols-1 gap-x-4",children:e().map(function(e){return _T({heading:e.label,description:e.description,icon:e.icon,to:"/a/settings".concat(e.path)})})})]}),(0,z.jsx)(el,{})]})};let _R=function(){var e=(0,Nu.t)().getSettings;return(0,z.jsxs)(H.Routes,{children:[(0,z.jsx)(H.Route,{index:!0,element:(0,z.jsx)(_M,{})}),(0,z.jsx)(H.Route,{path:"/details",element:(0,z.jsx)(Nz,{})}),(0,z.jsx)(H.Route,{path:"/regions/*",element:(0,z.jsx)(kw,{})}),(0,z.jsx)(H.Route,{path:"/currencies",element:(0,z.jsx)(NT,{})}),(0,z.jsx)(H.Route,{path:"/return-reasons",element:(0,z.jsx)(kT,{})}),(0,z.jsx)(H.Route,{path:"/team",element:(0,z.jsx)(_I,{})}),(0,z.jsx)(H.Route,{path:"/personal-information",element:(0,z.jsx)(NZ,{})}),(0,z.jsx)(H.Route,{path:"/taxes/*",element:(0,z.jsx)(_b,{})}),e().map(function(e){return(0,z.jsx)(H.Route,{path:e.path,element:(0,z.jsx)(No,{Page:e.Page}),errorElement:(0,z.jsx)(Nl,{origin:e.origin})},e.path)})]})};var _L=function(){var e=(0,(0,V.Y)().getTopLevelRoutes)()||[];return(0,z.jsx)(F.Q,{backend:B.t2,children:(0,z.jsxs)(er.A,{children:[(0,z.jsx)(et.A,{title:"Medusa"}),(0,z.jsxs)(H.Routes,{children:[(0,z.jsx)(H.Route,{path:"oauth/:app_name",element:(0,z.jsx)(mS,{})}),(0,z.jsx)(H.Route,{path:"products/*",element:(0,z.jsx)(CY,{})}),(0,z.jsx)(H.Route,{path:"product-categories/*",element:(0,z.jsx)(OP,{})}),(0,z.jsx)(H.Route,{path:"collections/*",element:(0,z.jsx)(t5,{})}),(0,z.jsx)(H.Route,{path:"gift-cards/*",element:(0,z.jsx)(fP,{})}),(0,z.jsx)(H.Route,{path:"orders/*",element:(0,z.jsx)(ga,{})}),(0,z.jsx)(H.Route,{path:"draft-orders/*",element:(0,z.jsx)(xl,{})}),(0,z.jsx)(H.Route,{path:"discounts/*",element:(0,z.jsx)(c3,{})}),(0,z.jsx)(H.Route,{path:"customers/*",element:(0,z.jsx)(iN,{})}),(0,z.jsx)(H.Route,{path:"pricing/*",element:(0,z.jsx)(w0,{})}),(0,z.jsx)(H.Route,{path:"settings/*",element:(0,z.jsx)(_R,{})}),(0,z.jsx)(H.Route,{path:"sales-channels/*",element:(0,z.jsx)(Ni,{})}),(0,z.jsx)(H.Route,{path:"publishable-api-keys/*",element:(0,z.jsx)(Ab,{})}),(0,z.jsx)(H.Route,{path:"inventory/*",element:(0,z.jsx)(mO,{})}),e.map(function(e,t){return(0,z.jsx)(H.Route,{path:"/".concat(e.path,"/*"),errorElement:(0,z.jsx)(Q,{origin:(0,G.Cn)(e)?e.origin:""}),element:(0,z.jsx)(Z,{route:e})},t)})]})]})})};let _z=function(){var e=(0,H.useNavigate)();return(0,q.vC)("g + o",function(){return e("/a/orders")}),(0,q.vC)("g + p",function(){return e("/a/products")}),(0,z.jsx)(ee,{children:(0,z.jsx)(_L,{})})}}}]);